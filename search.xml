<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ELK Stack 常用架构及使用场景]]></title>
    <url>%2FELK-Stack%E5%B8%B8%E7%94%A8%E6%9E%B6%E6%9E%84%E5%8F%8A%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF.html</url>
    <content type="text"><![CDATA[ELK Stack &#x662F;&#x8F6F;&#x4EF6;&#x96C6;&#x5408; Elasticsearch&#x3001; Logstash&#x3001; Kibana &#x7684;&#x7B80;&#x79F0;&#xFF0C;&#x7531;&#x8FD9;&#x4E09;&#x4E2A;&#x8F6F;&#x4EF6;&#x53CA;&#x5176;&#x76F8;&#x5173;&#x7684;&#x7EC4;&#x4EF6;&#x53EF;&#x4EE5;&#x6253;&#x9020;&#x5927;&#x89C4;&#x6A21;&#x65E5;&#x5FD7;&#x5B9E;&#x65F6;&#x5904;&#x7406;&#x7CFB;&#x7EDF;&#x3002; &#x80CC;&#x666F; Elasticsearch&#xFF1A;&#x5206;&#x5E03;&#x5F0F;&#x641C;&#x7D22;&#x548C;&#x5206;&#x6790;&#x5F15;&#x64CE;&#xFF0C;&#x5177;&#x6709;&#x9AD8;&#x53EF;&#x4F38;&#x7F29;&#x3001;&#x9AD8;&#x53EF;&#x9760;&#x548C;&#x6613;&#x7BA1;&#x7406;&#x7B49;&#x7279;&#x70B9;&#x3002;&#x57FA;&#x4E8E; Apache Lucene &#x6784;&#x5EFA;&#xFF0C;&#x80FD;&#x5BF9;&#x5927;&#x5BB9;&#x91CF;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x63A5;&#x8FD1;&#x5B9E;&#x65F6;&#x7684;&#x5B58;&#x50A8;&#x3001;&#x641C;&#x7D22;&#x548C;&#x5206;&#x6790;&#x64CD;&#x4F5C;&#x3002;&#x901A;&#x5E38;&#x88AB;&#x7528;&#x4F5C;&#x67D0;&#x4E9B;&#x5E94;&#x7528;&#x7684;&#x57FA;&#x7840;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#xFF0C;&#x4F7F;&#x5176;&#x5177;&#x6709;&#x590D;&#x6742;&#x7684;&#x641C;&#x7D22;&#x529F;&#x80FD;&#x3002; Logstash&#xFF1A;&#x6570;&#x636E;&#x6536;&#x96C6;&#x5F15;&#x64CE;&#x3002;&#x5B83;&#x652F;&#x6301;&#x52A8;&#x6001;&#x7684;&#x4ECE;&#x5404;&#x79CD;&#x6570;&#x636E;&#x6E90;&#x641C;&#x96C6;&#x6570;&#x636E;&#xFF0C;&#x5E76;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x8FC7;&#x6EE4;&#x3001;&#x5206;&#x6790;&#x3001;&#x4E30;&#x5BCC;&#x3001;&#x7EDF;&#x4E00;&#x683C;&#x5F0F;&#x7B49;&#x64CD;&#x4F5C;&#xFF0C;&#x7136;&#x540E;&#x5B58;&#x50A8;&#x5230;&#x7528;&#x6237;&#x6307;&#x5B9A;&#x7684;&#x4F4D;&#x7F6E;&#x3002; Kibana&#xFF1A;&#x6570;&#x636E;&#x5206;&#x6790;&#x548C;&#x53EF;&#x89C6;&#x5316;&#x5E73;&#x53F0;&#x3002;&#x901A;&#x5E38;&#x4E0E; Elasticsearch &#x914D;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x5BF9;&#x5176;&#x4E2D;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x641C;&#x7D22;&#x3001;&#x5206;&#x6790;&#x548C;&#x4EE5;&#x7EDF;&#x8BA1;&#x56FE;&#x8868;&#x7684;&#x65B9;&#x5F0F;&#x5C55;&#x793A;&#x3002; Filebeat&#xFF1A;ELK &#x534F;&#x8BAE;&#x6808;&#x7684;&#x65B0;&#x6210;&#x5458;&#xFF0C;&#x4E00;&#x4E2A;&#x8F7B;&#x91CF;&#x7EA7;&#x5F00;&#x6E90;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x6570;&#x636E;&#x641C;&#x96C6;&#x5668;&#xFF0C;&#x57FA;&#x4E8E; Logstash-Forwarder &#x6E90;&#x4EE3;&#x7801;&#x5F00;&#x53D1;&#xFF0C;&#x662F;&#x5BF9;&#x5B83;&#x7684;&#x66FF;&#x4EE3;&#x3002;&#x5728;&#x9700;&#x8981;&#x91C7;&#x96C6;&#x65E5;&#x5FD7;&#x6570;&#x636E;&#x7684; server &#x4E0A;&#x5B89;&#x88C5; Filebeat&#xFF0C;&#x5E76;&#x6307;&#x5B9A;&#x65E5;&#x5FD7;&#x76EE;&#x5F55;&#x6216;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x540E;&#xFF0C;Filebeat &#x5C31;&#x80FD;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x8FC5;&#x901F;&#x53D1;&#x9001;&#x5230; Logstash &#x8FDB;&#x884C;&#x89E3;&#x6790;&#xFF0C;&#x4EA6;&#x6216;&#x76F4;&#x63A5;&#x53D1;&#x9001;&#x5230; Elasticsearch &#x8FDB;&#x884C;&#x96C6;&#x4E2D;&#x5F0F;&#x5B58;&#x50A8;&#x548C;&#x5206;&#x6790;&#x3002; &#x57FA;&#x7840;&#x67B6;&#x6784;&#x5728;&#x8FD9;&#x79CD;&#x67B6;&#x6784;&#x4E2D;&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x4E2A; Logstash&#x3001;Elasticsearch &#x548C; Kibana &#x5B9E;&#x4F8B;&#x3002;Logstash &#x901A;&#x8FC7;&#x8F93;&#x5165;&#x63D2;&#x4EF6;&#x4ECE;&#x591A;&#x79CD;&#x6570;&#x636E;&#x6E90;&#xFF08;&#x6BD4;&#x5982;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x3001;&#x6807;&#x51C6;&#x8F93;&#x5165; Stdin &#x7B49;&#xFF09;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x518D;&#x7ECF;&#x8FC7;&#x6EE4;&#x63D2;&#x4EF6;&#x52A0;&#x5DE5;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x7ECF; Elasticsearch &#x8F93;&#x51FA;&#x63D2;&#x4EF6;&#x8F93;&#x51FA;&#x5230; Elasticsearch&#xFF0C;&#x901A;&#x8FC7; Kibana &#x5C55;&#x793A;&#x3002;&#x8BE6;&#x89C1;&#x4E0B;&#x56FE;: Logstash&#x4F5C;&#x4E3A;&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x5668;&#x8FD9;&#x79CD;&#x67B6;&#x6784;&#x662F;&#x5BF9;&#x4E0A;&#x9762;&#x67B6;&#x6784;&#x7684;&#x6269;&#x5C55;&#xFF0C;&#x628A;&#x4E00;&#x4E2A; Logstash &#x6570;&#x636E;&#x641C;&#x96C6;&#x8282;&#x70B9;&#x6269;&#x5C55;&#x5230;&#x591A;&#x4E2A;&#xFF0C;&#x5206;&#x5E03;&#x4E8E;&#x591A;&#x53F0;&#x673A;&#x5668;&#xFF0C;&#x5C06;&#x89E3;&#x6790;&#x597D;&#x7684;&#x6570;&#x636E;&#x53D1;&#x9001;&#x5230; Elasticsearch server &#x8FDB;&#x884C;&#x5B58;&#x50A8;&#xFF0C;&#x6700;&#x540E;&#x5728; Kibana &#x67E5;&#x8BE2;&#x3001;&#x751F;&#x6210;&#x65E5;&#x5FD7;&#x62A5;&#x8868;&#x7B49;&#x8BE6;&#x89C1;&#x4E0B;&#x56FE;:&#x8FD9;&#x79CD;&#x7ED3;&#x6784;&#x56E0;&#x4E3A;&#x9700;&#x8981;&#x5728;&#x5404;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x90E8;&#x7F72; Logstash&#xFF0C;&#x800C;&#x5B83;&#x6BD4;&#x8F83;&#x6D88;&#x8017; CPU &#x548C;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#xFF0C;&#x6240;&#x4EE5;&#x6BD4;&#x8F83;&#x9002;&#x5408;&#x8BA1;&#x7B97;&#x8D44;&#x6E90;&#x4E30;&#x5BCC;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5426;&#x5219;&#x5BB9;&#x6613;&#x9020;&#x6210;&#x670D;&#x52A1;&#x5668;&#x6027;&#x80FD;&#x4E0B;&#x964D;&#xFF0C;&#x751A;&#x81F3;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x65E0;&#x6CD5;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x3002; Beats&#x4F5C;&#x4E3A;&#x65E5;&#x5FD7;&#x641C;&#x96C6;&#x5668;&#x8FD9;&#x79CD;&#x67B6;&#x6784;&#x5F15;&#x5165; Beats &#x4F5C;&#x4E3A;&#x65E5;&#x5FD7;&#x641C;&#x96C6;&#x5668;&#x3002;&#x76EE;&#x524D; Beats &#x5305;&#x62EC;&#x56DB;&#x79CD;&#xFF1A; Packetbeat&#xFF08;&#x641C;&#x96C6;&#x7F51;&#x7EDC;&#x6D41;&#x91CF;&#x6570;&#x636E;&#xFF09; Topbeat&#xFF08;&#x641C;&#x96C6;&#x7CFB;&#x7EDF;&#x3001;&#x8FDB;&#x7A0B;&#x548C;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7EA7;&#x522B;&#x7684; CPU &#x548C;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#x7B49;&#x6570;&#x636E;&#xFF09; Filebeat&#xFF08;&#x641C;&#x96C6;&#x6587;&#x4EF6;&#x6570;&#x636E;&#xFF09; Winlogbeat&#xFF08;&#x641C;&#x96C6; Windows &#x4E8B;&#x4EF6;&#x65E5;&#x5FD7;&#x6570;&#x636E;&#xFF09; Beats &#x5C06;&#x641C;&#x96C6;&#x5230;&#x7684;&#x6570;&#x636E;&#x53D1;&#x9001;&#x5230; Logstash&#xFF0C;&#x7ECF; Logstash &#x89E3;&#x6790;&#x3001;&#x8FC7;&#x6EE4;&#x540E;&#xFF0C;&#x5C06;&#x5176;&#x53D1;&#x9001;&#x5230; Elasticsearch &#x5B58;&#x50A8;&#xFF0C;&#x5E76;&#x7531; Kibana &#x5448;&#x73B0;&#x7ED9;&#x7528;&#x6237;&#x3002;&#x8BE6;&#x89C1;&#x4E0B;&#x56FE;: &#x8FD9;&#x79CD;&#x67B6;&#x6784;&#x89E3;&#x51B3;&#x4E86; Logstash &#x5728;&#x5404;&#x670D;&#x52A1;&#x5668;&#x8282;&#x70B9;&#x4E0A;&#x5360;&#x7528;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x9AD8;&#x7684;&#x95EE;&#x9898;&#x3002;&#x76F8;&#x6BD4; Logstash&#xFF0C;Beats &#x6240;&#x5360;&#x7CFB;&#x7EDF;&#x7684; CPU &#x548C;&#x5185;&#x5B58;&#x51E0;&#x4E4E;&#x53EF;&#x4EE5;&#x5FFD;&#x7565;&#x4E0D;&#x8BA1;&#x3002;&#x53E6;&#x5916;&#xFF0C;Beats &#x548C; Logstash &#x4E4B;&#x95F4;&#x652F;&#x6301; SSL/TLS &#x52A0;&#x5BC6;&#x4F20;&#x8F93;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x5668;&#x53CC;&#x5411;&#x8BA4;&#x8BC1;&#xFF0C;&#x4FDD;&#x8BC1;&#x4E86;&#x901A;&#x4FE1;&#x5B89;&#x5168;&#x3002;&#x56E0;&#x6B64;&#x8FD9;&#x79CD;&#x67B6;&#x6784;&#x9002;&#x5408;&#x5BF9;&#x6570;&#x636E;&#x5B89;&#x5168;&#x6027;&#x8981;&#x6C42;&#x8F83;&#x9AD8;&#xFF0C;&#x540C;&#x65F6;&#x5404;&#x670D;&#x52A1;&#x5668;&#x6027;&#x80FD;&#x6BD4;&#x8F83;&#x654F;&#x611F;&#x7684;&#x573A;&#x666F;&#x3002; &#x5F15;&#x5165;&#x6D88;&#x606F;&#x961F;&#x5217;&#x7684;&#x67B6;&#x6784;&#x8FD9;&#x79CD;&#x67B6;&#x6784;&#x5F15;&#x5165;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF0C;&#x5747;&#x8861;&#x4E86;&#x7F51;&#x7EDC;&#x4F20;&#x8F93;&#xFF0C;&#x4ECE;&#x800C;&#x964D;&#x4F4E;&#x4E86;&#x7F51;&#x7EDC;&#x95ED;&#x585E;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x4E22;&#x5931;&#x6570;&#x636E;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x3002;&#x4E0A;&#x56FE;&#x662F; ELK Stack &#x5B9E;&#x9645;&#x5E94;&#x7528;&#x4E2D;&#x5178;&#x578B;&#x7684;&#x4E00;&#x79CD;&#x67B6;&#x6784;&#xFF0C;&#x5176;&#x4E2D; filebeat &#x90E8;&#x7F72;&#x5728;&#x5177;&#x4F53;&#x7684;&#x4E1A;&#x52A1;&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x901A;&#x8FC7;&#x5B9A;&#x65F6;&#x76D1;&#x63A7;&#x7684;&#x65B9;&#x5F0F;&#x83B7;&#x53D6;&#x589E;&#x91CF;&#x7684;&#x65E5;&#x5FD7;&#xFF0C;&#x5E76;&#x8F6C;&#x53D1;&#x5230; Kafka &#x6D88;&#x606F;&#x7CFB;&#x7EDF;&#x6682;&#x5B58;&#x3002; Kafka &#x4EE5;&#x9AD8;&#x541E;&#x5410;&#x91CF;&#x7684;&#x7279;&#x5F81;&#xFF0C;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x7CFB;&#x7EDF;&#x7684;&#x89D2;&#x8272;&#xFF0C;&#x63A5;&#x6536;&#x4ECE; filebeat &#x6536;&#x96C6;&#x8F6C;&#x53D1;&#x8FC7;&#x6765;&#x7684;&#x65E5;&#x5FD7;&#xFF0C;&#x901A;&#x5E38;&#x4EE5;&#x96C6;&#x7FA4;&#x7684;&#x5F62;&#x5F0F;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x3002; &#x7136;&#x540E;&#xFF0C;Logstash &#x4ECE; Kafka &#x4E2D;&#x83B7;&#x53D6;&#x65E5;&#x5FD7;&#xFF0C;&#x5E76;&#x901A;&#x8FC7; Input-Filter-Output &#x4E09;&#x4E2A;&#x9636;&#x6BB5;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x66F4;&#x6539;&#x6216;&#x8FC7;&#x6EE4;&#x65E5;&#x5FD7;&#xFF0C;&#x6700;&#x7EC8;&#x8F93;&#x51FA;&#x6211;&#x4EEC;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x6570;&#x636E;&#x3002;&#x901A;&#x5E38;&#xFF0C;&#x6839;&#x636E; Kafka &#x96C6;&#x7FA4;&#x4E0A;&#x5206;&#x533A;(Partition)&#x7684;&#x6570;&#x91CF;&#xFF0C;1:1 &#x786E;&#x5B9A; Logstash &#x5B9E;&#x4F8B;&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x7EC4;&#x6210; Consumer Group &#x8FDB;&#x884C;&#x65E5;&#x5FD7;&#x6D88;&#x8D39;&#x3002; &#x6700;&#x540E;&#xFF0C;Elasticsearch &#x5B58;&#x50A8;&#x5E76;&#x7D22;&#x5F15; Logstash &#x8F6C;&#x53D1;&#x8FC7;&#x6765;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5E76;&#x901A;&#x8FC7; Kibana &#x67E5;&#x8BE2;&#x548C;&#x53EF;&#x89C6;&#x5316;&#x5C55;&#x793A;&#xFF0C;&#x8FBE;&#x5230;&#x5B9E;&#x65F6;&#x5206;&#x6790;&#x65E5;&#x5FD7;&#x7684;&#x76EE;&#x7684;&#x3002; Elasticsearch/Kibana &#x8FD8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5B89;&#x88C5; x-pack &#x63D2;&#x4EF6;&#x5B9E;&#x73B0;&#x6269;&#x5C55;&#x529F;&#x80FD;&#xFF0C;&#x6BD4;&#x5982;&#x76D1;&#x63A7; Elasticsearch &#x96C6;&#x7FA4;&#x72B6;&#x6001;&#x3001;&#x6570;&#x636E;&#x8BBF;&#x95EE;&#x6388;&#x6743;&#x7B49;&#x3002; &#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x8FD8;&#x8BF7;&#x53C2;&#x8003;&#x6211;&#x7684;&#x4E0B;&#x7BC7;&#x6587;&#x7AE0; ELK Stack 5.x &#x90E8;&#x7F72;&#x5B9E;&#x73B0;]]></content>
      <categories>
        <category>运维</category>
      </categories>
      <tags>
        <tag>ELK</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[supervisor进程管理工具]]></title>
    <url>%2Fsupervisor%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7.html</url>
    <content type="text"><![CDATA[supervisor&#x662F;&#x7528;python&#x5199;&#x7684;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x7528;&#x6765;&#x542F;&#x52A8;&#xFF0C;&#x91CD;&#x542F;&#xFF0C;&#x5173;&#x95ED;&#x8FDB;&#x7A0B;&#x3002; &#x4EA7;&#x751F;&#x80CC;&#x666F;&#x5728;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x6BCF;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x542F;&#x52A8;&#x548C;&#x505C;&#x6B62;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#xFF0C;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x884C;&#x65B9;&#x5F0F;&#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x624B;&#x52A8;&#x542F;&#x52A8;&#x548C;&#x505C;&#x6B62;&#x975E;&#x5E38;&#x9EBB;&#x70E6;&#xFF0C;&#x800C;&#x4E14;&#x67E5;&#x770B;&#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x7684;&#x72B6;&#x6001;&#x4E5F;&#x5F88;&#x4E0D;&#x65B9;&#x4FBF;&#x3002;&#x5982;&#x679C;&#x6709;&#x4E00;&#x4E2A;&#x5DE5;&#x5177;&#x80FD;&#x591F;&#x5B9E;&#x73B0;&#x6BCF;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x7684;&#x7B80;&#x5355;&#x9AD8;&#x6548;&#x4E2D;&#x5FC3;&#x5316;&#x7BA1;&#x7406;&#x5C06;&#x662F;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x7684;&#x3002;&#x4E8E;&#x662F;Supervisord&#x5DE5;&#x5177;&#x5E94;&#x8FD0;&#x800C;&#x751F;&#x3002;&#x4E0E;Supervisord&#x7C7B;&#x4F3C;&#x7684;&#x5DE5;&#x5177;&#x5305;&#x62EC;monit, daemontools&#x548C;runit&#x3002; &#x5B89;&#x88C5;Supervisord&#x662F;&#x8FD0;&#x884C;&#x5728;Python&#x73AF;&#x5883;&#x4E0B;&#x7684;&#x670D;&#x52A1;&#x76D1;&#x63A7;&#x7A0B;&#x5E8F;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x5B89;&#x88C5;supervisord&#x4E4B;&#x524D;&#x5FC5;&#x987B;&#x6709;python&#x73AF;&#x5883;&#x3002;12yum install python-setuptoolseasy_install supervisor &#x5982;&#x679C;&#x5B89;&#x88C5;&#x6210;&#x529F;&#xFF0C;&#x952E;&#x5165;: echo_supervisord_conf&#xFF0C;&#x4F1A;&#x663E;&#x793A;&#x4E00;&#x4E2A;superviscord_conf &#x7684;&#x914D;&#x7F6E;&#x6A21;&#x677F;&#x3002;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x91CD;&#x5B9A;&#x5411;&#x8FD0;&#x7B97;&#x7B26;&#x5C06;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5B9A;&#x5411;&#x5230;/etc&#x8DEF;&#x5F84;&#x4E0B;&#xFF08;&#x65B9;&#x4FBF;&#x7BA1;&#x7406;&#xFF09;1echo_supervisord_conf&gt;/etc/supervisord.conf &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8BE6;&#x89E3;123456789101112131415161718192021222324252627282930313233[unix_http_server]file=/tmp/supervisor.sock ; UNIX socket &#x6587;&#x4EF6;&#xFF0C;supervisorctl &#x4F1A;&#x4F7F;&#x7528;;chmod=0700 ; socket &#x6587;&#x4EF6;&#x7684; mode&#xFF0C;&#x9ED8;&#x8BA4;&#x662F; 0700;chown=nobody:nogroup ; socket &#x6587;&#x4EF6;&#x7684; owner&#xFF0C;&#x683C;&#x5F0F;&#xFF1A; uid:gid;[inet_http_server] ; HTTP &#x670D;&#x52A1;&#x5668;&#xFF0C;&#x63D0;&#x4F9B; web &#x7BA1;&#x7406;&#x754C;&#x9762;;port=127.0.0.1:9001 ; Web &#x7BA1;&#x7406;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#x7684; IP &#x548C;&#x7AEF;&#x53E3;&#xFF0C;&#x5982;&#x679C;&#x5F00;&#x653E;&#x5230;&#x516C;&#x7F51;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x5B89;&#x5168;&#x6027;;username=user ; &#x767B;&#x5F55;&#x7BA1;&#x7406;&#x540E;&#x53F0;&#x7684;&#x7528;&#x6237;&#x540D;;password=123 ; &#x767B;&#x5F55;&#x7BA1;&#x7406;&#x540E;&#x53F0;&#x7684;&#x5BC6;&#x7801;[supervisord]logfile=/tmp/supervisord.log ; &#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F; $CWD/supervisord.loglogfile_maxbytes=50MB ; &#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#xFF0C;&#x8D85;&#x51FA;&#x4F1A; rotate&#xFF0C;&#x9ED8;&#x8BA4; 50MBlogfile_backups=10 ; &#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x4FDD;&#x7559;&#x5907;&#x4EFD;&#x6570;&#x91CF;&#x9ED8;&#x8BA4; 10loglevel=info ; &#x65E5;&#x5FD7;&#x7EA7;&#x522B;&#xFF0C;&#x9ED8;&#x8BA4; info&#xFF0C;&#x5176;&#x5B83;: debug,warn,tracepidfile=/tmp/supervisord.pid ; pid &#x6587;&#x4EF6;nodaemon=false ; &#x662F;&#x5426;&#x5728;&#x524D;&#x53F0;&#x542F;&#x52A8;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F; false&#xFF0C;&#x5373;&#x4EE5; daemon &#x7684;&#x65B9;&#x5F0F;&#x542F;&#x52A8;minfds=1024 ; &#x53EF;&#x4EE5;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x7684;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x9ED8;&#x8BA4; 1024minprocs=200 ; &#x53EF;&#x4EE5;&#x6253;&#x5F00;&#x7684;&#x8FDB;&#x7A0B;&#x6570;&#x7684;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x9ED8;&#x8BA4; 200; the below section must remain in the config file for RPC; (supervisorctl/web interface) to work, additional interfaces may be; added by defining them in separate rpcinterface: sections[rpcinterface:supervisor]supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface[supervisorctl]serverurl=unix:///tmp/supervisor.sock ; &#x901A;&#x8FC7; UNIX socket &#x8FDE;&#x63A5; supervisord&#xFF0C;&#x8DEF;&#x5F84;&#x4E0E; unix_http_server &#x90E8;&#x5206;&#x7684; file &#x4E00;&#x81F4;;serverurl=http://127.0.0.1:9001 ; &#x901A;&#x8FC7; HTTP &#x7684;&#x65B9;&#x5F0F;&#x8FDE;&#x63A5; supervisord; &#x5305;&#x542B;&#x5176;&#x4ED6;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;[include]files = relative/directory/*.ini ; &#x53EF;&#x4EE5;&#x662F; *.conf &#x6216; *.ini &#x8FDB;&#x7A0B;Program&#x914D;&#x7F6E;12345678910111213141516[program:usercenter]directory = /home/leon/projects/usercenter ; &#x7A0B;&#x5E8F;&#x7684;&#x542F;&#x52A8;&#x76EE;&#x5F55;command = gunicorn -c gunicorn.py wsgi:app ; &#x542F;&#x52A8;&#x547D;&#x4EE4;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x4E0E;&#x624B;&#x52A8;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x542F;&#x52A8;&#x7684;&#x547D;&#x4EE4;&#x662F;&#x4E00;&#x6837;&#x7684;autostart = true ; &#x5728; supervisord &#x542F;&#x52A8;&#x7684;&#x65F6;&#x5019;&#x4E5F;&#x81EA;&#x52A8;&#x542F;&#x52A8;startsecs = 5 ; &#x542F;&#x52A8; 5 &#x79D2;&#x540E;&#x6CA1;&#x6709;&#x5F02;&#x5E38;&#x9000;&#x51FA;&#xFF0C;&#x5C31;&#x5F53;&#x4F5C;&#x5DF2;&#x7ECF;&#x6B63;&#x5E38;&#x542F;&#x52A8;&#x4E86;autorestart = true ; &#x7A0B;&#x5E8F;&#x5F02;&#x5E38;&#x9000;&#x51FA;&#x540E;&#x81EA;&#x52A8;&#x91CD;&#x542F;startretries = 3 ; &#x542F;&#x52A8;&#x5931;&#x8D25;&#x81EA;&#x52A8;&#x91CD;&#x8BD5;&#x6B21;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F; 3user = leon ; &#x7528;&#x54EA;&#x4E2A;&#x7528;&#x6237;&#x542F;&#x52A8;redirect_stderr = true ; &#x628A; stderr &#x91CD;&#x5B9A;&#x5411;&#x5230; stdout&#xFF0C;&#x9ED8;&#x8BA4; falsestdout_logfile_maxbytes = 20MB ; stdout &#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#xFF0C;&#x9ED8;&#x8BA4; 50MBstdout_logfile_backups = 20 ; stdout &#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x5907;&#x4EFD;&#x6570;; stdout &#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x5F53;&#x6307;&#x5B9A;&#x76EE;&#x5F55;&#x4E0D;&#x5B58;&#x5728;&#x65F6;&#x65E0;&#x6CD5;&#x6B63;&#x5E38;&#x542F;&#x52A8;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x76EE;&#x5F55;&#xFF08;supervisord &#x4F1A;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#xFF09;stdout_logfile = /data/logs/usercenter_stdout.log; &#x53EF;&#x4EE5;&#x901A;&#x8FC7; environment &#x6765;&#x6DFB;&#x52A0;&#x9700;&#x8981;&#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x4E00;&#x79CD;&#x5E38;&#x89C1;&#x7684;&#x7528;&#x6CD5;&#x662F;&#x4FEE;&#x6539; PYTHONPATH; environment=PYTHONPATH=$PYTHONPATH:/path/to/somewhere &#x5C06;&#x8FDB;&#x7A0B;&#x914D;&#x7F6E;&#x6DFB;&#x52A0;&#x5230;supervisord.conf&#x6587;&#x4EF6;&#x4E2D;&#x63A8;&#x8350;&#x5C06;&#x5404;&#x4E2A;&#x8FDB;&#x7A0B;&#x914D;&#x7F6E;&#x653E;&#x5230;&#x5355;&#x72EC;&#x7684;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;[include]&#x914D;&#x7F6E;&#x9879;&#x5F15;&#x7528;12[include]files = /etc/supervisor/*.conf supervisor&#x670D;&#x52A1;&#x542F;&#x52A8;&#x8FD0;&#x884C;&#x547D;&#x4EE4;1supervisord -c /etc/supervisord.conf supervisor&#x670D;&#x52A1;&#x5BA2;&#x6237;&#x7AEF;&#x7BA1;&#x7406;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;supervisord&#x7684;&#x547D;&#x4EE4;&#x884C;&#x5BA2;&#x6237;&#x7AEF;&#x7BA1;&#x7406;&#x5DE5;&#x5177;supervisorctl&#xFF0C;&#x6765;&#x7BA1;&#x7406;&#x8FDB;&#x7A0B;&#x3002;123456supervisorctl statussupervisorctl stop usercentersupervisorctl start usercentersupervisorctl restart usercentersupervisorctl rereadsupervisorctl update supervisor web&#x7BA1;&#x7406;&#x754C;&#x9762;1234;[inet_http_server] ; HTTP &#x670D;&#x52A1;&#x5668;&#xFF0C;&#x63D0;&#x4F9B; web &#x7BA1;&#x7406;&#x754C;&#x9762;;port=127.0.0.1:9001 ; Web &#x7BA1;&#x7406;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#x7684; IP &#x548C;&#x7AEF;&#x53E3;&#xFF0C;&#x5982;&#x679C;&#x5F00;&#x653E;&#x5230;&#x516C;&#x7F51;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x5B89;&#x5168;&#x6027;;username=user ; &#x767B;&#x5F55;&#x7BA1;&#x7406;&#x540E;&#x53F0;&#x7684;&#x7528;&#x6237;&#x540D;;password=123 ; &#x767B;&#x5F55;&#x7BA1;&#x7406;&#x540E;&#x53F0;&#x7684;&#x5BC6;&#x7801; &#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x8F93;&#x5165;http://127.0.0.1:9001&#xFF0C;&#x5373;&#x53EF;&#x8FDB;&#x5165;web&#x7BA1;&#x7406;&#x754C;&#x9762;]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>supervisor</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[别的程序员是怎么读你的简历的（转）]]></title>
    <url>%2F%E5%88%AB%E7%9A%84%E7%A8%8B%E5%BA%8F%E5%91%98%E6%98%AF%E6%80%8E%E4%B9%88%E8%AF%BB%E4%BD%A0%E7%9A%84%E7%AE%80%E5%8E%86%E7%9A%84%EF%BC%88%E8%BD%AC%EF%BC%89.html</url>
    <content type="text"><![CDATA[&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x56FD;&#x5916;&#x7EDF;&#x8BA1;&#x7684;&#x4E00;&#x4E2A;&#x4EBA;&#x4E8B;&#x548C;&#x7A0B;&#x5E8F;&#x5458;&#x9762;&#x8BD5;&#x7684;&#x4FA7;&#x91CD;&#x70B9;&#xFF0C;&#x4E0D;&#x8FC7;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x5176;&#x4E2D;&#x5F88;&#x591A;&#x4E1C;&#x897F;&#x90FD;&#x662F;&#x548C;&#x56FD;&#x5185;&#x662F;&#x76F8;&#x540C;&#x7684;&#x3002; &#x4EBA;&#x4E8B;&#x90E8;&#x95E8;&#x662F;&#x8FD9;&#x6837;&#x9605;&#x8BFB;&#x7B80;&#x5386;&#x7684; &#xFF08;+15&#x5206;&#xFF09;&#x5982;&#x679C;&#x7B80;&#x5386;&#x4E2D;&#x8BF4;&#x5230;&#x4E86;&#x548C;&#x5DE5;&#x4F5C;&#x804C;&#x4F4D;&#x76F8;&#x7B26;&#x7684;&#x6280;&#x80FD;&#x8D85;&#x8FC7;5&#x6B21;&#x4EE5;&#x4E0A;&#x3002; &#xFF08;+8&#x5206;&#xFF09;&#x5982;&#x679C;&#x7B80;&#x5386;&#x4E2D;&#x8BF4;&#x5230;&#x4E86;&#x548C;&#x5DE5;&#x4F5C;&#x804C;&#x4F4D;&#x76F8;&#x7B26;&#x7684;&#x6280;&#x80FD;3&#x6B21;&#x5230;5&#x6B21;&#x3002; &#xFF08;+4&#x5206;&#xFF09;&#x5982;&#x679C;&#x7B80;&#x5386;&#x4E2D;&#x8BF4;&#x5230;&#x4E86;&#x548C;&#x5DE5;&#x4F5C;&#x804C;&#x4F4D;&#x76F8;&#x7B26;&#x7684;&#x6280;&#x80FD;1&#x6B21;&#x5230;2&#x6B21;&#x3002; &#xFF08;+4&#x5206;&#xFF09;Cover Letter&#xFF08;&#x201C;&#x6C42;&#x804C;&#x4FE1;&#x201D;&#x6216;&#x201C;&#x81EA;&#x8350;&#x4FE1;&#x201D;&#xFF09;&#x63D0;&#x5230;&#x4E86;&#x62DB;&#x8058;&#x4EBA;&#x5458;&#x3002; &#xFF08;+2&#x5206;&#xFF09;&#x7B80;&#x5386;&#x4E2D;&#x6709;Cover Letter&#xFF08;&#x6C42;&#x804C;&#x4FE1;&#xFF09;&#x3002; &#xFF08;-10&#x5206;&#xFF09;&#x6CA1;&#x6709;&#x63D0;&#x5230;&#x548C;&#x804C;&#x4F4D;&#x63CF;&#x8FF0;&#x76F8;&#x5173;&#x7684;&#x6280;&#x80FD;&#x3002; &#xFF08;-15&#x5206;&#xFF09;&#x6CA1;&#x6709;&#x53D7;&#x8FC7;&#x5927;&#x4E13;&#x6559;&#x80B2;&#x3002; &#x7A0B;&#x5E8F;&#x5458;&#x662F;&#x8FD9;&#x6837;&#x9605;&#x8BFB;&#x7B80;&#x5386;&#x7684; &#xFF08;+15&#x5206;&#xFF09;&#x66FE;&#x7ECF;&#x56E0;&#x4E3A;&#x597D;&#x73A9;&#x800C;&#x5199;&#x8FC7;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x6216;&#x7F16;&#x8BD1;&#x5668;&#x3002; &#xFF08;+12&#x5206;&#xFF09;&#x7B80;&#x5386;&#x88AB;LaTeX&#x7F16;&#x8BD1;&#x8FC7;&#x3002; &#xFF08;+11&#x5206;&#xFF09;&#x4E3A;&#x5F00;&#x6E90;&#x8F6F;&#x4EF6;&#x8D21;&#x732E;&#x8FC7;&#x4EE3;&#x7801;&#x3002; &#xFF08;+9&#x5206;&#xFF09;&#x4E0A;&#x5B66;&#x7684;&#x65F6;&#x5019;&#x66FE;&#x7ECF;&#x5199;&#x8FC7;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x6216;&#x7F16;&#x8BD1;&#x5668;&#x3002; &#xFF08;+8&#x5206;&#xFF09;&#x6709;&#x4E00;&#x4E2A;BLOG&#x5206;&#x4EAB;&#x6280;&#x672F;&#x77E5;&#x8BC6;&#x3002; &#xFF08;+8&#x5206;&#xFF09;&#x7F16;&#x7A0B;/&#x673A;&#x5668;&#x4EBA;/&#x5DE5;&#x7A0B;&#x4FF1;&#x4E50;&#x90E8;&#x4E3B;&#x5E2D;&#x3002; &#xFF08;+7&#x5206;&#xFF09;&#x7F16;&#x7A0B;/&#x673A;&#x5668;&#x4EBA;/&#x5DE5;&#x7A0B;&#x7ADE;&#x8D5B;&#x53C2;&#x4E0E;&#x8005;&#x3002; &#xFF08;+7&#x5206;&#xFF09;&#x5728;Google&#x548C;Microsoft&#x5B9E;&#x4E60;&#x8FC7;&#x3002; &#xFF08;+6&#x5206;&#xFF09;&#x4F7F;&#x7528;&#x52A8;&#x6001;&#x8BED;&#x8A00;&#xFF08;Python/Perl/Ruby&#xFF09;&#x5199;&#x8FC7;&#x975E;&#x8BD5;&#x9A8C;&#x6027;&#x7684;&#x7A0B;&#x5E8F;&#x3002; &#xFF08;+5&#x5206;&#xFF09;&#x77E5;&#x9053;3&#x79CD;&#x6216;&#x591A;&#x4E8E;3&#x79CD;&#x7684;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x3002; &#xFF08;+5&#x5206;&#xFF09;&#x4E4B;&#x524D;&#x7684;&#x5DE5;&#x4F5C;&#x548C;&#x76EE;&#x524D;&#x7684;&#x804C;&#x4F4D;&#x6709;&#x5F88;&#x76F8;&#x4F3C;&#x7684;&#x7ECF;&#x9A8C;&#x3002; &#xFF08;+4&#x5206;&#xFF09;&#x6709;&#x8FC7;&#x5B9E;&#x4E60;&#x7ECF;&#x9A8C;&#x3002; &#xFF08;+4&#x5206;&#xFF09;&#x81EA;&#x5DF1;&#x521B;&#x8FC7;&#x4E1A;&#x5F00;&#x8FC7;&#x516C;&#x53F8;&#x3002; &#xFF08;+4&#x5206;&#xFF09;&#x6709;&#x4E00;&#x4E2A;&#x901A;&#x8FC7;Rail, PHP&#x6216;ASP.NET&#x7684;&#x4E2A;&#x4EBA;&#x4E3B;&#x9875;&#x3002; &#xFF08;+3&#x5206;&#xFF09;&#x6709;&#x4E00;&#x4E2A;&#x81EA;&#x5DF1;&#x57DF;&#x540D;&#x7684;&#x90AE;&#x4EF6;&#x5730;&#x5740;&#x3002; &#xFF08;+3&#x5206;&#xFF09;&#x6539;&#x8FC7;&#x4E00;&#x4E9B;&#x7531;&#x52A8;&#x6001;&#x8BED;&#x8A00;&#xFF08;Python/Perl/Ruby&#xFF09;&#x5199;&#x7684;&#x7A0B;&#x5E8F;&#x3002; &#xFF08;+2&#x5206;&#xFF09;&#x6709;&#x4E00;&#x4E2A;&#x4E2A;&#x4EBA;&#x4E3B;&#x9875;&#x3002; &#xFF08;+1&#x5206;&#xFF09;&#x9AD8;&#x5B66;&#x5386;&#xFF0C;&#x5B66;&#x4E60;&#x6210;&#x7EE9;&#x4F18;&#x79C0;&#xFF0C;&#x7B49;&#x3002; &#xFF08;+0&#x5206;&#xFF09;&#x6709;&#x5956;&#x5B66;&#x91D1;&#x3002; &#xFF08;+0&#x5206;&#xFF09;&#x5728;&#x5FEB;&#x9910;&#x5E97;&#x5DE5;&#x4F5C;&#x8FC7;&#x3002; &#xFF08;-0.5&#x5206;&#xFF09;Fackbook&#x4E0A;&#x6709;&#x4E00;&#x5F20;&#x770B;&#x4E0A;&#x53BB;&#x559D;&#x9189;&#x4E86;&#x7684;&#x7167;&#x7247;&#x3002; &#xFF08;-1&#x5206;&#xFF09;&#x6709;&#x535A;&#x58EB;&#x5934;&#x8854;&#x3002; &#xFF08;-2&#x5206;&#xFF09;&#x6709;&#x4E00;&#x4E2A;&#x4E00;&#x822C;&#x7684;&#x6C42;&#x804C;&#x4FE1;&#x3002; &#xFF08;-2&#x5206;&#xFF09;&#x5728;&#x7B80;&#x5386;&#x4E2D;&#x8BF4;&#x81EA;&#x5DF1;&#x61C2;Word/Excel&#x3002; &#xFF08;-2&#x5206;&#xFF09;&#x5728;&#x7B80;&#x5386;&#x4E2D;&#x6709;&#x62FC;&#x5199;&#x548C;&#x8BED;&#x6CD5;&#x9519;&#x8BEF;&#x3002; &#xFF08;-3&#x5206;&#xFF09;&#x7B80;&#x5386;&#x7684;&#x5B57;&#x4F53;&#x592A;&#x5C0F;&#x3002; &#xFF08;-4&#x5206;&#xFF09;&#x6240;&#x6709;&#x7684;&#x7F16;&#x7A0B;&#x7ECF;&#x9A8C;&#x53EA;&#x662F;&#x5728;&#x5B66;&#x6821;&#x4E2D;&#x3002; &#xFF08;-4&#x5206;&#xFF09;&#x53EA;&#x77E5;&#x9053;&#x4E00;&#x95E8;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x3002; &#xFF08;-6&#x5206;&#xFF09;&#x7B80;&#x5386;&#x6709;&#x4E09;&#x9875;&#x4EE5;&#x4E0A;&#x3002; &#xFF08;-6&#x5206;&#xFF09;&#x7B80;&#x5386;&#x4E2D;&#x6709;&#x4E00;&#x4E9B;&#x65E0;&#x5173;&#x7684;&#x4E1C;&#x897F;&#x3002; &#xFF08;-7&#x5206;&#xFF09;&#x5F97;&#x5230;&#x8FC7;&#x4E00;&#x4E9B;&#x8BFE;&#x7A0B;&#x7684;&#x8BA4;&#x8BC1;&#x3002; &#xFF08;-8&#x5206;&#xFF09;&#x76F8;&#x5173;&#x4E13;&#x4E1A;&#x8BFE;&#x7A0B;&#x5F88;&#x4F4E;&#x7684;&#x6210;&#x7EE9;&#x3002; &#xFF08;-10&#x5206;&#xFF09;&#x5728;&#x6280;&#x80FD;&#x4E2D;&#xFF0C;&#x628A;Visual Basic&#x5217;&#x5728;&#x7B2C;&#x4E00;&#x7684;&#x4F4D;&#x7F6E;&#x3002; &#xFF08;-12&#x5206;&#xFF09;&#x5728;Facebook&#x4E2D;&#xFF0C;&#x6709;&#x8FC7;&#x5149;&#x8180;&#x5B50;&#x7684;&#x7167;&#x7247;&#x3002; &#xFF08;-15&#x5206;&#xFF09;&#x7B80;&#x5386;&#x4E2D;&#x7684;&#x7F29;&#x8FDB;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#x4E86;&#x7A7A;&#x683C;&#x548C;Tab&#x952E;&#x3002;]]></content>
      <categories>
        <category>面试</category>
      </categories>
      <tags>
        <tag>面试</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ansible部署脚本]]></title>
    <url>%2Fansible%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC.html</url>
    <content type="text"><![CDATA[&#x3000;&#x5728;&#x4E2D;&#x5C0F;&#x4F01;&#x4E1A;&#x5982;&#x679C;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;&#x7684;&#x81EA;&#x52A8;&#x5316;&#x90E8;&#x7F72;&#xFF0C;99%&#x4EE5;&#x4E0A;&#x516C;&#x53F8;&#x4E0D;&#x4F1A;&#x5F00;&#x53D1;&#x4EC0;&#x4E48;&#x81EA;&#x52A8;&#x5316;&#x90E8;&#x7F72;&#x56DE;&#x6EDA;&#x5E73;&#x53F0;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5C31;&#x9700;&#x8981;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x901A;&#x8FC7;shell+ansible+jenkins&#x6765;&#x81EA;&#x52A8;&#x5316;&#x90E8;&#x7F72;&#x6211;&#x4EEC;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E86;&#x3002; &#x56E0;&#x4E3A;&#x6D89;&#x53CA;&#x5230;&#x7EBF;&#x4E0A;&#x4E1A;&#x52A1;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x6F14;&#x793A;&#x90E8;&#x7F72;&#x4E00;&#x4E2A;war&#x5305;&#x7684;&#x5177;&#x4F53;&#x64CD;&#x4F5C;&#x548C;&#x811A;&#x672C;&#x3002; 123456789101112131415161718192021222324vim deploy.sh#!/bin/bash# &#x7528;&#x4E8E;jenkins&#x81EA;&#x52A8;&#x5316;&#x53D1;&#x5E03;source /etc/profilesource /etc/bashrcsource /etc/profile.d/*.shdatestamp=`date +%Y-%m-%d-%H:%M:%S`cd /mnt/resource/data/deploydeploy_tomcat(){ cp -r /var/lib/jenkins/workspace/test/target/*.war playbooks/config/tomcat_test/war/tomcat_test.war ansible-playbook -i hosts playbooks/tomcat_test.yml -e &quot;$(python var.py tomcat_test)&quot;}case &quot;$1&quot; in &quot;tomcat&quot;) deploy_tomcat; ;; *) echo &quot;error,please use nginx|tomcat|php&quot;; ;;esac 123456789101112vim var.pyimport sysimport json# &#x8FD9;&#x91CC;&#x5199;&#x7684;&#x4E00;&#x4E2A;&#x5C0F;&#x7684;python&#x811A;&#x672C;&#x7528;&#x4E8E;&#x7ED9;ansible&#x7528;&#x6237;&#x4F20;&#x53C2;with open(&apos;var.json&apos;) as data_file: var_json = json.load(data_file)#with open(&apos;share.json&apos;) as data_file:# share_json = json.load(data_file)sys.stdout.write(json.dumps(dict((var_json[sys.argv[1]].items())))) 1234567891011121314151617vim var.json{ &quot;tomcat_test&quot;: { &quot;app&quot;: &quot;tomcat_test&quot;, &quot;context_path&quot;: &quot;tomcat_test&quot;, &quot;http_port&quot; : &quot;8092&quot;, &quot;https_port&quot;: &quot;8099&quot;, &quot;admin_username&quot;: &quot;admin&quot;, &quot;admin_password&quot;: &quot;admin&quot;, &quot;templates&quot;: [ { &quot;source&quot;: &quot;tomcat_test/template/log4j.properties&quot;, &quot;target&quot;: &quot;tomcat_test/WEB-INF/classes/log4j.properties&quot; } ] }} &#x7531;&#x4E8E;&#x6587;&#x4EF6;&#x592A;&#x591A;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x5728;&#x7F51;&#x76D8;&#x91CC;&#x5171;&#x4EAB;&#x4E86;&#xFF0C;&#x8BE6;&#x7EC6;&#x64CD;&#x4F5C;&#x53EF;&#x4EE5;&#x548C;&#x6211;&#x6C9F;&#x901A;&#x3002;&#x94FE;&#x63A5;&#xFF1A;http://pan.baidu.com/s/1miSIC1U &#x5BC6;&#x7801;&#xFF1A;ynqv]]></content>
      <categories>
        <category>自动化</category>
      </categories>
      <tags>
        <tag>ansible</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[字符串及其操作02]]></title>
    <url>%2F%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8F%8A%E5%85%B6%E6%93%8D%E4%BD%9C02.html</url>
    <content type="text"><![CDATA[&#x5217;&#x8868;&#x3001;&#x5B57;&#x7B26;&#x4E32;&#x53CA;&#x5176;&#x4E00;&#x4E9B;&#x7B80;&#x5355;&#x64CD;&#x4F5C; &#x5217;&#x8868; &#x4E00;&#x79CD;&#x6570;&#x636E;&#x7ED3;&#x6784; &#x5217;&#x8868;&#x662F;&#x4E00;&#x4E2A;&#x5E8F;&#x5217;&#xFF0C;&#x7528;&#x4E8E;&#x987A;&#x5E8F;&#x7684;&#x5B58;&#x50A8;&#x6570;&#x636E; &#x5E8F;&#x5217;&#x662F;Python&#x4E2D;&#x6700;&#x57FA;&#x672C;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784; &#x5E8F;&#x5217;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x90FD;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#x2013;&#x5B83;&#x7684;&#x4F4D;&#x7F6E;&#x6216;&#x7D22;&#x5F15;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x662F;0&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x662F;1&#xFF0C;&#x4EE5;&#x6B64;&#x7C7B;&#x63A8; 12345678l = list() # &#x4F7F;&#x7528;list&#x51FD;&#x6570;&#x5B9A;&#x4E49;&#x7A7A;&#x5217;&#x8868;l = []# &#x4F7F;&#x7528;&#x4E2D;&#x62EC;&#x53F7;&#x5B9A;&#x4E49;&#x7A7A;&#x5217;&#x8868;l = [1, 2, 3]# &#x4F7F;&#x7528;&#x4E2D;&#x62EC;&#x53F7;&#x5B9A;&#x4E49;&#x5E26;&#x521D;&#x59CB;&#x503C;&#x7684;&#x5217;&#x8868;l = list(rang(1, 10))# &#x4F7F;&#x7528;list&#x51FD;&#x6570;&#x628A;&#x53EF;&#x8FED;&#x4EE3;&#x5BF9;&#x8C61;&#x8F6C;&#x5316;&#x4E3A;&#x5217;&#x8868; &#x589E;&#x5220;&#x6539;&#x67E5; &#x67E5;&#x8BE2;&#xFF08;&#x8BBF;&#x95EE;&#x5217;&#x8868;&#xFF09;12345678lst = list(range(1, 10))lst [1, 2, 3, 4, 5, 6, 7, 8, 9]lst[0]1lst[-1]9# &#x5F53;&#x7D22;&#x5F15;&#x4E3A;&#x8D1F;&#x6570;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x662F;&#x4ECE;&#x53F3;&#x8FB9;&#x5F00;&#x59CB;&#x6570;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x7D22;&#x5F15;&#x4ECE;-1&#x5F00;&#x59CB;&#x8BA1;&#x7B97; index1234567891011l = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;]l [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;]l.index(&apos;a&apos;)# index &#x65B9;&#x6CD5;&#x6839;&#x636E;&#x503C;&#x8FD4;&#x56DE;&#x7B2C;&#x4E00;&#x4E2A;&#x7D22;&#x5F15;0l.index(&apos;a&apos;, 0, 4)0# &#x4ECE;&#x7D22;&#x5F15;&#x7684;&#x7B2C;0&#x4F4D;&#x5F00;&#x59CB;&#x5230;&#x7B2C;4&#x4F4D;&#x627E; a&#x7684;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;l.index(&apos;a&apos;, 2)# &#x4ECE;&#x7B2C;2&#x4E2A;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#xFF0C;&#x5230;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#x7ED3;&#x675F;&#x627E; &apos;a&apos;&#x7684;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E; count123l.count(&apos;a&apos;)1# count &#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x5143;&#x7D20;&#x5728;&#x5217;&#x8868;&#x91CC;&#x7684;&#x4E2A;&#x6570; &#x4FEE;&#x6539;12345l[2]3l[2] = &apos;ch&apos;l[2]&apos;ch&apos; &#x589E;&#x52A0; append12345l = list(range(1, 10))l.append(&apos;python&apos;)l[1, 2, 3, 4, 5, 6, 7, 8, 9, &apos;python&apos;]# &#x8FFD;&#x52A0;, append &#x662F;&#x539F;&#x5730;&#x4FEE;&#x6539;list, &#x8FD4;&#x56DE;&#x503C;&#x662F;None insert123456789l.insert(1, &apos;ch&apos;)# &#x5728;&#x7D22;&#x5F15;1&#x4F4D;&#x4E4B;&#x524D;&#x63D2;&#x5165;&apos;ch&apos;l [1, &apos;ch&apos;, 2, 3, 4, 5, 6, 7, 8, 9, &apos;python&apos;]l.insert(100,&apos;error&apos;)l.insert(-100,&apos;error&apos;)l[&apos;error&apos;, 1, &apos;ch&apos;, 2, 3, 4, 5, 6, 7, 8, 9, &apos;python&apos;, &apos;error&apos;]# list.insert &#x65B9;&#x6CD5;&#xFF0C;&#x5F53;&#x8D8A;&#x754C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x81EA;&#x52A8;&#x5F80;&#x6700;&#x5DE6;&#x6216;&#x6700;&#x53F3;&#x63D2;&#x5165;&#x8BE5;&#x503C; append&#x64CD;&#x4F5C;&#x5355;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x8FFD;&#x52A0;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x5230;&#x5217;&#x8868;&#x7684;&#x6700;&#x540E;&#xFF0C;&#x65E0;&#x9700;&#x5173;&#x5FC3;&#x5217;&#x8868;&#x672C;&#x8EAB;&#xFF0C;&#x56E0;&#x6B64;&#x4ED6;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x662F;O(1) insert&#x64CD;&#x4F5C;&#x5355;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x4F46;&#x662F;&#x9700;&#x8981;&#x904D;&#x5386;&#x6574;&#x4E2A;&#x5217;&#x8868;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x662F;O(n) extend12345678l = [&apos;a&apos;, &apos;a&apos;]l.append([&apos;b&apos;,&apos;b2&apos;])l[&apos;a&apos;, &apos;a&apos;, [&apos;b&apos;, &apos;b2&apos;]]l.extend([&apos;c&apos;,&apos;c2&apos;])# &#x5C06;&#x53EF;&#x8FED;&#x4EE3;&#x5BF9;&#x8C61;&#x4E22;&#x8FDB;&#x53BB;&#xFF0C;&#x7136;&#x540E;&#x4F9D;&#x6B21;&#x8FDB;&#x884C;&#x904D;&#x5386;l[&apos;a&apos;, &apos;a&apos;, [&apos;b&apos;, &apos;b2&apos;], &apos;c&apos;, &apos;c2&apos;] 12345678l.clear()l = [1, 2]l + [&apos;ch&apos;][1, 2, &apos;ch&apos;]# &#x5BF9;list&#x8FDB;&#x884C;&#x76F8;&#x52A0;&#x7684;&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#x662F;&#x76F8;&#x52A0;&#x540E;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x4F46;&#x662F;list&#x672C;&#x8EAB;&#x4E0D;&#x4F1A;&#x88AB;&#x4FEE;&#x6539;new_1 = l + [&apos;ch&apos;]new_l[1, 2, &apos;ch&apos;] &#x5220;&#x9664; remove123456l = list(range(1, 10))l.remove(4)# remove &#x8FD4;&#x56DE;&#x503C;None&#xFF0C;&#x539F;&#x5730;&#x4FEE;&#x6539;list# &#x5220;&#x9664;&#x987A;&#x5E8F;&#x662F;&#x4ECE;&#x5DE6;&#x5F80;&#x53F3;&#x4F9D;&#x6B21;&#x5220;&#x9664;&#x7B2C;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#x5230;&#x7684;&#x503C;l[1, 2, 3, 4, 6, 7, 8, 9] pop12345678l = list(range(1, 10))l[1, 2, 3, 4, 5, 6, 7, 8, 9]l.pop()9# &#x5220;&#x9664;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;,&#x4E0D;&#x4F20;&#x9012;index&#x53C2;&#x6570;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x662F;O&#xFF08;1&#xFF09;# &#x4F20;&#x9012;index&#x53C2;&#x6570;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x662F;O(n)# pop &#x5220;&#x9664;&#x5143;&#x7D20;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x8BE5;&#x5143;&#x7D20; clear1234l = list(range(1, 10))l.clear()l[] &#x5176;&#x4ED6;&#x64CD;&#x4F5C; len1234l = list(range(1, 10))len(l)9# len &#x7528;&#x6765;&#x8BA1;&#x7B97;list&#x7684;&#x957F;&#x5EA6; reverse12345l = list(range(1, 10))l.reverse()# &#x53CD;&#x8F6C;&#x5217;&#x8868;&#xFF0C;&#x8FD4;&#x56DE;None,&#x539F;&#x5730;&#x4FEE;&#x6539;&#x5217;&#x8868;l[10, 9, 8, 7, 6, 5, 4, 3, 2, 1] sort123456789l = [2, 1, 5, 6, 7, 3, 8]l.sort()# &#x5BF9;&#x5217;&#x8868;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF0C;&#x539F;&#x5730;&#x4FEE;&#x6539;&#x5217;&#x8868;&#xFF0C;&#x8FD4;&#x56DE;Nonel[1, 2, 3, 5, 6, 7, 8]l.sort(reverse=True)# &#x5E26;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8FDB;&#x884C;&#x53CD;&#x8F6C;l[8, 7, 6, 5, 3, 2, 1] list&#x62F7;&#x8D1D; &#x6D45;&#x62F7;&#x8D1D;12345678l = list(range(1, 10))l2 = ll2[2] = &apos;ch&apos;l2 [1, 2, &apos;ch&apos;, 4, 5, 6, 7, 8, 9]l[1, 2, &apos;ch&apos;, 4, 5, 6, 7, 8, 9]# &#x8D4B;&#x503C;&#x64CD;&#x4F5C;&#x65F6;&#x5F15;&#x7528;&#x4F20;&#x9012;&#xFF0C;&#x4E5F;&#x53EB;&#x6D45;&#x590D;&#x5236; &#x5F71;&#x5B50;&#x62F7;&#x8D1D;1234567l = list(range(1, 10))l3 = l.copy()l3[2] = &apos;test&apos;l3[1, 2, &apos;test&apos;, 4, 5, 6, 7, 8, 9]l[1, 2, 3, 4, 5, 6, 7, 8, 9] &#x4F46;&#x662F;&#x8FD8;&#x6709;&#x4E00;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x5F71;&#x5B50;&#x62F7;&#x8D1D;&#x4E0D;&#x9002;&#x7528;1234567l = [1, [2, 3], 4]l4 = l.copy()l4[1][0] = &apos;ch&apos;l4[1, [&apos;ch&apos;, 3], 4]l[1, [&apos;ch&apos;, 3], 4] &#x6DF1;&#x62F7;&#x8D1D;12345678910import copy# &#x5F15;&#x5165;copy&#x6A21;&#x5757;&#xFF0C;&#x8FDB;&#x884C;&#x6DF1;&#x62F7;&#x8D1D;l = [1, [2, 3], 4]l5 = copy.deepcopy(l)l5[1][0] = &apos;test&apos;l5[1, [&apos;test&apos;, 3], 4]l[1, [2, 3], 4] &#x5B57;&#x7B26;&#x4E32;&#x53CA;&#x5176;&#x64CD;&#x4F5C; &#x5B9A;&#x4E49;1234567891011s = &apos;hello world&apos;s = &quot;papapa&quot;# &#x4E00;&#x4E2A;&#x5355;/&#x53CC;&#x5F15;&#x53F7;&#x53EA;&#x80FD;&#x5B9A;&#x4E49;&#x5355;&#x884C;&#x5B57;&#x7B26;&#x4E32;s = &apos;&apos;&apos;&#x8FD9;&#x91CC;&#x6211;&#x60F3;&#x8981;&#x8868;&#x8FBE;&#x7684;&#x662F;miracle young &#x8001;&#x5E08;&#x771F;&#x68D2;&#x771F;&#x7684;&#x5389;&#x5BB3;&#x6211;&#x5F88;&#x6EE1;&#x610F;&apos;&apos;&apos;# &#x4E09;&#x5F15;&#x53F7;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x591A;&#x884C;&#x5B57;&#x7B26;&#x4E32; &#x8F6C;&#x4E49;&#x7B26; &#x4E0B;&#x6807;&#x64CD;&#x4F5C;12345s = &apos;test python&apos;s[1]&apos;e&apos;s[1] = &apos;h&apos;# &#x5B57;&#x7B26;&#x4E32;&#x662F;&#x4E0D;&#x53EF;&#x53D8;&#x7684; &#x76EE;&#x524D;&#x53EA;&#x6709;list&#x662F;&#x53EF;&#x53D8;&#x7684;&#xFF0C;&#x5176;&#x4ED6;&#x90FD;&#x662F;&#x4E0D;&#x53EF;&#x53D8;&#x7684; &#x5B57;&#x7B26;&#x4E32;&#x662F;&#x8FED;&#x4EE3;&#x5668;&#xFF0C;&#x662F;&#x53EF;&#x8FED;&#x4EE3;&#x5BF9;&#x8C61;12345678910111213for c in s: print(c)test python &#x5B57;&#x7B26;&#x4E32;&#x7684;&#x64CD;&#x4F5C; join1234l = &apos;i am chenhao&apos;&apos; &apos;.join(l)&apos;i a m c h e n h a o&apos;# join&#x5C06;&#x4F20;&#x5165;&#x7684;&#x53EF;&#x8FED;&#x4EE3;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x62FC;&#x63A5;&#xFF0C;&#x62FC;&#x63A5;&#x7684;&#x95F4;&#x9694;&#x7B26;&#x53F7;&#x7531;&#x524D;&#x9762;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x51B3;&#x5B9A;&#x3002;&#x8FD4;&#x56DE;&#x62FC;&#x63A5;&#x7ED3;&#x679C;&#xFF0C;&#x62FC;&#x63A5;&#x6E90;&#x5BF9;&#x8C61;&#x5E76;&#x4E0D;&#x4F1A;&#x88AB;&#x4FEE;&#x6539;&#x3002; &#x5206;&#x5272; split1234567l = &apos;i am chenhao&apos;l.split()[&apos;i&apos;, &apos;am&apos;, &apos;chenhao&apos;]# split &#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x7A7A;&#x683C;&#x8FDB;&#x884C;&#x5207;&#x5272;&#xFF0C;&#x5F53;&#x4F20;&#x5165;&#x53C2;&#x6570;&#x540E;&#xFF0C;&#x6309;&#x7167;&#x53C2;&#x6570;&#x7684;&#x5F62;&#x5F0F;&#x4F5C;&#x4E3A;&#x5207;&#x5272;&#x7B26;&#x53F7;&#xFF0C;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x610F;&#x5B57;&#x7B26;&#x4E32;&#x3002;l.split(maxsplit=1)[&apos;i&apos;, &apos;am chenhao&apos;]# &#x6700;&#x5927;&#x5207;&#x5272;&#x53EA;&#x4E3A;1&#x6B21; rsplit&#x8DDF;split&#x4E00;&#x6837;&#xFF0C;&#x53EA;&#x662F;&#x4ECE;&#x53F3;&#x5F80;&#x5DE6;&#x8FDB;&#x884C;&#x5207;&#x5272; splitlines1234567s = &apos;&apos;&apos;i am miracleYoungi love my wife&apos;&apos;&apos;s.splitlines() [&apos;i am miracleYoung&apos;, &apos;i love my wife&apos;]# &#x6309;&#x884C;&#x5206;&#x5272;&#xFF0C;&#x5E76;&#x4E14;&#x9ED8;&#x8BA4;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x4E0D;&#x5E26;&#x6362;&#x884C;&#x7B26;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;list&#x5BF9;&#x8C61; partition123456&apos;i am miracle young&apos;.partition(&apos; &apos;) (&apos;i&apos;, &apos; &apos;, &apos;am miracle young&apos;)# &#x603B;&#x662F;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x4E09;&#x5143;&#x7EC4;&#xFF0C;&#xFF08;&#x7531;3&#x4E2A;&#x5143;&#x7D20;&#x6784;&#x6210;&#x7684;&#x5143;&#x7EC4;&#xFF09;&#xFF0C;# &#x6309;&#x7167;&#x4F20;&#x5165;&#x7684;&#x5206;&#x9694;&#x7B26;&#x5206;&#x5272;&#x4E00;&#x6B21;&#xFF0C;&#x5F97;&#x5230;head&#xFF0C;tail&#xFF0C;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x662F;head&#xFF0C;sep&#xFF0C;tail&apos;i am miracle young&apos;.rpartition(&apos; &apos;) # &#x4ECE;&#x53F3;&#x5F80;&#x5DE6;&#x5339;&#x914D;&#x5F00;&#x59CB;&#x5206;&#x9694; &#x5927;&#x5C0F;&#x5199;&#x8F6C;&#x6362;12345678910111213141516s = &apos;tEsT&apos;s.upper() &apos;TEST&apos;# &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5927;&#x5199;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x4FEE;&#x6539;&#x539F;&#x5BF9;&#x8C61;s.lower()&apos;test&apos;# &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5C0F;&#x5199;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x4FEE;&#x6539;&#x539F;&#x5BF9;&#x8C61;s.casefold()&apos;test&apos;# &#x5FFD;&#x7565;&#x5927;&#x5C0F;&#x5199;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x5C0F;&#x5199;s.swapcase()&apos;TeSt&apos;# &#x5927;&#x5C0F;&#x5199;&#x4E92;&#x6362; &#x6392;&#x7248;1234567891011s = &apos;i am TesT UnIVersity&apos;s.title()&apos;I Am Test University&apos;# &#x5BF9;&#x6BCF;&#x4E00;&#x4E2A;&#x7A7A;&#x683C;&#x5F00;&#x5934;&#x7684;&#x9996;&#x5B57;&#x6BCD;&#x5927;&#x5199;&#xFF0C;&#x5176;&#x4ED6;&#x5B57;&#x6BCD;&#x4E00;&#x5F8B;&#x5C0F;&#x5199;s.capitalize()&apos;I am test university&apos;# &#x5BF9;&#x7B2C;&#x4E00;&#x4E2A;&#x9996;&#x5B57;&#x6BCD;&#x5927;&#x5199;s.center(100)# &#x586B;&#x5145;&#x5B57;&#x7B26; &#x4FEE;&#x6539; replace12345678910s = &apos;i love miracle young&apos;s.replace(&apos;love&apos;, &apos;give up&apos;)# replace &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x4F7F;&#x7528;new &#x66FF;&#x6362;old&apos;i give up miracle young&apos;ss = &apos;i am very very very love miracle young&apos;ss.replace(&apos;very&apos;, &apos;not&apos;) # replace &#x9ED8;&#x8BA4;&#x6709;&#x591A;&#x5C11;&#x66FF;&#x6362;&#x591A;&#x5C11;&apos;i am not not not love miracle young&apos;ss.replace(&apos;very&apos;, &apos;not&apos;, 2)&apos;i am not not very love miracle young&apos; strip12345678910s = &apos; hahah hahah &apos;s.strip()&apos;hahah hahah&apos;# strip &#x8FD4;&#x56DE;&#x79FB;&#x51FA;&#x540E;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x5BF9;&#x539F;&#x5B57;&#x7B26;&#x4E32;&#x8FDB;&#x884C;&#x4FEE;&#x6539;s.lstrip()&apos;hahah hahah &apos;# lstrip &#x53EA;&#x79FB;&#x51FA;&#x5DE6;&#x8FB9;&#x7684;s.rstrip()&apos; hahah hahah&apos;# rstrip &#x53EA;&#x79FB;&#x51FA;&#x53F3;&#x8FB9;&#x7684; ljust12345678910s = &apos;test&apos;s.ljust(10, &quot;#&quot;)&apos;test######&apos;# &#x4ECE;&#x5DE6;&#x8FB9;&#x8FDB;&#x884C;&#x8865;&#x4F4D;s.rjust(10, &apos;#&apos;)&apos;######test&apos;# &#x4ECE;&#x53F3;&#x8FB9;&#x8FDB;&#x884C;&#x8865;&#x4F4D;&apos;Mysql begin to install ...&apos;.center(100, &apos;#&apos;)&apos;#####################################Mysql begin to install ...#####################################&apos; &#x67E5;&#x627E; find1234567891011121314151617s = &apos;i love ch&apos;s.find(&apos;lve&apos;)-1# &#x67E5;&#x627E;&#x4E0D;&#x5230;&#x7684;&#x4E0D;&#x4F1A;&#x62A5;&#x9519;&#xFF0C;-1s = &apos;i very very love python&apos;s.find(&apos;very&apos;)2s.find(&apos;very&apos;, 3)7s.rfind(&apos;very&apos;, 6)# &#x4ECE;&#x53F3;&#x8FB9;&#x5F00;&#x59CB;&#x627E;7s.rfind(&apos;very&apos;, 0, 11)7 index12345678s = &apos;i very very love python&apos;s.index(&apos;very&apos;)2s.index(&apos;very&apos;, 0, 11)2s.index(&apos;very&apos;, 4, 7)# index&#x5982;&#x679C;&#x627E;&#x5230;&#x4E0D;&#x5230;&#x7684;&#x8BDD;&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;ValueErrors.rindex(&apos;very&apos;) count123456s.count(&apos;v&apos;)3s&apos;i very very love python&apos;s.count(&apos;v&apos;, 3, 8)1 startswith1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253s = &apos;i very very love python&apos;list(enumerate(s))# enumerate &#xFF0C;&#x89E3;&#x6784;&#xFF0C;&#x5B9A;&#x4E49;&#x6BCF;&#x4E00;&#x4E2A;&#x7D22;&#x5F15;&#x7684;&#x4F4D;&#x7F6E;&#x5BF9;&#x5E94;&#x7684;&#x5B57;&#x7B26;[(0, &apos;i&apos;), (1, &apos; &apos;), (2, &apos;v&apos;), (3, &apos;e&apos;), (4, &apos;r&apos;), (5, &apos;y&apos;), (6, &apos; &apos;), (7, &apos;v&apos;), (8, &apos;e&apos;), (9, &apos;r&apos;), (10, &apos;y&apos;), (11, &apos; &apos;), (12, &apos;l&apos;), (13, &apos;o&apos;), (14, &apos;v&apos;), (15, &apos;e&apos;), (16, &apos; &apos;), (17, &apos;p&apos;), (18, &apos;y&apos;), (19, &apos;t&apos;), (20, &apos;h&apos;), (21, &apos;o&apos;), (22, &apos;n&apos;)]s.startswith(&apos;i&apos;)Trues.startswith(&apos;v&apos;)Falses.startswith(&apos;v&apos;, 2, 7)Trues.endswith(&apos;n&apos;)Trues.isalnum()# &#x662F;&#x5426;&#x6709;&#x7A7A;&#x683C;Falses.replace(&apos; &apos;,&apos;&apos;).isalnum()Trues.isdecimal()# &#x662F;&#x5426;&#x53EA;&#x6709;&#x6570;&#x5B57;Falses.replace(&apos; &apos;, &apos;_&apos;).isidentifier()True&apos;a_1&apos;.isidentifier()# &#x5305;&#x542B;&#x5B57;&#x6BCD;&#xFF0C;&#x6570;&#x5B57;&#xFF0C;&#x4E0B;&#x5212;&#x7EBF;&#xFF0C;&#x5373;&#x53EF;&#xFF0C;&#x5F00;&#x5934;&#x4E0D;&#x80FD;&#x4E3A;&#x6570;&#x5B57;&#xFF0C;&#x7528;&#x4E8E;&#x68C0;&#x6D4B;&#x5BC6;&#x7801;&#x590D;&#x6742;&#x5EA6;Trues.istitle()# &#x9996;&#x5B57;&#x6BCD;&#x662F;&#x5426;&#x5927;&#x5199;Falses.islower()# &#x662F;&#x5426;&#x5168;&#x90E8;&#x4E3A;&#x5C0F;&#x5199;True]]></content>
      <categories>
        <category>python学习</category>
      </categories>
      <tags>
        <tag>python基础</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[常量变量-运算符-程序结构01]]></title>
    <url>%2F%E5%B8%B8%E9%87%8F%E5%8F%98%E9%87%8F-%E8%BF%90%E7%AE%97%E7%AC%A6-%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%8401.html</url>
    <content type="text"><![CDATA[Python &#x57FA;&#x7840;&#x8BED;&#x6CD5; &#x5E38;&#x91CF;/&#x53D8;&#x91CF; &#x5E38;&#x91CF;&#xFF1A;&#x4E00;&#x65E6;&#x8D4B;&#x503C;&#xFF0C;&#x5C31;&#x4E0D;&#x80FD;&#x518D;&#x6539;&#x53D8;&#x5979;&#x7684;&#x503C;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x4E0D;&#x80FD;&#x5BF9;&#x4ED6;&#x8FDB;&#x884C;&#x91CD;&#x65B0;&#x8D4B;&#x503C; &#x5B57;&#x9762;&#x5E38;&#x91CF;&#xFF1A;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x51FA;&#x73B0;&#x7684;&#x91CF;&#xFF0C;&#x672A;&#x8D4B;&#x503C;&#x7ED9;&#x4EFB;&#x4F55;&#x7684;&#x5E38;&#x91CF;&#x6216;&#x8005;&#x53D8;&#x91CF;&#x3002; &#x53D8;&#x91CF;&#xFF1A;&#x662F;&#x4E00;&#x4E2A;&#x540D;&#x5B57;&#xFF0C;&#x5728;&#x8D4B;&#x503C;&#x7B26;&#x53F7;&#x7684;&#x5DE6;&#x8FB9;&#xFF0C;&#x8FD9;&#x4E2A;&#x540D;&#x5B57;&#x53EF;&#x4EE5;&#x6307;&#x4EE3;&#x8D4B;&#x503C;&#x7B26;&#x53F7;&#x53F3;&#x8FB9;&#x7684;&#x5185;&#x5BB9;&#x3002; python&#x4E0D;&#x5B58;&#x5728;&#x5E38;&#x91CF; &#x7C7B;&#x578B;&#x7CFB;&#x7EDF; python &#x662F;&#x5F3A;&#x7C7B;&#x578B;&#x8BED;&#x8A00; &#x2014;&gt; &#x5F31;&#x7C7B;&#x578B; python &#x662F;&#x52A8;&#x6001;&#x8BED;&#x8A00; &#x2014;&gt; &#x9759;&#x6001;&#x8BED;&#x8A00; &#x5F3A;&#x7C7B;&#x578B;&#xFF1A;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x4E4B;&#x95F4;&#xFF0C;&#x4E0D;&#x80FD;&#x76F8;&#x4E92;&#x8BA1;&#x7B97;&#xFF0C;&#x8FD0;&#x7B97;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x505A;&#x7C7B;&#x578B;&#x8F6C;&#x6362; &#x52A8;&#x6001;&#x8BED;&#x8A00;&#xFF1A;&#x53D8;&#x91CF;&#x53EF;&#x4EE5;&#x91CD;&#x65B0;&#x8D4B;&#x503C;&#x4E3A;&#x5176;&#x4ED6;&#x7C7B;&#x578B; &#x8D4B;&#x503C;&#x5373;&#x5B9A;&#x4E49; &#x57FA;&#x672C;&#x7C7B;&#x578B; int&#xFF08;&#x6574;&#x6570;&#xFF09;&#x3001;float&#xFF08;&#x6D6E;&#x70B9;&#xFF09;&#x3001;bool&#xFF08;&#x5E03;&#x5C14;&#xFF09;&#x3001;str&#xFF08;&#x5B57;&#x7B26;&#x4E32;&#xFF09;&#x3001;None python2&#x4E2D;&#x533A;&#x5206;&#x6574;&#x5F62;&#x548C;&#x957F;&#x6574;&#x578B;&#xFF0C;python3&#x4E0D;&#x533A;&#x5206; &#x6D6E;&#x70B9;&#x6570;&#x5B58;&#x5728;&#x635F;&#x5931;&#x7CBE;&#x5EA6;&#x7684;&#x60C5;&#x51B5; &#x8FD0;&#x7B97;&#x7B26;&#x53F7; +&#x3001;-&#x3001;&#x3001;/&#x3001;//&#x3001;* &#x3001;% : &#x6C42;&#x5E42;&#xFF0C;2 3&#xFF0C;2&#x7684;3&#x6B21;&#x5E42; % :&#x3000;&#x53D6;&#x6A21;&#xFF0C;&#xFF12; % &#xFF13;&#xFF0C;&#x4F59;&#xFF12; python3 &#x662F;&#x81EA;&#x7136;&#x9664;&#xFF0C;python2&#x662F;&#x6574;&#x9664; &#x6BD4;&#x8F83;&#x8FD0;&#x7B97;&#x7B26; &gt;,&lt;,==,!=,&gt;=,&lt;= &#x6BD4;&#x8F83;&#x8FD0;&#x7B97;&#x7B26;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#xFF1A;bool&#x7C7B;&#x578B; &#x903B;&#x8F91;&#x8FD0;&#x7B97;&#x7B26; and&#xFF0C;or&#xFF0C;not False and &#x4E00;&#x5207;&#x90FD;&#x662F;False True or &#x4E00;&#x5207;&#x90FD;&#x662F;True &#x6210;&#x5458;&#x8FD0;&#x7B97;&#x7B26; in&#x3001; not in &#x8EAB;&#x4EFD;&#x8FD0;&#x7B97;&#x7B26; is&#x3001; in not &#x4F4D;&#x8FD0;&#x7B97;&#x7B26; &lt;&lt;&#x3001; &gt;&gt;&#x3001; &amp;&#x3001; |&#x3001; ^ &#x8D4B;&#x503C;&#x8FD0;&#x7B97;&#x7B26; i +=3 i *=3 &#x7A0B;&#x5E8F;&#x7ED3;&#x6784; &#x987A;&#x5E8F;&#x6267;&#x884C;&#x793A;&#x4F8B;&#xFF1A;1234i = 3print(i)i += 5print(i) &#x5206;&#x652F;&#x7ED3;&#x6784; &#x5355;&#x5206;&#x652F;1234&#x5F00;&#x59CB; if &#x6761;&#x4EF6;: &#x64CD;&#x4F5C;&#x7ED3;&#x675F; &#x53CC;&#x5206;&#x652F; &#x53CC;&#x5206;&#x652F;&#x89E3;&#x6784;&#x6C38;&#x8FDC;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x6761;&#x4EF6;&#x4F1A;&#x88AB;&#x6267;&#x884C; 123456789&#x5F00;&#x59CB; if &#x6761;&#x4EF6;1: &#x64CD;&#x4F5C;1 elif &#x6761;&#x4EF6;2&#xFF1A; &#x64CD;&#x4F5C;2 ...... else: &#x64CD;&#x4F5C;3&#x7ED3;&#x675F; &#x5FAA;&#x73AF;&#x7ED3;&#x6784; while&#x5FAA;&#x73AF;1234&#x5F00;&#x59CB; while &#x6761;&#x4EF6;: &#x64CD;&#x4F5C; &#x7ED3;&#x675F; for &#x5FAA;&#x73AF;1234567&#x5F00;&#x59CB; for &#x5143;&#x7D20; in &#x53EF;&#x8FED;&#x4EE3;&#x5BF9;&#x8C61;&#xFF1B; &#x64CD;&#x4F5C;1 else: &#x64CD;&#x4F5C;2 # &#x5F53;&#x5FAA;&#x73AF;&#x6CA1;&#x6709;&#x63D0;&#x524D;&#x9000;&#x51FA;&#x65F6;&#xFF0C;&#x4F1A;&#x6267;&#x884C;else&#x5B50;&#x53E5; &#x7ED3;&#x675F; for&#x5FAA;&#x73AF;&#x4E2D;&#xFF0C;break&#x4EE3;&#x8868;&#x9000;&#x51FA;&#xFF0C;&#x4E0D;&#x6267;&#x884C;&#x540E;&#x9762;&#x7684;&#x6240;&#x6709;&#x8BED;&#x53E5; for&#x5FAA;&#x73AF;&#x4E2D;&#xFF0C;continue&#x4EE3;&#x8868;&#x8DF3;&#x8FC7;&#x5F53;&#x524D;&#x4EE3;&#x7801;&#x7684;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#xFF0C;&#x76F4;&#x63A5;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x6B21;&#x5FAA;&#x73AF; &#x65E0;&#x8BBA;&#x662F;break&#x8FD8;&#x662F;continue&#xFF0C;&#x90FD;&#x662F;&#x9488;&#x5BF9;&#x6700;&#x8FD1;&#x7684;&#x4E00;&#x4E2A;for&#x5FAA;&#x73AF;&#x4F53;]]></content>
      <categories>
        <category>python学习</category>
      </categories>
      <tags>
        <tag>python基础</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jenkins部署及构建方式]]></title>
    <url>%2Fjenkins%E9%83%A8%E7%BD%B2%E5%8F%8A%E6%9E%84%E5%BB%BA%E6%96%B9%E5%BC%8F.html</url>
    <content type="text"><![CDATA[jenkins&#x662F;&#x57FA;&#x4E8E;java&#x5F00;&#x53D1;&#x7684;&#x4E00;&#x79CD;&#x6301;&#x7EED;&#x96C6;&#x6210;&#x5DE5;&#x5177;&#xFF0C;&#x5B83;&#x7684;&#x5DE5;&#x4F5C;&#x5B8C;&#x5168;&#x5C31;&#x662F;&#x4F9D;&#x9760;&#x63D2;&#x4EF6;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x4F60;&#x60F3;&#x4F7F;&#x7528;&#x4EC0;&#x4E48;&#x529F;&#x80FD;&#xFF0C;&#x4F60;&#x5C31;&#x627E;&#x5230;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x63D2;&#x4EF6;&#x3002;&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x90E8;&#x7F72;jenkins&#x7684;&#x6700;&#x5927;&#x597D;&#x5904;&#x5C31;&#x662F;&#x6BCF;&#x6B21;&#x5728;&#x5F00;&#x53D1;&#x3001;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#xFF0C;&#x90FD;&#x65E0;&#x987B;&#x8FD0;&#x7EF4;&#x90E8;&#x7F72;&#xFF0C;&#x800C;&#x662F;&#x76F8;&#x5173;&#x7684;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#xFF0C;&#x6D4B;&#x8BD5;&#x4EBA;&#x5458;&#x767B;&#x5F55;jenkins&#x4F20;&#x5165;&#x9700;&#x8981;&#x90E8;&#x7F72;&#x7684;tag&#x5373;&#x53EF;&#xFF0C;&#x6574;&#x4E2A;&#x90E8;&#x7F72;&#x8FC7;&#x7A0B;&#x65E0;&#x987B;&#x8FD0;&#x7EF4;&#x53C2;&#x4E0E;&#xFF0C;&#x4ECE;&#x800C;&#x89E3;&#x653E;&#x8FD0;&#x7EF4;&#x52B3;&#x52A8;&#x529B;&#x3002; jenkins&#x5B89;&#x88C5; &#x73AF;&#x5883;&#x51C6;&#x5907;1. Centos 7.1 &#x5DF2;&#x5173;&#x95ED; iptables&#x3001;selinux2. Java JDK 1.83. gitlab&#x90E8;&#x7F72;&#xFF0C;&#x63A8;&#x8350;&#x6587;&#x7AE0;&#xFF1A; &#x642D;&#x5EFA;&#x5185;&#x7F51;gitlab&#x4ED3;&#x5E93;&#x5B89;&#x88C5;jenkins&#x5B98;&#x7F51;&#xFF1A; https://www.jenkins.io12345cd /etc/yum.repos.d/wget http://pkg.jenkins.io/redhat/jenkins.reporpm --import http://pkg.jenkins.io/redhat/jenkins.io.keyyum install -y jenkinssystemctl start jenkins&#x914D;&#x7F6E;jenkins&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x6253;&#x5F00;&#x8F93;&#x5165; http://IP:8080/ &#x5373;&#x53EF;&#x8BBF;&#x95EE;jenkins&#x9996;&#x6B21;&#x8BBF;&#x95EE;&#xFF0C;&#x9700;&#x8981;&#x89E3;&#x9501;jenkins&#xFF0C;&#x628A;/var/lib/jenkins/secrets/initialAdminPassword&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x590D;&#x5236;&#x5230;administrator password&#x4E0B;&#x65B9;&#x5373;&#x53EF;&#x3002;&#x70B9;&#x51FB;&#x7B2C;&#x4E00;&#x4E2A;&#x5B89;&#x88C5;&#x4E00;&#x4E9B;&#x9ED8;&#x8BA4;&#x63D2;&#x4EF6;&#x5373;&#x53EF;&#xFF0C;&#x5B89;&#x88C5;&#x65F6;&#x95F4;&#x53EF;&#x80FD;&#x6BD4;&#x8F83;&#x4E45;&#xFF0C;&#x8010;&#x5FC3;&#x7B49;&#x5F85;&#x4E00;&#x4E0B;&#x5373;&#x53EF;&#x9ED8;&#x8BA4;&#x63D2;&#x4EF6;&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x914D;&#x7F6E;&#x4E0B;&#x7528;&#x6237;&#x5BC6;&#x7801;&#x90AE;&#x7BB1;&#x5373;&#x53EF;&#x63D2;&#x4EF6;&#x5B89;&#x88C5;&#x70B9;&#x51FB; &#x3010;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x3011; &#x2013;&gt; &#x3010;&#x7BA1;&#x7406;&#x63D2;&#x4EF6;&#x3011; &#x5B89;&#x88C5;&#x4E00;&#x4E9B;&#x5FC5;&#x8981;&#x63D2;&#x4EF6;&#x8FD9;&#x91CC;&#x8BF4;&#x660E;&#x4E00;&#x4E0B;&#x6211;&#x5B89;&#x88C5;&#x7684;&#x4E00;&#x4E9B;&#x63D2;&#x4EF6;:ssh &#x63D2;&#x4EF6;: SSH pluginAndroid &#x4E13;&#x7528;&#xFF1A;Gradle plugin (&#x9ED8;&#x8BA4;&#x5DF2;&#x7ECF;&#x5B89;&#x88C5;&#xFF09;Git &#x63D2;&#x4EF6;&#xFF1A;Git plugin&#x3001;Git client pluginGitlab &#x63D2;&#x4EF6;&#xFF1A;GitLab Plugin &#x548C; Gitlab Hook Plugin&#x3001;GitLab Logo Pluginsonar &#x63D2;&#x4EF6;&#xFF1A;SonarQube Plugin&#x3001;Sonargraph Integration Jenkins Plugin&#x3001;Sonargraph PluginParameter &#x63D2;&#x4EF6;: Git Parameter Plug-In&#xFF08;&#x7528;&#x4E8E;&#x7ED9;git&#x4F20;&#x53C2;&#xFF0C;&#x53EF;&#x9009;&#x62E9;&#x5177;&#x4F53;&#x90E8;&#x7F72;&#x54EA;&#x4E00;&#x4E2A;&#x5206;&#x652F;&#xFF09;Maven &#x63D2;&#x4EF6;&#xFF1A; Maven Integration plugin&#xFF08;&#x7528;&#x4E8E;maven&#x6784;&#x5EFA;&#x9879;&#x76EE;&#xFF09;&#x624B;&#x52A8;&#x4E0B;&#x8F7D;jenkins&#x63D2;&#x4EF6;&#x5927;&#x5BB6;&#x90FD;&#x77E5;&#x9053;&#xFF0C;&#x56E0;&#x4E3A;&#x5929;&#x671D;&#x7F51;&#x7EDC;&#x539F;&#x56E0;&#xFF0C;&#x53EF;&#x80FD;&#x6709;&#x5F88;&#x591A;&#x63D2;&#x4EF6;&#x6211;&#x4EEC;&#x5B89;&#x88C5;&#x4E0D;&#x4E0A;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5C31;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x624B;&#x52A8;&#x4E0B;&#x8F7D;&#xFF0C;&#x7136;&#x540E;&#x4E0A;&#x4F20;&#x63D2;&#x4EF6;&#x4E86;&#x3002;&#x63D2;&#x4EF6;&#x5730;&#x5740;&#xFF1A; http://updates.jenkins-ci.org/download/plugins/&#x70B9;&#x51FB; &#x3010;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x3011; &#x2013;&gt; &#x3010;&#x7BA1;&#x7406;&#x63D2;&#x4EF6;&#x3011; &#x2013;&gt; &#x3010;&#x9AD8;&#x7EA7;&#x3011;jenkins&#x90AE;&#x7BB1;&#x914D;&#x7F6E;&#x70B9;&#x51FB; &#x3010;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x3011; &#x2013;&gt; &#x3010;&#x7CFB;&#x7EDF;&#x914D;&#x7F6E;&#x3011;&#x2013;&gt; &#x3010;Jenkins Location&#x3011;&#x4E4B;&#x540E;&#x518D;&#x5728;&#x4E0B;&#x9762;&#x627E;&#x5230; &#x3010;&#x90AE;&#x4EF6;&#x901A;&#x77E5;&#x3011;&#x914D;&#x7F6E;&#x4E0B;&#x5373;&#x53EF;&#x5BC6;&#x94A5;&#x914D;&#x7F6E;12345678910111213141516171819202122# ssh-keygen -t rsa -b 4096Generating public/private rsa key pair.Enter file in which to save the key (/root/.ssh/id_rsa): Created directory &apos;/root/.ssh&apos;.Enter passphrase (empty for no passphrase): Enter same passphrase again: Your identification has been saved in /root/.ssh/id_rsa.Your public key has been saved in /root/.ssh/id_rsa.pub.The key fingerprint is:df:2e:3c:f3:3f:7d:ff:f8:5f:26:46:82:42:fb:a5:34 root@zhmysql1The key&apos;s randomart image is:+--[ RSA 4096]----+| || || . || . . . || S E o . || = = o || .+ . o.o|| =. ..++|| =o.ooX|+-----------------+&#x5728;&#x6D4F;&#x89C8;&#x6253;&#x5F00;&#x4E4B;&#x524D;&#x90E8;&#x7F72;&#x7684;gitlab&#xFF0C;&#x5C06;&#x670D;&#x52A1;&#x5668;&#x7684;&#x516C;&#x94A5;&#x914D;&#x7F6E;&#x4E0B;&#x73AF;&#x5883;&#x914D;&#x7F6E; &#x70B9;&#x51FB; &#x3010;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x3011; &#x2013;&gt; &#x3010;Global Tool Configuration&#x3011; jenkins&#x6784;&#x5EFA;&#x5C31;&#x76EE;&#x524D;&#x6240;&#x77E5;&#x9053;&#x7684;&#xFF0C;jenkins&#x6709;3&#x79CD;&#x6784;&#x5EFA;&#x65B9;&#x5F0F;: jenkins&#x53C2;&#x6570;&#x5316;&#x6784;&#x5EFA;&#xFF1A;&#x7528;&#x4E8E;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;&#x9884;&#x4E0A;&#x7EBF;&#x73AF;&#x5883;&#x90E8;&#x7F72;&#xFF0C;&#x5F00;&#x53D1;push&#x4EE3;&#x7801;&#x6216;&#x8005;&#x5408;&#x5E76;&#x4EE3;&#x7801;&#x5230;gitlab&#x9879;&#x76EE;&#x7684;master&#x5206;&#x652F;&#x4E4B;&#x540E;&#xFF0C;&#x5E76;&#x4E0D;&#x4F1A;&#x90E8;&#x7F72;&#x4EE3;&#x7801;&#xFF0C;&#x800C;&#x662F;&#x9700;&#x8981;&#x767B;&#x5F55;&#x5230;jenkins&#x7684;web&#x754C;&#x9762;&#xFF0C;&#x70B9;&#x51FB;&#x6784;&#x5EFA;&#x6309;&#x94AE;&#xFF0C;&#x4F20;&#x5165;&#x5BF9;&#x5E94;&#x7684;&#x53C2;&#x6570;&#xFF08;&#x6BD4;&#x5982;&#x53C2;&#x6570;&#x9700;&#x8981;&#x6784;&#x5EFA;&#x7684;tag&#xFF0C;&#x9700;&#x8981;&#x90E8;&#x7F72;&#x7684;&#x5206;&#x652F;&#xFF09;&#x7136;&#x540E;&#x624D;&#x4F1A;&#x90E8;&#x7F72;&#x3002; jenkins&#x89E6;&#x53D1;&#x5F0F;&#x6784;&#x5EFA;&#xFF1A;&#x7528;&#x4E8E;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x90E8;&#x7F72;&#xFF0C;&#x5F00;&#x53D1;&#x4EBA;&#x5458;push&#x4EE3;&#x7801;&#x6216;&#x8005;&#x5408;&#x5E76;&#x4EE3;&#x7801;&#x5230;gitlab&#x9879;&#x76EE;&#x7684;master&#x5206;&#x652F;&#xFF0C;jenkins&#x5C31;&#x90E8;&#x7F72;&#x4EE3;&#x7801;&#x5230;&#x5BF9;&#x5E94;&#x670D;&#x52A1;&#x5668;&#x3002; jenkins&#x5B9A;&#x65F6;&#x6784;&#x5EFA;&#xFF1A;&#x7528;&#x4E8E;APP&#x81EA;&#x52A8;&#x6253;&#x5305;&#xFF0C;&#x5B9A;&#x65F6;&#x6784;&#x5EFA;&#x662F;&#x5728;&#x53C2;&#x6570;&#x5316;&#x6784;&#x5EFA;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x6DFB;&#x52A0;&#x7684;&#xFF0C;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x53EF;&#x4EE5;&#x767B;&#x5F55;jenkins&#x624B;&#x52A8;&#x4F20;&#x5165;tag&#x8FDB;&#x884C;&#x6253;&#x5305;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x624B;&#x52A8;&#x6253;&#x5305;&#xFF0C;&#x90A3;&#x4E48;jenkins&#x5C31;&#x6BCF;&#x5929;&#x51CC;&#x6668;&#x4ECE;gitlab&#x62C9;&#x53D6;&#x6700;&#x65B0;&#x7684;APP&#x4EE3;&#x7801;&#x6253;&#x5305;&#x3002; &#x53C2;&#x6570;&#x5316;&#x6784;&#x5EFA;&#x8FD9;&#x91CC;&#x5148;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#x57FA;&#x672C;&#x4E0A;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#x6784;&#x5EFA;&#x5C31;&#x90E8;&#x7F72;&#x5B8C;&#x4E86;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x770B;&#x4E0B;&#x6548;&#x679C; &#x89E6;&#x53D1;&#x5F0F;&#x6784;&#x5EFA;&#x5373;gitlab&#x6709;&#x63D0;&#x4EA4;&#x64CD;&#x4F5C;&#xFF0C;&#x5219;&#x81EA;&#x52A8;&#x90E8;&#x7F72;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x8BA4;&#x8BC1;&#x7684;token&#x5373;&#x53EF;&#xFF0C;gitlab&#x8C03;&#x7528;&#x89E6;&#x53D1;&#x5668;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528; JENKINS_URL/job/new_cms/build?token=TOKEN_NAME&#x5373;&#x53EF;&#x70B9;&#x51FB; &#x3010;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x3011; &#x2013;&gt; &#x3010;&#x7BA1;&#x7406;&#x7528;&#x6237;&#x3011; &#x67E5;&#x770B;&#x7528;&#x6237;Token&#x6839;&#x636E;&#x89E6;&#x53D1;&#x5668;&#x9A8C;&#x8BC1;&#x4EE4;&#x724C;&#x548C;&#x7528;&#x6237;id+token&#x4F1A;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x4E0B;&#x9762;&#x7684;url&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x8BBF;&#x95EE;&#x8FD9;&#x4E2A;URL&#x5730;&#x5740;jenkins&#x5C31;&#x4F1A;&#x81EA;&#x52A8;&#x90E8;&#x7F72;&#x5BF9;&#x5E94;&#x9879;&#x76EE;&#x7684;&#x4EE3;&#x7801;&#x3002;http://admin:fd27d8b8a7c707df89f9574b18980dc5@42.159.244.183:8080/job/test/build?token=test gitlab&#x914D;&#x7F6E;webhooks&#xFF0C;&#x6BCF;&#x6B21;&#x63D0;&#x4EA4;&#x4EE3;&#x7801;&#x5C31;&#x8BBF;&#x95EE;&#x8FD9;&#x4E2A;url&#xFF0C;&#x6267;&#x884C;&#x6784;&#x5EFA; &#x5728;jenkins&#x5168;&#x5C40;&#x5728;jenkins&#x5168;&#x5C40;&#x5B89;&#x5168;&#x8BBE;&#x7F6E;&#x4E2D;&#x53D6;&#x6D88;&#x52FE;&#x9009;&#x201C;&#x9632;&#x6B62;&#x8DE8;&#x7AD9;&#x70B9;&#x8BF7;&#x6C42;&#x4F2A;&#x9020;&#xFF0C;&#x4E0D;&#x7136;jenkins&#x4F1A;&#x8BA4;&#x4E3A;gitlab&#x7684;&#x8BF7;&#x6C42;&#x4E0D;&#x5408;&#x6CD5;&#x3002;&#x70B9;&#x51FB; &#x3010;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x3011; &#x2013;&gt; &#x3010;Configure Global Security&#x3011; &#x6DFB;&#x52A0;&#x5B8C;&#x6210;&#x6D4B;&#x8BD5;&#xFF1A;&#x70B9;&#x51FB;test&#x6A21;&#x62DF;&#x63D0;&#x4EA4;&#x64CD;&#x4F5C;&#xFF0C;&#x770B;&#x770B;&#x662F;&#x5426;&#x4F1A;&#x6267;&#x884C;&#x81EA;&#x52A8;&#x6784;&#x5EFA; &#x5B9A;&#x65F6;&#x6784;&#x5EFA;&#x5B9A;&#x65F6;&#x6784;&#x5EFA;&#x4E00;&#x822C;&#x7528;&#x5728;&#x5B89;&#x5353;,ios&#x6253;&#x5305;&#xFF0C;&#x6BCF;&#x5929;&#x51CC;&#x6668;&#x4F1A;&#x62C9;&#x53D6;&#x5B89;&#x5353;,ios&#x8FDB;&#x884C;&#x7F16;&#x8BD1;&#x6253;&#x5305;&#xFF0C;&#x5E76;&#x81EA;&#x52A8;&#x63A8;&#x9001;&#x5230;&#x5171;&#x4EAB;&#x3002; &#x793A;&#x4F8B;&#xFF1A;&#x5728;&#x4E0A;&#x9762;&#x7684;&#x53C2;&#x6570;&#x5316;&#x6784;&#x5EFA;&#x793A;&#x4F8B;&#x4E0A;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x89E6;&#x53D1;&#x5668;&#xFF0C;&#x5C31;&#x662F;&#x6BCF;&#x5929;&#x51CC;&#x6668;1:30&#x5206;&#x81EA;&#x52A8;&#x6267;&#x884C;&#x5B89;&#x5353;&#x6216;ios&#x6253;&#x5305;&#x811A;&#x672C;&#xFF0C;&#x4E0A;&#x9762;&#x7684;&#x53C2;&#x6570;&#x5316;&#x6784;&#x5EFA;&#x9ED8;&#x8BA4;&#x503C;&#x662F;master&#x5C31;&#x662F;&#x6BCF;&#x5929;&#x4ECE;&#x4EE3;&#x7801;&#x4ED3;&#x5E93;&#x7684;master&#x5206;&#x652F;&#x62C9;&#x53D6;&#x6700;&#x65B0;&#x7684;&#x4EE3;&#x7801;&#x6253;&#x5305;&#x3002;]]></content>
      <categories>
        <category>自动化</category>
      </categories>
      <tags>
        <tag>jenkins</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jenkins+sonar 代码质量分析]]></title>
    <url>%2Fjenkins-sonar-%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%E5%88%86%E6%9E%90.html</url>
    <content type="text"><![CDATA[Sonar&#x662F;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x4EE3;&#x7801;&#x8D28;&#x91CF;&#x7BA1;&#x7406;&#x7684;&#x5F00;&#x6E90;&#x5E73;&#x53F0;&#xFF0C;&#x7528;&#x4E8E;&#x7BA1;&#x7406;&#x6E90;&#x4EE3;&#x7801;&#x7684;&#x8D28;&#x91CF;&#xFF0C;&#x53EF;&#x4EE5;&#x4ECE;&#x4E03;&#x4E2A;&#x7EF4;&#x5EA6;&#x68C0;&#x6D4B;&#x4EE3;&#x7801;&#x8D28;&#x91CF;&#x3002;&#x901A;&#x8FC7;&#x63D2;&#x4EF6;&#x5F62;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x652F;&#x6301;&#x5305;&#x62EC;java,C#,C/C++,PL/SQL,Cobol,JavaScrip,Groovy&#x7B49;&#x7B49;&#x4E8C;&#x5341;&#x51E0;&#x79CD;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x7684;&#x4EE3;&#x7801;&#x8D28;&#x91CF;&#x7BA1;&#x7406;&#x4E0E;&#x68C0;&#x6D4B;&#x3002; &#x5B89;&#x88C5;&#x524D;&#x51C6;&#x5907; Centos 7.1 &#xFF0C;&#x5DF2;&#x5173;&#x95ED; iptables&#x3001;selinux &#x5185;&#x7F51;gitlab&#x90E8;&#x7F72;&#xFF0C;&#x63A8;&#x8350;&#x6587;&#x7AE0;&#xFF1A; &#x642D;&#x5EFA;&#x5185;&#x7F51;gitlab&#x4ED3;&#x5E93; &#x5B89;&#x88C5;JDK1.8&#xFF08;&#x8FD9;&#x91CC;&#x5C31;&#x6682;&#x4E0D;&#x6F14;&#x793A;&#xFF09; jenkins&#x90E8;&#x7F72;&#xFF0C;&#x63A8;&#x8350;&#x6587;&#x7AE0;: &#x5B89;&#x88C5;MySQL&#x6570;&#x636E;&#x5E93;&#xFF08;&#x63A8;&#x8350;&#x7248;&#x672C;5.6+&#xFF09; sonarqube &#x5B89;&#x88C5; &#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x5305;&#x5B98;&#x7F51;&#xFF1A; https://www.sonarqube.org/downloads/1234cd /tmpwget https://sonarsource.bintray.com/Distribution/sonarqube/sonarqube-5.6.6.zipmkdir /usr/local/sonarunzip /tmp/sonarqube-5.6.6.zip -d /usr/local/sonar &#x914D;&#x7F6E;sonar&#x542F;&#x52A8;&#x811A;&#x672C;12345678910111213141516171819vim /etc/init.d/sonar#!/bin/sh## rc file for SonarQube## chkconfig: 345 96 10# description: SonarQube system (www.sonarsource.org)#### BEGIN INIT INFO# Provides: sonar# Required-Start: $network# Required-Stop: $network# Default-Start: 3 4 5# Default-Stop: 0 1 2 6# Short-Description: SonarQube system (www.sonarsource.org)# Description: SonarQube system (www.sonarsource.org)### END INIT INFO/usr/bin/sonar $* 123chmod +x /etc/init.d/sonarln -s /usr/local/sonar/sonarqube-5.6.6/bin/linux-x86-64/sonar.sh /usr/sbin/sonarchkconfig sonar on &#x6570;&#x636E;&#x5E93;&#x914D;&#x7F6E;1234CREATE DATABASE sonar CHARACTER SET utf8 COLLATE utf8_general_ci;GRANT ALL PRIVILEGES ON sonar.* TO &apos;sonar&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;123456&apos; WITH GRANT OPTION;GRANT ALL PRIVILEGES ON sonar.* TO &apos;sonar&apos;@&apos;127.0.0.1&apos; IDENTIFIED BY &apos;123456&apos; WITH GRANT OPTION;FLUSH PRIVILEGES; &#x914D;&#x7F6E;sonar&#x53C2;&#x6570;12345678cd /usr/local/sonar/sonarqube-5.6.6/confcp sonar.properties{,.bak}vim sonar.propertiessonar.jdbc.username=sonarsonar.jdbc.password=123456sonar.jdbc.url=jdbc:mysql://10.204.220.4:3306/sonar?useUnicode=true&amp;characterEncoding=utf8&amp;rewriteBatchedStatements=true&amp;useConfigs=maxPerformance# &#x8FD9;&#x91CC;&#x6211;&#x53EA;&#x4FEE;&#x6539;&#x4E86;&#x4EE5;&#x4E0A;3&#x9879;&#xFF0C;&#x5176;&#x4ED6;&#x914D;&#x7F6E;&#x4FEE;&#x6539;&#x8BF7;&#x53C2;&#x8003; https://docs.sonarqube.org/display/SONAR/Installing+the+Server &#x5B89;&#x88C5;SonarQube Scanner&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A; https://sonarsource.bintray.com/Distribution/sonar-scanner-cli/1234567891011cd /tmpwget https://sonarsource.bintray.com/Distribution/sonar-scanner-cli/sonar-scanner-2.8.zipunzip sonar-scanner-2.8.zip -d /usr/local/sonar/ln -s /usr/local/sonar/sonar-scanner-2.8/bin/sonar-scanner /usr/bin/sonar-scannercd /usr/local/sonar/sonar-scanner-2.8/confcp sonar-scanner.properties{,.bak}vim sonar-scanner.propertiessonar.jdbc.url=jdbc:mysql://10.204.220.4:3306/sonar?useUnicode=true&amp;characterEncoding=utf8&amp;rewriteBatchedStatements=true&amp;useConfigs=maxPerformancesonar.jdbc.username=sonarsonar.jdbc.password=123456 &#x5B89;&#x88C5;SonarQube runner&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A; http://repo1.maven.org/maven2/org/codehaus/sonar/runner/sonar-runner-dist/1234567891011cd /tmpwget http://repo1.maven.org/maven2/org/codehaus/sonar/runner/sonar-runner-dist/2.4/sonar-runner-dist-2.4.zipunzip /tmp/sonar-runner-dist-2.4.zip -d /usr/bin/sonarln -s /usr/local/sonar/sonar-runner-2.4/bin/sonar-runner /usr/bin/sonar-runnercd /usr/local/sonar/sonar-runner-2.4/confcp sonar-runner.properties{,.bak}vim sonar-runner.propertiessonar.jdbc.url=jdbc:mysql://10.204.220.4:3306/sonar?useUnicode=true&amp;characterEncoding=utf8&amp;rewriteBatchedStatements=true&amp;useConfigs=maxPerformancesonar.jdbc.username=sonarsonar.jdbc.password=123456 &#x6DFB;&#x52A0;&#x73AF;&#x5883;&#x53D8;&#x91CF;123456vim /etc/profile.d/sonar.shexport SONAR_HOME=/usr/local/sonar/sonarqube-5.6.6export SONAR_RUNNER_HOME=/usr/local/sonar/sonar-runner-2.4export PATH=$SONAR_RUNNER_HOME/bin:$PATH. /etc/profile.d/sonar.sh &#x542F;&#x52A8;sonar1234/usr/sbin/sonar start/usr/sbin/sonar status# &#x9700;&#x8981;&#x7B49; 2-3 &#x5206;&#x949F;, &#x9996;&#x6B21;&#x542F;&#x52A8;&#x9700;&#x8981;&#x7A0D;&#x7B49;&#x4E00;&#x4E0B;ss -tanlp | grep 9000 &#x7528;&#x6D4F;&#x89C8;&#x5668;&#x767B;&#x5F55; http://IP:9000 &#x9ED8;&#x8BA4;&#x7528;&#x6237;&#x662F; admin admin &#x5B89;&#x88C5;&#x5FC5;&#x5907;&#x63D2;&#x4EF6;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53BB;&#x66F4;&#x65B0;&#x4E2D;&#x5FC3;&#x53EF;&#x4EE5;&#x5B89;&#x88C5;&#x4E2D;&#x6587;&#x5305;&#xFF0C;&#x70B9;&#x51FB;&#x67E5;&#x627E;&#x5B89;&#x88C5;&#x5373;&#x53EF; &#x8FD9;&#x91CC;&#x6211;&#x5B89;&#x88C5;&#x7684;&#x63D2;&#x4EF6;&#xFF1A; chinese &#x4E2D;&#x6587;&#x652F;&#x6301; php php&#x4EE3;&#x7801;&#x652F;&#x6301; Android Android&#x652F;&#x6301; &#x5B89;&#x88C5;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x91CD;&#x542F; sonarqube &#x670D;&#x52A1;&#xFF0C;&#x518D;&#x6B21;&#x8BBF;&#x95EE; http://ip:9000/ &#x5373;&#x53EF;&#x770B;&#x5230;&#x4E2D;&#x6587;&#x754C;&#x9762; &#x96C6;&#x6210;jenkins&#x914D;&#x7F6E; &#x8BBE;&#x7F6E;sonar &#x4E2D; token&#x7528; admin &#x7528;&#x6237;&#x767B;&#x9646; sonarQube&#xFF0C;&#x3010;&#x914D;&#x7F6E;&#x3011;&#x2013;&gt;&#x3010;&#x6743;&#x9650;&#x3011; &#x2013;&gt;&#x3010;&#x7528;&#x6237;&#x3011;&#x8F93;&#x5165;admin,&#x5F97;&#x5230;token,&#x590D;&#x5236;&#x6B64;token jenkins&#x5B89;&#x88C5;sonar&#x76F8;&#x5173;&#x63D2;&#x4EF6;&#x6253;&#x5F00;jenkins &#x3010;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x3011;&#x2013;&gt; &#x3010;&#x7BA1;&#x7406;&#x63D2;&#x4EF6;&#x3011; &#x67E5;&#x627E; sonar &#x76F8;&#x5173;&#x6240;&#x6709;&#x63D2;&#x4EF6;&#x8FD9;&#x91CC;&#x56E0;&#x4E3A;&#x6211;&#x4E4B;&#x524D;&#x90FD;&#x5B89;&#x88C5;&#x8FC7;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x6CA1;&#x6709;&#x663E;&#x793A;&#x76F8;&#x5173;&#x63D2;&#x4EF6;&#xFF0C;&#x5168;&#x90E8;&#x5B89;&#x88C5;&#x5373;&#x53EF; Jenkins&#x914D;&#x7F6E;Sonar&#x63D2;&#x4EF6;&#x70B9;&#x51FB;&#x3010;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x3011; &#x2013;&gt; &#x3010;&#x7CFB;&#x7EDF;&#x8BBE;&#x7F6E;]&#x3011; &#x914D;&#x7F6E; Sonar&#xFF0C;&#x8BBE;&#x7F6E;&#x5B8C;&#x4FDD;&#x5B58; &#x914D;&#x7F6E; Sonar Scanner&#x626B;&#x63CF;&#x5668;&#x70B9;&#x51FB;&#x3010;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x3011; &#x2013;&gt; &#x3010;Global Tool Configuration&#x3011; &#x6574;&#x5408;&#x6D4B;&#x8BD5;&#x5728;jenkins&#x4E2D;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#x9879;&#x76EE;&#xFF0C;&#x5176;&#x4E2D;&#x7684;jenkins&#x914D;&#x7F6E;&#x6BB5;&#x8BE6;&#x60C5;&#x53C2;&#x8003;&#x6211;&#x7684;jenkins&#x90E8;&#x7F72;&#x8FD9;&#x91CC;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x6784;&#x5EFA;&#x540E;&#x64CD;&#x4F5C;1234567sonar.projectKey=demosonar.projectName=java demosonar.projectVersion=1.0sonar.sources=./sonar.language=javasonar.dynamicAnalysis=falsesonar.sourceEncoding=UTF-8 &#x57FA;&#x672C;jenkins &#x7ED3;&#x5408; sonar &#x7684;&#x914D;&#x7F6E;&#x5B8C;&#x6210;&#x4E86;&#x3002;]]></content>
      <categories>
        <category>自动化</category>
      </categories>
      <tags>
        <tag>sonar</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[搭建内网gitlab仓库]]></title>
    <url>%2F%E6%90%AD%E5%BB%BA%E5%86%85%E7%BD%91gitlab%E4%BB%93%E5%BA%93.html</url>
    <content type="text"><![CDATA[GitLab &#x662F;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x4ED3;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x3002;&#x4F7F;&#x7528;Git&#x4F5C;&#x4E3A;&#x4EE3;&#x7801;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x5E76;&#x5728;&#x6B64;&#x57FA;&#x7840;&#x4E0A;&#x642D;&#x5EFA;&#x8D77;&#x6765;&#x7684;web&#x670D;&#x52A1;&#x3002; &#x90E8;&#x7F72;&#x73AF;&#x5883; &#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x8F6F;&#x4EF6; 123yum -y install curl policycoreutils openssh-server openssh-clients postfixsystemctl enable postfixsystemctl start postfix&#x914D;&#x7F6E;gitlab yum&#x6E90;12345678vim /etc/yum.repos.d/gitlab-ce.repo[gitlab-ce]name=gitlab-cebaseurl=http://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7repo_gpgcheck=0gpgcheck=0enabled=1gpgkey=https://packages.gitlab.com/gpg.key&#x5B89;&#x88C5;gitlab-ce1yum -y install gitlab-ce&#x914D;&#x7F6E;gitlab-ce123456789101112131415161718192021222324grep -v &quot;#&quot; /etc/gitlab/gitlab.rb | grep -v &quot;^$&quot;external_url &apos;http://42.159.144.159:9000&apos;unicorn[&apos;port&apos;] = 9001# &#x5B9A;&#x4E49;gitlab&#x76D1;&#x542C;&#x7684;&#x7AEF;&#x53E3;unicorn[&apos;listen&apos;] = &apos;0.0.0.0&apos;# &#x5B9A;&#x4E49;gitlab&#x7684;IPgitlab_rails[&apos;gitlab_email_enabled&apos;] = truegitlab_rails[&apos;smtp_enable&apos;] = truegitlab_rails[&apos;smtp_address&apos;] = &quot;smtp.mxhichina.com&quot;gitlab_rails[&apos;smtp_port&apos;] = 25gitlab_rails[&apos;smtp_user_name&apos;] = &quot;test@test.com&quot;gitlab_rails[&apos;smtp_password&apos;] = &quot;password&quot;gitlab_rails[&apos;smtp_domain&apos;] = &quot;smtp.mxhichina.com&quot;gitlab_rails[&apos;smtp_authentication&apos;] = &quot;plain&quot;gitlab_rails[&apos;smtp_enable_starttls_auto&apos;] = truegitlab_rails[&apos;gitlab_email_from&apos;] = &quot;test@test.com&quot;user[&apos;git_user_email&apos;] = &quot;test@test.com&quot;gitlab_rails[&apos;manage_backup_path&apos;] = true# &#x542F;&#x7528;gitlab&#x5907;&#x4EFD;&#x529F;&#x80FD;gitlab_rails[&apos;backup_path&apos;] = &quot;/data/gitlab_backup&quot;# gitlab&#x7684;&#x5907;&#x4EFD;gitlab_rails[&apos;backup_keep_time&apos;] = 2592000# gitlab&#x5907;&#x4EFD;&#x65F6;&#x95F4;&#xFF0C;&#x79D2;&#x4E3A;&#x5355;&#x4F4D;# &#x8FD9;&#x91CC;&#x7684;&#x90AE;&#x7BB1;&#x914D;&#x7F6E;&#x9700;&#x8981;&#x66FF;&#x6362;&#x4E3A;&#x81EA;&#x5DF1;&#x7684;&#x8F7D;&#x5165;&#x914D;&#x7F6E;&#x5E76;&#x542F;&#x52A8;&#x670D;&#x52A1;12gitlab-ctl reconfiguregitlab-ctl start&#x542F;&#x52A8;&#x5B8C;&#x6BD5;&#x4E4B;&#x540E;&#x8BBF;&#x95EE;&#x4E4B;&#x524D;&#x914D;&#x7F6E;&#x7684;IP+port&#x5373;&#x53EF;&#xFF0C;&#x9996;&#x6B21;&#x8BBF;&#x95EE;&#x9700;&#x8BBE;&#x7F6E;root&#x7528;&#x6237;&#x5BC6;&#x7801;&#x3002;&#x5907;&#x4EFD;&#x76F8;&#x5173; &#x5907;&#x4EFD;&#x5728; gitlab.rb &#x914D;&#x7F6E;&#x4E2D;&#x5F00;&#x542F;gitlab&#x5907;&#x4EFD;&#x5373;&#x53EF;&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x4E00;&#x4E2A;gitlab&#x5BC6;&#x94A5;&#x6587;&#x4EF6;&#x3002;&#x8FD9;&#x4E2A;&#x5BC6;&#x94A5;&#x5305;&#x542B;&#x4E86;&#x6570;&#x636E;&#x5E93;&#x52A0;&#x5BC6;&#x5BC6;&#x94A5;&#x548C;&#x5BC6;&#x94A5;&#x53D8;&#x91CF;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x80FD;&#x6062;&#x590D;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x90A3;&#x4E48;&#x7528;&#x6237;&#x7684;&#x5BC6;&#x7801;&#x5C31;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;gitlab&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x6253;&#x5F00;&#x9879;&#x76EE;&#x4F1A;&#x62A5;http 500&#x9519;&#x8BEF;&#x3002;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x989D;&#x5916;&#x5199;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#x6765;&#x5907;&#x4EFD;gitlab-secrets.json&#x6587;&#x4EF6;123456789101112#!/bin/bash# gitlab &#x5907;&#x4EFD;&#x811A;&#x672C;JSON_DIR=&apos;/data/gitlab_backup_json&apos;# gitlab&#x547D;&#x4EE4;&#x5907;&#x4EFD;/bin/gitlab-rake gitlab:backup:create# &#x5907;&#x4EFD;&#x914D;&#x7F6E;&#x5728; /etc/gitlab/gitlab.rb &#x6587;&#x4EF6;&#x4E2D;&#x914D;&#x7F6E;#&#x5907;&#x4EFD; json,&#x5426;&#x5219;&#x53EF;&#x80FD;&#x5728;&#x6062;&#x590D;&#x7684;&#x65F6;&#x5019;&#x5BFC;&#x81F4;&#x7528;&#x6237;&#x5BC6;&#x7801;&#x9519;&#x8BEF;&#x95EE;&#x9898;mkdir $JSON_DIR/`date +%F`cp /etc/gitlab/gitlab-secrets.json $JSON_DIR/`date +%F` &#x4E4B;&#x540E;&#x52A0;&#x5165;crontab&#x4EFB;&#x52A1;&#x5373;&#x53EF;&#x5B9E;&#x73B0;&#x6BCF;&#x5929;&#x5907;&#x4EFD; &#x6062;&#x590D;&#x6062;&#x590D;&#x5907;&#x4EFD;&#x64CD;&#x4F5C;&#x5982;&#x4E0B;1.&#x6839;&#x636E;&#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x7684;&#x7F16;&#x53F7;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x5373;&#x53EF;1gitlab-rake gitlab:backup:restore BACKUP=1470648720 2.&#x590D;&#x5236;gitlab-secrets.json&#x6587;&#x4EF6;&#x5230;/etc/gitlab/gitlab-secrets.json&#x76EE;&#x5F55;&#xFF0C;&#x4E0D;&#x7136;&#x6253;&#x5F00;gitlab&#x9879;&#x76EE;&#x4F1A;&#x62A5;500&#x9519;&#x8BEF;3.&#x91CD;&#x542F;gitlab&#x670D;&#x52A1;1gitlab-ctl restart]]></content>
      <categories>
        <category>自动化</category>
      </categories>
      <tags>
        <tag>gitlab</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jenkins自动化部署]]></title>
    <url>%2Fjenkins%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2.html</url>
    <content type="text"><![CDATA[&#x672C;&#x6587;&#x4E3B;&#x8981;&#x8BB0;&#x5F55;&#x7EBF;&#x4E0A;&#x7684;&#x81EA;&#x52A8;&#x5316;&#x53D1;&#x5E03;&#x7684;&#x6D41;&#x7A0B; &#x4EE3;&#x7801;&#x7BA1;&#x7406;gitlab &#x89C4;&#x8303;&#x6765;&#x8BF4;&#xFF0C;&#x4EFB;&#x4F55;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5FC5;&#x987B;&#x4E25;&#x683C;&#x4E0E; git &#x4ED3;&#x5E93;&#x4E00;&#x81F4;&#x3002;&#x5373;&#x4E00;&#x5207;&#x63D0;&#x4EA4;&#x5230; master&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5FC5;&#x987B;&#x77ED;&#x65F6;&#x95F4;&#x5185;&#x4E0A;&#x7EBF;&#xFF0C;&#x53CD;&#x8FC7;&#x6765;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5728;&#x8FD0;&#x884C;&#x7684;&#x4EE3;&#x7801;&#x4E00;&#x5B9A;&#x662F;&#x5728; git &#x4ED3;&#x5E93;&#x91CC;&#x7684;&#x3002; &#x5408;&#x7406;&#x4F7F;&#x7528; git &#x5206;&#x652F;&#x3002;master &#x5206;&#x652F;&#x8868;&#x793A;&#x5F53;&#x524D;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x4E0D;&#x662F;&#x8C01;&#x90FD;&#x53EF;&#x4EE5;&#x63D0;&#x4EA4;&#x7684;&#xFF0C;&#x5FC5;&#x987B;&#x662F;&#x6388;&#x6743;&#x4EBA;&#x5458;&#x624D;&#x80FD;&#x63D0;&#x4EA4;&#x4EE3;&#x7801;&#x5230; master&#x3002;&#x800C;&#x9879;&#x76EE;&#x4E2D;&#xFF0C;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;&#x5F00;&#x53D1;&#x5468;&#x671F;&#xFF0C;&#x8BBE;&#x5B9A;&#x591A;&#x4E2A; &#x5F00;&#x53D1;&#x7279;&#x6027; &#x5206;&#x652F;&#xFF0C;&#x4E00;&#x822C;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x63D0;&#x4EA4;&#x4EE3;&#x7801;&#x5230;&#x5BF9;&#x5E94;&#x7684; &#x5F00;&#x53D1;&#x7279;&#x6027; &#x5206;&#x652F;&#x3002;&#x6D4B;&#x8BD5;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x628A;&#x7279;&#x6027;&#x5206;&#x652F;&#x53D1;&#x5E03;&#x5230;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;&#xFF0C;&#x6D4B;&#x8BD5;&#x4E0D;&#x901A;&#x8FC7;&#xFF0C;&#x7EE7;&#x7EED;&#x4FEE;&#x6539;&#x7279;&#x6027;&#x5206;&#x652F;&#x4EE3;&#x7801;&#x63D0;&#x4EA4;&#x91CD;&#x65B0;&#x53D1;&#x5E03;&#x5230;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;&#x3002;&#x6D4B;&#x8BD5;&#x9A8C;&#x6536;&#x901A;&#x8FC7;&#xFF0C;merge &#x5230; master &#x5206;&#x652F;&#xFF0C;&#x518D;&#x628A; master &#x5206;&#x652F;&#x53D1;&#x5E03;&#x5230;&#x9884;&#x53D1;&#x5E03;&#x73AF;&#x5883;&#x6D4B;&#x8BD5;&#xFF0C;&#x9A8C;&#x6536;&#x901A;&#x8FC7;&#xFF0C;&#x5C06; master &#x5206;&#x652F;&#x53D1;&#x5E03;&#x5230;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x3002; &#x76F8;&#x5173;&#x6587;&#x7AE0;&#xFF1A; &#x642D;&#x5EFA;&#x5185;&#x7F51;gitlab&#x4ED3;&#x5E93; &#x81EA;&#x52A8;&#x5316;&#x53D1;&#x5E03;ansible &#x81EA;&#x52A8;&#x5316;&#x7684;&#x90E8;&#x7F72;&#x4E3B;&#x8981;&#x5C31;&#x662F;&#x670D;&#x52A1;&#x5668;&#x4EE3;&#x7801;&#x7684;&#x66F4;&#x65B0;&#xFF1A;java&#x3001;php PHP&#x90E8;&#x7F72;&#x53D1;&#x5E03;&#x7684;&#x6548;&#x7387;&#x4E5F;&#x76F8;&#x5BF9;&#x7B80;&#x5355;&#xFF0C;PHP&#x6587;&#x4EF6;&#x53D1;&#x5230;&#x7EBF;&#x4E0A;&#x5373;&#x53EF;&#x8FD0;&#x884C;&#xFF0C;&#x4E0D;&#x7528;&#x590D;&#x6742;&#x7684;&#x7F16;&#x8BD1;&#x3001;&#x6253;&#x5305;&#x548C;&#x542F;&#x505C;&#x52A8;&#x4F5C;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x83B7;&#x53D6;&#x5230;&#x6700;&#x65B0;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x4E00;&#x4E2A;rsync&#x64CD;&#x4F5C;&#x5373;&#x53EF;&#x3002;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;Java&#x5E94;&#x7528;&#x6765;&#x8BF4;&#x6574;&#x4E2A;&#x73AF;&#x8282;&#x5C31;&#x6CA1;&#x6709;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#x4E86;&#xFF0C;Java&#x6587;&#x4EF6;&#x6D89;&#x53CA;&#x5230;&#x7F16;&#x8BD1;&#x3001;&#x4E8C;&#x65B9;&#x5305;&#x3001;&#x4E09;&#x65B9;&#x5305;&#x4F9D;&#x8D56;&#xFF0C;&#x7136;&#x540E;&#x7F16;&#x8BD1;&#x6253;&#x5305;&#x540E;&#xFF0C;&#x5C06;&#x8F6F;&#x4EF6;&#x5305;&#x53D1;&#x5E03;&#x5230;&#x5236;&#x5B9A;&#x7684;&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x7136;&#x540E;&#x8FD8;&#x8981;&#x91CD;&#x542F;Java&#x8FDB;&#x7A0B;&#xFF0C;&#x6700;&#x65B0;&#x7684;&#x6587;&#x4EF6;&#x624D;&#x80FD;&#x5F97;&#x4EE5;&#x6267;&#x884C;&#xFF0C;&#x671F;&#x95F4;&#x8FD8;&#x4F1A;&#x6D89;&#x53CA;&#x670D;&#x52A1;&#x7684;&#x6CE8;&#x518C;&#x548C;&#x4E0B;&#x7EBF;&#x95EE;&#x9898;&#x7B49;&#x7B49;&#xFF0C;&#x8FD9;&#x4E9B;&#x90FD;&#x662F;&#x9700;&#x8981;&#x8003;&#x8651;&#x7684;&#x3002; &#x76F8;&#x5173;&#x6587;&#x7AE0;&#xFF1A;ansible&#x90E8;&#x7F72;&#x811A;&#x672C; &#x9879;&#x76EE;&#x6784;&#x5EFA;mavenjava&#x548C;Android&#x4EE3;&#x7801;&#x90FD;&#x4F1A;&#x6709;&#x4E00;&#x4E9B;jar&#x5305;&#x7684;&#x4F9D;&#x8D56;&#xFF0C;&#x8FD9;&#x4E2A;&#x5305;&#x5728;&#x7F16;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x53BB;&#x4E2D;&#x592E;&#x4ED3;&#x5E93;&#x4E0B;&#x8F7D;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x4F1A;&#x6709;&#x4E00;&#x4E9B;&#x5185;&#x90E8;&#x7684;jar&#x5305;&#x5B58;&#x653E;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5C31;&#x9700;&#x8981;&#x5728;&#x4F01;&#x4E1A;&#x5185;&#x90E8;&#x6709;&#x4E00;&#x4E2A;&#x79C1;&#x670D;&#x4E86;&#x3002; &#x76F8;&#x5173;&#x6587;&#x7AE0;&#xFF1A;maven&#x4ECB;&#x7ECD;&#x53CA;&#x79C1;&#x670D;&#x642D;&#x5EFA; &#x96C6;&#x6210;&#x5DE5;&#x5177;jenkinsjenkins&#x662F;&#x4E00;&#x4E2A;&#x6301;&#x7EED;&#x96C6;&#x6210;&#x5DE5;&#x5177;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x4E00;&#x4E2A;&#x8C03;&#x5EA6;&#x5E73;&#x53F0;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x7684;&#x76EE;&#x7684;&#x53EA;&#x662F;&#x81EA;&#x52A8;&#x5316;&#x90E8;&#x7F72;&#x7684;&#x8BDD;&#xFF0C;&#x76F4;&#x63A5;&#x81EA;&#x5DF1;&#x5199;&#x811A;&#x672C;&#x6216;&#x8005;&#x7528;Ansible&#x3001;Salt&#x3001;Puppet&#x3001;Chef&#x3001;Fabric&#x7B49;&#x81EA;&#x52A8;&#x5316;&#x90E8;&#x7F72;&#x5DE5;&#x5177;&#x5C31;&#x884C;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x662F;&#x60F3;&#x5728;job&#x4E2D;&#x52A0;&#x5165;&#x81EA;&#x52A8;&#x8BDD;&#x90E8;&#x7F72;&#x6D41;&#x7A0B;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x5148;&#x5199;&#x597D;&#x81EA;&#x52A8;&#x5316;&#x90E8;&#x7F72;&#x811A;&#x672C;&#x7136;&#x540E;&#x5728;jenkins&#x6784;&#x5EFA;&#x4EFB;&#x52A1;&#x7684;Execute Shell&#x4E2D;&#x8C03;&#x7528;&#x76F8;&#x5E94;&#x7684;Script&#x3002; &#x76F8;&#x5173;&#x6587;&#x7AE0;: jenkins&#x90E8;&#x7F72;&#x53CA;&#x6784;&#x5EFA;&#x65B9;&#x5F0F; &#x4EE3;&#x7801;&#x8D28;&#x91CF;&#x7BA1;&#x7406;sonarqube&#x73B0;&#x5728;&#x7684;&#x4EE3;&#x7801;&#x8D28;&#x91CF;&#x7BA1;&#x7406;&#xFF0C;&#x65E0;&#x975E;&#x5C31;&#x662F;&#x4EBA;&#x4E3A;cide review&#xFF0C;&#x548C;&#x7B2C;&#x4E09;&#x65B9;&#x4EE3;&#x7801;&#x626B;&#x63CF;&#x5DE5;&#x5177;&#xFF08;&#x5BA1;&#x6838;&#x7684;&#x7ED3;&#x679C;&#x8FD8;&#x9700;&#x8981;&#x4EBA;&#x4E3A;&#x7684;&#x9A8C;&#x8BC1;&#xFF09;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x662F;&#x901A;&#x8FC7; jenkins &#x7ED3;&#x5408; sonarqube&#x505A;&#x7684;&#x4E00;&#x4E2A;&#x4EE3;&#x7801;&#x8D28;&#x91CF;&#x5206;&#x6790;&#x5E73;&#x53F0;&#x3002; &#x76F8;&#x5173;&#x6587;&#x7AE0;&#xFF1A; jenkins+sonar &#x4EE3;&#x7801;&#x8D28;&#x91CF;&#x5206;&#x6790;]]></content>
      <categories>
        <category>自动化</category>
      </categories>
      <tags>
        <tag>自动化</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[解决故障的处理思路]]></title>
    <url>%2F%E8%A7%A3%E5%86%B3%E6%95%85%E9%9A%9C%E7%9A%84%E5%A4%84%E7%90%86%E6%80%9D%E8%B7%AF.html</url>
    <content type="text"><![CDATA[&#x5728;&#x6709;&#x90A3;&#x4E48;&#x4E00;&#x77AC;&#x95F4;&#xFF0C;&#x9047;&#x5230;&#x670D;&#x52A1;&#x5668;&#x6545;&#x969C;&#x53EF;&#x80FD;&#x4F1A;&#x624B;&#x8DB3;&#x65E0;&#x63AA;&#xFF0C;&#x5B8C;&#x5168;&#x4E0D;&#x77E5;&#x9053;&#x81EA;&#x5DF1;&#x5E94;&#x8BE5;&#x5E72;&#x4E9B;&#x4EC0;&#x4E48;&#xFF0C;&#x8BE5;&#x5982;&#x4F55;&#x5904;&#x7406;&#x3002;&#x8FD9;&#x91CC;&#x5C31;&#x7B80;&#x5355;&#x8BB0;&#x5F55;&#x4E00;&#x4E0B;&#x89E3;&#x51B3;&#x670D;&#x52A1;&#x5668;&#x6545;&#x969C;&#x7684;&#x601D;&#x8DEF;&#xFF0C;&#x4EE5;&#x4FBF;&#x4ECA;&#x540E;&#x8FC5;&#x901F;&#x5B9A;&#x4F4D;&#x95EE;&#x9898;&#x3002; &#x95EE;&#x9898;&#x7684;&#x524D;&#x56E0;&#x540E;&#x679C;&#x5C3D;&#x53EF;&#x80FD;&#x641E;&#x6E05;&#x695A;&#x95EE;&#x9898;&#x7684;&#x524D;&#x56E0;&#x540E;&#x679C;&#xFF0C;&#x4E0D;&#x8981;&#x4E00;&#x4E0B;&#x5B50;&#x5C31;&#x624E;&#x5230;&#x670D;&#x52A1;&#x5668;&#x524D;&#x9762;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x5148;&#x641E;&#x660E;&#x767D;&#x5BF9;&#x8FD9;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x6709;&#x591A;&#x5C11;&#x5DF2;&#x77E5;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x8FD8;&#x6709;&#x6545;&#x969C;&#x7684;&#x5177;&#x4F53;&#x60C5;&#x51B5;&#x3002;&#x4E0D;&#x7136;&#x4F60;&#x5F88;&#x53EF;&#x80FD;&#x5C31;&#x662F;&#x5728;&#x65E0;&#x7684;&#x653E;&#x77E2;&#x5FC5;&#x987B;&#x641E;&#x6E05;&#x695A;&#x7684;&#x95EE;&#x9898;&#x6709;&#xFF1A; &#x6545;&#x969C;&#x7684;&#x8868;&#x73B0;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x65E0;&#x54CD;&#x5E94;&#xFF1F;&#x62A5;&#x9519;&#xFF1F; &#x6545;&#x969C;&#x662F;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x53D1;&#x73B0;&#x7684;&#xFF1F; &#x6545;&#x969C;&#x662F;&#x5426;&#x53EF;&#x91CD;&#x73B0;&#xFF1F; &#x6709;&#x6CA1;&#x6709;&#x51FA;&#x73B0;&#x7684;&#x89C4;&#x5F8B;&#xFF08;&#x6BD4;&#x5982;&#x6BCF;&#x5C0F;&#x65F6;&#x51FA;&#x73B0;&#x4E00;&#x6B21;&#xFF09;&#xFF1F; &#x6700;&#x540E;&#x4E00;&#x6B21;&#x5BF9;&#x6574;&#x4E2A;&#x5E73;&#x53F0;&#x8FDB;&#x884C;&#x66F4;&#x65B0;&#x7684;&#x5185;&#x5BB9;&#x662F;&#x4EC0;&#x4E48;&#xFF08;&#x4EE3;&#x7801;&#x3001;&#x670D;&#x52A1;&#x5668;&#x7B49;&#xFF09;&#xFF1F; &#x6545;&#x969C;&#x5F71;&#x54CD;&#x7684;&#x7279;&#x5B9A;&#x7528;&#x6237;&#x7FA4;&#x662F;&#x4EC0;&#x4E48;&#x6837;&#x7684;(&#x5DF2;&#x767B;&#x5F55;&#x7684;, &#x9000;&#x51FA;&#x7684;, &#x67D0;&#x4E2A;&#x5730;&#x57DF;&#x7684;&#x2026;)&#xFF1F; &#x57FA;&#x7840;&#x67B6;&#x6784;&#xFF08;&#x7269;&#x7406;&#x7684;&#x3001;&#x903B;&#x8F91;&#x7684;&#xFF09;&#x7684;&#x6587;&#x6863;&#x662F;&#x5426;&#x80FD;&#x627E;&#x5230;? &#x662F;&#x5426;&#x6709;&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#x53EF;&#x7528;? &#x662F;&#x5426;&#x6709;&#x65E5;&#x5FD7;&#x53EF;&#x4EE5;&#x67E5;&#x770B;? &#x6709;&#x8C01;&#x5728;?123wlastwho /var/log/wtmp &#x7528;&#x8FD9;&#x4E09;&#x4E2A;&#x547D;&#x4EE4;&#x770B;&#x770B;&#x90FD;&#x6709;&#x8C01;&#x5728;&#x7EBF;&#xFF0C;&#x6709;&#x54EA;&#x4E9B;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x8FC7;&#x3002; &#x4E4B;&#x524D;&#x53D1;&#x751F;&#x4E86;&#x4EC0;&#x4E48;?1history &#x67E5;&#x770B;&#x4E00;&#x4E0B;&#x4E4B;&#x524D;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x6267;&#x884C;&#x8FC7;&#x7684;&#x547D;&#x4EE4;&#x3002;&#x770B;&#x4E00;&#x4E0B;&#x603B;&#x662F;&#x6CA1;&#x9519;&#x7684;&#xFF0C;&#x52A0;&#x4E0A;&#x524D;&#x9762;&#x770B;&#x7684;&#x8C01;&#x767B;&#x5F55;&#x8FC7;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x5E94;&#x8BE5;&#x6709;&#x70B9;&#x7528;&#x3002; &#x73B0;&#x5728;&#x5728;&#x8FD0;&#x884C;&#x7684;&#x8FDB;&#x7A0B;&#x662F;&#x5565;?12pstree -aps aux &#x8FD9;&#x90FD;&#x662F;&#x67E5;&#x770B;&#x73B0;&#x6709;&#x8FDB;&#x7A0B;&#x7684;&#x3002; ps aux &#x7684;&#x7ED3;&#x679C;&#x6BD4;&#x8F83;&#x6742;&#x4E71;&#xFF0C; pstree -a &#x7684;&#x7ED3;&#x679C;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x660E;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;&#x8FDB;&#x7A0B;&#x53CA;&#x76F8;&#x5173;&#x7528;&#x6237;&#x3002; &#x76D1;&#x542C;&#x7684;&#x7F51;&#x7EDC;&#x670D;&#x52A1;1netstat -auntlp &#x627E;&#x5230;&#x6240;&#x6709;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x68C0;&#x67E5;&#x5B83;&#x4EEC;&#x662F;&#x5426;&#x5E94;&#x8BE5;&#x8FD0;&#x884C;&#x3002;&#x67E5;&#x770B;&#x5404;&#x4E2A;&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x3002; CPU &#x548C;&#x5185;&#x5B58;123free -muptimetop/htop &#x6CE8;&#x610F;&#x4EE5;&#x4E0B;&#x95EE;&#x9898;: &#x8FD8;&#x6709;&#x7A7A;&#x4F59;&#x7684;&#x5185;&#x5B58;&#x5417;? &#x670D;&#x52A1;&#x5668;&#x662F;&#x5426;&#x6B63;&#x5728;&#x5185;&#x5B58;&#x548C;&#x786C;&#x76D8;&#x4E4B;&#x95F4;&#x8FDB;&#x884C;swap? &#x8FD8;&#x6709;&#x5269;&#x4F59;&#x7684;CPU&#x5417;? &#x670D;&#x52A1;&#x5668;&#x662F;&#x51E0;&#x6838;&#x7684;? &#x662F;&#x5426;&#x6709;&#x67D0;&#x4E9B;CPU&#x6838;&#x8D1F;&#x8F7D;&#x8FC7;&#x591A;&#x4E86;? &#x670D;&#x52A1;&#x5668;&#x6700;&#x5927;&#x7684;&#x8D1F;&#x8F7D;&#x6765;&#x81EA;&#x4EC0;&#x4E48;&#x5730;&#x65B9;? &#x5E73;&#x5747;&#x8D1F;&#x8F7D;&#x662F;&#x591A;&#x5C11;? &#x786C;&#x4EF6;123lspcidmidecodeethtool &#x6709;&#x5F88;&#x591A;&#x670D;&#x52A1;&#x5668;&#x53EF;&#x80FD;&#x662F;&#x786C;&#x4EF6;&#x6545;&#x969C;&#xFF0C;&#x5177;&#x4F53;&#x770B;&#x4E00;&#x4E0B;: RAID &#x5361; (&#x662F;&#x5426;&#x5E26;BBU&#x5907;&#x7528;&#x7535;&#x6C60;?) CPU&#x3001;&#x7A7A;&#x4F59;&#x7684;&#x5185;&#x5B58;&#x63D2;&#x69FD;? &#x7F51;&#x5361;&#x662F;&#x5426;&#x8BBE;&#x7F6E;&#x597D;? &#x662F;&#x5426;&#x6B63;&#x8FD0;&#x884C;&#x5728;&#x534A;&#x53CC;&#x5DE5;&#x72B6;&#x6001;? &#x901F;&#x5EA6;&#x662F;10MBps? &#x6709;&#x6CA1;&#x6709; TX/RX &#x62A5;&#x9519;? IO&#x6027;&#x80FD;1234iostat -kx 2vmstat 2 10mpstat 2 10dstat --top-io --top-bio &#x5177;&#x4F53;&#x5173;&#x6CE8;&#x4EE5;&#x4E0B;&#x95EE;&#x9898;: &#x662F;&#x5426;&#x5F00;&#x542F;&#x4E86;swap&#x4EA4;&#x6362;&#x6A21;&#x5F0F; (si/so)? CPU&#x88AB;&#x8C01;&#x5360;&#x7528;&#xFF1A;&#x7CFB;&#x7EDF;&#x8FDB;&#x7A0B;? &#x7528;&#x6237;&#x8FDB;&#x7A0B;? &#x865A;&#x62DF;&#x673A;? &#x670D;&#x52A1;&#x5668;&#x786C;&#x76D8;&#x662F;&#x5426;&#x5DF2;&#x6EE1;? &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;12345mountcat /etc/fstabvgs/pvs/lvsdf -hlsof &#x5177;&#x4F53;&#x5173;&#x6CE8;&#x4EE5;&#x4E0B;&#x95EE;&#x9898;: &#x4E00;&#x5171;&#x6302;&#x8F7D;&#x4E86;&#x591A;&#x5C11;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;? &#x6709;&#x6CA1;&#x6709;&#x67D0;&#x4E2A;&#x670D;&#x52A1;&#x4E13;&#x7528;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;? \ &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x6302;&#x8F7D;&#x9009;&#x9879;&#x662F;&#x4EC0;&#x4E48;&#xFF1A; noatime? default? &#x6709;&#x6CA1;&#x6709;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x88AB;&#x91CD;&#x65B0;&#x6302;&#x8F7D;&#x4E3A;&#x53EA;&#x8BFB;&#x6A21;&#x5F0F;&#x4E86;&#xFF1F; &#x662F;&#x5426;&#x6709;&#x5927;&#x6587;&#x4EF6;&#x88AB;&#x5220;&#x9664;&#x4F46;&#x6CA1;&#x6709;&#x6E05;&#x7A7A;? &#x5982;&#x679C;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x4F60;&#x662F;&#x5426;&#x8FD8;&#x6709;&#x7A7A;&#x95F4;&#x6765;&#x6269;&#x5C55;&#x4E00;&#x4E2A;&#x5206;&#x533A;&#xFF1F; &#x5185;&#x6838;&#x3001;&#x4E2D;&#x65AD;&#x548C;&#x7F51;&#x7EDC;1234sysctl -a | grep ...cat /proc/interruptscat /proc/net/ip_conntrack /* may take some time on busy servers */ss -s &#x5177;&#x4F53;&#x5173;&#x6CE8;&#x4EE5;&#x4E0B;&#x95EE;&#x9898;: &#x5185;&#x6838;&#x662F;&#x5426;&#x505A;&#x4EC0;&#x4E48;&#x76F8;&#x5173;&#x4F18;&#x5316;&#xFF1F; &#x4F60;&#x7684;&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;&#x662F;&#x5426;&#x662F;&#x5747;&#x8861;&#x5730;&#x5206;&#x914D;&#x7ED9;CPU&#x5904;&#x7406;&#xFF0C;&#x8FD8;&#x662F;&#x4F1A;&#x6709;&#x67D0;&#x4E2A;CPU&#x7684;&#x6838;&#x56E0;&#x4E3A;&#x5927;&#x91CF;&#x7684;&#x7F51;&#x7EDC;&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;&#x6216;&#x8005;RAID&#x8BF7;&#x6C42;&#x800C;&#x8FC7;&#x8F7D;&#x4E86;&#xFF1F; &#x5728;&#x4E0D;&#x540C;&#x72B6;&#x6001;&#x4E0B;(TIME_WAIT, &#x2026;)TCP&#x8FDE;&#x63A5;&#x65F6;&#x95F4;&#x7684;&#x8BBE;&#x7F6E;&#x662F;&#x600E;&#x6837;&#x7684;&#xFF1F; &#x7CFB;&#x7EDF;&#x65E5;&#x5FD7;1234dmesgless /var/log/messagesless /var/log/secureless /var/log/auth &#x5177;&#x4F53;&#x5173;&#x6CE8;&#x4EE5;&#x4E0B;&#x95EE;&#x9898;: &#x67E5;&#x770B;&#x9519;&#x8BEF;&#x548C;&#x8B66;&#x544A;&#x6D88;&#x606F;&#xFF0C;&#x6BD4;&#x5982;&#x770B;&#x770B;&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x591A;&#x5173;&#x4E8E;&#x8FDE;&#x63A5;&#x6570;&#x8FC7;&#x591A;&#x5BFC;&#x81F4;&#xFF1F; &#x770B;&#x770B;&#x662F;&#x5426;&#x6709;&#x786C;&#x4EF6;&#x9519;&#x8BEF;&#x6216;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x9519;&#x8BEF;? &#x5B9A;&#x65F6;&#x4EFB;&#x52A1;12ls /etc/cron* + catfor user in $(cat /etc/passwd | cut -f1 -d:); do crontab -l -u $user; done &#x5177;&#x4F53;&#x5173;&#x6CE8;&#x4EE5;&#x4E0B;&#x95EE;&#x9898;: &#x662F;&#x5426;&#x6709;&#x67D0;&#x4E2A;&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;&#x8FD0;&#x884C;&#x8FC7;&#x4E8E;&#x9891;&#x7E41;? &#x662F;&#x5426;&#x6709;&#x4E9B;&#x7528;&#x6237;&#x63D0;&#x4EA4;&#x4E86;&#x9690;&#x85CF;&#x7684;&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;? &#x5728;&#x51FA;&#x73B0;&#x6545;&#x969C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x662F;&#x5426;&#x6B63;&#x597D;&#x6709;&#x67D0;&#x4E2A;&#x5907;&#x4EFD;&#x4EFB;&#x52A1;&#x5728;&#x6267;&#x884C;&#xFF1F; &#x5E94;&#x7528;&#x7CFB;&#x7EDF;&#x65E5;&#x5FD7;&#x8FD9;&#x4E2A;&#x8981;&#x6D89;&#x53CA;&#x7684;&#x5C31;&#x6BD4;&#x8F83;&#x591A;&#x4E86;&#xFF0C;&#x4E0D;&#x8FC7;&#x4E00;&#x822C;&#x662F;&#x5E94;&#x7528;&#x6545;&#x969C;&#x6211;&#x4EEC;&#x67E5;&#x770B;&#x76F8;&#x5173;&#x7684;&#x5E94;&#x7528;&#x65E5;&#x5FD7;&#x5373;&#x53EF;&#x3002;&#x4F8B;&#x5982;&#xFF1A;Apache &amp; Nginx; &#x67E5;&#x627E;&#x8BBF;&#x95EE;&#x548C;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;, &#x76F4;&#x63A5;&#x627E; 5xx &#x9519;&#x8BEF;, &#x518D;&#x770B;&#x770B;&#x662F;&#x5426;&#x6709; limit_zone &#x9519;&#x8BEF;&#x3002;MySQL; &#x5728;mysql.log&#x627E;&#x9519;&#x8BEF;&#x6D88;&#x606F;&#xFF0C;&#x770B;&#x770B;&#x6709;&#x6CA1;&#x6709;&#x7ED3;&#x6784;&#x635F;&#x574F;&#x7684;&#x8868;&#xFF0C; &#x662F;&#x5426;&#x6709;innodb&#x4FEE;&#x590D;&#x8FDB;&#x7A0B;&#x5728;&#x8FD0;&#x884C;&#xFF0C;&#x662F;&#x5426;&#x6709;disk/index/query &#x95EE;&#x9898;.PHP-FPM; &#x5982;&#x679C;&#x8BBE;&#x5B9A;&#x4E86; php-slow &#x65E5;&#x5FD7;, &#x76F4;&#x63A5;&#x627E;&#x9519;&#x8BEF;&#x4FE1;&#x606F; (php, mysql, memcache, &#x2026;)&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x8BBE;&#x5B9A;&#xFF0C;&#x8D76;&#x7D27;&#x8BBE;&#x5B9A;&#x3002;HA-Proxy; &#x540E;&#x7AEF;&#x7684;&#x72B6;&#x51B5;&#x5982;&#x4F55;&#xFF1F;&#x5065;&#x5EB7;&#x72B6;&#x51B5;&#x68C0;&#x67E5;&#x662F;&#x5426;&#x6210;&#x529F;&#xFF1F;&#x662F;&#x524D;&#x7AEF;&#x8FD8;&#x662F;&#x540E;&#x7AEF;&#x7684;&#x961F;&#x5217;&#x5927;&#x5C0F;&#x8FBE;&#x5230;&#x6700;&#x5927;&#x503C;&#x4E86;&#xFF1F; &#x7ED3;&#x8BBA;&#x7ECF;&#x8FC7;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x5904;&#x7406;&#x4E4B;&#x540E;&#xFF0C;&#x5E94;&#x8BE5;&#x5BF9;&#x5982;&#x4E0B;&#x60C5;&#x51B5;&#x6BD4;&#x8F83;&#x6E05;&#x695A;&#x4E86;&#xFF1A; &#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x8FD0;&#x884C;&#x7684;&#x90FD;&#x662F;&#x4E9B;&#x5565;&#xFF1F; &#x8FD9;&#x4E2A;&#x6545;&#x969C;&#x770B;&#x8D77;&#x6765;&#x662F;&#x548C; IO/&#x786C;&#x4EF6;/&#x7F51;&#x7EDC; &#x6216;&#x8005; &#x7CFB;&#x7EDF;&#x914D;&#x7F6E; (&#x6709;&#x95EE;&#x9898;&#x7684;&#x4EE3;&#x7801;&#x3001;&#x7CFB;&#x7EDF;&#x5185;&#x6838;&#x8C03;&#x4F18;, &#x2026;)&#x76F8;&#x5173;&#xFF1F; &#x8FD9;&#x4E2A;&#x6545;&#x969C;&#x662F;&#x5426;&#x6709;&#x4F60;&#x719F;&#x6089;&#x7684;&#x4E00;&#x4E9B;&#x7279;&#x5F81;&#xFF1F;&#x6BD4;&#x5982;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7D22;&#x5F15;&#x4F7F;&#x7528;&#x4E0D;&#x5F53;&#xFF0C;&#x6216;&#x8005;&#x592A;&#x591A;&#x7684;apache&#x540E;&#x53F0;&#x8FDB;&#x7A0B;&#xFF1F;]]></content>
      <categories>
        <category>故障记录</category>
      </categories>
      <tags>
        <tag>故障</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Tomcat-集群方案]]></title>
    <url>%2FTomcat-%E9%9B%86%E7%BE%A4%E6%96%B9%E6%A1%88.html</url>
    <content type="text"><![CDATA[&#x591A;&#x4E2A;tomcat&#x8981;&#x4E00;&#x8D77;&#x534F;&#x540C;&#x5DE5;&#x4F5C;&#x6709;&#x591A;&#x79CD;&#x529E;&#x6CD5;&#xFF0C;&#x8FD9;&#x91CC;&#x603B;&#x7ED3;&#x4E00;&#x4E0B;&#x51E0;&#x79CD;&#x65B9;&#x6848;&#x7684;&#x4F18;&#x7F3A;&#x70B9;&#xFF0C;&#x4EE5;&#x53CA;&#x5404;&#x81EA;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x3002; &#x96C6;&#x7FA4;&#x65B9;&#x6848; &#x65B9;&#x6848; &#x5B9E;&#x73B0;&#x65B9;&#x5F0F; &#x9002;&#x7528;&#x573A;&#x666F; &#x4F18;&#x70B9; &#x7F3A;&#x70B9; session sticky &#x57FA;&#x4E8E;&#x4E03;&#x5C42;&#x7684;&#x6E90;&#x5730;&#x5740;hash &#x5C0F;&#x578B;&#x89C4;&#x6A21; &#x914D;&#x7F6E;&#x7B80;&#x5355; &#x540E;&#x7AEF;&#x4EFB;&#x4F55;&#x8282;&#x70B9;&#x6389;&#x7EBF;&#xFF0C;session&#x4E22;&#x5931; session cluster tomcat&#x81EA;&#x5E26;&#x96C6;&#x7FA4;&#x65B9;&#x6848; &#x4E2D;&#x5C0F;&#x578B;&#x89C4;&#x6A21; &#x914D;&#x7F6E;&#x7B80;&#x5355; &#x5360;&#x7528;&#x5185;&#x5B58;&#x5927;&#xFF0C;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x8981;&#x6301;&#x6709;&#x6574;&#x4E2A;&#x96C6;&#x7FA4;&#x7684;&#x4F1A;&#x8BDD;&#x4FE1;&#x606F; session server &#x5229;&#x7528;memcached&#x6216;redis&#x5C06;session&#x96C6;&#x4E2D;&#x7BA1;&#x7406; &#x4EFB;&#x4F55;&#x89C4;&#x6A21; &#x6027;&#x80FD;&#x8F83;&#x597D; &#x914D;&#x7F6E;&#x590D;&#x6742; session stickey &#x4E3B;&#x673A;&#x540D; IP&#x5730;&#x5740; &#x7528;&#x9014; nginx 192.168.4.207 &#x524D;&#x7AEF;&#x8D1F;&#x8F7D; ip_hash tomcat1 192.168.4.208 &#x6D4B;&#x8BD5;&#x8282;&#x70B9;1 tomcat2 192.168.4.207 &#x6D4B;&#x8BD5;&#x8282;&#x70B9;2 &#x5229;&#x7528;nginx/haproxy/httpd&#x57FA;&#x4E8E;&#x8BBF;&#x95EE;ip&#x7684;hash&#x8DEF;&#x7531;&#x7B56;&#x7565;&#xFF0C;&#x4FDD;&#x8BC1;&#x8BBF;&#x95EE;&#x7684;ip&#x59CB;&#x7EC8;&#x88AB;&#x8DEF;&#x7531;&#x5230;&#x540C;&#x4E00;&#x4E2A;tomcat&#x4E0A;&#x3002; nginx&#x914D;&#x7F6E;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x7684;&#x662F;nginx1.8&#xFF0C;&#x5177;&#x4F53;&#x5B89;&#x88C5;&#x6B65;&#x9AA4;&#x6682;&#x4E14;&#x4E0D;&#x8868;&#x3002;1234567891011121314151617vim /etc/nginx/nginx.confhttp {... upstream tomcat_cluster { server 192.168.4.208:8080 weight=1; server 192.168.4.209:8080 weight=1; #ip_hash; #&#x8FD9;&#x91CC;&#x5148;&#x7981;&#x7528;ip hash&#xFF0C;&#x770B;&#x770B;&#x6709;&#x4EC0;&#x4E48;&#x6548;&#x679C; } ... server { location / { proxy_pass http://tomcat_cluster; } } ...... } tomcat&#x914D;&#x7F6E;&#x540C;&#x6837;&#x5B89;&#x88C5;&#x597D;JDK&#x548C;tomcat&#xFF0C;&#x5206;&#x522B;&#x5728;tomcat1&#x548C;tomcat2&#x7684;/webapps/ROOT&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;index.jsp&#x6587;&#x4EF6;&#x3002;12345678910111213141516171819vim index.jsp &lt;%@page language=&quot;java&quot; %&gt; &lt;html&gt; &lt;head&gt;&lt;title&gt;Tomcat111&lt;/title&gt;&lt;/head&gt; &lt;body&gt; &lt;h1&gt;&lt;font color=&quot;red&quot;&gt;TomcatA.chen-hao.com.cn&lt;/font&gt;&lt;/h1&gt; &lt;table align=&quot;centre&quot; border=&quot;1&quot;&gt; &lt;tr&gt; &lt;td&gt;Session ID&lt;/td&gt; &lt;% session.setAttribute(&quot;chen-hao.com.cn&quot;,&quot;chen-hao.com.cn&quot;); %&gt; &lt;td&gt;&lt;%= session.getId() %&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Created on&lt;/td&gt; &lt;td&gt;&lt;%= session.getCreationTime() %&gt;&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/body&gt; &lt;/html&gt; tomcat2 &#x9700;&#x4FEE;&#x6539;&lt;head&gt;&lt;title&gt;Tomcat222&lt;/title&gt;&lt;/head&gt;&#xFF0C;&#x5176;&#x4ED6;&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#x5373;&#x53EF;&#x3002; &#x9A8C;&#x8BC1;1 &#x6CE8;&#x91CA;&#x6389;ip hash&#xFF0C;&#x9A8C;&#x8BC1;&#x5982;&#x4E0B; &#x5F00;&#x542F;ip hash,&#x9A8C;&#x8BC1;&#x5982;&#x4E0B; session cluster &#x4E3B;&#x673A;&#x540D; IP&#x5730;&#x5740; &#x7528;&#x9014; nginx 192.168.4.207 &#x524D;&#x7AEF;&#x8D1F;&#x8F7D; &#x8F6E;&#x5E8F;&#x8C03;&#x5EA6; tomcat1 192.168.4.208 &#x6D4B;&#x8BD5;&#x8282;&#x70B9;1 tomcat2 192.168.4.207 &#x6D4B;&#x8BD5;&#x8282;&#x70B9;2 &#x4F7F;&#x7528;tomcat&#x81EA;&#x5E26;&#x7684;cluster&#x65B9;&#x5F0F;&#xFF0C;&#x591A;&#x4E2A;tomcat&#x95F4;&#x81EA;&#x52A8;&#x5B9E;&#x65F6;&#x590D;&#x5236;session&#x4FE1;&#x606F;&#x3002;&#x53C2;&#x8003;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF1A;http://tomcat.apache.org/tomcat-7.0-doc/cluster-howto.html tomcat&#x7684;&#x914D;&#x7F6E;12345678910111213141516171819202122232425262728293031323334353637383940414243vim conf/server.xml&lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;localhost&quot; jvmRoute=&quot;Tomcat222&quot;&gt;&lt;Cluster className=&quot;org.apache.catalina.ha.tcp.SimpleTcpCluster&quot; channelSendOptions=&quot;8&quot;&gt; &lt;Manager className=&quot;org.apache.catalina.ha.session.DeltaManager&quot; expireSessionsOnShutdown=&quot;false&quot; notifyListenersOnReplication=&quot;true&quot;/&gt; &lt;Channel className=&quot;org.apache.catalina.tribes.group.GroupChannel&quot;&gt; &lt;Membership className=&quot;org.apache.catalina.tribes.membership.McastService&quot; address=&quot;228.0.0.4&quot; port=&quot;45564&quot; frequency=&quot;500&quot; dropTime=&quot;3000&quot;/&gt; &lt;Receiver className=&quot;org.apache.catalina.tribes.transport.nio.NioReceiver&quot; address=&quot;auto&quot; port=&quot;4000&quot; autoBind=&quot;100&quot; selectorTimeout=&quot;5000&quot; maxThreads=&quot;6&quot;/&gt; &lt;Sender className=&quot;org.apache.catalina.tribes.transport.ReplicationTransmitter&quot;&gt; &lt;Transport className=&quot;org.apache.catalina.tribes.transport.nio.PooledParallelSender&quot;/&gt; &lt;/Sender&gt; &lt;Interceptor className=&quot;org.apache.catalina.tribes.group.interceptors.TcpFailureDetector&quot;/&gt; &lt;Interceptor className=&quot;org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor&quot;/&gt; &lt;/Channel&gt; &lt;Valve className=&quot;org.apache.catalina.ha.tcp.ReplicationValve&quot; filter=&quot;&quot;/&gt; &lt;Valve className=&quot;org.apache.catalina.ha.session.JvmRouteBinderValve&quot;/&gt; &lt;Deployer className=&quot;org.apache.catalina.ha.deploy.FarmWarDeployer&quot; tempDir=&quot;/tmp/war-temp/&quot; deployDir=&quot;/tmp/war-deploy/&quot; watchDir=&quot;/tmp/war-listen/&quot; watchEnabled=&quot;false&quot;/&gt; &lt;ClusterListener className=&quot;org.apache.catalina.ha.session.ClusterSessionListener&quot;/&gt;&lt;/Cluster&gt; tomcat1&#x548C;tomcat2&#x914D;&#x7F6E;&#x4E00;&#x6837;&#xFF0C;&#x53EA;&#x9700;&#x5206;&#x522B;&#x4FEE;&#x6539;1&lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;localhost&quot; jvmRoute=&quot;Tomcat222&quot;&gt; &#x5176;&#x4E2D;&#xFF1A;Cluster&#xFF1A;&#x5B9A;&#x4E49;&#x96C6;&#x7FA4;&#xFF1B;&#x53EF;&#x653E;&#x5728;Engine&#x6216;Host&#x914D;&#x7F6E;&#x6BB5;&#x4F46;&#x751F;&#x6548;&#x8303;&#x56F4;&#x4E0D;&#x7528;&#xFF1B;Channel: &#x662F;&#x505A;&#x6210;&#x5458;&#x5173;&#x7CFB;&#x5224;&#x65AD;&#x548C;&#x53D1;&#x9001;&#x3001;&#x63A5;&#x6536;session&#x4FE1;&#x606F;&#xFF1B;Manager&#xFF1A;&#x4F1A;&#x8BDD;&#x7BA1;&#x7406;&#x5668;&#xFF0C;tomcat&#x652F;&#x6301;&#x591A;&#x79CD;&#x7BA1;&#x7406;&#x5668;&#xFF1B;Membership&#xFF1A;&#x5B9A;&#x4E49;&#x96C6;&#x7FA4;&#x6210;&#x5458;&#xFF1B;Receiver&#xFF1A;&#x4F1A;&#x8BDD;&#x63A5;&#x6536;&#x5668;&#xFF1B;Sender&#xFF1A;&#x4F1A;&#x8BDD;&#x53D1;&#x9001;&#x5668;&#xFF1B;&#x6CE8;&#x610F;&#x51E0;&#x70B9;: &#x786E;&#x4FDD;&#x5728;web.xml&#x4E2D;&#x6DFB;&#x52A0;&#xFF1B; &#x786E;&#x4FDD;&#x4E0A;&#x9762;&#x6709;jvmRoute=&#x201D;Tomcat222&#x201D;&#x5C5E;&#x6027;&#xFF1B; &#x786E;&#x4FDD;&#x5404;&#x8282;&#x70B9;&#x95F4;&#x65F6;&#x95F4;&#x662F;&#x540C;&#x6B65;&#x7684;&#xFF1B; &#x9A8C;&#x8BC1;2&#x8FD9;&#x91CC;&#x518D;&#x8BBF;&#x95EE;&#x524D;&#x7AEF;nginx&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF1A;&#x65E0;&#x8BBA;&#x600E;&#x4E48;&#x5237;&#x65B0;SessionID&#x90FD;&#x4E0D;&#x4F1A;&#x53D8; session server&#x5229;&#x7528;memcached/redis&#x628A;&#x591A;&#x4E2A;tomcat&#x7684;session&#x96C6;&#x4E2D;&#x7BA1;&#x7406;&#xFF0C;&#x524D;&#x7AEF;&#x5728;&#x5229;&#x7528;nginx&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x548C;&#x52A8;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x5206;&#x79BB;&#xFF0C;&#x5728;&#x517C;&#x987E;&#x7CFB;&#x7EDF;&#x6C34;&#x5E73;&#x6269;&#x5C55;&#x7684;&#x540C;&#x65F6;&#x53C8;&#x80FD;&#x4FDD;&#x8BC1;&#x8F83;&#x9AD8;&#x7684;&#x6027;&#x80FD;&#x3002; gradle&#x914D;&#x7F6E;&#x7531;&#x4E8E;&#x6E90;&#x7801;&#x6784;&#x5EFA;&#x57FA;&#x4E8E; gradle&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x5148;&#x914D;&#x7F6E; gradle &#x73AF;&#x5883;&#x3002;&#x5B98;&#x7F51;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;https://gradle.org/gradle-download/ 1234curl -s https://get.sdkman.io | bashchmod +x /root/.sdkman/bin/sdkman-init.sh. /root/.bash_profilesdk install gradle 3.3 &#x786E;&#x8BA4;gradle&#x5B89;&#x88C5;&#x6210;&#x529F;1234567891011121314151617gradleStarting a Gradle Daemon (subsequent builds will be faster):helpWelcome to Gradle 3.3.To run a build, run gradle &lt;task&gt; ...To see a list of available tasks, run gradle tasksTo see a list of command-line options, run gradle --helpTo see more detail about a task, run gradle help --task &lt;task&gt;BUILD SUCCESSFULTotal time: 3.283 secs &#x7F16;&#x8BD1;tomcat-redis-session-manager&#x8BA9;Tomcat&#x628A;&#x4F1A;&#x8BDD;Session&#x4FDD;&#x5B58;&#x5230;Redis&#x6570;&#x636E;&#x5E93;&#x4E2D;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;tomcat-redis-session-manager&#x8FD9;&#x6837;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x3002;&#x4E3B;&#x9875;&#x89C1;&#xFF1A; https://github.com/jcoleman/tomcat-redis-session-manager&#x6309;&#x7167;&#x81EA;&#x5DF1;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x7F16;&#x8BD1;&#x591A;&#x6B21;&#x672A;&#x6210;&#x529F;&#xFF0C;&#x8FD9;&#x91CC;&#x76F4;&#x63A5;&#x8D34;&#x51FA;&#x4E00;&#x4E2A;&#x7F16;&#x8BD1;&#x6210;&#x529F;&#x7684;&#x914D;&#x7F6E;&#x3002;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103vim build.gradleapply plugin: &apos;java&apos;apply plugin: &apos;maven&apos;apply plugin: &apos;signing&apos;group = &apos;com.orangefunction&apos;version = &apos;2.0.0&apos;repositories { mavenCentral()}compileJava { sourceCompatibility = 1.7 targetCompatibility = 1.7}dependencies { compile group: &apos;org.apache.tomcat&apos;, name: &apos;tomcat-catalina&apos;, version: &apos;7.0.27&apos; compile group: &apos;redis.clients&apos;, name: &apos;jedis&apos;, version: &apos;2.5.2&apos; compile group: &apos;org.apache.commons&apos;, name: &apos;commons-pool2&apos;, version: &apos;2.2&apos; //compile group: &apos;commons-codec&apos;, name: &apos;commons-codec&apos;, version: &apos;1.9&apos; testCompile group: &apos;junit&apos;, name: &apos;junit&apos;, version: &apos;4.+&apos; testCompile &apos;org.hamcrest:hamcrest-core:1.3&apos; testCompile &apos;org.hamcrest:hamcrest-library:1.3&apos; testCompile &apos;org.mockito:mockito-all:1.9.5&apos; testCompile group: &apos;org.apache.tomcat&apos;, name: &apos;tomcat-coyote&apos;, version: &apos;7.0.27&apos;}task javadocJar(type: Jar, dependsOn: javadoc) { classifier = &apos;javadoc&apos; from &apos;build/docs/javadoc&apos;}task sourcesJar(type: Jar) { from sourceSets.main.allSource classifier = &apos;sources&apos;}artifacts { archives jar archives javadocJar archives sourcesJar}//signing // sign configurations.archives //required = false//}uploadArchives { repositories { mavenDeployer { beforeDeployment { MavenDeployment deployment -&gt; signing.signPom(deployment) } //repository(url: &quot;https://oss.sonatype.org/service/local/staging/deploy/maven2/&quot;) { //authentication(userName: sonatypeUsername, password: sonatypePassword) //} //repository(url: &quot;https://oss.sonatype.org/content/repositories/snapshots&quot;) { // authentication(userName: sonatypeUsername, password: sonatypePassword) //} pom.project { name &apos;tomcat-redis-session-manager&apos; packaging &apos;jar&apos; description &apos;Tomcat Redis Session Manager is a Tomcat extension to store sessions in Redis&apos; url &apos;https://github.com/jcoleman/tomcat-redis-session-manager&apos; issueManagement { url &apos;https://github.com:jcoleman/tomcat-redis-session-manager/issues&apos; system &apos;GitHub Issues&apos; } scm { url &apos;https://github.com:jcoleman/tomcat-redis-session-manager&apos; connection &apos;scm:git:git://github.com/jcoleman/tomcat-redis-session-manager.git&apos; developerConnection &apos;scm:git:git@github.com:jcoleman/tomcat-redis-session-manager.git&apos; } licenses { license { name &apos;MIT&apos; url &apos;http://opensource.org/licenses/MIT&apos; distribution &apos;repo&apos; } } developers { developer { id &apos;jcoleman&apos; name &apos;James Coleman&apos; email &apos;jtc331@gmail.com&apos; url &apos;https://github.com/jcoleman&apos; } } } } }} &#x6267;&#x884C;&#x7F16;&#x8BD1;&#x547D;&#x4EE4;123456789101112131415161718192021222324252627282930313233gradle build --stacktrace:compileJavaDownload https://repo1.maven.org/maven2/org/apache/tomcat/tomcat-catalina/7.0.27/tomcat-catalina-7.0.27.pomDownload https://repo1.maven.org/maven2/org/apache/tomcat/tomcat-servlet-api/7.0.27/tomcat-servlet-api-7.0.27.pomDownload https://repo1.maven.org/maven2/org/apache/tomcat/tomcat-juli/7.0.27/tomcat-juli-7.0.27.pomDownload https://repo1.maven.org/maven2/org/apache/tomcat/tomcat-annotations-api/7.0.27/tomcat-annotations-api-7.0.27.pomDownload https://repo1.maven.org/maven2/org/apache/tomcat/tomcat-api/7.0.27/tomcat-api-7.0.27.pomDownload https://repo1.maven.org/maven2/org/apache/tomcat/tomcat-util/7.0.27/tomcat-util-7.0.27.pomDownload https://repo1.maven.org/maven2/org/apache/tomcat/tomcat-catalina/7.0.27/tomcat-catalina-7.0.27.jarDownload https://repo1.maven.org/maven2/redis/clients/jedis/2.5.2/jedis-2.5.2.jarDownload https://repo1.maven.org/maven2/org/apache/commons/commons-pool2/2.2/commons-pool2-2.2.jarDownload https://repo1.maven.org/maven2/org/apache/tomcat/tomcat-servlet-api/7.0.27/tomcat-servlet-api-7.0.27.jarDownload https://repo1.maven.org/maven2/org/apache/tomcat/tomcat-juli/7.0.27/tomcat-juli-7.0.27.jarDownload https://repo1.maven.org/maven2/org/apache/tomcat/tomcat-annotations-api/7.0.27/tomcat-annotations-api-7.0.27.jarDownload https://repo1.maven.org/maven2/org/apache/tomcat/tomcat-api/7.0.27/tomcat-api-7.0.27.jarDownload https://repo1.maven.org/maven2/org/apache/tomcat/tomcat-util/7.0.27/tomcat-util-7.0.27.jarwarning: [options] bootstrap class path not set in conjunction with -source 1.71 warning:processResources UP-TO-DATE:classes:jar:javadoc:javadocJar:sourcesJar:assemble:compileTestJava UP-TO-DATE:processTestResources UP-TO-DATE:testClasses UP-TO-DATE:test UP-TO-DATE:check UP-TO-DATE:buildBUILD SUCCESSFUL &#x5728;tomcat-redis-session-manager/build/libs/&#x76EE;&#x5F55;&#x4E0B;&#x67E5;&#x770B;&#x662F;&#x5426;&#x751F;&#x6210;tomcat-redis-session-manager&#x7684;jar&#x5305;123cd /work/tomcat-redis-session-manager/build/libs/lstomcat-redis-session-manager-2.0.0.jar tomcat-redis-session-manager-2.0.0-javadoc.jar tomcat-redis-session-manager-2.0.0-sources.jar &#x6B64;&#x65F6;&#x53EA;&#x9700;&#x8981;&#x5C06;tomcat-redis-session-manager-2.0.0.jar&#x4EE5;&#x53CA;&#x53E6;&#x5916;&#x4E24;&#x4E2A;&#x4F9D;&#x8D56;&#x5305;&#xFF1A;jedis- 2.5.2.jar&#xFF0C;commons-pool2-2.2.jar&#x4E00;&#x5E76;&#x62F7;&#x5165;tomcat&#x7684;lib&#x76EE;&#x5F55;&#x4E0B;&#x5373;&#x53EF;&#xFF08;&#x4F9D;&#x8D56;&#x5305;&#x53EF;&#x4EE5;&#x5728;gradle&#x7684;&#x7528;&#x6237;&#x76EE;&#x5F55;&#x4E0B;&#x627E;&#x5230;&#xFF09;1234find / -name &apos;jedis-2.5.2.jar&apos;/root/.gradle/caches/modules-2/files-2.1/redis.clients/jedis/2.5.2/83d833f48052456f197ba55ef2a82fc4909880b/jedis-2.5.2.jarfind -name &apos;commons-pool2-2.2.jar&apos;./.gradle/caches/modules-2/files-2.1/org.apache.commons/commons-pool2/2.2/bd1a6e384f3cf0f9b9a60e1e6c1c1ecbbee7e0b7/commons-pool2-2.2.jar redis&#x914D;&#x7F6E;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x4F7F;&#x7528; tomcat-redis-session-manager-master &#x4F5C;&#x4E3A; tomcat session &#x7BA1;&#x7406;&#x5668; &#x5206;&#x522B;&#x5C06;&#x751F;&#x6210;&#x7684; tomcat-redis-session-manager-master &#x53CA;&#x4F9D;&#x8D56;jar&#x5305;&#x8986;&#x76D6;&#x5230; tomcat &#x5B89;&#x88C5;&#x76EE;&#x5F55;&#x7684; lib &#x6587;&#x4EF6;&#x5939; &#x5206;&#x522B;&#x4FEE;&#x6539;2&#x53F0; tomcat &#x7684; context.xml &#x6587;&#x4EF6;&#xFF0C;&#x4F7F; tomcat-redis-session-manager-master &#x4F5C;&#x4E3A;session&#x7BA1;&#x7406;&#x5668;&#xFF0C;&#x540C;&#x65F6;&#x6307;&#x5B9A;redis&#x5730;&#x5740;&#x548C;&#x7AEF;&#x53E3;&#x3002;&#x7F16;&#x8F91;context.xml&#x914D;&#x7F6E;&#x6587;&#x4EF6;12345678910vim conf/context.xml&lt;Context&gt; &lt;Valve className=&quot;com.orangefunction.tomcat.redissessions.RedisSessionHandlerValve&quot; /&gt; &lt;Manager className=&quot;com.orangefunction.tomcat.redissessions.RedisSessionManager&quot; host=&quot;127.0.0.1&quot; &lt;!-- &#x53EF;&#x9009;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&quot;localhost&quot; --&gt; password=&quot;abc&quot; &lt;!-- &#x53EF;&#x9009; --&gt; port=&quot;6379&quot; &lt;!-- &#x53EF;&#x9009;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F; &quot;6379&quot; --&gt; database=&quot;0&quot; &lt;!-- &#x53EF;&#x9009;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F; &quot;0&quot; --&gt; maxInactiveInterval=&quot;60&quot;/&gt; &lt;!-- &#x53EF;&#x9009;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F; &quot;60&quot; &#xFF08;&#x5355;&#x4F4D;&#xFF1A;&#x79D2;&#xFF09;--&gt; /&gt;&lt;/Context&gt; &#x8FD9;&#x91CC;&#x63D0;&#x9192;&#x4E0B;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x6CE8;&#x610F;tomcat&#x7684;&#x7248;&#x672C;&#xFF0C;jdk&#x7684;&#x7248;&#x672C;&#xFF0C;&#x8981;&#x548C;&#x7F16;&#x8BD1;&#x7684;&#x914D;&#x7F6E;&#x586B;&#x7684;&#x7248;&#x672C;&#x4E00;&#x81F4;&#xFF0C;&#x5426;&#x5219;tomcat&#x53EF;&#x80FD;&#x4F1A;&#x62A5;&#x9519;redis&#x5B89;&#x88C5;&#x542F;&#x52A8;&#x540E;&#xFF0C;tomcat&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7F16;&#x8F91;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x5219;&#x91CD;&#x65B0;&#x542F;&#x52A8;tomcat&#x5373;&#x53EF; &#x9A8C;&#x8BC1;3&#x8BBF;&#x95EE;&#x7F51;&#x9875;&#x67E5;&#x770B; session id&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x6211;&#x4EEC;&#x7684; session id &#x4E3A; 764A35AC567302EDBA2AC05C4EACC7E7.Tomcat111 &#x76F4;&#x63A5;&#x5230;&#x540E;&#x7AEF;redis &#x770B;&#x770B;&#x6B64;session&#x662F;&#x5426;&#x4FDD;&#x5B58;123/usr/local/redis-3.0.0/src/redis-cli127.0.0.1:6379&gt; get 764A35AC567302EDBA2AC05C4EACC7E7.Tomcat111&quot;\xac\xed\x00\x05sr\x00Dcom.orangefunction.tomcat.redissessions.SessionSerializationMetadataB\xd9\xd9\xf7v\xa2\xdbL\x03\x00\x01[\x00\x15sessionAttributesHasht\x00\x02[Bxpw\x14\x00\x00\x00\x10rG\x034\xbe\x9a&gt;F\xd2KN\xf2}\xdb\xde\x7fxsr\x00\x0ejava.lang.Long;\x8b\xe4\x90\xcc\x8f#\xdf\x02\x00\x01J\x00\x05valuexr\x00\x10java.lang.Number\x86\xac\x95\x1d\x0b\x94\xe0\x8b\x02\x00\x00xp\x00\x00\x01Y\xa5)\x96\xccsq\x00~\x00\x03\x00\x00\x01Y\xa5)\x96\xccsr\x00\x11java.lang.Integer\x12\xe2\xa0\xa4\xf7\x81\x878\x02\x00\x01I\x00\x05valuexq\x00~\x00\x04\x00\x00\a\bsr\x00\x11java.lang.Boolean\xcd r\x80\xd5\x9c\xfa\xee\x02\x00\x01Z\x00\x05valuexp\x01q\x00~\x00\nsq\x00~\x00\x03\x00\x00\x01Y\xa5)\x96\xd8t\x00*764A35AC567302EDBA2AC05C4EACC7E7.Tomcat111sq\x00~\x00\a\x00\x00\x00\x01t\x00\x0fchen-hao.com.cnq\x00~\x00\x0ew\b\x00\x00\x01Y\xa5)\x96\xcc&quot; &#x7531;&#x6B64;&#x53EF;&#x89C1;&#xFF0C;session&#x5DF2;&#x7ECF;&#x4FDD;&#x5B58;&#x5728;redis&#x5F53;&#x4E2D;&#xFF0C;&#x8FD9;&#x91CC;&#x6682;&#x4E14;&#x6F14;&#x793A;&#x4E00;&#x53F0;&#xFF0C;&#x81F3;&#x4E8E;&#x591A;&#x53F0;&#xFF0C;&#x540C;&#x6837;&#x914D;&#x7F6E;&#x5373;&#x53EF;&#xFF0C;&#x518D;&#x52A0;&#x4E0A;&#x524D;&#x7AEF;nginx&#xFF0C;tomcat&#x7684;&#x96C6;&#x7FA4;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;]]></content>
      <categories>
        <category>集群</category>
      </categories>
      <tags>
        <tag>Tomcat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MongoDB3-x-权限配置]]></title>
    <url>%2Fmongodb3-x-%E6%9D%83%E9%99%90%E9%85%8D%E7%BD%AE.html</url>
    <content type="text"><![CDATA[MongoDB3.x &#x5B89;&#x5168;&#x6743;&#x9650;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#xFF0C;&#x5728;&#x6DFB;&#x52A0;&#x7528;&#x6237;&#x4E0A;&#x548C;3.0&#x4E4B;&#x524D;&#x7684;&#x7248;&#x672C;&#x6709;&#x5F88;&#x5927;&#x7684;&#x533A;&#x522B;&#xFF0C;&#x7531;&#x4E8E;&#x521A;&#x63A5;&#x89E6;mongodb&#xFF0C;&#x53EF;&#x662F;&#x5728;&#x8FD9;&#x65B9;&#x9762;&#x8D70;&#x4E86;&#x8BB8;&#x591A;&#x5F2F;&#x8DEF;&#xFF0C;&#x8FD9;&#x91CC;&#x8BF4;&#x660E;&#x4E0B;3.x&#x7684;&#x7528;&#x6237;&#x914D;&#x7F6E;&#x3002; &#x521B;&#x5EFA;&#x7528;&#x6237;123456789101112131415161718&gt; use adminswitched to db admin&gt; db.createUser(... {... user: &quot;dba&quot;,... pwd: &quot;dba&quot;,... roles: [ { role: &quot;userAdminAnyDatabase&quot;, db: &quot;admin&quot; } ]... }... )Successfully added user: { &quot;user&quot; : &quot;dba&quot;, &quot;roles&quot; : [ { &quot;role&quot; : &quot;userAdminAnyDatabase&quot;, &quot;db&quot; : &quot;admin&quot; } ]} user&#xFF1A;&#x7528;&#x6237;&#x540D; pwd&#xFF1A;&#x5BC6;&#x7801; db : &#x6570;&#x636E;&#x5E93;&#x540D;&#x5B57; roles&#xFF1A;&#x6307;&#x5B9A;&#x7528;&#x6237;&#x7684;&#x89D2;&#x8272;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x4E00;&#x4E2A;&#x7A7A;&#x6570;&#x7EC4;&#x7ED9;&#x65B0;&#x7528;&#x6237;&#x8BBE;&#x5B9A;&#x7A7A;&#x89D2;&#x8272;&#xFF1B;&#x5728;roles&#x5B57;&#x6BB5;,&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x5185;&#x7F6E;&#x89D2;&#x8272;&#x548C;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x89D2;&#x8272;&#x3002; role&#x91CC;&#x7684;&#x89D2;&#x8272;&#x53EF;&#x4EE5;&#x9009;&#xFF1A;1234567891011121314151617181920Built-In Roles&#xFF08;&#x5185;&#x7F6E;&#x89D2;&#x8272;&#xFF09;&#xFF1A;1. &#x6570;&#x636E;&#x5E93;&#x7528;&#x6237;&#x89D2;&#x8272;&#xFF1A;read&#x3001;readWrite;2. &#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x89D2;&#x8272;&#xFF1A;dbAdmin&#x3001;dbOwner&#x3001;userAdmin&#xFF1B;3. &#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x89D2;&#x8272;&#xFF1A;clusterAdmin&#x3001;clusterManager&#x3001;clusterMonitor&#x3001;hostManager&#xFF1B;4. &#x5907;&#x4EFD;&#x6062;&#x590D;&#x89D2;&#x8272;&#xFF1A;backup&#x3001;restore&#xFF1B;5. &#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;&#x89D2;&#x8272;&#xFF1A;readAnyDatabase&#x3001;readWriteAnyDatabase&#x3001;userAdminAnyDatabase&#x3001;dbAdminAnyDatabase6. &#x8D85;&#x7EA7;&#x7528;&#x6237;&#x89D2;&#x8272;&#xFF1A;root // &#x8FD9;&#x91CC;&#x8FD8;&#x6709;&#x51E0;&#x4E2A;&#x89D2;&#x8272;&#x95F4;&#x63A5;&#x6216;&#x76F4;&#x63A5;&#x63D0;&#x4F9B;&#x4E86;&#x7CFB;&#x7EDF;&#x8D85;&#x7EA7;&#x7528;&#x6237;&#x7684;&#x8BBF;&#x95EE;&#xFF08;dbOwner &#x3001;userAdmin&#x3001;userAdminAnyDatabase&#xFF09;7. &#x5185;&#x90E8;&#x89D2;&#x8272;&#xFF1A;__system&#x5177;&#x4F53;&#x89D2;&#x8272;&#xFF1A;read&#xFF1A;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x8BFB;&#x53D6;&#x6307;&#x5B9A;&#x6570;&#x636E;&#x5E93;readWrite&#xFF1A;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x8BFB;&#x5199;&#x6307;&#x5B9A;&#x6570;&#x636E;&#x5E93;dbAdmin&#xFF1A;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x5728;&#x6307;&#x5B9A;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x6267;&#x884C;&#x7BA1;&#x7406;&#x51FD;&#x6570;&#xFF0C;&#x5982;&#x7D22;&#x5F15;&#x521B;&#x5EFA;&#x3001;&#x5220;&#x9664;&#xFF0C;&#x67E5;&#x770B;&#x7EDF;&#x8BA1;&#x6216;&#x8BBF;&#x95EE;system.profileuserAdmin&#xFF1A;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x5411;system.users&#x96C6;&#x5408;&#x5199;&#x5165;&#xFF0C;&#x53EF;&#x4EE5;&#x627E;&#x6307;&#x5B9A;&#x6570;&#x636E;&#x5E93;&#x91CC;&#x521B;&#x5EFA;&#x3001;&#x5220;&#x9664;&#x548C;&#x7BA1;&#x7406;&#x7528;&#x6237;clusterAdmin&#xFF1A;&#x53EA;&#x5728;admin&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x53EF;&#x7528;&#xFF0C;&#x8D4B;&#x4E88;&#x7528;&#x6237;&#x6240;&#x6709;&#x5206;&#x7247;&#x548C;&#x590D;&#x5236;&#x96C6;&#x76F8;&#x5173;&#x51FD;&#x6570;&#x7684;&#x7BA1;&#x7406;&#x6743;&#x9650;&#x3002;readAnyDatabase&#xFF1A;&#x53EA;&#x5728;admin&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x53EF;&#x7528;&#xFF0C;&#x8D4B;&#x4E88;&#x7528;&#x6237;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;&#x7684;&#x8BFB;&#x6743;&#x9650;readWriteAnyDatabase&#xFF1A;&#x53EA;&#x5728;admin&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x53EF;&#x7528;&#xFF0C;&#x8D4B;&#x4E88;&#x7528;&#x6237;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;&#x7684;&#x8BFB;&#x5199;&#x6743;&#x9650;userAdminAnyDatabase&#xFF1A;&#x53EA;&#x5728;admin&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x53EF;&#x7528;&#xFF0C;&#x8D4B;&#x4E88;&#x7528;&#x6237;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;&#x7684;userAdmin&#x6743;&#x9650;dbAdminAnyDatabase&#xFF1A;&#x53EA;&#x5728;admin&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x53EF;&#x7528;&#xFF0C;&#x8D4B;&#x4E88;&#x7528;&#x6237;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;&#x7684;dbAdmin&#x6743;&#x9650;&#x3002;root&#xFF1A;&#x53EA;&#x5728;admin&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x53EF;&#x7528;&#x3002;&#x8D85;&#x7EA7;&#x8D26;&#x53F7;&#xFF0C;&#x8D85;&#x7EA7;&#x6743;&#x9650; &#x5F00;&#x542F;&#x7528;&#x6237;&#x9A8C;&#x8BC1;&#x65B0;&#x5EFA;mongodb.conf&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x52A0;&#x5165;&#x201C;auth=true&#x201D;&#x4ECE;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x542F;&#x52A8;mongodb&#x670D;&#x52A1;1./bin/mongod -f mongodb.conf &#x7528;&#x6237;&#x9A8C;&#x8BC1;1234567[chenhao@localhost mongodb3.2.10]$ ./bin/mongo MongoDB shell version: 3.2.10connecting to: test&gt; use caideyangswitched to db caideyang&gt; db.auth(&apos;dba&apos;,&apos;dba&apos;)1 &#x67E5;&#x8BE2;&#x7528;&#x6237;123456789101112&gt; show users{ &quot;_id&quot; : &quot;test.dba&quot;, &quot;user&quot; : &quot;dba&quot;, &quot;db&quot; : &quot;test&quot;, &quot;roles&quot; : [ { &quot;role&quot; : &quot;userAdminAnyDatabase&quot;, &quot;db&quot; : &quot;admin&quot; } ]} &#x5220;&#x9664;&#x7528;&#x6237;1&gt; db.system.users.remove({user:&quot;dba&quot;}) &#x5907;&#x4EFD;&#x6570;&#x636E;&#x5E93;1234567mongodump --port=27020 -u admin -p admin --db=admin -o /root/backup #&#x53C2;&#x6570;&#x8BF4;&#x660E;--port: mongodb&#x7684;&#x7AEF;&#x53E3;&#x53F7;-u: &#x6267;&#x884C;&#x5907;&#x4EFD;&#x7684;&#x7528;&#x6237;-p: &#x6267;&#x884C;&#x5907;&#x4EFD;&#x7528;&#x6237;&#x7684;&#x5BC6;&#x7801;--db&#xFF1A; &#x9700;&#x8981;&#x5907;&#x4EFD;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5B9E;&#x4F8B;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;admin-o&#xFF1A; &#x5907;&#x4EFD;&#x7684;&#x6570;&#x636E;&#x5B58;&#x653E;&#x4F4D;&#x7F6E;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;/root/backup &#x8FD8;&#x539F;&#x6570;&#x636E;&#x5E93;1mongorestore --port=27020 -u admin -p admin --db=admin backup/test/]]></content>
      <categories>
        <category>NoSQL</category>
      </categories>
      <tags>
        <tag>mongodb</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MongoDB3.x-配置文件]]></title>
    <url>%2FMongoDB3-x-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.html</url>
    <content type="text"><![CDATA[mongodb 3.0 &#x6539;&#x53D8;&#x5F88;&#x591A;&#xFF0C;3.0&#x5728;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x4E0A;&#x66F4;&#x6362;&#x6210;&#x4E86;wiredTiger&#xFF0C;&#x5728;&#x6570;&#x636E;&#x538B;&#x7F29;&#x65B9;&#x9762;&#x5F88;&#x6709;&#x6548;&#xFF0C;&#x89E3;&#x51B3;&#x5927;&#x6570;&#x636E;&#x91CF;&#x95EE;&#x9898;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x78C1;&#x76D8;&#x4E0D;&#x591F;&#x7528;&#x7684;&#x95EE;&#x9898;&#x3002;mongodb 3.0 &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x91C7;&#x7528;&#x7684;&#x662F;YAML&#x683C;&#x5F0F;&#xFF0C;&#x53EA;&#x80FD;&#x4F7F;&#x7528;&#x7A7A;&#x683C;&#xFF0C;&#x4E0D;&#x652F;&#x6301;tab&#x952E;&#x3002; &#x542F;&#x52A8;&#x65B9;&#x5F0F; &#x76F4;&#x63A5;&#x542F;&#x52A8;&#x76F4;&#x63A5;&#x542F;&#x52A8;&#xFF0C;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#x5199;&#x5728;&#x547D;&#x4EE4;&#x4E2D;&#xFF1A;1mongod --dbpath=data/db --logpath=log/log.txt --fork &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x542F;&#x52A8;&#x9996;&#x5148;&#x7F16;&#x8F91;&#x597D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x4EE5;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x542F;&#x52A8;&#xFF1A;1mongod -f /etc/mongod.conf &#x6216;1mongod --config /etc/mongod.conf mongodb&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x4E00;&#x4E2A;mongod&#x8FDB;&#x7A0B;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#xFF0C;&#x5305;&#x542B;data&#x3001;etc&#x3001;logs 3&#x4E2A;&#x76EE;&#x5F55;&#xFF0C;&#x5206;&#x522B;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x3001;&#x914D;&#x7F6E;&#x3001;&#x4EE5;&#x53CA;&#x8FD0;&#x884C;&#x65E5;&#x5FD7;123456789|-- $mymongo |-- data -- *** |-- etc -- keyfile -- mongod.conf |-- logs -- mongod.pid -- mongod.log mongodb&#x914D;&#x7F6E;&#x6A21;&#x677F;12345678910111213141516171819202122232425262728293031323334353637383940414243444546systemLog: destination: file logAppend: true logRotate: rename path: $mymongo/logs/mongod.log timeStampFormat: iso8601-local traceAllExceptions: false verbosity: 0processManagement: fork: true pidFilePath: $mymongo/logs/mongod.pidnet: #bindIp: 127.0.0.1 port: 3001 http: enabled: false maxIncomingConnections: 1000 unixDomainSocket: enabled: falseoperationProfiling: mode: slowOp slowOpThresholdMs: 100 security: authorization: enabled keyFile: $mymongo/etc/keyfile javascriptEnabled: falsereplication: oplogSizeMB: 5120 replSetName: myreplsetstorage: dbPath: $mymongo/data directoryPerDB: true syncPeriodSecs: 60 engine: wiredTiger journal: enabled: true commitIntervalMs: 100 wiredTiger: engineConfig: cacheSizeGB: 4 &#x57FA;&#x4E8E;&#x4E0A;&#x8FF0;&#x6A21;&#x677F;&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x7A0D;&#x52A0;&#x4FEE;&#x6539;&#xFF0C;&#x4E3B;&#x8981;&#x5173;&#x6CE8;&#x5982;&#x4E0B;&#x53C2;&#x6570; &#x53C2;&#x6570; &#x542B;&#x4E49; &#x8BF4;&#x660E; systemLog.verbosity &#x65E5;&#x5FD7;&#x7EA7;&#x522B; &#x5EFA;&#x8BAE;&#x8BBE;&#x7F6E;&#x4E3A;0&#xFF0C;&#x5982;&#x60F3;&#x8BB0;&#x5F55;&#x66F4;&#x591A;debug&#x4FE1;&#x606F;&#xFF0C;&#x53EF;&#x4FEE;&#x6539;&#x8BE5;&#x503C;&#x4E3A;1-5&#xFF0C;&#x8D8A;&#x5927;&#x65E5;&#x5FD7;&#x8D8A;&#x8BE6;&#x7EC6; net.bindIp &#x76D1;&#x542C;&#x7684;ip&#x5730;&#x5740;&#x5217;&#x8868; &#x9ED8;&#x8BA4;&#x76D1;&#x542C;&#x6240;&#x6709;&#x7684;ip&#xFF0C;&#x5982;&#x679C;&#x6709;&#x591A;&#x5757;&#x7F51;&#x5361;&#xFF0C;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x6027;&#x7684;&#x7ED1;&#x5B9A;&#xFF0C;&#x4EE5;&#x9650;&#x5236;&#x4E0D;&#x53EF;&#x4FE1;&#x7684;&#x7F51;&#x7EDC;&#x8BBF;&#x95EE; net.port &#x76D1;&#x542C;&#x65AD;&#x5F00; &#x9ED8;&#x8BA4;27017&#xFF0C;&#x6839;&#x636E;&#x9700;&#x8981;&#x5B9A;&#x5236; net.maxIncomingConnections &#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570; &#x6839;&#x636E;&#x9700;&#x8981;&#x914D;&#x7F6E;&#xFF0C;&#x4FDD;&#x8BC1;&#x7CFB;&#x7EDF;&#x6700;&#x5927;&#x6587;&#x4EF6;&#x53E5;&#x67C4;&#x6570;&#x5927;&#x4E8E;&#x8BE5;&#x503C;&#xFF08;ulimit -n&#xFF09; operationProfiling.slowOpThresholdMs &#x6162;&#x8BF7;&#x6C42;&#x9608;&#x503C; &#x5982;&#x65E0;&#x7279;&#x6B8A;&#x9700;&#x6C42;&#xFF0C;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x7684;100ms&#xFF0C;&#x8D85;&#x8FC7;&#x8BE5;&#x503C;&#x7684;&#x8BF7;&#x6C42;&#x4F1A;&#x8BB0;&#x5F55;&#x5230;&#x5BF9;&#x5E94;db&#x7684;system.profile&#x96C6;&#x5408;&#x91CC; replication.replSetName &#x590D;&#x5236;&#x96C6;&#x540D;&#x5B57; &#x5F3A;&#x70C8;&#x5EFA;&#x8BAE;&#x90E8;&#x7F72;&#x590D;&#x5236;&#x96C6;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#xFF0C;&#x540D;&#x5B57;&#x968F;&#x4FBF;&#x5B9A;&#x5236; replication.oplogSizeMB oplog&#x5927;&#x5C0F; &#x9ED8;&#x8BA4;&#x4E3A;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;5%&#xFF0C;&#x65E0;&#x7279;&#x6B8A;&#x9700;&#x6C42;&#x5EFA;&#x8BAE;&#x4FDD;&#x6301;&#x9ED8;&#x8BA4;&#x503C; security.authorization &#x662F;&#x5426;&#x5F00;&#x542F;&#x9274;&#x6743; &#x5F3A;&#x70C8;&#x5EFA;&#x8BAE;&#x5F00;&#x542F; security.keyFile &#x590D;&#x5236;&#x96C6;&#x5185;&#x90E8;&#x9274;&#x6743;&#x7684;keyfile&#x8DEF;&#x5F84; &#x590D;&#x5236;&#x96C6;&#x8981;&#x5F00;&#x542F;&#x9274;&#x6743;&#xFF0C;&#x5FC5;&#x987B;&#x914D;&#x7F6E;keyfile&#xFF0C;&#x7528;&#x4E8E;&#x590D;&#x5236;&#x96C6;&#x6210;&#x5458;&#x95F4;&#x7684;&#x9274;&#x6743; security.javascriptEnabled &#x662F;&#x5426;&#x652F;&#x6301;server&#x7AEF;js&#xFF0C;&#x6BD4;&#x5982;$where&#x3001;mapreduce&#x9700;&#x8981;server&#x7AEF;js&#x7684;&#x652F;&#x6301; &#x5982;&#x65E0;&#x5FC5;&#x8981;&#xFF0C;&#x5EFA;&#x8BAE;&#x5173;&#x95ED; storage.directoryPerDB &#x6BCF;&#x4E2A;db&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x76EE;&#x5F55;&#x5B58;&#x50A8; &#x5F3A;&#x70C8;&#x5EFA;&#x8BAE;&#xFF0C;&#x4EE5;&#x5145;&#x5206;&#x53D1;&#x6325;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4F18;&#x52BF; storage.engine &#x5B58;&#x50A8;&#x5F15;&#x64CE; &#x5F3A;&#x70C8;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;wiredtiger&#xFF0C;&#x4F4E;&#x6210;&#x672C; + &#x9AD8;&#x6027;&#x80FD; storage.wiredTiger.engineConfig wireditger cache&#x5927;&#x5C0F; &#x9ED8;&#x8BA4; max(1, 0.6 * RAM) storage.journal.enabled &#x662F;&#x5426;&#x5F00;&#x542F;journal &#x5F3A;&#x70C8;&#x5EFA;&#x8BAE;&#x5F00;&#x542F; storage.journal.commitIntervalMs journal &#x5237;&#x76D8;&#x95F4;&#x9694; &#x9ED8;&#x8BA4;100ms&#xFF0C;&#x5EFA;&#x8BAE;&#x4FDD;&#x6301;&#x9ED8;&#x8BA4;&#x503C; &#x66F4;&#x52A0;&#x8BE6;&#x7EC6;&#x8BF7;&#x53C2;&#x8003;&#xFF1A; https://yq.aliyun.com/articles/68488 &#x5176;&#x4ED6;&#x914D;&#x7F6E;&#x53C2;&#x6570;12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061--quiet # &#x5B89;&#x9759;&#x8F93;&#x51FA;--port arg # &#x6307;&#x5B9A;&#x670D;&#x52A1;&#x7AEF;&#x53E3;&#x53F7;&#xFF0C;&#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;27017--bind_ip arg # &#x7ED1;&#x5B9A;&#x670D;&#x52A1;IP&#xFF0C;&#x82E5;&#x7ED1;&#x5B9A;127.0.0.1&#xFF0C;&#x5219;&#x53EA;&#x80FD;&#x672C;&#x673A;&#x8BBF;&#x95EE;&#xFF0C;&#x4E0D;&#x6307;&#x5B9A;&#x9ED8;&#x8BA4;&#x672C;&#x5730;&#x6240;&#x6709;IP--logpath arg # &#x6307;&#x5B9A;MongoDB&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#xFF0C;&#x6CE8;&#x610F;&#x662F;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x4E0D;&#x662F;&#x76EE;&#x5F55;--logappend # &#x4F7F;&#x7528;&#x8FFD;&#x52A0;&#x7684;&#x65B9;&#x5F0F;&#x5199;&#x65E5;&#x5FD7;--pidfilepath arg # PID File &#x7684;&#x5B8C;&#x6574;&#x8DEF;&#x5F84;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#xFF0C;&#x5219;&#x6CA1;&#x6709;PID&#x6587;&#x4EF6;--keyFile arg # &#x96C6;&#x7FA4;&#x7684;&#x79C1;&#x94A5;&#x7684;&#x5B8C;&#x6574;&#x8DEF;&#x5F84;&#xFF0C;&#x53EA;&#x5BF9;&#x4E8E;Replica Set &#x67B6;&#x6784;&#x6709;&#x6548;--unixSocketPrefix arg # UNIX&#x57DF;&#x5957;&#x63A5;&#x5B57;&#x66FF;&#x4EE3;&#x76EE;&#x5F55;,(&#x9ED8;&#x8BA4;&#x4E3A; /tmp)--fork # &#x4EE5;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x65B9;&#x5F0F;&#x8FD0;&#x884C;MongoDB&#xFF0C;&#x521B;&#x5EFA;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x7A0B;--auth # &#x542F;&#x7528;&#x9A8C;&#x8BC1;--cpu # &#x5B9A;&#x671F;&#x663E;&#x793A;CPU&#x7684;CPU&#x5229;&#x7528;&#x7387;&#x548C;iowait--dbpath arg # &#x6307;&#x5B9A;&#x6570;&#x636E;&#x5E93;&#x8DEF;&#x5F84;--diaglog arg # diaglog&#x9009;&#x9879; 0=off 1=W 2=R 3=both 7=W+some reads--directoryperdb # &#x8BBE;&#x7F6E;&#x6BCF;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x5C06;&#x88AB;&#x4FDD;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x76EE;&#x5F55;--journal # &#x542F;&#x7528;&#x65E5;&#x5FD7;&#x9009;&#x9879;&#xFF0C;MongoDB&#x7684;&#x6570;&#x636E;&#x64CD;&#x4F5C;&#x5C06;&#x4F1A;&#x5199;&#x5165;&#x5230;journal&#x6587;&#x4EF6;&#x5939;&#x7684;&#x6587;&#x4EF6;&#x91CC;--journalOptions arg # &#x542F;&#x7528;&#x65E5;&#x5FD7;&#x8BCA;&#x65AD;&#x9009;&#x9879;--ipv6 # &#x542F;&#x7528;IPv6&#x9009;&#x9879;--jsonp # &#x5141;&#x8BB8;JSONP&#x5F62;&#x5F0F;&#x901A;&#x8FC7;HTTP&#x8BBF;&#x95EE;&#xFF08;&#x6709;&#x5B89;&#x5168;&#x5F71;&#x54CD;&#xFF09;--maxConns arg # &#x6700;&#x5927;&#x540C;&#x65F6;&#x8FDE;&#x63A5;&#x6570; &#x9ED8;&#x8BA4;2000--noauth # &#x4E0D;&#x542F;&#x7528;&#x9A8C;&#x8BC1;--nohttpinterface # &#x5173;&#x95ED;http&#x63A5;&#x53E3;&#xFF0C;&#x9ED8;&#x8BA4;&#x5173;&#x95ED;27018&#x7AEF;&#x53E3;&#x8BBF;&#x95EE;--noprealloc # &#x7981;&#x7528;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x9884;&#x5206;&#x914D;(&#x5F80;&#x5F80;&#x5F71;&#x54CD;&#x6027;&#x80FD;)--noscripting # &#x7981;&#x7528;&#x811A;&#x672C;&#x5F15;&#x64CE;--notablescan # &#x4E0D;&#x5141;&#x8BB8;&#x8868;&#x626B;&#x63CF;--nounixsocket # &#x7981;&#x7528;Unix&#x5957;&#x63A5;&#x5B57;&#x76D1;&#x542C;--nssize arg (=16) # &#x8BBE;&#x7F6E;&#x4FE1;&#x6570;&#x636E;&#x5E93;.ns&#x6587;&#x4EF6;&#x5927;&#x5C0F;(MB)--objcheck # &#x5728;&#x6536;&#x5230;&#x5BA2;&#x6237;&#x6570;&#x636E;,&#x68C0;&#x67E5;&#x7684;&#x6709;&#x6548;&#x6027;&#xFF0C;--profile arg # &#x6863;&#x6848;&#x53C2;&#x6570; 0=off 1=slow, 2=all--quota # &#x9650;&#x5236;&#x6BCF;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6587;&#x4EF6;&#x6570;&#xFF0C;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x4E3A;8--quotaFiles arg # number of files allower per db, requires --quota--rest # &#x5F00;&#x542F;&#x7B80;&#x5355;&#x7684;rest API--repair # &#x4FEE;&#x590D;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;run repair on all dbs--repairpath arg # &#x4FEE;&#x590D;&#x5E93;&#x751F;&#x6210;&#x7684;&#x6587;&#x4EF6;&#x7684;&#x76EE;&#x5F55;,&#x9ED8;&#x8BA4;&#x4E3A;&#x76EE;&#x5F55;&#x540D;&#x79F0;dbpath--slowms arg (=100) # value of slow for profile and console log--smallfiles # &#x4F7F;&#x7528;&#x8F83;&#x5C0F;&#x7684;&#x9ED8;&#x8BA4;&#x6587;&#x4EF6;--syncdelay arg (=60) # &#x6570;&#x636E;&#x5199;&#x5165;&#x78C1;&#x76D8;&#x7684;&#x65F6;&#x95F4;&#x79D2;&#x6570;(0=never,&#x4E0D;&#x63A8;&#x8350;)--sysinfo # &#x6253;&#x5370;&#x4E00;&#x4E9B;&#x8BCA;&#x65AD;&#x7CFB;&#x7EDF;&#x4FE1;&#x606F;--upgrade # &#x5982;&#x679C;&#x9700;&#x8981;&#x5347;&#x7EA7;&#x6570;&#x636E;&#x5E93; * Replicaton &#x53C2;&#x6570;----------------------------------------------------------------------------------fastsync # &#x4ECE;&#x4E00;&#x4E2A;dbpath&#x91CC;&#x542F;&#x7528;&#x4ECE;&#x5E93;&#x590D;&#x5236;&#x670D;&#x52A1;&#xFF0C;&#x8BE5;dbpath&#x7684;&#x6570;&#x636E;&#x5E93;&#x662F;&#x4E3B;&#x5E93;&#x7684;&#x5FEB;&#x7167;&#xFF0C;&#x53EF;&#x7528;&#x4E8E;&#x5FEB;&#x901F;&#x542F;&#x7528;&#x540C;&#x6B65;--autoresync # &#x5982;&#x679C;&#x4ECE;&#x5E93;&#x4E0E;&#x4E3B;&#x5E93;&#x540C;&#x6B65;&#x6570;&#x636E;&#x5DEE;&#x5F97;&#x591A;&#xFF0C;&#x81EA;&#x52A8;&#x91CD;&#x65B0;&#x540C;&#x6B65;&#xFF0C;--oplogSize arg # &#x8BBE;&#x7F6E;oplog&#x7684;&#x5927;&#x5C0F;(MB) * &#x4E3B;/&#x4ECE;&#x53C2;&#x6570;----------------------------------------------------------------------------------master # &#x4E3B;&#x5E93;&#x6A21;&#x5F0F;--slave # &#x4ECE;&#x5E93;&#x6A21;&#x5F0F;--source arg # &#x4ECE;&#x5E93; &#x7AEF;&#x53E3;&#x53F7;--only arg # &#x6307;&#x5B9A;&#x5355;&#x4E00;&#x7684;&#x6570;&#x636E;&#x5E93;&#x590D;&#x5236;--slavedelay arg # &#x8BBE;&#x7F6E;&#x4ECE;&#x5E93;&#x540C;&#x6B65;&#x4E3B;&#x5E93;&#x7684;&#x5EF6;&#x8FDF;&#x65F6;&#x95F4; * Replica set(&#x526F;&#x672C;&#x96C6;)&#x9009;&#x9879;&#xFF1A;----------------------------------------------------------------------------------replSet arg # &#x8BBE;&#x7F6E;&#x526F;&#x672C;&#x96C6;&#x540D;&#x79F0; * Sharding(&#x5206;&#x7247;)&#x9009;&#x9879;----------------------------------------------------------------------------------configsvr # &#x58F0;&#x660E;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x96C6;&#x7FA4;&#x7684;config&#x670D;&#x52A1;,&#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;27019&#xFF0C;&#x9ED8;&#x8BA4;&#x76EE;&#x5F55;/data/configdb--shardsvr # &#x58F0;&#x660E;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x96C6;&#x7FA4;&#x7684;&#x5206;&#x7247;,&#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;27018--noMoveParanoia # &#x5173;&#x95ED;&#x504F;&#x6267;&#x4E3A;moveChunk&#x6570;&#x636E;&#x4FDD;&#x5B58; &#x66F4;&#x52A0;&#x8BE6;&#x7EC6;&#x8BF7;&#x53C2;&#x8003;&#xFF1A; http://www.jianshu.com/p/5844fdfa9511]]></content>
      <categories>
        <category>NoSQL</category>
      </categories>
      <tags>
        <tag>mongodb</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[优化内核参数提高服务器并发处理能力]]></title>
    <url>%2F%E4%BC%98%E5%8C%96%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0%E6%8F%90%E9%AB%98%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B9%B6%E5%8F%91%E5%A4%84%E7%90%86%E8%83%BD%E5%8A%9B.html</url>
    <content type="text"><![CDATA[&#x5728;&#x670D;&#x52A1;&#x5668;&#x786C;&#x4EF6;&#x8D44;&#x6E90;&#x989D;&#x5B9A;&#x6709;&#x9650;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6700;&#x5927;&#x7684;&#x538B;&#x69A8;&#x670D;&#x52A1;&#x5668;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x63D0;&#x9AD8;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5E76;&#x53D1;&#x5904;&#x7406;&#x80FD;&#x529B;&#xFF0C;&#x662F;&#x5F88;&#x591A;&#x8FD0;&#x7EF4;&#x6280;&#x672F;&#x4EBA;&#x5458;&#x601D;&#x8003;&#x7684;&#x95EE;&#x9898;&#x3002;&#x5728;&#x8003;&#x8651;&#x8282;&#x7701;&#x6210;&#x672C;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;Linux&#x7684;&#x5185;&#x6838;&#x76F8;&#x5173;TCP&#x53C2;&#x6570;&#xFF0C;&#x6765;&#x6700;&#x5927;&#x7684;&#x63D0;&#x9AD8;&#x670D;&#x52A1;&#x5668;&#x6027;&#x80FD;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x6700;&#x57FA;&#x7840;&#x7684;&#x63D0;&#x9AD8;&#x8D1F;&#x8F7D;&#x95EE;&#x9898;&#xFF0C;&#x8FD8;&#x662F;&#x5347;&#x7EA7;&#x670D;&#x52A1;&#x5668;&#x786C;&#x4EF6;&#x4E86;&#xFF0C;&#x8FD9;&#x662F;&#x6700;&#x6839;&#x672C;&#x7684;&#x3002; &#x4F18;&#x5316;TIME_WAIT&#x72B6;&#x6001;&#x8FDE;&#x63A5;Linux&#x7CFB;&#x7EDF;&#x4E0B;&#xFF0C;TCP&#x8FDE;&#x63A5;&#x65AD;&#x5F00;&#x540E;&#xFF0C;&#x4F1A;&#x4EE5;TIME_WAIT&#x72B6;&#x6001;&#x4FDD;&#x7559;&#x4E00;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x7136;&#x540E;&#x624D;&#x4F1A;&#x91CA;&#x653E;&#x7AEF;&#x53E3;&#x3002;&#x5F53;&#x5E76;&#x53D1;&#x8BF7;&#x6C42;&#x8FC7;&#x591A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x4F1A;&#x4EA7;&#x751F;&#x5927;&#x91CF;&#x7684;TIME_WAIT&#x72B6;&#x6001;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x65E0;&#x6CD5;&#x53CA;&#x65F6;&#x65AD;&#x5F00;&#x7684;&#x8BDD;&#xFF0C;&#x4F1A;&#x5360;&#x7528;&#x5927;&#x91CF;&#x7684;&#x7AEF;&#x53E3;&#x8D44;&#x6E90;&#x548C;&#x670D;&#x52A1;&#x5668;&#x8D44;&#x6E90;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F18;&#x5316;TCP&#x7684;&#x5185;&#x6838;&#x53C2;&#x6570;&#xFF0C;&#x6765;&#x53CA;&#x65F6;&#x5C06;TIME_WAIT&#x72B6;&#x6001;&#x7684;&#x7AEF;&#x53E3;&#x6E05;&#x7406;&#x6389;&#x3002; &#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x7684;&#x65B9;&#x6CD5;&#x53EA;&#x5BF9;&#x62E5;&#x6709;&#x5927;&#x91CF;TIME_WAIT&#x72B6;&#x6001;&#x7684;&#x8FDE;&#x63A5;&#x5BFC;&#x81F4;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x6D88;&#x8017;&#x6709;&#x6548;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x662F;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6548;&#x679C;&#x53EF;&#x80FD;&#x4E0D;&#x660E;&#x663E;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;netstat&#x547D;&#x4EE4;&#x53BB;&#x67E5;TIME_WAIT&#x72B6;&#x6001;&#x7684;&#x8FDE;&#x63A5;&#x72B6;&#x6001;&#xFF0C;&#x8F93;&#x5165;&#x4E0B;&#x9762;&#x7684;&#x7EC4;&#x5408;&#x547D;&#x4EE4;&#xFF0C;&#x67E5;&#x770B;&#x5F53;&#x524D;TCP&#x8FDE;&#x63A5;&#x7684;&#x72B6;&#x6001;&#x548C;&#x5BF9;&#x5E94;&#x7684;&#x8FDE;&#x63A5;&#x6570;&#x91CF;&#xFF1A;1netstat -n | awk &apos;/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}&apos; &#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x4F1A;&#x8F93;&#x51FA;&#x7C7B;&#x4F3C;&#x4E0B;&#x9762;&#x7684;&#x7ED3;&#x679C;&#xFF1A;1234567LAST_ACK 16SYN_RECV 348ESTABLISHED 70FIN_WAIT1 229FIN_WAIT2 30CLOSING 33TIME_WAIT 18098 &#x6211;&#x4EEC;&#x53EA;&#x7528;&#x5173;&#x5FC3;TIME_WAIT&#x7684;&#x4E2A;&#x6570;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x6709;18000&#x591A;&#x4E2A;TIME_WAIT&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x5360;&#x7528;&#x4E86;18000&#x591A;&#x4E2A;&#x7AEF;&#x53E3;&#x3002;&#x8981;&#x77E5;&#x9053;&#x7AEF;&#x53E3;&#x7684;&#x6570;&#x91CF;&#x53EA;&#x6709;65535&#x4E2A;&#xFF0C;&#x5360;&#x7528;&#x4E00;&#x4E2A;&#x5C11;&#x4E00;&#x4E2A;&#xFF0C;&#x4F1A;&#x4E25;&#x91CD;&#x7684;&#x5F71;&#x54CD;&#x5230;&#x540E;&#x7EE7;&#x7684;&#x65B0;&#x8FDE;&#x63A5;&#x3002;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x6709;&#x5FC5;&#x8981;&#x8C03;&#x6574;&#x4E0B;Linux&#x7684;TCP&#x5185;&#x6838;&#x53C2;&#x6570;&#xFF0C;&#x8BA9;&#x7CFB;&#x7EDF;&#x66F4;&#x5FEB;&#x7684;&#x91CA;&#x653E;TIME_WAIT&#x8FDE;&#x63A5;&#x3002; &#x7528;vim&#x6253;&#x5F00;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1A;1vim /etc/sysctl.conf &#x5728;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x52A0;&#x5165;&#x4E0B;&#x9762;&#x7684;&#x51E0;&#x884C;&#x5185;&#x5BB9;&#xFF1A;1234net.ipv4.tcp_syncookies = 1net.ipv4.tcp_tw_reuse = 1net.ipv4.tcp_tw_recycle = 1net.ipv4.tcp_fin_timeout = 30 &#x8F93;&#x5165;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x8BA9;&#x5185;&#x6838;&#x53C2;&#x6570;&#x751F;&#x6548;&#xFF1A;1sysctl -p &#x7B80;&#x5355;&#x7684;&#x8BF4;&#x660E;&#x4E0A;&#x9762;&#x7684;&#x53C2;&#x6570;&#x7684;&#x542B;&#x4E49;&#xFF1A;12345678net.ipv4.tcp_syncookies = 1#&#x8868;&#x793A;&#x5F00;&#x542F;SYN Cookies&#x3002;&#x5F53;&#x51FA;&#x73B0;SYN&#x7B49;&#x5F85;&#x961F;&#x5217;&#x6EA2;&#x51FA;&#x65F6;&#xFF0C;&#x542F;&#x7528;cookies&#x6765;&#x5904;&#x7406;&#xFF0C;&#x53EF;&#x9632;&#x8303;&#x5C11;&#x91CF;SYN&#x653B;&#x51FB;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0&#xFF0C;&#x8868;&#x793A;&#x5173;&#x95ED;&#xFF1B;net.ipv4.tcp_tw_reuse = 1#&#x8868;&#x793A;&#x5F00;&#x542F;&#x91CD;&#x7528;&#x3002;&#x5141;&#x8BB8;&#x5C06;TIME-WAIT sockets&#x91CD;&#x65B0;&#x7528;&#x4E8E;&#x65B0;&#x7684;TCP&#x8FDE;&#x63A5;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0&#xFF0C;&#x8868;&#x793A;&#x5173;&#x95ED;&#xFF1B;net.ipv4.tcp_tw_recycle = 1#&#x8868;&#x793A;&#x5F00;&#x542F;TCP&#x8FDE;&#x63A5;&#x4E2D;TIME-WAIT sockets&#x7684;&#x5FEB;&#x901F;&#x56DE;&#x6536;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0&#xFF0C;&#x8868;&#x793A;&#x5173;&#x95ED;&#xFF1B;net.ipv4.tcp_fin_timeout#&#x4FEE;&#x6539;&#x7CFB;&#x7D71;&#x9ED8;&#x8BA4;&#x7684; TIMEOUT &#x65F6;&#x95F4;&#x3002; &#x5728;&#x7ECF;&#x8FC7;&#x8FD9;&#x6837;&#x7684;&#x8C03;&#x6574;&#x4E4B;&#x540E;&#xFF0C;&#x9664;&#x4E86;&#x4F1A;&#x8FDB;&#x4E00;&#x6B65;&#x63D0;&#x5347;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8D1F;&#x8F7D;&#x80FD;&#x529B;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x80FD;&#x591F;&#x9632;&#x5FA1;&#x5C0F;&#x6D41;&#x91CF;&#x7A0B;&#x5EA6;&#x7684;DoS&#x3001;CC&#x548C;SYN&#x653B;&#x51FB;&#x3002; &#x6B64;&#x5916;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x7684;&#x8FDE;&#x63A5;&#x6570;&#x672C;&#x8EAB;&#x5C31;&#x5F88;&#x591A;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x518D;&#x4F18;&#x5316;&#x4E00;&#x4E0B;TCP&#x7684;&#x53EF;&#x4F7F;&#x7528;&#x7AEF;&#x53E3;&#x8303;&#x56F4;&#xFF0C;&#x8FDB;&#x4E00;&#x6B65;&#x63D0;&#x5347;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5E76;&#x53D1;&#x80FD;&#x529B;&#x3002;&#x4F9D;&#x7136;&#x662F;&#x5F80;&#x4E0A;&#x9762;&#x7684;&#x53C2;&#x6570;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x52A0;&#x5165;&#x4E0B;&#x9762;&#x8FD9;&#x4E9B;&#x914D;&#x7F6E;&#xFF1A;12345net.ipv4.tcp_keepalive_time = 1200net.ipv4.ip_local_port_range = 10000 65000net.ipv4.tcp_max_syn_backlog = 8192net.ipv4.tcp_max_tw_buckets = 5000#&#x8FD9;&#x51E0;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5EFA;&#x8BAE;&#x53EA;&#x5728;&#x6D41;&#x91CF;&#x975E;&#x5E38;&#x5927;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5F00;&#x542F;&#xFF0C;&#x4F1A;&#x6709;&#x663E;&#x8457;&#x7684;&#x6548;&#x679C;&#x3002;&#x4E00;&#x822C;&#x7684;&#x6D41;&#x91CF;&#x5C0F;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x53BB;&#x8BBE;&#x7F6E;&#x8FD9;&#x51E0;&#x4E2A;&#x53C2;&#x6570;&#x3002; 12345678net.ipv4.tcp_keepalive_time = 1200#&#x8868;&#x793A;&#x5F53;keepalive&#x8D77;&#x7528;&#x7684;&#x65F6;&#x5019;&#xFF0C;TCP&#x53D1;&#x9001;keepalive&#x6D88;&#x606F;&#x7684;&#x9891;&#x5EA6;&#x3002;&#x7F3A;&#x7701;&#x662F;2&#x5C0F;&#x65F6;&#xFF0C;&#x6539;&#x4E3A;20&#x5206;&#x949F;&#x3002;net.ipv4.ip_local_port_range = 10000 65000#&#x8868;&#x793A;&#x7528;&#x4E8E;&#x5411;&#x5916;&#x8FDE;&#x63A5;&#x7684;&#x7AEF;&#x53E3;&#x8303;&#x56F4;&#x3002;&#x7F3A;&#x7701;&#x60C5;&#x51B5;&#x4E0B;&#x5F88;&#x5C0F;&#xFF1A;32768&#x5230;61000&#xFF0C;&#x6539;&#x4E3A;10000&#x5230;65000&#x3002;&#xFF08;&#x6CE8;&#x610F;&#xFF1A;&#x8FD9;&#x91CC;&#x4E0D;&#x8981;&#x5C06;&#x6700;&#x4F4E;&#x503C;&#x8BBE;&#x7684;&#x592A;&#x4F4E;&#xFF0C;&#x5426;&#x5219;&#x53EF;&#x80FD;&#x4F1A;&#x5360;&#x7528;&#x6389;&#x6B63;&#x5E38;&#x7684;&#x7AEF;&#x53E3;&#xFF01;&#xFF09;net.ipv4.tcp_max_syn_backlog = 8192#&#x8868;&#x793A;SYN&#x961F;&#x5217;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;1024&#xFF0C;&#x52A0;&#x5927;&#x961F;&#x5217;&#x957F;&#x5EA6;&#x4E3A;8192&#xFF0C;&#x53EF;&#x4EE5;&#x5BB9;&#x7EB3;&#x66F4;&#x591A;&#x7B49;&#x5F85;&#x8FDE;&#x63A5;&#x7684;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#x6570;&#x3002;net.ipv4.tcp_max_tw_buckets = 6000#&#x8868;&#x793A;&#x7CFB;&#x7EDF;&#x540C;&#x65F6;&#x4FDD;&#x6301;TIME_WAIT&#x7684;&#x6700;&#x5927;&#x6570;&#x91CF;&#xFF0C;&#x5982;&#x679C;&#x8D85;&#x8FC7;&#x8FD9;&#x4E2A;&#x6570;&#x5B57;&#xFF0C;TIME_WAIT&#x5C06;&#x7ACB;&#x523B;&#x88AB;&#x6E05;&#x9664;&#x5E76;&#x6253;&#x5370;&#x8B66;&#x544A;&#x4FE1;&#x606F;&#x3002;&#x9ED8; &#x8BA4;&#x4E3A;180000&#xFF0C;&#x6539;&#x4E3A;6000&#x3002;&#x5BF9;&#x4E8E;Apache&#x3001;Nginx&#x7B49;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4E0A;&#x51E0;&#x884C;&#x7684;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x5F88;&#x597D;&#x5730;&#x51CF;&#x5C11;TIME_WAIT&#x5957;&#x63A5;&#x5B57;&#x6570;&#x91CF;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x4E8E; Squid&#xFF0C;&#x6548;&#x679C;&#x5374;&#x4E0D;&#x5927;&#x3002;&#x6B64;&#x9879;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x63A7;&#x5236;TIME_WAIT&#x7684;&#x6700;&#x5927;&#x6570;&#x91CF;&#xFF0C;&#x907F;&#x514D;Squid&#x670D;&#x52A1;&#x5668;&#x88AB;&#x5927;&#x91CF;&#x7684;TIME_WAIT&#x62D6;&#x6B7B;&#x3002; &#x5185;&#x6838;&#x5176;&#x4ED6;TCP&#x53C2;&#x6570;&#x8BF4;&#x660E;1234567891011121314151617181920212223242526272829303132333435363738394041424344net.ipv4.tcp_max_syn_backlog = 65536#&#x8BB0;&#x5F55;&#x7684;&#x90A3;&#x4E9B;&#x5C1A;&#x672A;&#x6536;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x786E;&#x8BA4;&#x4FE1;&#x606F;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x7684;&#x6700;&#x5927;&#x503C;&#x3002;&#x5BF9;&#x4E8E;&#x6709;128M&#x5185;&#x5B58;&#x7684;&#x7CFB;&#x7EDF;&#x800C;&#x8A00;&#xFF0C;&#x7F3A;&#x7701;&#x503C;&#x662F;1024&#xFF0C;&#x5C0F;&#x5185;&#x5B58;&#x7684;&#x7CFB;&#x7EDF;&#x5219;&#x662F;128&#x3002;net.core.netdev_max_backlog = 32768#&#x6BCF;&#x4E2A;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x63A5;&#x6536;&#x6570;&#x636E;&#x5305;&#x7684;&#x901F;&#x7387;&#x6BD4;&#x5185;&#x6838;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x5305;&#x7684;&#x901F;&#x7387;&#x5FEB;&#x65F6;&#xFF0C;&#x5141;&#x8BB8;&#x9001;&#x5230;&#x961F;&#x5217;&#x7684;&#x6570;&#x636E;&#x5305;&#x7684;&#x6700;&#x5927;&#x6570;&#x76EE;&#x3002;net.core.somaxconn = 32768#web&#x5E94;&#x7528;&#x4E2D;listen&#x51FD;&#x6570;&#x7684;backlog&#x9ED8;&#x8BA4;&#x4F1A;&#x7ED9;&#x6211;&#x4EEC;&#x5185;&#x6838;&#x53C2;&#x6570;&#x7684;net.core.somaxconn&#x9650;&#x5236;&#x5230;128&#xFF0C;&#x800C;nginx&#x5B9A;&#x4E49;&#x7684;NGX_LISTEN_BACKLOG&#x9ED8;&#x8BA4;&#x4E3A;511&#xFF0C;&#x6240;&#x4EE5;&#x6709;&#x5FC5;&#x8981;&#x8C03;&#x6574;&#x8FD9;&#x4E2A;&#x503C;&#x3002;net.core.wmem_default = 8388608net.core.rmem_default = 8388608net.core.rmem_max = 16777216 #&#x6700;&#x5927;socket&#x8BFB;buffer,&#x53EF;&#x53C2;&#x8003;&#x7684;&#x4F18;&#x5316;&#x503C;:873200net.core.wmem_max = 16777216 #&#x6700;&#x5927;socket&#x5199;buffer,&#x53EF;&#x53C2;&#x8003;&#x7684;&#x4F18;&#x5316;&#x503C;:873200net.ipv4.tcp_timestsmps = 0#&#x65F6;&#x95F4;&#x6233;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x5E8F;&#x5217;&#x53F7;&#x7684;&#x5377;&#x7ED5;&#x3002;&#x4E00;&#x4E2A;1Gbps&#x7684;&#x94FE;&#x8DEF;&#x80AF;&#x5B9A;&#x4F1A;&#x9047;&#x5230;&#x4EE5;&#x524D;&#x7528;&#x8FC7;&#x7684;&#x5E8F;&#x5217;&#x53F7;&#x3002;&#x65F6;&#x95F4;&#x6233;&#x80FD;&#x591F;&#x8BA9;&#x5185;&#x6838;&#x63A5;&#x53D7;&#x8FD9;&#x79CD;&#x201C;&#x5F02;&#x5E38;&#x201D;&#x7684;&#x6570;&#x636E;&#x5305;&#x3002;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x5C06;&#x5176;&#x5173;&#x6389;&#x3002;net.ipv4.tcp_synack_retries = 2#&#x4E3A;&#x4E86;&#x6253;&#x5F00;&#x5BF9;&#x7AEF;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x5185;&#x6838;&#x9700;&#x8981;&#x53D1;&#x9001;&#x4E00;&#x4E2A;SYN&#x5E76;&#x9644;&#x5E26;&#x4E00;&#x4E2A;&#x56DE;&#x5E94;&#x524D;&#x9762;&#x4E00;&#x4E2A;SYN&#x7684;ACK&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x6240;&#x8C13;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x4E2D;&#x7684;&#x7B2C;&#x4E8C;&#x6B21;&#x63E1;&#x624B;&#x3002;&#x8FD9;&#x4E2A;&#x8BBE;&#x7F6E;&#x51B3;&#x5B9A;&#x4E86;&#x5185;&#x6838;&#x653E;&#x5F03;&#x8FDE;&#x63A5;&#x4E4B;&#x524D;&#x53D1;&#x9001;SYN+ACK&#x5305;&#x7684;&#x6570;&#x91CF;&#x3002;net.ipv4.tcp_syn_retries = 2#&#x5728;&#x5185;&#x6838;&#x653E;&#x5F03;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x4E4B;&#x524D;&#x53D1;&#x9001;SYN&#x5305;&#x7684;&#x6570;&#x91CF;&#x3002;#net.ipv4.tcp_tw_len = 1net.ipv4.tcp_tw_reuse = 1# &#x5F00;&#x542F;&#x91CD;&#x7528;&#x3002;&#x5141;&#x8BB8;&#x5C06;TIME-WAIT sockets&#x91CD;&#x65B0;&#x7528;&#x4E8E;&#x65B0;&#x7684;TCP&#x8FDE;&#x63A5;&#x3002;net.ipv4.tcp_wmem = 8192 436600 873200# TCP&#x5199;buffer,&#x53EF;&#x53C2;&#x8003;&#x7684;&#x4F18;&#x5316;&#x503C;: 8192 436600 873200net.ipv4.tcp_rmem = 32768 436600 873200# TCP&#x8BFB;buffer,&#x53EF;&#x53C2;&#x8003;&#x7684;&#x4F18;&#x5316;&#x503C;: 32768 436600 873200net.ipv4.tcp_mem = 94500000 91500000 92700000# &#x540C;&#x6837;&#x6709;3&#x4E2A;&#x503C;,&#x610F;&#x601D;&#x662F;:net.ipv4.tcp_mem[0]:&#x4F4E;&#x4E8E;&#x6B64;&#x503C;&#xFF0C;TCP&#x6CA1;&#x6709;&#x5185;&#x5B58;&#x538B;&#x529B;&#x3002;net.ipv4.tcp_mem[1]:&#x5728;&#x6B64;&#x503C;&#x4E0B;&#xFF0C;&#x8FDB;&#x5165;&#x5185;&#x5B58;&#x538B;&#x529B;&#x9636;&#x6BB5;&#x3002;net.ipv4.tcp_mem[2]:&#x9AD8;&#x4E8E;&#x6B64;&#x503C;&#xFF0C;TCP&#x62D2;&#x7EDD;&#x5206;&#x914D;socket&#x3002;&#x4E0A;&#x8FF0;&#x5185;&#x5B58;&#x5355;&#x4F4D;&#x662F;&#x9875;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5B57;&#x8282;&#x3002;&#x53EF;&#x53C2;&#x8003;&#x7684;&#x4F18;&#x5316;&#x503C;&#x662F;:786432 1048576 1572864net.ipv4.tcp_max_orphans = 3276800#&#x7CFB;&#x7EDF;&#x4E2D;&#x6700;&#x591A;&#x6709;&#x591A;&#x5C11;&#x4E2A;TCP&#x5957;&#x63A5;&#x5B57;&#x4E0D;&#x88AB;&#x5173;&#x8054;&#x5230;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x6587;&#x4EF6;&#x53E5;&#x67C4;&#x4E0A;&#x3002;&#x5982;&#x679C;&#x8D85;&#x8FC7;&#x8FD9;&#x4E2A;&#x6570;&#x5B57;&#xFF0C;&#x8FDE;&#x63A5;&#x5C06;&#x5373;&#x523B;&#x88AB;&#x590D;&#x4F4D;&#x5E76;&#x6253;&#x5370;&#x51FA;&#x8B66;&#x544A;&#x4FE1;&#x606F;&#x3002;&#x8FD9;&#x4E2A;&#x9650;&#x5236;&#x4EC5;&#x4EC5;&#x662F;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x7B80;&#x5355;&#x7684;DoS&#x653B;&#x51FB;&#xFF0C;&#x4E0D;&#x80FD;&#x8FC7;&#x5206;&#x4F9D;&#x9760;&#x5B83;&#x6216;&#x8005;&#x4EBA;&#x4E3A;&#x5730;&#x51CF;&#x5C0F;&#x8FD9;&#x4E2A;&#x503C;&#xFF0C;&#x66F4;&#x5E94;&#x8BE5;&#x589E;&#x52A0;&#x8FD9;&#x4E2A;&#x503C;(&#x5982;&#x679C;&#x589E;&#x52A0;&#x4E86;&#x5185;&#x5B58;&#x4E4B;&#x540E;)&#x3002;net.ipv4.tcp_fin_timeout = 30#&#x5982;&#x679C;&#x5957;&#x63A5;&#x5B57;&#x7531;&#x672C;&#x7AEF;&#x8981;&#x6C42;&#x5173;&#x95ED;&#xFF0C;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x51B3;&#x5B9A;&#x4E86;&#x5B83;&#x4FDD;&#x6301;&#x5728;FIN-WAIT-2&#x72B6;&#x6001;&#x7684;&#x65F6;&#x95F4;&#x3002;&#x5BF9;&#x7AEF;&#x53EF;&#x4EE5;&#x51FA;&#x9519;&#x5E76;&#x6C38;&#x8FDC;&#x4E0D;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#xFF0C;&#x751A;&#x81F3;&#x610F;&#x5916;&#x5F53;&#x673A;&#x3002;&#x7F3A;&#x7701;&#x503C;&#x662F;60&#x79D2;&#x3002;2.2 &#x5185;&#x6838;&#x7684;&#x901A;&#x5E38;&#x503C;&#x662F;180&#x79D2;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x6309;&#x8FD9;&#x4E2A;&#x8BBE;&#x7F6E;&#xFF0C;&#x4F46;&#x8981;&#x8BB0;&#x4F4F;&#x7684;&#x662F;&#xFF0C;&#x5373;&#x4F7F;&#x4F60;&#x7684;&#x673A;&#x5668;&#x662F;&#x4E00;&#x4E2A;&#x8F7B;&#x8F7D;&#x7684;WEB&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4E5F;&#x6709;&#x56E0;&#x4E3A;&#x5927;&#x91CF;&#x7684;&#x6B7B;&#x5957;&#x63A5;&#x5B57;&#x800C;&#x5185;&#x5B58;&#x6EA2;&#x51FA;&#x7684;&#x98CE;&#x9669;&#xFF0C;FIN- WAIT-2&#x7684;&#x5371;&#x9669;&#x6027;&#x6BD4;FIN-WAIT-1&#x8981;&#x5C0F;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x6700;&#x591A;&#x53EA;&#x80FD;&#x5403;&#x6389;1.5K&#x5185;&#x5B58;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x4EEC;&#x7684;&#x751F;&#x5B58;&#x671F;&#x957F;&#x4E9B;&#x3002; &#x7ECF;&#x8FC7;&#x8FD9;&#x6837;&#x7684;&#x4F18;&#x5316;&#x914D;&#x7F6E;&#x4E4B;&#x540E;&#xFF0C;&#x4F60;&#x7684;&#x670D;&#x52A1;&#x5668;&#x7684;TCP&#x5E76;&#x53D1;&#x5904;&#x7406;&#x80FD;&#x529B;&#x4F1A;&#x663E;&#x8457;&#x63D0;&#x9AD8;&#x3002;&#x4EE5;&#x4E0A;&#x914D;&#x7F6E;&#x4EC5;&#x4F9B;&#x53C2;&#x8003;&#xFF0C;&#x7528;&#x4E8E;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x8BF7;&#x6839;&#x636E;&#x81EA;&#x8EAB;&#x670D;&#x52A1;&#x5668;&#x60C5;&#x51B5;&#x5408;&#x7406;&#x914D;&#x7F6E;&#x3002;]]></content>
      <categories>
        <category>性能优化</category>
      </categories>
      <tags>
        <tag>内核</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[网站架构演化]]></title>
    <url>%2F%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%84%E6%BC%94%E5%8C%96.html</url>
    <content type="text"><![CDATA[&#x672C;&#x6587;&#x5C06;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x7F51;&#x7AD9;&#x67B6;&#x6784;&#x7684;&#x6F14;&#x5316;&#x5386;&#x7A0B;&#xFF0C;&#x4ECE;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x5230;&#x4E00;&#x5806;&#x670D;&#x52A1;&#x5668;&#x3002; &#x521D;&#x59CB;&#x9636;&#x6BB5;&#x5927;&#x578B;&#x7F51;&#x7AD9;&#x90FD;&#x662F;&#x4ECE;&#x5C0F;&#x578B;&#x7F51;&#x7AD9;&#x53D1;&#x5C55;&#x800C;&#x6765;&#xFF0C;&#x7F51;&#x7AD9;&#x67B6;&#x6784;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#xFF0C;&#x662F;&#x4ECE;&#x5C0F;&#x578B;&#x7F51;&#x7AD9;&#x67B6;&#x6784;&#x9010;&#x6B65;&#x6F14;&#x5316;&#x800C;&#x6765;&#x3002;&#x5C0F;&#x578B;&#x7F51;&#x7AD9;&#x6700;&#x5F00;&#x59CB;&#x65F6;&#x6CA1;&#x6709;&#x592A;&#x591A;&#x4EBA;&#x8BBF;&#x95EE;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x5C31;&#x7EF0;&#x7EF0;&#x6709;&#x4F59;&#xFF0C;&#x8FD9;&#x65F6;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3001;&#x6570;&#x636E;&#x5E93;&#x3001;&#x6587;&#x4EF6;&#x7B49;&#x6240;&#x6709;&#x7684;&#x8D44;&#x6E90;&#x90FD;&#x5728;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x3002;&#x901A;&#x5E38;&#x670D;&#x52A1;&#x5668;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4F7F;&#x7528;Linux&#xFF0C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4F7F;&#x7528;PHP&#x5F00;&#x53D1;&#xFF0C;&#x7136;&#x540E;&#x90E8;&#x7F72;&#x5728;Apache&#x4E0A;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x4F7F;&#x7528;MySQL&#xFF0C;&#x6C47;&#x96C6;&#x5404;&#x79CD;&#x514D;&#x8D39;&#x5F00;&#x6E90;&#x8F6F;&#x4EF6;&#x53CA;&#x4E00;&#x53F0;&#x5EC9;&#x4EF7;&#x670D;&#x52A1;&#x5668;&#x5C31;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x7F51;&#x7AD9;&#x7684;&#x53D1;&#x5C55;&#x4E4B;&#x8DEF;&#x4E86; &#x5206;&#x79BB;&#x9636;&#x6BB5;&#x968F;&#x7740;&#x7F51;&#x7AD9;&#x4E1A;&#x52A1;&#x7684;&#x53D1;&#x5C55;&#xFF0C;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x9010;&#x6E10;&#x4E0D;&#x80FD;&#x6EE1;&#x8DB3;&#x9700;&#x6C42;&#xFF1A;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#x7684;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x5BFC;&#x81F4;&#x6027;&#x80FD;&#x8D8A;&#x6765;&#x8D8A;&#x5DEE;&#xFF0C;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#x7684;&#x6570;&#x636E;&#x5BFC;&#x81F4;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x4E0D;&#x8DB3;&#x3002;&#x8FD9;&#x65F6;&#x5C31;&#x9700;&#x8981;&#x5C06;&#x5E94;&#x7528;&#x548C;&#x6570;&#x636E;&#x5206;&#x79BB;&#x3002;&#x5E94;&#x7528;&#x548C;&#x6570;&#x636E;&#x5206;&#x79BB;&#x540E;&#x6574;&#x4E2A;&#x7F51;&#x7AD9;&#x4F7F;&#x7528;&#x4E09;&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF1A;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x3001;&#x6587;&#x4EF6;&#x670D;&#x52A1;&#x5668;&#x548C;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#x3002;&#x8FD9;&#x4E09;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x5BF9;&#x786C;&#x4EF6;&#x8D44;&#x6E90;&#x7684;&#x8981;&#x6C42;&#x5404;&#x4E0D;&#x76F8;&#x540C;&#xFF0C;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x9700;&#x8981;&#x5904;&#x7406;&#x5927;&#x91CF;&#x7684;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x66F4;&#x5FEB;&#x66F4;&#x5F3A;&#x5927;&#x7684;CPU&#xFF1B;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#x9700;&#x8981;&#x5FEB;&#x901F;&#x78C1;&#x76D8;&#x68C0;&#x7D22;&#x548C;&#x6570;&#x636E;&#x7F13;&#x5B58;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x66F4;&#x5FEB;&#x7684;&#x786C;&#x76D8;&#x548C;&#x66F4;&#x5927;&#x7684;&#x5185;&#x5B58;&#xFF1B;&#x6587;&#x4EF6;&#x670D;&#x52A1;&#x5668;&#x9700;&#x8981;&#x5B58;&#x50A8;&#x5927;&#x91CF;&#x7528;&#x6237;&#x4E0A;&#x4F20;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x66F4;&#x5927;&#x7684;&#x786C;&#x76D8; &#x7F13;&#x5B58;&#x9636;&#x6BB5;&#x7F51;&#x7AD9;&#x8BBF;&#x95EE;&#x7279;&#x70B9;&#x548C;&#x73B0;&#x5B9E;&#x4E16;&#x754C;&#x7684;&#x8D22;&#x5BCC;&#x5206;&#x914D;&#x4E00;&#x6837;&#x9075;&#x5FAA;&#x4E8C;&#x516B;&#x5B9A;&#x5F8B;&#xFF1A;80%&#x7684;&#x4E1A;&#x52A1;&#x8BBF;&#x95EE;&#x96C6;&#x4E2D;&#x5728;20%&#x7684;&#x6570;&#x636E;&#x4E0A;&#x3002;&#x65E2;&#x7136;&#x5927;&#x90E8;&#x5206;&#x7684;&#x4E1A;&#x52A1;&#x8BBF;&#x95EE;&#x96C6;&#x4E2D;&#x5728;&#x4E00;&#x5C0F;&#x90E8;&#x5206;&#x6570;&#x636E;&#x4E0A;&#xFF0C;&#x90A3;&#x4E48;&#x5982;&#x679C;&#x628A;&#x8FD9;&#x4E00;&#x5C0F;&#x90E8;&#x5206;&#x6570;&#x636E;&#x7F13;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x51CF;&#x5C11;&#x6570;&#x636E;&#x5E93;&#x7684;&#x8BBF;&#x95EE;&#x538B;&#x529B;&#xFF0C;&#x63D0;&#x9AD8;&#x6574;&#x4E2A;&#x7F51;&#x7AD9;&#x7684;&#x6570;&#x636E;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#xFF0C;&#x6539;&#x5584;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5199;&#x5165;&#x6027;&#x80FD; &#x3000;&#x3000;&#x7F51;&#x7AD9;&#x4F7F;&#x7528;&#x7684;&#x7F13;&#x5B58;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x4E24;&#x79CD;&#xFF1A;&#x7F13;&#x5B58;&#x5728;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x672C;&#x5730;&#x7F13;&#x5B58;&#x548C;&#x7F13;&#x5B58;&#x5728;&#x4E13;&#x95E8;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x8FDC;&#x7A0B;&#x7F13;&#x5B58;&#x3002;&#x672C;&#x5730;&#x7F13;&#x5B58;&#x7684;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#x66F4;&#x5FEB;&#x4E00;&#x4E9B;&#xFF0C;&#x4F46;&#x662F;&#x53D7;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x5185;&#x5B58;&#x9650;&#x5236;&#xFF0C;&#x5176;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x91CF;&#x6709;&#x9650;&#xFF0C;&#x800C;&#x4E14;&#x4F1A;&#x51FA;&#x73B0;&#x548C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E89;&#x7528;&#x5185;&#x5B58;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x8FDC;&#x7A0B;&#x5206;&#x5E03;&#x5F0F;&#x7F13;&#x5B58;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x96C6;&#x7FA4;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x90E8;&#x7F72;&#x5927;&#x5185;&#x5B58;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4F5C;&#x4E3A;&#x4E13;&#x95E8;&#x7684;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x7406;&#x8BBA;&#x4E0A;&#x505A;&#x5230;&#x4E0D;&#x53D7;&#x5185;&#x5B58;&#x5185;&#x5BB9;&#x9650;&#x5236;&#x7684;&#x7F13;&#x5B58;&#x670D;&#x52A1; &#x96C6;&#x7FA4;&#x9636;&#x6BB5;&#x4F7F;&#x7528;&#x7F13;&#x5B58;&#x540E;&#xFF0C;&#x6570;&#x636E;&#x8BBF;&#x95EE;&#x538B;&#x529B;&#x5F97;&#x5230;&#x6709;&#x6548;&#x7F13;&#x89E3;&#xFF0C;&#x4F46;&#x662F;&#x5355;&#x4E00;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x80FD;&#x591F;&#x5904;&#x7406;&#x7684;&#x8BF7;&#x6C42;&#x8FDE;&#x63A5;&#x6709;&#x9650;&#xFF0C;&#x5728;&#x7F51;&#x7AD9;&#x8BBF;&#x95EE;&#x9AD8;&#x5CF0;&#x671F;&#xFF0C;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x6210;&#x4E3A;&#x6574;&#x4E2A;&#x7F51;&#x7AD9;&#x7684;&#x74F6;&#x9888; &#x3000;&#x3000;&#x4F7F;&#x7528;&#x96C6;&#x7FA4;&#x662F;&#x7F51;&#x7AD9;&#x89E3;&#x51B3;&#x9AD8;&#x5E76;&#x53D1;&#x3001;&#x6D77;&#x91CF;&#x6570;&#x636E;&#x95EE;&#x9898;&#x7684;&#x5E38;&#x7528;&#x624B;&#x6BB5;&#x3002;&#x5F53;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5904;&#x7406;&#x80FD;&#x529B;&#x3001;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x4E0D;&#x8DB3;&#x65F6;&#xFF0C;&#x901A;&#x8FC7;&#x589E;&#x52A0;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x5206;&#x62C5;&#x539F;&#x6709;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8BBF;&#x95EE;&#x53CA;&#x5B58;&#x50A8;&#x538B;&#x529B;&#x3002;&#x5BF9;&#x7F51;&#x7AD9;&#x67B6;&#x6784;&#x800C;&#x8A00;&#xFF0C;&#x53EA;&#x8981;&#x80FD;&#x901A;&#x8FC7;&#x589E;&#x52A0;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x7684;&#x65B9;&#x5F0F;&#x6539;&#x5584;&#x8D1F;&#x8F7D;&#x538B;&#x529B;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x4EE5;&#x540C;&#x6837;&#x7684;&#x65B9;&#x5F0F;&#x6301;&#x7EED;&#x589E;&#x52A0;&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x65AD;&#x6539;&#x5584;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x7CFB;&#x7EDF;&#x7684;&#x53EF;&#x4F38;&#x7F29;&#x6027;&#x3002;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x5B9E;&#x73B0;&#x96C6;&#x7FA4;&#x662F;&#x7F51;&#x7AD9;&#x53EF;&#x4F38;&#x7F29;&#x96C6;&#x7FA4;&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#x4E2D;&#x8F83;&#x4E3A;&#x7B80;&#x5355;&#x6210;&#x719F;&#x7684;&#x4E00;&#x79CD; &#x3000;&#x3000;&#x901A;&#x8FC7;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x8C03;&#x5EA6;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x53EF;&#x5C06;&#x6765;&#x81EA;&#x7528;&#x6237;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x8BBF;&#x95EE;&#x8BF7;&#x6C42;&#x5206;&#x53D1;&#x5230;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x4EFB;&#x4F55;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x66F4;&#x591A;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x5C31;&#x5728;&#x96C6;&#x7FA4;&#x4E2D;&#x52A0;&#x5165;&#x66F4;&#x591A;&#x7684;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4F7F;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8D1F;&#x8F7D;&#x538B;&#x529B;&#x4E0D;&#x518D;&#x6210;&#x4E3A;&#x6574;&#x4E2A;&#x7F51;&#x7AD9;&#x7684;&#x74F6;&#x9888; &#x6570;&#x636E;&#x5E93;&#x5206;&#x79BB;&#x7F51;&#x7AD9;&#x5728;&#x4F7F;&#x7528;&#x7F13;&#x5B58;&#x540E;&#xFF0C;&#x4F7F;&#x7EDD;&#x5927;&#x90E8;&#x5206;&#x6570;&#x636E;&#x8BFB;&#x64CD;&#x4F5C;&#x8BBF;&#x95EE;&#x90FD;&#x53EF;&#x4EE5;&#x4E0D;&#x901A;&#x8FC7;&#x6570;&#x636E;&#x5E93;&#x5C31;&#x80FD;&#x5B8C;&#x6210;&#xFF0C;&#x4F46;&#x662F;&#x4ECD;&#x6709;&#x4E00;&#x90E8;&#x5206;&#x8BFB;&#x64CD;&#x4F5C;(&#x7F13;&#x5B58;&#x8BBF;&#x95EE;&#x4E0D;&#x547D;&#x4E2D;&#x3001;&#x7F13;&#x5B58;&#x8FC7;&#x671F;)&#x548C;&#x5168;&#x90E8;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x9700;&#x8981;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5728;&#x7F51;&#x7AD9;&#x7684;&#x7528;&#x6237;&#x8FBE;&#x5230;&#x4E00;&#x5B9A;&#x89C4;&#x6A21;&#x540E;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x56E0;&#x4E3A;&#x8D1F;&#x8F7D;&#x538B;&#x529B;&#x8FC7;&#x9AD8;&#x800C;&#x6210;&#x4E3A;&#x7F51;&#x7AD9;&#x7684;&#x74F6;&#x9888; &#x3000;&#x3000;&#x76EE;&#x524D;&#x5927;&#x90E8;&#x5206;&#x7684;&#x4E3B;&#x6D41;&#x6570;&#x636E;&#x5E93;&#x90FD;&#x63D0;&#x4F9B;&#x4E3B;&#x4ECE;&#x70ED;&#x5907;&#x529F;&#x80FD;&#xFF0C;&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x7F51;&#x53F0;&#x6570;&#x636E;&#x5E93;&#x4E3B;&#x4ECE;&#x5173;&#x7CFB;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x4E00;&#x53F0;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#x7684;&#x6570;&#x636E;&#x66F4;&#x65B0;&#x540C;&#x6B65;&#x5230;&#x53E6;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x3002;&#x7F51;&#x7AD9;&#x5229;&#x7528;&#x6570;&#x636E;&#x5E93;&#x7684;&#x8FD9;&#x4E00;&#x529F;&#x80FD;&#xFF0C;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x5E93;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#xFF0C;&#x4ECE;&#x800C;&#x6539;&#x5584;&#x6570;&#x636E;&#x5E93;&#x8D1F;&#x8F7D;&#x538B;&#x529B; &#x3000;&#x3000;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x5728;&#x5199;&#x6570;&#x636E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8BBF;&#x95EE;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#x901A;&#x8FC7;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x673A;&#x5236;&#x5C06;&#x6570;&#x636E;&#x66F4;&#x65B0;&#x540C;&#x6B65;&#x5230;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x8FD9;&#x6837;&#x5F53;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x8BFB;&#x6570;&#x636E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x83B7;&#x5F97;&#x6570;&#x636E;&#x3002;&#x4E3A;&#x4E86;&#x4FBF;&#x4E8E;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8BBF;&#x95EE;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x540E;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x901A;&#x5E38;&#x5728;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x4F7F;&#x7528;&#x4E13;&#x95E8;&#x7684;&#x6570;&#x636E;&#x8BBF;&#x95EE;&#x6A21;&#x5757;&#xFF0C;&#x4F7F;&#x6570;&#x636E;&#x5E93;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x5BF9;&#x5E94;&#x7528;&#x900F;&#x660E; &#x53CD;&#x5411;&#x4EE3;&#x7406;&#x548C;CDN&#x968F;&#x7740;&#x7F51;&#x7AD9;&#x4E1A;&#x52A1;&#x4E0D;&#x65AD;&#x53D1;&#x5C55;&#xFF0C;&#x7528;&#x6237;&#x89C4;&#x6A21;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#xFF0C;&#x7531;&#x4E8E;&#x590D;&#x6742;&#x7684;&#x7F51;&#x7EDC;&#x73AF;&#x5883;&#xFF0C;&#x4E0D;&#x540C;&#x5730;&#x533A;&#x7684;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x7F51;&#x7AD9;&#x65F6;&#xFF0C;&#x901F;&#x5EA6;&#x5DEE;&#x522B;&#x4E5F;&#x6781;&#x5927;&#x3002;&#x4E3A;&#x4E86;&#x63D0;&#x4F9B;&#x66F4;&#x597D;&#x7684;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#xFF0C;&#x7559;&#x4F4F;&#x7528;&#x6237;&#xFF0C;&#x7F51;&#x7AD9;&#x9700;&#x8981;&#x52A0;&#x901F;&#x7F51;&#x7AD9;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#x3002;&#x4E3B;&#x8981;&#x624B;&#x6BB5;&#x6709;&#x4F7F;&#x7528;CDN&#x548C;&#x53CD;&#x5411;&#x4EE3;&#x7406; &#x3000;&#x3000;CDN&#x548C;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x7684;&#x57FA;&#x672C;&#x539F;&#x7406;&#x90FD;&#x662F;&#x7F13;&#x5B58;&#xFF0C;&#x533A;&#x522B;&#x5728;&#x4E8E;CDN&#x90E8;&#x7F72;&#x5728;&#x7F51;&#x7EDC;&#x63D0;&#x4F9B;&#x5546;&#x7684;&#x673A;&#x623F;&#xFF0C;&#x4F7F;&#x7528;&#x6237;&#x5728;&#x8BF7;&#x6C42;&#x7F51;&#x7AD9;&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4ECE;&#x8DDD;&#x79BB;&#x81EA;&#x5DF1;&#x6700;&#x8FD1;&#x7684;&#x7F51;&#x7EDC;&#x63D0;&#x4F9B;&#x5546;&#x673A;&#x623F;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF1B;&#x800C;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x5219;&#x90E8;&#x7F72;&#x5728;&#x7F51;&#x7AD9;&#x7684;&#x4E2D;&#x5FC3;&#x673A;&#x623F;&#xFF0C;&#x5F53;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#x5230;&#x8FBE;&#x4E2D;&#x5FC3;&#x673A;&#x623F;&#x540E;&#xFF0C;&#x9996;&#x5148;&#x8BBF;&#x95EE;&#x7684;&#x670D;&#x52A1;&#x5668;&#x662F;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5982;&#x679C;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#x7F13;&#x5B58;&#x7740;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x5C31;&#x5C06;&#x5176;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x7ED9;&#x7528;&#x6237; &#x3000;&#x3000;&#x4F7F;&#x7528;CDN&#x548C;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x7684;&#x76EE;&#x7684;&#x90FD;&#x662F;&#x5C3D;&#x65E9;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x7ED9;&#x7528;&#x6237;&#xFF0C;&#x4E00;&#x65B9;&#x9762;&#x52A0;&#x5FEB;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#xFF0C;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#x4E5F;&#x51CF;&#x8F7B;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8D1F;&#x8F7D;&#x538B;&#x529B; &#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4EFB;&#x4F55;&#x5F3A;&#x5927;&#x7684;&#x5355;&#x4E00;&#x670D;&#x52A1;&#x5668;&#x90FD;&#x6EE1;&#x8DB3;&#x4E0D;&#x4E86;&#x5927;&#x578B;&#x7F51;&#x7AD9;&#x6301;&#x7EED;&#x589E;&#x957F;&#x7684;&#x4E1A;&#x52A1;&#x9700;&#x6C42;&#x3002;&#x6570;&#x636E;&#x5E93;&#x7ECF;&#x8FC7;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x540E;&#xFF0C;&#x4ECE;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x62C6;&#x5206;&#x6210;&#x4E24;&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4F46;&#x662F;&#x968F;&#x7740;&#x7F51;&#x7AD9;&#x4E1A;&#x52A1;&#x7684;&#x53D1;&#x5C55;&#x4F9D;&#x7136;&#x4E0D;&#x80FD;&#x6EE1;&#x8DB3;&#x9700;&#x6C42;&#xFF0C;&#x8FD9;&#x65F6;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5206;&#x5E03;&#x5F0F;&#x6570;&#x636E;&#x5E93;&#x3002;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5206;&#x5E03;&#x5F0F;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF; &#x3000;&#x3000;&#x5206;&#x5E03;&#x5F0F;&#x6570;&#x636E;&#x5E93;&#x662F;&#x7F51;&#x7AD9;&#x6570;&#x636E;&#x5E93;&#x62C6;&#x5206;&#x7684;&#x6700;&#x540E;&#x624B;&#x6BB5;&#xFF0C;&#x53EA;&#x6709;&#x5728;&#x5355;&#x8868;&#x6570;&#x636E;&#x89C4;&#x6A21;&#x975E;&#x5E38;&#x5E9E;&#x5927;&#x7684;&#x65F6;&#x5019; &#x624D;&#x4F7F;&#x7528;&#x3002;&#x4E0D;&#x5230;&#x4E0D;&#x5F97;&#x5DF2;&#x65F6;&#xFF0C;&#x7F51;&#x7AD9;&#x66F4;&#x5E38;&#x7528;&#x7684;&#x6570;&#x636E;&#x5E93;&#x62C6;&#x5206;&#x624B;&#x6BB5;&#x662F;&#x4E1A;&#x52A1;&#x5206;&#x5E93;&#xFF0C;&#x5C06;&#x4E0D;&#x540C;&#x4E1A;&#x52A1;&#x7684;&#x6570;&#x636E;&#x5E93;&#x90E8;&#x7F72;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x7269;&#x7406;&#x670D;&#x52A1;&#x5668;&#x4E0A; NoSQL&#x548C;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x968F;&#x7740;&#x7F51;&#x7AD9;&#x4E1A;&#x52A1;&#x8D8A;&#x6765;&#x8D8A;&#x590D;&#x6742;&#xFF0C;&#x5BF9;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x548C;&#x68C0;&#x7D22;&#x7684;&#x9700;&#x6C42;&#x4E5F;&#x8D8A;&#x6765;&#x8D8A;&#x590D;&#x6742;&#xFF0C;&#x7F51;&#x7AD9;&#x9700;&#x8981;&#x91C7;&#x7528;&#x4E00;&#x4E9B;&#x975E;&#x5173;&#x7CFB;&#x6570;&#x636E;&#x5E93;&#x6280;&#x672F;&#x5982;NoSQL&#x548C;&#x975E;&#x6570;&#x636E;&#x5E93;&#x67E5;&#x8BE2;&#x6280;&#x672F;&#x5982;&#x641C;&#x7D22;&#x5F15;&#x64CE; &#x3000;&#x3000;NoSQL&#x548C;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x90FD;&#x662F;&#x6E90;&#x81EA;&#x4E92;&#x8054;&#x7F51;&#x7684;&#x6280;&#x672F;&#x624B;&#x6BB5;&#xFF0C;&#x5BF9;&#x53EF;&#x4F38;&#x7F29;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x7279;&#x6027;&#x5177;&#x6709;&#x66F4;&#x597D;&#x7684;&#x652F;&#x6301;&#x3002;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x5219;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x7EDF;&#x4E00;&#x6570;&#x636E;&#x8BBF;&#x95EE;&#x6A21;&#x5757;&#x8BBF;&#x95EE;&#x5404;&#x79CD;&#x6570;&#x636E;&#xFF0C;&#x51CF;&#x8F7B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7BA1;&#x7406;&#x8BF8;&#x591A;&#x6570;&#x636E;&#x6E90;&#x7684;&#x9EBB;&#x70E6; &#x4E1A;&#x52A1;&#x62C6;&#x5206;&#x5927;&#x578B;&#x7F51;&#x7AD9;&#x4E3A;&#x4E86;&#x5E94;&#x5BF9;&#x65E5;&#x76CA;&#x590D;&#x6742;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#xFF0C;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x5206;&#x800C;&#x6CBB;&#x4E4B;&#x7684;&#x624B;&#x6BB5;&#x5C06;&#x6574;&#x4E2A;&#x7F51;&#x7AD9;&#x4E1A;&#x52A1;&#x5206;&#x6210;&#x4E0D;&#x540C;&#x7684;&#x4EA7;&#x54C1;&#x7EBF;&#xFF0C;&#x5982;&#x5927;&#x578B;&#x8D2D;&#x7269;&#x4EA4;&#x6613;&#x7F51;&#x7AD9;&#x5C31;&#x4F1A;&#x5C06;&#x9996;&#x9875;&#x3001;&#x5546;&#x94FA;&#x3001;&#x8BA2;&#x5355;&#x3001;&#x4E70;&#x5BB6;&#x3001;&#x5356;&#x5BB6;&#x7B49;&#x62C6;&#x5206;&#x6210;&#x4E0D;&#x540C;&#x7684;&#x4EA7;&#x54C1;&#x7EBF;&#xFF0C;&#x5206;&#x5F52;&#x4E0D;&#x540C;&#x7684;&#x4E1A;&#x52A1;&#x56E2;&#x961F;&#x8D1F;&#x8D23; &#x3000;&#x3000;&#x5177;&#x4F53;&#x5230;&#x6280;&#x672F;&#x4E0A;&#xFF0C;&#x4E5F;&#x4F1A;&#x6839;&#x636E;&#x4EA7;&#x54C1;&#x7EBF;&#x5212;&#x5206;&#xFF0C;&#x5C06;&#x4E00;&#x4E2A;&#x7F51;&#x7AD9;&#x62C6;&#x5206;&#x6210;&#x8BB8;&#x591A;&#x4E0D;&#x540C;&#x7684;&#x5E94;&#x7528;&#xFF0C;&#x6BCF;&#x4E2A;&#x5E94;&#x7528;&#x72EC;&#x7ACB;&#x90E8;&#x7F72;&#x7EF4;&#x62A4;&#x3002;&#x5E94;&#x7528;&#x4E4B;&#x95F4;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x8D85;&#x94FE;&#x63A5;&#x5EFA;&#x7ACB;&#x5173;&#x7CFB;(&#x5728;&#x9996;&#x9875;&#x4E0A;&#x7684;&#x5BFC;&#x822A;&#x94FE;&#x63A5;&#x6BCF;&#x4E2A;&#x90FD;&#x6307;&#x5411;&#x4E0D;&#x540C;&#x7684;&#x5E94;&#x7528;&#x5730;&#x5740;)&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6D88;&#x606F;&#x961F;&#x5217;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x5206;&#x53D1;&#xFF0C;&#x5F53;&#x7136;&#x6700;&#x591A;&#x7684;&#x8FD8;&#x662F;&#x901A;&#x8FC7;&#x8BBF;&#x95EE;&#x540C;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x6765;&#x6784;&#x6210;&#x4E00;&#x4E2A;&#x5173;&#x8054;&#x7684;&#x5B8C;&#x6574;&#x7CFB;&#x7EDF; &#x5206;&#x5E03;&#x5F0F;&#x670D;&#x52A1;&#x968F;&#x7740;&#x4E1A;&#x52A1;&#x62C6;&#x5206;&#x8D8A;&#x6765;&#x8D8A;&#x5C0F;&#xFF0C;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x8D8A;&#x6765;&#x8D8A;&#x5E9E;&#x5927;&#xFF0C;&#x5E94;&#x7528;&#x7CFB;&#x7EDF;&#x7684;&#x6574;&#x4F53;&#x590D;&#x6742;&#x5EA6;&#x5448;&#x6307;&#x6570;&#x7EA7;&#x589E;&#x52A0;&#xFF0C;&#x90E8;&#x7F72;&#x7EF4;&#x62A4;&#x8D8A;&#x6765;&#x8D8A;&#x56F0;&#x96BE;&#x3002;&#x7531;&#x4E8E;&#x6240;&#x6709;&#x5E94;&#x7528;&#x8981;&#x548C;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;&#x7CFB;&#x7EDF;&#x8FDE;&#x63A5;&#xFF0C;&#x5728;&#x6570;&#x4E07;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x89C4;&#x6A21;&#x7684;&#x7F51;&#x7AD9;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E9B;&#x8FDE;&#x63A5;&#x7684;&#x6570;&#x76EE;&#x662F;&#x670D;&#x52A1;&#x5668;&#x89C4;&#x6A21;&#x7684;&#x5E73;&#x65B9;&#xFF0C;&#x5BFC;&#x81F4;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x8D44;&#x6E90;&#x4E0D;&#x8DB3;&#xFF0C;&#x62D2;&#x7EDD;&#x670D;&#x52A1; &#x3000;&#x3000;&#x65E2;&#x7136;&#x6BCF;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x7CFB;&#x7EDF;&#x90FD;&#x9700;&#x8981;&#x6267;&#x884C;&#x8BB8;&#x591A;&#x76F8;&#x540C;&#x7684;&#x4E1A;&#x52A1;&#x64CD;&#x4F5C;&#xFF0C;&#x6BD4;&#x5982;&#x7528;&#x6237;&#x7BA1;&#x7406;&#x3001;&#x5546;&#x54C1;&#x7BA1;&#x7406;&#x7B49;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x5C06;&#x8FD9;&#x4E9B;&#x5171;&#x7528;&#x7684;&#x4E1A;&#x52A1;&#x63D0;&#x53D6;&#x51FA;&#x6765;&#xFF0C;&#x72EC;&#x7ACB;&#x90E8;&#x7F72;&#x3002;&#x7531;&#x8FD9;&#x4E9B;&#x53EF;&#x590D;&#x7528;&#x7684;&#x4E1A;&#x52A1;&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x63D0;&#x4F9B;&#x5171;&#x7528;&#x4E1A;&#x52A1;&#x670D;&#x52A1;&#xFF0C;&#x800C;&#x5E94;&#x7528;&#x7CFB;&#x7EDF;&#x53EA;&#x9700;&#x8981;&#x7BA1;&#x7406;&#x7528;&#x6237;&#x754C;&#x9762;&#xFF0C;&#x901A;&#x8FC7;&#x5206;&#x5E03;&#x5F0F;&#x670D;&#x52A1;&#x8C03;&#x7528;&#x5171;&#x7528;&#x4E1A;&#x52A1;&#x670D;&#x52A1;&#x5B8C;&#x6210;&#x5177;&#x4F53;&#x4E1A;&#x52A1;&#x64CD;&#x4F5C;]]></content>
      <categories>
        <category>运维</category>
      </categories>
      <tags>
        <tag>架构</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Codis3.1 集群安装部署]]></title>
    <url>%2FCodis3-1-%E9%9B%86%E7%BE%A4%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2.html</url>
    <content type="text"><![CDATA[Codis &#x662F;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F; Redis &#x89E3;&#x51B3;&#x65B9;&#x6848;, &#x5BF9;&#x4E8E;&#x4E0A;&#x5C42;&#x7684;&#x5E94;&#x7528;&#x6765;&#x8BF4;, &#x8FDE;&#x63A5;&#x5230; Codis Proxy &#x548C;&#x8FDE;&#x63A5;&#x539F;&#x751F;&#x7684; Redis Server &#x6CA1;&#x6709;&#x663E;&#x8457;&#x533A;&#x522B;, &#x4E0A;&#x5C42;&#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x50CF;&#x4F7F;&#x7528;&#x5355;&#x673A;&#x7684; Redis &#x4E00;&#x6837;&#x4F7F;&#x7528;, Codis &#x5E95;&#x5C42;&#x4F1A;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x7684;&#x8F6C;&#x53D1;, &#x4E0D;&#x505C;&#x673A;&#x7684;&#x6570;&#x636E;&#x8FC1;&#x79FB;&#x7B49;&#x5DE5;&#x4F5C;, &#x6240;&#x6709;&#x540E;&#x8FB9;&#x7684;&#x4E00;&#x5207;&#x4E8B;&#x60C5;, &#x5BF9;&#x4E8E;&#x524D;&#x9762;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x6765;&#x8BF4;&#x662F;&#x900F;&#x660E;&#x7684;, &#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7684;&#x8BA4;&#x4E3A;&#x540E;&#x8FB9;&#x8FDE;&#x63A5;&#x7684;&#x662F;&#x4E00;&#x4E2A;&#x5185;&#x5B58;&#x65E0;&#x9650;&#x5927;&#x7684; Redis &#x670D;&#x52A1;&#x3002; &#x73AF;&#x5883;&#x8BF4;&#x660E; codis&#x67B6;&#x6784;&#x56FE;&#x5206;&#x914D;&#x89D2;&#x8272; &#x4E3B;&#x673A;&#x540D; IP&#x5730;&#x5740; &#x64CD;&#x4F5C;&#x7CFB;&#x7EDF; &#x7528;&#x9014; codis-1 10.16.20.62 CentOS 6.5 codis-dashboard&#x3001;codis-fe&#x3001;codis-ha&#x3001;codis-proxy1&#x3001;codis_group1_M(6379)&#x3001;codis_group3_S(6380) codis-2 10.16.20.63 CentOS 6.5 codis-proxy2&#x3001;codis_group2_M(6379)&#x3001;codis_group1_S(6380) codis-3 10.16.20.64 CentOS 6.5 codis-proxy3&#x3001;codis_group3_M(6379)&#x3001;codis_group2_S(6380) &#x8F6F;&#x4EF6;&#x7248;&#x672C; Codis3.1 go1.6.2 jdk1.8 zookeeper3.4.8 codis3.x&#x7EC4;&#x4EF6;&#x8BF4;&#x660E; Codis Server&#xFF1A;&#x57FA;&#x4E8E; redis-2.8.21 &#x5206;&#x652F;&#x5F00;&#x53D1;&#x3002;&#x589E;&#x52A0;&#x4E86;&#x989D;&#x5916;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x4EE5;&#x652F;&#x6301; slot &#x6709;&#x5173;&#x7684;&#x64CD;&#x4F5C;&#x4EE5;&#x53CA;&#x6570;&#x636E;&#x8FC1;&#x79FB;&#x6307;&#x4EE4;&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x4FEE;&#x6539;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x6587;&#x6863; redis&#x7684;&#x4FEE;&#x6539;&#x3002; Codis Proxy&#xFF1A;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x7684; Redis &#x4EE3;&#x7406;&#x670D;&#x52A1;, &#x5B9E;&#x73B0;&#x4E86; Redis &#x534F;&#x8BAE;&#x3002;&#x9664;&#x90E8;&#x5206;&#x547D;&#x4EE4;&#x4E0D;&#x652F;&#x6301;&#x4EE5;&#x5916;&#xFF0C;&#x8868;&#x73B0;&#x7684;&#x548C;&#x539F;&#x751F;&#x7684; Redis &#x6CA1;&#x6709;&#x533A;&#x522B;&#xFF08;&#x5C31;&#x50CF; Twemproxy&#xFF09;&#x3002; &#x5BF9;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;&#x4E1A;&#x52A1;&#x96C6;&#x7FA4;&#x800C;&#x8A00;&#xFF0C;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x90E8;&#x7F72;&#x591A;&#x4E2A;codis-proxy&#x5B9E;&#x4F8B;&#xFF0C;&#x4E0D;&#x540C; codis-proxy &#x4E4B;&#x95F4;&#x7531; codis-dashboard &#x4FDD;&#x8BC1;&#x72B6;&#x6001;&#x540C;&#x6B65;&#x3002; Codis Dashboard&#xFF1A;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x652F;&#x6301; codis-proxy&#x3001;codis-server &#x7684;&#x6DFB;&#x52A0;&#x3001;&#x5220;&#x9664;&#x4EE5;&#x53CA;&#x6570;&#x636E;&#x8FC1;&#x79FB;&#x7B49;&#x64CD;&#x4F5C;&#x3002;&#x5728;&#x96C6;&#x7FA4;&#x72B6;&#x6001;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;&#xFF0C;codis-dashboard &#x7EF4;&#x62A4;&#x96C6;&#x7FA4;&#x4E0B;&#x6240;&#x6709; codis-proxy &#x7684;&#x72B6;&#x6001;&#x4E00;&#x81F4;&#x6027;&#x3002; &#x5BF9;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;&#x96C6;&#x7FA4;&#x800C;&#x8A00;&#xFF0C;&#x540C;&#x4E00;&#x4E2A;&#x65F6;&#x523B; codis-dashboard &#x53EA;&#x80FD;&#x6709; 0&#x4E2A;&#x6216;&#x8005;1&#x4E2A;&#xFF0C;&#x6240;&#x6709;&#x5BF9;&#x96C6;&#x7FA4;&#x7684;&#x4FEE;&#x6539;&#x90FD;&#x5FC5;&#x987B;&#x901A;&#x8FC7; codis-dashboard &#x5B8C;&#x6210;&#x3002; Codis Admin&#xFF1A;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#xFF0C;&#x53EF;&#x7528;&#x4E8E;&#x63A7;&#x5236;codis-proxy&#x3001;codis-dashboard&#x72B6;&#x6001;&#x4EE5;&#x53CA;&#x8BBF;&#x95EE;&#x5916;&#x90E8;&#x5B58;&#x50A8;&#x3002; Codis FE&#xFF1A;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x3002;&#x591A;&#x4E2A;&#x96C6;&#x7FA4;&#x53EF;&#x4EE5;&#x5171;&#x4EAB;&#x540C;&#x4E00;&#x4E2A;&#x524D;&#x7AEF;&#x5C55;&#x793A;&#x9875;&#x9762;&#xFF0C;&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7BA1;&#x7406;&#x540E;&#x7AEF; codis-dashboard &#x5217;&#x8868;&#xFF0C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x53EF;&#x81EA;&#x52A8;&#x66F4;&#x65B0;&#x3002; Codis HA&#xFF1A;&#x4E3A;&#x96C6;&#x7FA4;&#x63D0;&#x4F9B;&#x9AD8;&#x53EF;&#x7528;&#xFF0C;&#x4F9D;&#x8D56; codis-dashboard &#x5B9E;&#x4F8B;&#xFF0C;&#x81EA;&#x52A8;&#x6293;&#x53D6;&#x96C6;&#x7FA4;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x4F1A;&#x6839;&#x636E;&#x5F53;&#x524D;&#x96C6;&#x7FA4;&#x72B6;&#x6001;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x4E3B;&#x4ECE;&#x5207;&#x6362;&#x7B56;&#x7565;&#xFF0C;&#x5E76;&#x5728;&#x9700;&#x8981;&#x65F6;&#x901A;&#x8FC7; codis-dashboard &#x5B8C;&#x6210;&#x4E3B;&#x4ECE;&#x5207;&#x6362;&#x3002; Storage&#xFF1A;&#x4E3A;&#x96C6;&#x7FA4;&#x72B6;&#x6001;&#x63D0;&#x4F9B;&#x5916;&#x90E8;&#x5B58;&#x50A8;&#xFF0C;&#x63D0;&#x4F9B;Namespace&#x6982;&#x5FF5;&#xFF0C;&#x4E0D;&#x540C;&#x96C6;&#x7FA4;&#x4F1A;&#x6309;&#x7167;&#x4E0D;&#x540C;product name&#x8FDB;&#x884C;&#x7EC4;&#x7EC7;&#xFF1B;&#x76EE;&#x524D;&#x4EC5;&#x63D0;&#x4F9B;&#x4E86;Zookeeper &#x548C;Etcd&#x4E24;&#x79CD;&#x5B9E;&#x73B0;&#xFF0C;&#x4F46;&#x662F;&#x63D0;&#x4F9B;&#x4E86;&#x62BD;&#x8C61;&#x7684;interface&#x53EF;&#x81EA;&#x884C;&#x6269;&#x5C55;&#x3002; &#x73AF;&#x5883;&#x51C6;&#x5907;codis&#x96C6;&#x7FA4;&#x7684;&#x642D;&#x5EFA;&#xFF0C;&#x9700;&#x8981;&#x4F9D;&#x8D56;zookeeper&#x96C6;&#x7FA4; zookeeper&#x96C6;&#x7FA4;&#x800C;zookeeper&#x662F;&#x9700;&#x8981;&#x4F9D;&#x8D56;java jdk&#x7684; jdk 1.8&#x5B89;&#x88C5;&#x8FD9;&#x91CC;&#x76F4;&#x63A5;&#x53BB;&#x5B98;&#x7F51;&#x4E0B;&#x8F7D;jdk 1.8&#x7684;rpm&#x5305;&#xFF0C;http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html123456789yum -y install jdk-8u112-linux-x64.rpm# &#x4E0B;&#x8F7D;&#x5B8C;&#x5B89;&#x88C5;jdk&#x5373;&#x53EF;vim /etc/profile.d/java.sh# &#x4FEE;&#x6539;java&#x73AF;&#x5883;&#x53D8;&#x91CF;export JAVA_HOME=/usr/java/jdk1.8.0_11export PATH=$JAVA_HOME/bin:$PATHsource /etc/profile.d/java.sh# &#x91CD;&#x8F7D;&#x73AF;&#x5883;&#x53D8;&#x91CF; zookeeper&#x96C6;&#x7FA4;&#x5B89;&#x88C5;&#x4E0B;&#x8F7D;&#x5B8C;zookeeper&#x4E4B;&#x540E;&#xFF0C;&#x89E3;&#x538B;1234567891011121314tar -xvf zookeeper-3.4.8.tar.gz mv zookeeper-3.4.8 /usr/local/cd /usr/local/zookeeper-3.4.8/conf/mv zoo_sample.cfg{,.bak}vim zoo.cfglientCnxns=50tickTime=2000initLimit=10syncLimit=5dataDir=/work/zookeeper/clientPort=2181server.1=10.16.20.63:2888:3888 server.2=10.16.20.64:2888:3888 server.3=10.16.20.62:2888:3888 &#x8BF4;&#x660E;&#xFF1A;server.A=B&#xFF1A;C&#xFF1A;D&#xFF1A;&#x5176;&#x4E2D; A &#x662F;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#xFF0C;&#x8868;&#x793A;&#x8FD9;&#x4E2A;&#x662F;&#x7B2C;&#x51E0;&#x53F7;&#x670D;&#x52A1;&#x5668;&#xFF1B;B &#x662F;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x7684; ip &#x5730;&#x5740;&#xFF1B;C &#x8868;&#x793A;&#x7684;&#x662F;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x4E0E;&#x96C6;&#x7FA4;&#x4E2D;&#x7684; Leader &#x670D;&#x52A1;&#x5668;&#x4EA4;&#x6362;&#x4FE1;&#x606F;&#x7684;&#x7AEF;&#x53E3;&#xFF1B;D &#x8868;&#x793A;&#x7684;&#x662F;&#x4E07;&#x4E00;&#x96C6;&#x7FA4;&#x4E2D;&#x7684; Leader &#x670D;&#x52A1;&#x5668;&#x6302;&#x4E86;&#xFF0C;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x7AEF;&#x53E3;&#x6765;&#x91CD;&#x65B0;&#x8FDB;&#x884C;&#x9009;&#x4E3E;&#xFF0C;&#x9009;&#x51FA;&#x4E00;&#x4E2A;&#x65B0;&#x7684; Leader&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x7AEF;&#x53E3;&#x5C31;&#x662F;&#x7528;&#x6765;&#x6267;&#x884C;&#x9009;&#x4E3E;&#x65F6;&#x670D;&#x52A1;&#x5668;&#x76F8;&#x4E92;&#x901A;&#x4FE1;&#x7684;&#x7AEF;&#x53E3;&#x3002;&#x5982;&#x679C;&#x662F;&#x4F2A;&#x96C6;&#x7FA4;&#x7684;&#x914D;&#x7F6E;&#x65B9;&#x5F0F;&#xFF0C;&#x7531;&#x4E8E; B &#x90FD;&#x662F;&#x4E00;&#x6837;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x540C;&#x7684; Zookeeper &#x5B9E;&#x4F8B;&#x901A;&#x4FE1;&#x7AEF;&#x53E3;&#x53F7;&#x4E0D;&#x80FD;&#x4E00;&#x6837;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x7ED9;&#x5B83;&#x4EEC;&#x5206;&#x914D;&#x4E0D;&#x540C;&#x7684;&#x7AEF;&#x53E3;&#x53F7;&#x3002; &#x521B;&#x5EFA;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x76EE;&#x5F55;&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x5F53;&#x524D;zk&#x7684;&#x7ED3;&#x70B9;ID&#x670D;&#x52A1;&#x5668;112mkdir -pv /work/zookeeper echo &quot;1&quot; &gt; /work/zookeeper/myid &#x670D;&#x52A1;&#x5668;212mkdir -pv /work/zookeeper echo &quot;2&quot; &gt; /work/zookeeper/myid &#x670D;&#x52A1;&#x5668;312mkdir -pv /work/zookeeper echo &quot;3&quot; &gt; /work/zookeeper/myid &#x542F;&#x52A8;zookeeper,&#x5206;&#x522B;&#x5728;&#x4E09;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#x542F;&#x52A8;zookeepe1234/usr/local/zookeeper-3.4.8/bin/zkServer.sh start ZooKeeper JMX enabled by defaultUsing config: /usr/local/zookeeper-3.4.8/bin/../conf/zoo.cfgStarting zookeeper ... STARTED &#x786E;&#x4FDD;zookeeper&#x96C6;&#x7FA4;&#x662F;&#x5426;&#x542F;&#x52A8;&#x6210;&#x529F;1234/usr/local/zookeeper-3.4.8/bin/zkServer.sh statusJMX enabled by defaultUsing config: /usr/local/zookeeper-3.4.8/bin/../conf/zoo.cfgMode: follower go&#x8BED;&#x8A00;&#x73AF;&#x5883;&#x642D;&#x5EFA;&#x4E0B;&#x8F7D;go&#x8BED;&#x8A00;&#x5305;&#xFF0C;&#x7531;&#x4E8E;&#x56FD;&#x5185;&#x7684;&#x7279;&#x6B8A;&#x60C5;&#x51B5;&#xFF0C;&#x6709;&#x4E9B;&#x7F51;&#x7AD9;&#x662F;&#x8BBF;&#x95EE;&#x4E0D;&#x4E86;&#x7684;&#x3002;&#x6240;&#x4EE5;&#x8FD8;&#x662F;&#x8981;&#x81EA;&#x884C;&#x53BB;&#x7F51;&#x7AD9;&#x4E0B;&#x8F7D;&#xFF0C;&#x7F51;&#x5740;&#xFF1A;http://www.golangtc.com/download/ &#xFF0C; &#x4E0B;&#x8F7D;&#x5B8C;&#x6BD5;&#x540E;&#x89E3;&#x538B;&#x5230;/usr/local&#x5982;&#x4E0B;&#xFF1A;12345678910tar -zxf go1.6.2.linux-amd64.tar.gz -C /usr/local/vim /etc/profile.d/go.sh# &#x8BBE;&#x7F6E;go&#x8BED;&#x8A00;&#x73AF;&#x5883;&#x53D8;&#x91CF;export GOROOT=/usr/local/goexport GOPATH=/usr/local/codisexport PATH=$GOPATH/bin:$GOROOT/bin:$PATHsource /etc/profile.d/go.sh# &#x91CD;&#x8F7D;&#x73AF;&#x5883;&#x53D8;&#x91CF;go versiongo version go1.6.2 linux/amd64 codis&#x96C6;&#x7FA4;&#x5B89;&#x88C5; codis&#x5B89;&#x88C5; &#x8BBE;&#x7F6E;&#x7F16;&#x8BD1;&#x73AF;&#x5883;&#x6DFB;&#x52A0; $GOPATH/bin &#x5230; $PATH&#xFF0C;&#x5B89;&#x88C5; godep &#x5DE5;&#x5177;12go get -u github.com/tools/godep &amp;&amp; which godep/usr/local/codis/bin/godep &#x4E0B;&#x8F7D; Codis &#x6E90;&#x4EE3;&#x7801;Codis &#x6E90;&#x4EE3;&#x7801;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x5230; $GOPATH/src/github.com/CodisLabs/codis12mkdir -p $GOPATH/src/github.com/CodisLabscd $_ &amp;&amp; git clone https://github.com/CodisLabs/codis.git -b release3.1 &#x7F16;&#x8BD1; Codis &#x6E90;&#x4EE3;&#x7801;Codis &#x7F16;&#x8BD1;&#x8FC7;&#x7A0B;&#x4F7F;&#x7528;&#x4E86; godep&#xFF0C;&#x8BF7;&#x786E;&#x5B9A;&#x7F16;&#x8BD1;&#x4E4B;&#x524D; godep &#x80FD;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x76F4;&#x63A5;&#x901A;&#x8FC7; make &#x8FDB;&#x884C;&#x7F16;&#x8BD1;123456789cd $GOPATH/src/github.com/CodisLabs/codismakemake -j -C extern/redis-2.8.21/... ...go build -i -o bin/codis-dashboard ./cmd/dashboardgo build -i -o bin/codis-proxy ./cmd/proxygo build -i -o bin/codis-admin ./cmd/admingo build -i -o bin/codis-ha ./cmd/hago build -i -o bin/codis-fe ./cmd/fe &#x7F16;&#x8BD1;&#x6210;&#x529F;&#x540E;&#x5728;codis&#x4E0B;&#x9762;&#x7684;bin&#x76EE;&#x5F55;&#x4E0B;&#x4F1A;&#x6709;assets codis-admin codis-dashboard codis-fe codis-ha codis-proxy codis-server redis-benchmark redis-cli version&#x7B49;&#x6587;&#x4EF6;&#xFF0C;assets&#x662F;codis-dashboard http&#x670D;&#x52A1;&#x9700;&#x8981;&#x7684;&#x524D;&#x7AEF;&#x8D44;&#x6E90;&#xFF0C;&#x9700;&#x8981;&#x548C;codis-dashboard&#x653E;&#x7F6E;&#x5728;&#x540C;&#x4E00;&#x76EE;&#x5F55;&#x4E0B;&#x3002; &#x7F16;&#x8F91;redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6BCF;&#x53F0;codis&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x8981;&#x542F;&#x52A8;&#x4E24;&#x4E2A;redis&#x5B9E;&#x4F8B;&#xFF08;&#x4E5F;&#x53EF;&#x4EE5;&#x542F;&#x52A8;&#x591A;&#x4E2A;redis&#x5B9E;&#x4F8B;&#xFF09;&#xFF0C;&#x5148;&#x914D;&#x7F6E;&#x4E24;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x4ECE;redis&#x5B9E;&#x4F8B;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x627E;&#x5230;&#x4E0B;&#x5217;&#x53C2;&#x6570;&#x9009;&#x9879;&#x5E76;&#x6309;&#x5982;&#x4E0B;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF1A;123456789mkdir -pv /work/codismkdir -pv /var/log/redisvim /usr/local/codis/src/github.com/CodisLabs/codis/extern/redis-test/conf/6379.confdaemonize yespidfile /var/run/redis6379.pidport 6379logfile /var/log/redis/6379.logdbfilename dump6379.rdbdir /work/codis &#x914D;&#x7F6E;&#x7B2C;&#x4E8C;&#x4E2A;redis&#x5B9E;&#x4F8B;6380.conf&#x540C;&#x4E0A;&#x8BBE;&#x7F6E;&#x3002;&#x6BCF;&#x53F0;codis&#x670D;&#x52A1;&#x5668;&#x4E0A;redis&#x914D;&#x7F6E;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x542F;&#x52A8;redis&#x5B9E;&#x4F8B;&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;12345cd /usr/local/codis/src/github.com/CodisLabs/codis/bin/./codis-server ../extern/redis-test/conf/6379.conf &amp;./codis-server ../extern/redis-test/conf/6380.conf &amp;ps -ef |grep codis-server# &#x786E;&#x8BA4;6379&#x548C;6380&#x4E24;&#x4E2A;&#x8FDB;&#x7A0B;&#x6B63;&#x5728;&#x8DD1; Codis DashboardCoddis3.0&#x7684;dashboard&#x4E0E;codis 2.0&#x6709;&#x6240;&#x4E0D;&#x540C;&#xFF0C;&#x4F5C;&#x4E3A;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x5B83;&#x652F;&#x6301;codis-proxy,codis-server&#x7684;&#x6DFB;&#x52A0;&#x3001;&#x5220;&#x9664;&#x4EE5;&#x53CA;&#x6570;&#x636E;&#x8FC1;&#x79FB;&#x7B49;&#x64CD;&#x4F5C;&#x3002;&#x5728;&#x96C6;&#x7FA4;&#x72B6;&#x6001;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;&#xFF0C;codis-dashboard &#x7EF4;&#x62A4;&#x96C6;&#x7FA4;&#x4E0B;&#x6240;&#x6709; codis-proxy &#x7684;&#x72B6;&#x6001;&#x4E00;&#x81F4;&#x6027;&#x3002;&#x6709;&#x4EE5;&#x4E0B;&#x4E24;&#x70B9;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#xFF1A; &#x5BF9;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;&#x4E1A;&#x52A1;&#x96C6;&#x7FA4;&#x800C;&#x8A00;&#xFF0C;&#x540C;&#x4E00;&#x4E2A;&#x65F6;&#x523B;codis-dashboard&#x53EA;&#x80FD;&#x6709;0&#x4E2A;&#x6216;&#x8005;1&#x4E2A;&#xFF1B; &#x6240;&#x6709;&#x5BF9;&#x96C6;&#x7FA4;&#x7684;&#x4FEE;&#x6539;&#x90FD;&#x5FC5;&#x987B;&#x901A;&#x8FC7;codis-dashboard&#x5B8C;&#x6210;&#x3002; &#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;dashboard.toml&#x53EF;&#x7531;codis-dashboard&#x751F;&#x6210;&#x3002; #bin/codis-dashboard &#x2013;default-config | tee dashboard.toml&#xFF08;&#x5C31;&#x662F;dashboard.conf&#xFF09; &#x751F;&#x6210;dashboard.toml&#x6587;&#x4EF6;&#xFF0C;&#x53EF;&#x81EA;&#x884C;&#x914D;&#x7F6E;&#x3002;12345678910111213141516171819vim dashboard.tomlcoordinator_name = &quot;zookeeper&quot;coordinator_addr = &quot;10.16.20.62:2181,10.16.20.63:2181,10.16.20.64:2181&quot;# Set Codis Product Name/Auth.product_name = &quot;codis-demo&quot;product_auth = &quot;&quot;# Set bind address for admin(rpc), tcp only.admin_addr = &quot;0.0.0.0:18080&quot;# coordinator_name &#x5916;&#x90E8;&#x5B58;&#x50A8;&#x7C7B;&#x578B;&#xFF0C;&#x63A5;&#x53D7; zookeeper/etcd# coordinator_addr &#x5916;&#x90E8;&#x5B58;&#x50A8;&#x5730;&#x5740;# product_name &#x96C6;&#x7FA4;&#x540D;&#x79F0;&#xFF0C;&#x6EE1;&#x8DB3;&#x6B63;&#x5219; \w[\w\.\-]*# product_auth &#x96C6;&#x7FA4;&#x5BC6;&#x7801;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;# admin_addr RESTful API &#x7AEF;&#x53E3;```bash&#x542F;&#x52A8;dashboard```bashnohup bin/codis-dashboard --ncpu=4 --config=dashboard.toml --log=dashboard.log --log-level=WARN &amp; 12345678910Usage:codis-dashboard [--ncpu=N][--config=CONF] [--log=FILE] [--log-level=LEVEL] [--host-admin=ADDR]codis-dashboard --default-configcodis-dashboard --version&#x8BF4;&#x660E;&#xFF1A; --ncpu=N &#x6700;&#x5927;&#x4F7F;&#x7528; CPU &#x4E2A;&#x6570; -c CONF, --config=CONF &#x6307;&#x5B9A;&#x542F;&#x52A8;&#x914D;&#x7F6E;&#x6587;&#x4EF6; -l FILE, --log=FILE &#x8BBE;&#x7F6E; log &#x8F93;&#x51FA;&#x6587;&#x4EF6;--log-level=LEVEL &#x8BBE;&#x7F6E;log&#x8F93;&#x51FA;&#x7B49;&#x7EA7;&#xFF1A;INFO,WARN,DEBUG,ERROR&#xFF1B;&#x9ED8;&#x8BA4;INFO&#xFF0C;&#x63A8;&#x8350;WARN&#x6B63;&#x5E38;&#x5173;&#x95ED;dashboard&#x547D;&#x4EE4;&#xFF1A; bin/codis-admin --dashboard=192.168.33.6:18080 --shutdown Codis Proxy&#x5BF9;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;&#x4E1A;&#x52A1;&#x96C6;&#x7FA4;&#x800C;&#x8A00;&#xFF0C;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x90E8;&#x7F72;&#x591A;&#x4E2A;codis-proxy &#x5B9E;&#x4F8B;;&#x4E0D;&#x540C; codis-proxy &#x4E4B;&#x95F4;&#x7531; codis-dashboard &#x4FDD;&#x8BC1;&#x72B6;&#x6001;&#x540C;&#x6B65;&#x3002;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6; proxy.toml &#x53EF;&#x7531; codis-proxy &#x751F;&#x6210;1bin/codis-proxy --default-config | tee proxy.toml &#x751F;&#x6210;proxy.toml&#x53EF;&#x81EA;&#x884C;&#x914D;&#x7F6E;12345678910111213141516171819202122232425262728293031323334353637vim proxy.toml# Set Codis Product {Name/Auth}.product_name = &quot;codis-demo&quot;product_auth = &quot;&quot;# Set bind address for admin(rpc), tcp only.admin_addr = &quot;0.0.0.0:11080&quot;# Set bind address for proxy, proto_type can be &quot;tcp&quot;,&quot;tcp4&quot;, &quot;tcp6&quot;, &quot;unix&quot; or &quot;unixpacket&quot;.proto_type = &quot;tcp4&quot;proxy_addr = &quot;0.0.0.0:19000&quot; # Set jodis address &amp; session timeout.jodis_addr = &quot;&quot;jodis_timeout = 10# Proxy will ping-pong backend redis periodly to keep-alivebackend_ping_period = 5# If there is no request from client for a long time, the connectionwill be droped. Set 0 to disable.session_max_timeout = 1800# Buffer size for each client connection.session_max_bufsize = 131072# Number of buffered requests for each client connection.# Make sure this is higher than the max number of requests for eachpipeline request, or your client may be blocked.session_max_pipeline = 1024# Set period between keep alives. Set 0 to disable.session_keepalive_period = 60#product_name &#x96C6;&#x7FA4;&#x540D;&#x79F0;&#xFF0C;&#x53C2;&#x8003;dashboard&#x53C2;&#x6570;&#x8BF4;&#x660E;#product_auth &#x96C6;&#x7FA4;&#x5BC6;&#x7801;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;#admin_addr RESTfulAPI &#x7AEF;&#x53E3;#proto_type Redis &#x7AEF;&#x53E3;&#x7C7B;&#x578B;&#xFF0C;&#x63A5;&#x53D7;tcp/tcp4/tcp6/unix/unixpacket#proxy_addr Redis &#x7AEF;&#x53E3;&#x5730;&#x5740;&#x6216;&#x8005;&#x8DEF;&#x5F84;#jodis_addr Jodis&#x6CE8;&#x518C;zookeeper&#x5730;&#x5740;#jodis_timeout Jodis&#x6CE8;&#x518C;sessiontimeout&#x65F6;&#x95F4;&#xFF0C;&#x5355;&#x4F4D;second#jodis_compatible Jodis&#x6CE8;&#x518C; zookeeper &#x7684;&#x8DEF;&#x5F84;#backend_ping_period &#x4E0E;codis-server &#x63A2;&#x6D3B;&#x5468;&#x671F;&#xFF0C;&#x5355;&#x4F4D;second&#xFF0C;0&#x8868;&#x793A;&#x7981;&#x6B62;#session_max_timeout &#x4E0E;client &#x8FDE;&#x63A5;&#x6700;&#x5927;&#x8BFB;&#x8D85;&#x65F6;&#xFF0C;&#x5355;&#x4F4D;second&#xFF0C;0&#x8868;&#x793A;&#x7981;&#x6B62;#session_max_bufsize &#x4E0E;client &#x8FDE;&#x63A5;&#x8BFB;&#x5199;&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;&#xFF0C;&#x5355;&#x4F4D;byte#session_max_pipeline &#x4E0E;client &#x8FDE;&#x63A5;&#x6700;&#x5927;&#x7684;pipeline&#x5927;&#x5C0F;#session_keepalive_period &#x4E0E;client &#x7684; tcp keepalive&#x5468;&#x671F;&#xFF0C;&#x4EC5;tcp&#x6709;&#x6548;&#xFF0C;0&#x8868;&#x793A;&#x7981;&#x6B62; &#x542F;&#x52A8;proxy1nohup bin/codis-proxy --ncpu=4 --config=proxy.toml --log=proxy.log --log-level=WARN &amp; codis-proxy&#x542F;&#x52A8;&#x540E;&#xFF0C;&#x5904;&#x4E8E; waiting &#x72B6;&#x6001;&#xFF0C;&#x76D1;&#x542C;proxy_addr &#x5730;&#x5740;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x4F1A;accept&#x8FDE;&#x63A5;&#x3002;&#x6DFB;&#x52A0;&#x5230;&#x96C6;&#x7FA4;&#x5E76;&#x5B8C;&#x6210;&#x96C6;&#x7FA4;&#x72B6;&#x6001;&#x7684;&#x540C;&#x6B65;&#xFF0C;&#x624D;&#x80FD;&#x6539;&#x53D8;&#x72B6;&#x6001;&#x4E3A;online&#x3002;&#x6DFB;&#x52A0;&#x7684;&#x65B9;&#x6CD5;&#x6709;&#x4EE5;&#x4E0B;&#x4E24;&#x79CD;&#xFF1A;&#x901A;&#x8FC7;codis-fe&#x6DFB;&#x52A0;&#xFF1A;&#x901A;&#x8FC7;Add Proxy&#x6309;&#x94AE;&#xFF0C;&#x5C06;admin_addr&#x52A0;&#x5165;&#x5230;&#x96C6;&#x7FA4;&#x4E2D;&#xFF1B;(&#x8FD9;&#x4E2A;&#x6211;&#x4EEC;&#x7A0D;&#x540E;&#x518D;&#x8BF4;)&#x901A;&#x8FC7;codis-admin&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#x6DFB;&#x52A0;&#xFF0C;&#x65B9;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;123bin/codis-admin --dashboard=10.16.20.62:18080 --create-proxy -x 10.16.20.62:11080bin/codis-admin --dashboard=10.16.20.62:18080 --create-proxy -x 10.16.20.63:11080bin/codis-admin --dashboard=10.16.20.62:18080 --create-proxy -x 10.16.20.64:11080 &#x5176;&#x4E2D;10.16.20.62:18080 &#x4EE5;&#x53CA;10.16.20.63:11080 &#x5206;&#x522B;&#x4E3A;dashboard&#x548C;proxy&#x7684;admin_addr &#x5730;&#x5740;&#x3002;&#x6DFB;&#x52A0;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;dashboard&#x4F1A;&#x5B8C;&#x6210;&#x5982;&#x4E0B;&#x4E00;&#x7CFB;&#x5217;&#x52A8;&#x4F5C;&#xFF1A; &#x83B7;&#x53D6; proxy &#x4FE1;&#x606F;&#xFF0C;&#x5BF9;&#x96C6;&#x7FA4;name&#x4EE5;&#x53CA;auth&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x4FE1;&#x606F;&#x5199;&#x5165;&#x5230;&#x5916;&#x90E8;&#x5B58;&#x50A8;&#x4E2D;&#xFF1B; &#x540C;&#x6B65;slots&#x72B6;&#x6001;&#xFF1B; &#x6807;&#x8BB0;proxy&#x72B6;&#x6001;&#x4E3A;online&#xFF0C;&#x6B64;&#x540E;proxy&#x5F00;&#x59CB;accept&#x8FDE;&#x63A5;&#x5E76;&#x5F00;&#x59CB;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x3002; 123456789101112#bin/codis-proxy -hUsage:codis-proxy [--ncpu=N][--config=CONF] [--log=FILE] [--log-level=LEVEL] [--host-admin=ADDR][--host-proxy=ADDR] [--ulimit=NLIMIT]codis-proxy --default-configcodis-proxy --version Options: --ncpu=N &#x6700;&#x5927;&#x4F7F;&#x7528; CPU &#x4E2A;&#x6570; -c CONF, --config=CONF &#x6307;&#x5B9A;&#x542F;&#x52A8;&#x914D;&#x7F6E;&#x6587;&#x4EF6; -l FILE, --log=FILE &#x8BBE;&#x7F6E; log &#x8F93;&#x51FA;&#x6587;&#x4EF6; --log-level=LEVEL &#x8BBE;&#x7F6E; log &#x8F93;&#x51FA;&#x7B49;&#x7EA7;&#xFF1A;INFO,WARN,DEBUG,ERROR&#xFF1B;&#x9ED8;&#x8BA4;INFO&#xFF0C;&#x63A8;&#x8350;WARN --ulimit=NLIMIT &#x68C0;&#x67E5;ulimit -n&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x786E;&#x4FDD;&#x8FD0;&#x884C;&#x65F6;&#x6700;&#x5927;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x4E0D;&#x5C11;&#x4E8E;NLIMIT Codis FE&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x754C;&#x9762;: &#x591A;&#x4E2A;&#x96C6;&#x7FA4;&#x5B9E;&#x4F8B;&#x53EF;&#x4EE5;&#x5171;&#x4EAB;&#x540C;&#x4E00;&#x4E2A;&#x524D;&#x7AEF;&#x5C55;&#x793A;&#x9875;&#x9762; &#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7BA1;&#x7406;&#x540E;&#x7AEF;codis-dashboard&#x5217;&#x8868;&#xFF0C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x53EF;&#x81EA;&#x52A8;&#x66F4;&#x65B0; &#x914D;&#x7F6E;codis-fe&#x914D;&#x7F6E;&#x6587;&#x4EF6;codis.json&#xFF08;fe.conf&#xFF09;&#x53EF;&#x4EE5;&#x624B;&#x52A8;&#x7F16;&#x8F91;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;codis-admin&#x4ECE;&#x5916;&#x90E8;&#x5B58;&#x50A8;&#x4E2D;&#x62C9;&#x53D6;123456789101112bin/codis-admin --dashboard-list --zookeeper=10.16.20.62:2181 | tee codis.json2016/12/20 16:51:50 zkclient.go:23: [INFO] zookeeper - zkclient setup new connection to 10.16.20.62:21812016/12/20 16:51:50 zkclient.go:23: [INFO] zookeeper - Connected to 10.16.20.62:21812016/12/20 16:51:50 zkclient.go:23: [INFO] zookeeper - Authenticated: id=97138763315609600, timeout=40000[ { &quot;name&quot;: &quot;codis-demo&quot;, &quot;dashboard&quot;: &quot;10.16.20.62:18080&quot; }]2016/12/20 16:51:50 zkclient.go:23: [INFO] zookeeper - Recv loop terminated: err=EOF2016/12/20 16:51:50 zkclient.go:23: [INFO] zookeeper - Send loop terminated: err=&lt;nil&gt; &#x542F;&#x52A8;codis-fe12nohup bin/codis-fe --ncpu=4 --log=fe.log --log-level=WARN --dashboard-list=codis.json --listen=0.0.0.0:18090 &amp;# &#x8FD9;&#x91CC;&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#x53F7;&#x4E3A;18090&#x662F;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x548C;codis-dashboard&#x7684;&#x7AEF;&#x53E3;&#x53F7;18080&#x51B2;&#x7A81; 12345678910#bin/codis-fe -hUsage: codis-fe [--ncpu=N][--log=FILE] [--log-level=LEVEL] --dashboard-list=LIST --listen=ADDR codis-fe --versionOptions:--ncpu=N &#x6700;&#x5927;&#x4F7F;&#x7528; CPU &#x4E2A;&#x6570;-d LIST,--dashboard-list=LIST &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x80FD;&#x591F;&#x81EA;&#x52A8;&#x5237;&#x65B0;-l FILE, --log=FILE &#x8BBE;&#x7F6E; log &#x8F93;&#x51FA;&#x6587;&#x4EF6;--log-level=LEVEL &#x8BBE;&#x7F6E; log &#x8F93;&#x51FA;&#x7B49;&#x7EA7;&#xFF1A;INFO,WARN,DEBUG,ERROR&#xFF1B;&#x9ED8;&#x8BA4;INFO&#xFF0C;&#x63A8;&#x8350;WARN--listen=ADDR HTTP &#x670D;&#x52A1;&#x7AEF;&#x53E3; &#x6253;&#x5F00;&#x6D4F;&#x89C8;&#x5668;&#xFF0C;&#x5728;&#x5730;&#x5740;&#x680F;&#x91CC;&#x8F93;&#x5165;http://192.168.4.157:18090/&#xFF0C;&#x901A;&#x8FC7;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x64CD;&#x4F5C;Codis &#x9664;&#x4E86;&#x56FE;&#x5F62;&#x754C;&#x9762;&#x8FDB;&#x884C;&#x5982;&#x4E0A;&#x64CD;&#x4F5C;&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x521B;&#x5EFA;&#x7EC4;:12#bin/codis-admin --dashboard=192.168.33.6:18080 --create-group --gid=1#bin/codis-admin --dashboard=192.168.33.6:18080 --create-group --gid=2 &#x7EC4;&#x6DFB;&#x52A0;&#x670D;&#x52A1;&#x5668;&#xFF1A;12#bin/codis-admin --dashboard=192.168.33.6:18080 --group-add --gid=1 --addr=192.168.33.6:6379#bin/codis-admin --dashboard=192.168.33.6:18080 --group-add --gid=1 --addr=192.168.33.6:6380 &#x628A;&#x4ECE;&#x5E93;&#x8DDF;&#x4E3B;&#x5E93;&#x540C;&#x6B65;&#xFF08;&#x540C;&#x4E00;&#x7EC4;&#x7684;&#x4E24;&#x4E2A;&#x5B9E;&#x4F8B;&#x90FD;&#x8981;&#x6267;&#x884C;&#xFF09;&#xFF1A;12#bin/codis-admin --dashboard=192.168.33.6:18080 --sync-action --create --addr=192.168.33.6:6379#bin/codis-admin --dashboard=192.168.33.6:18080 --sync-action --create --addr=192.168.33.6:6380 &#x82E5;&#x4ECE;&#x5E93;&#x9700;&#x8981;&#x63D0;&#x5347;&#x4E3A;master&#xFF0C;&#x64CD;&#x4F5C;&#x5982;&#x4E0B;:1#bin/codis-admin --dashboard=192.168.33.6:18080 --promote-server --gid=1 --addr=192.168.33.6:6380(&#x4ECE;&#x5E93;ip&#x548C;&#x7AEF;&#x53E3;) &#x521D;&#x59CB;&#x5316; slots&#x5E76;&#x8BBE;&#x7F6E; server group&#x670D;&#x52A1;&#x7684;slot&#x8303;&#x56F4;((&#x53EA;&#x5728;&#x4E00;&#x8282;&#x70B9;&#x6267;&#x884C;&#x4E00;&#x6B21;)sid&#x662F;slot&#x7684;&#x7F16;&#x53F7;&#x3002;Codis&#x91C7;&#x7528;Pre-sharding&#x6280;&#x672F;&#x6765;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x7684;&#x5206;&#x7247;, &#x9ED8;&#x8BA4;&#x5206;&#x6210;1024&#x4E2A;slots (0-1023), &#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;key&#x6765;&#x8BF4;&#xFF0C;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x516C;&#x5F0F;&#x786E;&#x5B9A;&#x6240;&#x5C5E;&#x7684;Slot Id : SlotId = crc32(key) % 1024&#x6BCF;&#x4E00;&#x4E2A;slot&#x90FD;&#x4F1A;&#x6709;&#x4E00;&#x4E2A;&#x4E14;&#x5FC5;&#x987B;&#x6709;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;server group id&#x6765;&#x8868;&#x793A;&#x8FD9;&#x4E2A;slot&#x7684;&#x6570;&#x636E;&#x7531;&#x54EA;&#x4E2A;server group&#x6765;&#x63D0;&#x4F9B;&#x3002;12#bin/codis-admin --dashboard=192.168.33.6:18080 --slot-action --create-range --beg=0 --end=300 --gid=1#bin/codis-admin --dashboard=192.168.33.6:18080 --slot-action --create-range --beg=301 --end=601 --gid=2 Codis HA&#x6CE8;&#x610F;&#xFF1A;Codis HA&#x5DE5;&#x5177;&#x4EC5;&#x4EC5;&#x662F;Codis &#x96C6;&#x7FA4;HA &#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x5355;&#x72EC;&#x5DE5;&#x4F5C;&#x80FD;&#x529B;&#x6709;&#x9650;&#x3002; &#x9ED8;&#x8BA4;&#x4EE5; 5s&#x4E3A;&#x5468;&#x671F;&#xFF0C;codis-ha&#x4F1A;&#x4ECE;codis-dashboard&#x4E2D;&#x62C9;&#x53D6;&#x96C6;&#x7FA4;&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x4E3B;&#x4ECE;&#x5207;&#x6362;&#xFF1B; codis-ha &#x5728;&#x4EE5;&#x4E0B;&#x72B6;&#x6001;&#x4E0B;&#x4F1A;&#x9000;&#x51FA;&#xFF1A; &#x4ECE; codis-dashboard &#x83B7;&#x53D6;&#x96C6;&#x7FA4;&#x72B6;&#x6001;&#x5931;&#x8D25;&#x65F6;&#xFF1B; &#x5411;codis-dashboard&#x53D1;&#x9001;&#x4E3B;&#x4ECE;&#x5207;&#x6362;&#x6307;&#x4EE4;&#x5931;&#x8D25;&#x65F6;&#x3002; odis-ha&#x5728;&#x4EE5;&#x4E0B;&#x72B6;&#x6001;&#x4E0B;&#x4E0D;&#x4F1A;&#x8FDB;&#x884C;&#x4E3B;&#x4ECE;&#x5207;&#x6362;&#xFF1A; &#x5B58;&#x5728;proxy&#x72B6;&#x6001;&#x5F02;&#x5E38;&#xFF1A;&#x56E0;&#x4E3A;&#x63D0;&#x5347;&#x4E3B;&#x4ECE;&#x9700;&#x8981;&#x5F97;&#x5230;&#x6240;&#x6709;proxy&#x7684;&#x786E;&#x8BA4;&#xFF0C;&#x56E0;&#x6B64;&#x5FC5;&#x987B;&#x786E;&#x4FDD;&#x64CD;&#x4F5C;&#x65F6;&#x6240;&#x6709;proxy&#x90FD;&#x80FD;&#x6B63;&#x5E38;&#x54CD;&#x5E94;&#x64CD;&#x4F5C;&#x6307;&#x4EE4;&#xFF1B; &#x7F51;&#x7EDC;&#x539F;&#x56E0;&#x9020;&#x6210;&#x7684;master&#x5F02;&#x5E38;&#xFF1A;&#x82E5;&#x5B58;&#x5728;slave&#x6EE1;&#x8DB3;slave.master_link_status == up&#xFF0C;&#x901A;&#x5E38;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;master&#x5E76;&#x6CA1;&#x6709;&#x771F;&#x7684;&#x9000;&#x51FA;&#xFF0C;&#x800C;&#x662F;&#x7531;&#x4E8E;&#x7F51;&#x7EDC;&#x539F;&#x56E0;&#x6216;&#x8005;&#x54CD;&#x5E94;&#x5EF6;&#x8FDF;&#x9020;&#x6210;&#x7684;master&#x72B6;&#x6001;&#x83B7;&#x53D6;&#x5931;&#x8D25;&#xFF0C;&#x6B64;&#x65F6;codis-ha&#x4E0D;&#x4F1A;&#x5BF9;&#x8BE5;group&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF1B;n&#x6CA1;&#x6709;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x7684;slave&#x65F6;&#x3002;&#x63D0;&#x5347;&#x8FC7;&#x7A0B;&#x4F1A;&#x9009;&#x62E9;&#x6EE1;&#x8DB3;slave.master_link_status == down&#xFF0C;&#x5E76;&#x4E14;slave.master_link_down_since_seconds&#x6700;&#x5C0F;&#x7684;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x8FD9;&#x5C31;&#x8981;&#x6C42;&#x88AB;&#x9009;&#x62E9;&#x7684;slave&#x81F3;&#x5C11;&#x5728;&#x8FC7;&#x53BB;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x5185;&#x4E0E;master&#x662F;&#x6210;&#x529F;&#x540C;&#x6B65;&#x72B6;&#x6001;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x662F;2d+5&#xFF0C;&#x5176;&#x4E2D;d&#x662F;codis-ha&#x68C0;&#x67E5;&#x5468;&#x671F;&#x9ED8;&#x8BA4;5&#x79D2;&#x3002; &#x6CE8;&#x610F;&#xFF1A;&#x5E94;&#x7528;codis-ha&#x65F6;&#x8FD8;&#x9700;&#x8981;&#x7ED3;&#x5408;&#x5BF9;codis-proxy&#x548C;codis-server&#x7684;&#x53EF;&#x7528;&#x6027;&#x76D1;&#x63A7;&#xFF0C;&#x5426;&#x5219;codis-ha&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x53EF;&#x9760;&#x6027;&#x3002; &#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF1A;codis-ha&#x5C06;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;slave&#x5347;&#x7EA7;&#x4E3A;master&#x65F6;&#xFF0C;&#x8BE5;&#x7EC4;&#x5185;&#x5176;&#x4ED6;slave&#x662F;&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x6539;&#x53D8;&#x72B6;&#x6001;&#x7684;&#xFF0C;&#x8FD9;&#x4E9B;slave&#x4ECD;&#x5C06;&#x8BD5;&#x56FE;&#x4ECE;&#x65E7;&#x7684;master&#x4E0A;&#x540C;&#x6B65;&#x6570;&#x636E;&#xFF0C;&#x56E0;&#x800C;&#x4F1A;&#x5BFC;&#x81F4;&#x7EC4;&#x5185;&#x65B0;&#x7684;master&#x548C;&#x5176;&#x4ED6;slave&#x4E4B;&#x95F4;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x4E00;&#x81F4;&#x3002;&#x56E0;&#x4E3A;redis&#x7684;slaveof&#x547D;&#x4EE4;&#x5207;&#x6362;master&#x65F6;&#x4F1A;&#x4E22;&#x5F03;slave&#x4E0A;&#x7684;&#x5168;&#x90E8;&#x6570;&#x636E;&#xFF0C;&#x4ECE;&#x65B0;master&#x5B8C;&#x6574;&#x540C;&#x6B65;&#xFF0C;&#x4F1A;&#x6D88;&#x8017;&#x8D44;&#x6E90;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5F53;&#x51FA;&#x73B0;&#x4E3B;&#x4ECE;&#x5207;&#x6362;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x7BA1;&#x7406;&#x5458;&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x65B0;&#x7684;sync action&#x6765;&#x5B8C;&#x6210;&#x65B0;master&#x4E0E;slave&#x4E4B;&#x95F4;&#x7684;&#x6570;&#x636E;&#x540C;&#x6B65;&#x3002; &#x542F;&#x52A8;codis-ha1nohup bin/codis-ha --log=ha.log --log-level=WARN --dashboard=10.16.20.62:18080 &amp; 123456Usage: codis-ha [--log=FILE][--log-level=LEVEL] --dashboard=ADDR codis-ha --version Options:-l FILE, --log=FILE &#x8BBE;&#x7F6E; log &#x8F93;&#x51FA;&#x6587;&#x4EF6;--log-level=LEVEL &#x8BBE;&#x7F6E; log &#x8F93;&#x51FA;&#x7B49;&#x7EA7;&#xFF1A;INFO,WARN,DEBUG,ERROR&#xFF1B;&#x9ED8;&#x8BA4;INFO&#xFF0C;&#x63A8;&#x8350;WARN]]></content>
      <categories>
        <category>NoSQL</category>
      </categories>
      <tags>
        <tag>Codis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux系统初始化脚本]]></title>
    <url>%2FLinux%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E5%8C%96%E8%84%9A%E6%9C%AC.html</url>
    <content type="text"><![CDATA[CentOS&#x7CFB;&#x7EDF;&#x5B89;&#x88C5;&#x4E4B;&#x540E;&#x5E76;&#x4E0D;&#x80FD;&#x7ACB;&#x5373;&#x6295;&#x5165;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4F7F;&#x7528;&#xFF0C;&#x5F80;&#x5F80;&#x9700;&#x8981;&#x5148;&#x7ECF;&#x8FC7;&#x6211;&#x4EEC;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x7684;&#x4F18;&#x5316;&#x624D;&#x884C;&#xFF0C;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x7701;&#x4E8B;&#xFF0C;&#x5F04;&#x4E00;&#x4E2A;&#x521D;&#x59CB;&#x5316;&#x811A;&#x672C;&#x52BF;&#x5728;&#x5FC5;&#x884C;&#x3002; &#x8FD9;&#x91CC;&#x5C31;&#x76F4;&#x63A5;&#x8D34;&#x51FA;&#x811A;&#x672C;&#xFF0C;&#x5982;&#x4E0D;&#x60F3;&#x590D;&#x5236;&#x7C98;&#x8D34;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x76F4;&#x63A5;&#x5728;&#x6211;&#x7684;&#x767E;&#x5EA6;&#x7F51;&#x76D8;&#x7684;&#x94FE;&#x63A5;&#x4E0B;&#x8F7D;&#xFF1A;http://pan.baidu.com/s/1i5PrAz7 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306#!/bin/bash# Author: CH 18201620971@163.com# 2016-12-13# &#x6B64;&#x811A;&#x672C;&#x7528;&#x4E8E;&#x521D;&#x59CB;&#x5316; Centos6.5&#xFF0C;&#x5176;&#x4ED6;&#x7CFB;&#x7EDF;&#x8BF7;&#x81EA;&#x884C;&#x6D4B;&#x8BD5;# &#x5B9A;&#x4E49;&#x57FA;&#x7840;&#x914D;&#x7F6E;PASSWD=123.comHOSTNAME=chenhaoDNS1=114.114.114.114DNS2=8.8.8.8SSH_PORT=22122CHATTR=chenhao# &#x6B64;&#x7A0B;&#x5E8F;&#x522B;&#x540D;&#xFF0C;&#x9632;&#x6B62;&#x4ED6;&#x4EBA;&#x4FEE;&#x6539;&#x5173;&#x952E;&#x6587;&#x4EF6;PORTS=80,22,21,8088# &#x7528;&#x4E8E; iptables input &#x5F00;&#x653E;&#x7684;&#x7AEF;&#x53E3;HISTDIR=/usr/etc/.history# &#x7528;&#x4E8E;&#x8BB0;&#x5F55;&#x767B;&#x5F55;&#x8FC7;&#x7CFB;&#x7EDF;&#x7684;&#x7528;&#x6237;&#x3001;IP&#x5730;&#x5740;&#x3001;shell&#x547D;&#x4EE4;&#x4EE5;&#x53CA;&#x8BE6;&#x7EC6;&#x64CD;&#x4F5C;&#x65F6;&#x95F4;cat &lt;&lt; EOF+------------------------------------------------------------------+| ********** Welcome to CentOS 6.5 System init ********** |+------------------------------------------------------------------+EOF[ `whoami` != &quot;root&quot; ] &amp;&amp; echo &quot;please use root&quot; &amp;&amp; exit 1 function format() { echo -e &quot;\033[32m Success!!!\033[0m\n&quot; echo &quot;#########################################################&quot;}###&#x4FEE;&#x6539;root&#x7528;&#x6237;&#x5BC6;&#x7801;echo &quot;set root passwd&quot;echo $PASSWD | passwd root --stdin &amp;&gt; /dev/nullformat###&#x4FEE;&#x6539;&#x4E3B;&#x673A;&#x540D;echo &quot;set hostname&quot;hostname $HOSTNAME &amp;&amp; echo &quot;HOSTNAME=$HOSTNAME&quot; &gt;&gt; /etc/sysconfig/networkformat###&#x914D;&#x7F6E;DNS&#x89E3;&#x6790;echo &quot;set DNS&quot;echo &quot;&quot; &gt; /etc/resolv.conf echo &quot;nameserver $DNS1&quot; &gt; /etc/resolv.confecho &quot;nameserver $DNS2&quot; &gt;&gt; /etc/resolv.confping -c 3 www.baidu.com &amp;&gt; /dev/null || echo &quot;&#x8BF7;&#x68C0;&#x67E5;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;,&#x6B64;&#x811A;&#x672C;&#x9700;&#x8981;&#x8BBF;&#x95EE;&#x5916;&#x7F51;&quot; || exit 3format###&#x5173;&#x95ED;Selinux&#x670D;&#x52A1;echo &quot;disable selinux&quot;[ `getenforce` != &quot;Disabled&quot; ] &amp;&amp; setenforce 0 &amp;&gt; /dev/null &amp;&amp; sed -i s/&quot;^SELINUX=.*$&quot;/&quot;SELINUX=disabled&quot;/g /etc/sysconfig/selinuxformat###&#x66F4;&#x65B0;yum&#x6E90;&#x4E3A;&#x963F;&#x91CC;&#x4E91;echo &quot;set yum mirrirs&quot;cd /etc/yum.repos.d/mv CentOS-Base.repo CentOS-Base.repo.bakwget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo &amp;&gt; /dev/nullwget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-6.repo &amp;&gt; /dev/nullyum clean all &amp;&gt; /dev/null &amp;&amp; yum makecache &amp;&gt; /dev/nullformat###&#x66F4;&#x6539;ssh&#x7684;&#x670D;&#x52A1;&#x7AEF;&#x53E3;echo &quot;set sshd&quot;cp /etc/ssh/sshd_config /etc/ssh/sshd_config.baksed -i s/&quot;^Port 22&quot;/&quot;Port $SSH_PORT&quot;/g /etc/ssh/sshd_configsed -i s/&quot;^UseDNS yes&quot;/&quot;UseDNS no&quot;/g /etc/ssh/sshd_configservice sshd restart &amp;&gt; /dev/nullformat###&#x9501;&#x5B9A;&#x5173;&#x952E;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;($CHATTR -i&#x53EF;&#x4EE5;&#x6062;&#x590D;)echo &quot;chattr files&quot;chattr +i /etc/passwdchattr +i /etc/inittabchattr +i /etc/groupchattr +i /etc/shadowchattr +i /etc/gshadowchattr +i /etc/resolv.confchattr +i /etc/hostschattr +i /etc/fstabmv /usr/bin/chattr /usr/bin/$CHATTRformat###&#x8BBE;&#x7F6E;&#x5B57;&#x7B26;&#x96C6;&#x4E3A;&#x4E2D;&#x6587;echo &quot;set LANG&quot;yum -y groupinstall chinese-support &amp;&gt; /dev/nullsed -i s/&quot;^LANG=.*$&quot;/&quot;LANG=zh_CN.UTF-8&quot;/ /etc/sysconfig/i18necho &apos;SUPPORTED=&quot;zh_CN:zh:en_US.UTF-8:en_US:en:zh_CN.GB18030&quot;&apos; &gt;&gt; /etc/sysconfig/i18nsource /etc/sysconfig/i18nformat###&#x81EA;&#x52A8;&#x66F4;&#x65B0;&#x670D;&#x52A1;&#x5668;&#x65F6;&#x95F4;echo &quot;set ntptime&quot;ntpdate cn.pool.ntp.org &amp;&gt; /dev/nullecho &apos;*/5 * * * * /usr/sbin/ntpdate cn.pool.ntp.org &amp;&gt;/dev/null&apos; &gt;&gt; /etc/crontabhwclock -wformat###&#x8BBE;&#x7F6E;&#x6587;&#x4EF6;&#x53E5;&#x67C4;&#x6570;echo &quot;Set ulimit 65535&quot; cat &lt;&lt; EOF &gt; /etc/security/limits.conf* soft nofile 65535* hard nofile 65535* soft nproc 65535* hard nproc 65535EOFsed -i &apos;s/65535/1024000/g&apos; /etc/security/limits.d/90-nproc.confformat###&#x7CFB;&#x7EDF;&#x5BA1;&#x8BA1;&#x548C;&#x6545;&#x969C;&#x6392;&#x67E5;echo &quot;set history&quot;cat &gt;&gt; /etc/profile &lt;&lt; EOFUSER_IP=`who -u am i 2&gt;/dev/null| awk &apos;{print $NF}&apos;|sed -e &apos;s/[()]//g&apos;`if [ -z $USER_IP ]thenUSER_IP=`hostname`fiif [ ! -d $HISTDIR ]thenmkdir -p $HISTDIRchmod 777 $HISTDIRfiif [ ! -d $HISTDIR/${LOGNAME} ]thenmkdir -p $HISTDIR/${LOGNAME}chmod 300 $HISTDIR/${LOGNAME}fiexport HISTSIZE=2000DT=`date +%Y%m%d_%H%M%S`export HISTFILE=&quot;$HISTDIR/${LOGNAME}/${USER_IP}.history.$DT&quot;export HISTTIMEFORMAT=&quot;[%Y.%m.%d %H:%M:%S] &quot;chmod 600 $HISTDIR/${LOGNAME}/*.history* 2&gt;/dev/null ulimit -SHn 65535ulimit -SHu unlimitedulimit -SHd unlimitedulimit -SHm unlimitedulimit -SHs unlimitedulimit -SHt unlimitedulimit -SHv unlimitedEOFsource /etc/profileformat###&#x8BBE;&#x7F6E;vim#echo &quot;Set Vim.&quot;#cat &lt;&lt; EOF &gt; ~/.vimrc#set number#set laststatus=2#set shiftwidth=4#set tabstop=4#set noexpandtab#set softtabstop=4#set cmdheight=3#set cursorline#set formatoptions=tcrqn #set encoding=utf-8#syntax on#colorscheme desert#color ron#set background=dark #set ruler #set rulerformat=%20(%2*%&lt;%f%=\ %m%r\ %3l\ %c\ %p%%%)#set statusline=%F%m%r%h%w\ [FORMAT=%{&amp;ff}]\ [TYPE=%Y]\ [POS=%l,%v][%p%%]\ %{strftime(\&quot;%d/%m/%y\ -\ %H:%M\&quot;)}#nmap z :x&lt;cr&gt;#nmap sp :set paste&lt;cr&gt;i#EOF #format# vim&#x8BBE;&#x7F6E;&#x8FD9;&#x91CC;&#x6211;&#x8FD8;&#x662F;&#x6BD4;&#x8F83;&#x559C;&#x6B22;&#x9ED8;&#x8BA4;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x6D4B;&#x8BD5;###&#x9690;&#x85CF;&#x670D;&#x52A1;&#x5668;&#x7CFB;&#x7EDF;&#x4FE1;&#x606F;echo &quot;mv issue&quot;mv /etc/issue /etc/issue.bakmv /etc/issue.net /etc/issue.net.bakformat###&#x8BBE;&#x7F6E;&#x767B;&#x5F55;&#x65F6;&#x663E;&#x793A;&#x7684;&#x4FE1;&#x606F;#echo &quot;Set login message.&quot;#echo &quot;This is chen-hao&apos;s Server&quot; &gt; /etc/issue#echo &quot;This is chen-hao&apos;s Server&quot; &gt; /etc/redhat-release#format# &#x4EE5;&#x4E0A;2&#x9009;1###&#x7981;&#x7528;IPV6echo &quot;Disable ipv6.&quot;cat &lt;&lt; EOF &gt; /etc/modprobe.confalias net-pf-10 offalias ipv6 offEOFchkconfig --level 2235 ip6tables offformat###&#x8BBE;&#x7F6E;iptablesecho &quot;set iptables&quot;iptables -Fiptables -A INPUT -p tcp -m multiport --dports $SSH_PORT,$PORTS -j ACCEPTiptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPTiptables -A INPUT -i lo -j ACCEPTiptables -A OUTPUT -m state --state NEW,ESTABLISHED -j ACCEPTiptables -P INPUT DROPiptables -P FORWARD DROPiptables -P OUTPUT ACCEPTservice iptables save &amp;&gt; /dev/nullformat###&#x5185;&#x6838;&#x4F18;&#x5316;echo &quot;Set sysctl.conf&quot;cat &gt; /etc/sysctl.conf &lt;&lt; EOFnet.ipv4.ip_forward = 0 #&#x5F00;&#x542F;&#x8DEF;&#x7531;&#x529F;&#x80FD;net.ipv4.conf.all.rp_filter = 1#&#x52A0;&#x5F3A;&#x5165;&#x7AD9;&#x8FC7;&#x6EE4;&#x548C;&#x51FA;&#x7AD9;&#x8FC7;&#x6EE4;net.ipv4.conf.default.rp_filter = 1#&#x5F00;&#x542F;&#x53CD;&#x5411;&#x8DEF;&#x5F84;&#x8FC7;&#x6EE4;net.ipv4.conf.default.accept_source_route = 0#&#x5904;&#x7406;&#x65E0;&#x6E90;&#x8DEF;&#x7531;&#x7684;&#x5305;kernel.sysrq = 0#&#x63A7;&#x5236;&#x7CFB;&#x7EDF;&#x8C03;&#x8BD5;&#x5185;&#x6838;&#x7684;&#x529F;&#x80FD;&#x8981;&#x6C42;kernel.core_uses_pid = 1#&#x7528;&#x4E8E;&#x8C03;&#x8BD5;&#x591A;&#x7EBF;&#x7A0B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;net.bridge.bridge-nf-call-ip6tables = 0net.bridge.bridge-nf-call-iptables = 0net.bridge.bridge-nf-call-arptables = 0kernel.msgmnb = 65536#&#x6240;&#x6709;&#x5728;&#x6D88;&#x606F;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x6D88;&#x606F;&#x603B;&#x548C;&#x7684;&#x6700;&#x5927;&#x503C;kernel.msgmax = 65536# &#x6307;&#x5B9A;&#x5185;&#x6838;&#x4E2D;&#x6D88;&#x606F;&#x961F;&#x5217;&#x4E2D;&#x6D88;&#x606F;&#x7684;&#x6700;&#x5927;&#x503C;kernel.shmmax = 68719476736#&#x4E8E;&#x5B9A;&#x4E49;&#x5355;&#x4E2A;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x6BB5;&#x7684;&#x6700;&#x5927;&#x503C;&#xFF0C;64&#x4F4D;linux&#x7CFB;&#x7EDF;&#xFF1A;&#x53EF;&#x53D6;&#x7684;&#x6700;&#x5927;&#x503C;&#x4E3A;&#x7269;&#x7406;&#x5185;&#x5B58;&#x503C;-1byte&#xFF0C;&#x5EFA;&#x8BAE;&#x503C;&#x4E3A;&#x591A;&#x4E8E;&#x7269;&#x7406;&#x5185;&#x5B58;&#x7684;&#x4E00;&#x534A;&#xFF0C;&#x4E00;&#x822C;&#x53D6;&#x503C;&#x5927;&#x4E8E;SGA_MAX_SIZE&#x5373;&#x53EF;&#xFF0C;&#x53EF;&#x4EE5;&#x53D6;&#x7269;&#x7406;&#x5185;&#x5B58;-1byte&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x4E3A;64GB&#x7269;&#x7406;&#x5185;&#x5B58;&#xFF0C;&#x53EF;&#x53D6;64*1024*1024*1024-1=68719476735kernel.shmall = 4294967296#inux&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x9875;&#x5927;&#x5C0F;&#x4E3A;4KB,&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x6BB5;&#x7684;&#x5927;&#x5C0F;&#x90FD;&#x662F;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x9875;&#x5927;&#x5C0F;&#x7684;&#x6574;&#x6570;&#x500D;&#x3002;&#x4E00;&#x4E2A;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x6BB5;&#x7684;&#x6700;&#x5927;&#x5927;&#x5C0F;&#x662F; 16G&#xFF0C;&#x90A3;&#x4E48;&#x9700;&#x8981;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x9875;&#x6570;&#x662F;16GB/4KB=16777216KB /4KB=4194304&#xFF08;&#x9875;&#xFF09;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;64Bit&#x7CFB;&#x7EDF;&#x4E0B;16GB&#x7269;&#x7406;&#x5185;&#x5B58;&#xFF0C;&#x8BBE;&#x7F6E;kernel.shmall = 4194304&#x624D;&#x7B26;&#x5408;&#x8981;&#x6C42;(&#x51E0;&#x4E4E;&#x662F;&#x539F;&#x6765;&#x8BBE;&#x7F6E;2097152&#x7684;&#x4E24;&#x500D;)net.ipv6.conf.all.disable_ipv6 = 1net.ipv6.conf.default.disable_ipv6 = 1net.ipv4.neigh.default.gc_stale_time = 120net.ipv4.conf.default.arp_announce = 2net.ipv4.conf.all.arp_announce = 2net.ipv4.conf.lo.arp_announce = 2###&#x5185;&#x5B58;&#x8D44;&#x6E90;&#x4F7F;&#x7528;&#x76F8;&#x5173;&#x8BBE;&#x5B9A;net.core.wmem_default = 8388608 net.core.rmem_default = 8388608 net.core.rmem_max = 16777216 net.core.wmem_max = 16777216 net.ipv4.tcp_rmem = 4096 65536 16777216net.ipv4.tcp_wmem = 4096 65536 16777216 net.ipv4.tcp_mem = 8388608 8388608 8388608##&#x5E94;&#x5BF9;DDOS&#x653B;&#x51FB;,TCP&#x8FDE;&#x63A5;&#x5EFA;&#x7ACB;&#x8BBE;&#x7F6E;net.ipv4.tcp_syncookies = 1#&#x9632;&#x6B62;syn flood&#x653B;&#x51FB;net.ipv4.tcp_synack_retries = 1 net.ipv4.tcp_syn_retries = 1 net.ipv4.tcp_max_syn_backlog = 262144#SYN&#x961F;&#x5217;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;1024&#xFF0C;&#x52A0;&#x5927;&#x961F;&#x5217;&#x957F;&#x5EA6;&#x4E3A;262144&#xFF0C;&#x53EF;&#x4EE5;&#x5BB9;&#x7EB3;&#x66F4;&#x591A;&#x7B49;&#x5F85;&#x8FDE;&#x63A5;&#x7684;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#x6570;##&#x5E94;&#x5BF9;timewait&#x8FC7;&#x9AD8;,TCP&#x8FDE;&#x63A5;&#x65AD;&#x5F00;&#x8BBE;&#x7F6E;net.ipv4.tcp_max_tw_buckets = 10000 #&#x9ED8;&#x8BA4;&#x662F;180000&#x3002;&#x8868;&#x793A;&#x7CFB;&#x7EDF;&#x540C;&#x65F6;&#x4FDD;&#x6301;TIME_WAIT&#x7684;&#x6700;&#x5927;&#x6570;&#x91CF;&#xFF0C;&#x5982;&#x679C;&#x8D85;&#x8FC7;&#x8FD9;&#x4E2A;&#x6570;&#x5B57;&#xFF0C;TIME_WAIT&#x5C06;&#x7ACB;&#x523B;&#x88AB;&#x6E05;&#x9664;&#x5E76;&#x6253;&#x5370;&#x8B66;&#x544A;&#x4FE1;&#x606F;net.ipv4.tcp_tw_recycle = 1 #&#x8868;&#x793A;&#x5F00;&#x542F;TCP&#x8FDE;&#x63A5;&#x4E2D;TIME-WAIT sockets&#x7684;&#x5FEB;&#x901F;&#x6536;&#x56DE;&#x529F;&#x80FD;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; 0 &#xFF0C;&#x8868;&#x793A;&#x5173;&#x95ED;&#x3002;net.ipv4.tcp_tw_reuse = 1 #&#x8868;&#x793A;&#x5F00;&#x542F;&#x91CD;&#x7528;&#x3002;&#x5141;&#x8BB8;&#x5C06;TIME-WAIT sockets&#x91CD;&#x65B0;&#x7528;&#x4E8E;&#x65B0;&#x7684; TCP &#x8FDE;&#x63A5;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; 0 &#x8868;&#x793A;&#x5173;&#x95ED;net.ipv4.tcp_timestamps = 0 #&#x65F6;&#x95F4;&#x6233;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x5E8F;&#x5217;&#x53F7;&#x7684;&#x5377;&#x7ED5;net.ipv4.tcp_fin_timeout = 5# &#x8868;&#x793A;&#x5982;&#x679C;&#x5957;&#x63A5;&#x5B57;&#x7531;&#x672C;&#x7AEF;&#x8981;&#x6C42;&#x5173;&#x95ED;&#xFF0C;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x51B3;&#x5B9A;&#x4E86;&#x5B83;&#x4FDD;&#x6301;&#x5728;FIN-WAIT-2&#x72B6;&#x6001;&#x7684;&#x65F6;&#x95F4;&#x3002;&#x5BF9;&#x7AEF;&#x53EF;&#x4EE5;&#x51FA;&#x9519;&#x5E76;&#x6C38;&#x8FDC;&#x4E0D;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#xFF0C;&#x751A;&#x81F3;&#x610F;&#x5916;&#x5F53;&#x673A;&#x3002;&#x7F3A;&#x7701;&#x503C;&#x662F;60 &#x79D2;&#x3002;2.2 &#x5185;&#x6838;&#x7684;&#x901A;&#x5E38;&#x503C;&#x662F;180 &#x79D2;&#xFF0C;3&#x4F60;&#x53EF;&#x4EE5;&#x6309;&#x8FD9;&#x4E2A;&#x8BBE;&#x7F6E;&#xFF0C;&#x4F46;&#x8981;&#x8BB0;&#x4F4F;&#x7684;&#x662F;&#xFF0C;&#x5373;&#x4F7F;&#x4F60;&#x7684;&#x673A;&#x5668;&#x662F;&#x4E00;&#x4E2A;&#x8F7B;&#x8F7D;&#x7684;WEB &#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4E5F;&#x6709;&#x56E0;&#x4E3A;&#x5927;&#x91CF;&#x7684;&#x6B7B;&#x5957;&#x63A5;&#x5B57;&#x800C;&#x5185;&#x5B58;&#x6EA2;&#x51FA;&#x7684;&#x98CE;&#x9669;&#xFF0C;FIN- WAIT-2 &#x7684;&#x5371;&#x9669;&#x6027;&#x6BD4;FIN-WAIT-1 &#x8981;&#x5C0F;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x6700;&#x591A;&#x53EA;&#x80FD;&#x5403;&#x6389;1.5K &#x5185;&#x5B58;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x4EEC;&#x7684;&#x751F;&#x5B58;&#x671F;&#x957F;&#x4E9B;net.ipv4.ip_local_port_range = 4000 65000# &#x8868;&#x793A;&#x7528;&#x4E8E;&#x5411;&#x5916;&#x8FDE;&#x63A5;&#x7684;&#x7AEF;&#x53E3;&#x8303;&#x56F4;###TCP keepalived &#x8FDE;&#x63A5;&#x4FDD;&#x9C9C;&#x8BBE;&#x7F6E;net.ipv4.tcp_keepalive_time = 1200#&#x8868;&#x793A;&#x5F53;keepalive&#x8D77;&#x7528;&#x7684;&#x65F6;&#x5019;&#xFF0C;TCP&#x53D1;&#x9001;keepalive&#x6D88;&#x606F;&#x7684;&#x9891;&#x5EA6;&#x3002;&#x7F3A;&#x7701;&#x662F;2&#x5C0F;&#x65F6;&#xFF0C;&#x6539;&#x4E3A;20&#x5206;&#x949F;net.ipv4.tcp_keepalive_intvl = 15# &#x5F53;&#x63A2;&#x6D4B;&#x6CA1;&#x6709;&#x786E;&#x8BA4;&#x65F6;&#xFF0C;&#x91CD;&#x65B0;&#x53D1;&#x9001;&#x63A2;&#x6D4B;&#x7684;&#x9891;&#x5EA6;&#x3002;&#x7F3A;&#x7701;&#x662F;75net.ipv4.tcp_keepalive_probes = 5# &#x5728;&#x8BA4;&#x5B9A;&#x8FDE;&#x63A5;&#x5931;&#x6548;&#x4E4B;&#x524D;&#xFF0C;&#x53D1;&#x9001;&#x591A;&#x5C11;&#x4E2A;TCP&#x7684;keepalive&#x63A2;&#x6D4B;&#x5305;&#x3002;&#x7F3A;&#x7701;&#x503C;&#x662F;9&#x3002;&#x8FD9;&#x4E2A;&#x503C;&#x4E58;&#x4EE5;tcp_keepalive_intvl&#x4E4B;&#x540E;&#x51B3;&#x5B9A;&#x4E86;&#xFF0C;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x53D1;&#x9001;&#x4E86;keepalive&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x5C11;&#x65F6;&#x95F4;&#x6CA1;&#x6709;&#x56DE;&#x5E94;###&#x5176;&#x4ED6;TCP&#x76F8;&#x5173;&#x8C03;&#x8282;net.core.somaxconn = 262144#isten(&#x51FD;&#x6570;)&#x7684;&#x9ED8;&#x8BA4;&#x53C2;&#x6570;,&#x6302;&#x8D77;&#x8BF7;&#x6C42;&#x7684;&#x6700;&#x5927;&#x6570;&#x91CF;&#x9650;&#x5236;&#x3002;web &#x5E94;&#x7528;&#x4E2D;listen &#x51FD;&#x6570;&#x7684;backlog &#x9ED8;&#x8BA4;&#x4F1A;&#x7ED9;&#x6211;&#x4EEC;&#x5185;&#x6838;&#x53C2;&#x6570;&#x7684;net.core.somaxconn &#x9650;&#x5236;&#x5230;128&#xFF0C;&#x800C;nginx &#x5B9A;&#x4E49;&#x7684;NGX_LISTEN_BACKLOG &#x9ED8;&#x8BA4;&#x4E3A;511&#xFF0C;&#x6240;&#x4EE5;&#x6709;&#x5FC5;&#x8981;&#x8C03;&#x6574;&#x8FD9;&#x4E2A;&#x503C;net.ipv4.tcp_sack = 1net.ipv4.tcp_window_scaling = 1EOFsysctl -p # &#x751F;&#x4EA7;&#x73AF;&#x5883;&#x5404;&#x4E0D;&#x76F8;&#x540C;&#xFF0C;&#x5185;&#x6838;&#x4F18;&#x5316;&#x9700;&#x614E;&#x91CD;&#xFF0C;&#x8BF7;&#x4E00;&#x4E2A;&#x4E2A;&#x53C2;&#x6570;&#x9010;&#x4E00;&#x6D4B;&#x8BD5;format#&#x5B89;&#x88C5;&#x7CFB;&#x7EDF;&#x5FC5;&#x9700;&#x8F6F;&#x4EF6;&#x5305;echo &quot;install pack&quot;yum -y install make gcc-c++ cmake bison-devel ncurses-devel net-snmp sysstat dstat iotop lrzsz flex byacc libpcap libpcap-devel nfs-utils ntp zip unzip xz wget vim lsof bison openssh-clients htop lftp &amp;&gt; /dev/nullformatyum -y groupinstall &quot;Development Tools&quot; &quot;Server Platform Development&quot; &amp;&gt; /dev/nullread -p &quot;&#x7CFB;&#x7EDF;&#x521D;&#x59CB;&#x5316;&#x5B8C;&#x6BD5;,&#x662F;&#x5426;&#x9700;&#x8981;&#x91CD;&#x542F;(y/n)?&quot; TT if [ &quot;$TT&quot; == &quot;y&quot; ];then reboot elif [ &quot;$TT&quot; == &quot;n&quot; ];then exit 4 else echo &quot;&#x8BF7;&#x8F93;&#x5165;y/n&quot; fi]]></content>
      <categories>
        <category>Shell</category>
      </categories>
      <tags>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[搭建项目管理系统-JIRA汉化破解版]]></title>
    <url>%2F%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-JIRA%E6%B1%89%E5%8C%96%E7%A0%B4%E8%A7%A3%E7%89%88.html</url>
    <content type="text"><![CDATA[JIRA&#x662F;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#x8DDF;&#x8E2A;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x5E2E;&#x52A9;&#x56E2;&#x961F;&#x521B;&#x5EFA;&#x8BA1;&#x5212;&#x4EFB;&#x52A1;&#x3001;&#x6784;&#x5EFA;&#x5E76;&#x53D1;&#x5E03;&#x4F18;&#x79C0;&#x7684;&#x4EA7;&#x54C1;&#x3002;&#x5168;&#x7403;&#x6210;&#x5343;&#x4E0A;&#x4E07;&#x7684;&#x56E2;&#x961F;&#x9009;&#x62E9;JIRA&#xFF0C;&#x7528;JIRA&#x6765;&#x6355;&#x83B7;&#x3001;&#x7EC4;&#x7EC7;&#x7BA1;&#x7406;&#x7F3A;&#x9677;&#x3001;&#x5206;&#x914D;&#x4EFB;&#x52A1;&#xFF0C;&#x8DDF;&#x8E2A;&#x56E2;&#x961F;&#x7684;&#x6D3B;&#x52A8;&#x3002;&#x4E0D;&#x8BBA;&#x5728;&#x684C;&#x9762;PC&#x8FD8;&#x662F;&#x79FB;&#x52A8;&#x7EC8;&#x7AEF;&#x8BBE;&#x5907;&#x4E0A;&#xFF0C;JIRA&#x90FD;&#x80FD;&#x5B8C;&#x7F8E;&#x7684;&#x8FD0;&#x884C;&#xFF0C;&#x5E2E;&#x52A9;&#x56E2;&#x961F;&#x5B8C;&#x6210;&#x5DE5;&#x4F5C;&#x3002; &#x73AF;&#x5883;&#x51C6;&#x5907; CentOS 6.5 java jdk 1.8 mysql-server 5.6 jira-6.3.6.tar.gz &#x7834;&#x89E3;&#x5305;&#x4E0B;&#x8F7D;&#xFF1A;http://pan.baidu.com/s/1c2DWvYS &#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x5728;&#x5B89;&#x88C5;JIRA&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x5DF2;&#x7ECF;&#x5B89;&#x88C5;&#x597D;&#x4E86;mysql5.6&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5E76;&#x4E14;&#x521B;&#x5EFA;&#x4E86;&#x6570;&#x636E;&#x5E93;&#x548C;&#x7528;&#x6237;&#xFF0C;&#x8BED;&#x53E5;&#x5982;&#x4E0B;123mysql&gt; create database jira character set utf8;mysql&gt; grant all on jira.* to &apos;jira&apos;@&apos;localhost&apos; identified by &apos;jirapass&apos;;mysql&gt; FLUSH PRIVILEGES; &#x5B89;&#x88C5;jira123chmod +x atlassian-jira-6.2.3-x64.bin./atlassian-jira-6.2.3-x64.bincp mysql-connector-java-5.1.38-bin.jar /opt/atlassian/jira/atlassian-jira/WEB-INF/lib/ &#x8BBF;&#x95EE; http://192.168.16.109:8080&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#x663E;&#x793A;&#x5982;&#x4E0B;&#xFF1A; &#x6C49;&#x5316;&#x7834;&#x89E3; &#x9009;&#x62E9;&#x63D2;&#x4EF6; &#x4E0A;&#x4F20;&#x4E2D;&#x6587;&#x8BED;&#x8A00;&#x5305;&#x4E2D;&#x6587;&#x63D2;&#x4EF6;&#x4E0A;&#x4F20;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x4F1A;&#x9ED8;&#x8BA4;&#x53D8;&#x5230;&#x4E2D;&#x6587;&#x5B57;&#x4F53;&#xFF0C;&#x56E0;&#x4E3A;&#x4E0A;&#x4F20;&#x4E2D;&#x6587;&#x8BED;&#x8A00;&#x5305;&#x4E4B;&#x540E;&#x9ED8;&#x8BA4;&#x8BED;&#x8A00;&#x4F1A;&#x53D8;&#x4E3A;&#x4E2D;&#x6587;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x53D8;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x5728;&#x7CFB;&#x7EDF;&#x8BBE;&#x7F6E;&#x4FEE;&#x6539; &#x7834;&#x89E3; 123service jira stopcp atlassian-extras-2.2.2.jar atlassian-universal-plugin-manager-plugin-2.17.13.jar /opt/atlassian/jira/atlassian-jira/WEB-INF/lib/service jira start &#x542F;&#x52A8;jira&#xFF0C;&#x767B;&#x5F55;&#x540E;&#x53F0;&#xFF0C;&#x8FDB;&#x5165;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x2014;&#x2014;&gt;&#x6388;&#x6743;&#x8F93;&#x5165;&#x4E0B;&#x9762;&#x7684;&#x6388;&#x6743;&#x7801;&#xFF0C;&#x70B9;&#x51FB;&#x589E;&#x52A0;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x770B;&#x5230;jira&#x7684;&#x4F7F;&#x7528;&#x671F;&#x9650;&#x5230;&#x4E86;2099&#x5E74;&#xFF0C;&#x8BF4;&#x660E;&#x7834;&#x89E3;&#x6210;&#x529F;12345678910111213141516171819202122Description=JIRA: Commercial,CreationDate=2014-09-20,jira.LicenseEdition=ENTERPRISE,Evaluation=false,jira.LicenseTypeName=COMMERCIAL,jira.active=true,licenseVersion=2,MaintenanceExpiryDate=2099-12-31,Organisation=pl,# &#x4FEE;&#x6539;&#x4E0B;&#x9762;2&#x5904;&#x5373;&#x53EF;SEN=SEN-L4572887,ServerID=BPT3-4QRK-FCRR-HEP3,jira.NumberOfUsers=-1,LicenseID=AAABBw0ODAoPeNptkFtLxDAQhd/zKwI+R9Kwy66FPKxthGhvtF0p4kuso0a6sUwvuP/edissyj4MDHPOfHOYqzu0tICWeoJy4a+FzzkNwpIK7q1ICF2Ntu3tl5P3Ot89+1SNphnMPCEBwqkJTQ9y9jN+wzxBPi2a68jW4DpQr/a0rZJS5VmuC0XOBNnjAH/s5bGFxBxABmkcqzzQu2jRTd3bEZaFZvE+AnYzRJDYWNeDM64G9d1aPJ4TeXxOlOK7cbZbjrbNgkyGwwtg+rbvJpBkHikAR0Adytt0XzFV7R5Y+qQzVkWZIoVK5FQsWq03YrvdkN/Ekz3S4SXlcpRswPrDdPD/aT+P1nzDMC0CFQCM9+0LlHVNnZQnSTwuRO3eK+2gVgIUCteTs4Q3khIgrnsY64hxYB/d8bM=X02dh,LicenseExpiryDate=2099-12-31,PurchaseDate=2014-09-20]]></content>
      <categories>
        <category>自动化</category>
      </categories>
      <tags>
        <tag>jira</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[搭建公司wiki系统-confluence 汉化破解版]]></title>
    <url>%2F%E6%90%AD%E5%BB%BA%E5%85%AC%E5%8F%B8wiki%E7%B3%BB%E7%BB%9F-confluence-%E6%B1%89%E5%8C%96%E7%A0%B4%E8%A7%A3%E7%89%88.html</url>
    <content type="text"><![CDATA[Confluence&#x662F;&#x4E00;&#x4E2A;&#x4E13;&#x4E1A;&#x7684;wiki&#x7A0B;&#x5E8F;&#x3002;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x77E5;&#x8BC6;&#x7BA1;&#x7406;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x901A;&#x8FC7;&#x5B83;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x56E2;&#x961F;&#x6210;&#x5458;&#x4E4B;&#x95F4;&#x7684;&#x534F;&#x4F5C;&#x548C;&#x77E5;&#x8BC6;&#x5171;&#x4EAB;&#x3002;Confluence&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x8F6F;&#x4EF6;&#xFF0C;&#x975E;&#x5546;&#x4E1A;&#x7528;&#x9014;&#x53EF;&#x4EE5;&#x514D;&#x8D39;&#x4F7F;&#x7528;&#x3002;Confluence&#x4F7F;&#x7528;&#x7B80;&#x5355;&#xFF0C;&#x4F46;&#x5B83;&#x5F3A;&#x5927;&#x7684;&#x7F16;&#x8F91;&#x548C;&#x7AD9;&#x70B9;&#x7BA1;&#x7406;&#x7279;&#x5F81;&#x80FD;&#x591F;&#x5E2E;&#x52A9;&#x56E2;&#x961F;&#x6210;&#x5458;&#x4E4B;&#x95F4;&#x5171;&#x4EAB;&#x4FE1;&#x606F;&#xFF0C;&#x6587;&#x6863;&#x534F;&#x4F5C;&#xFF0C;&#x96C6;&#x4F53;&#x8BA8;&#x8BBA;&#x3002; &#x73AF;&#x5883;&#x51C6;&#x5907; CentOS 6.5 java jdk 1.8 mysql-server 5.6 confluence 5.6.6 &#x4E0B;&#x8F7D;confiluence&#x53CA;&#x5176;&#x7834;&#x89E3;&#x5305;confluence&#x6709;&#x5F88;&#x591A;&#x7248;&#x672C;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x8FDE;&#x63A5;&#x8FDB;&#x884C;&#x67E5;&#x770B;https://www.atlassian.com/software/confluence/download-archives&#x901A;&#x8FC7;&#x4E0A;&#x56FE;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x51FA;confluence&#x5BF9;&#x4E8E;windows&#x548C;linux&#x5E73;&#x53F0;&#x6BCF;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#x6709;&#x591A;&#x79CD;&#x5B89;&#x88C5;&#x5305;&#xFF0C;&#x5728;&#x6B64;&#x6211;&#x4EEC;&#x9009;&#x62E9;&#x7684;&#x662F;bin&#x65B9;&#x5F0F;&#x3002;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x76EE;&#x524D;confluence&#x6700;&#x65B0;&#x7248;&#x672C;&#x662F;6.0.1&#x3002;&#x4E0B;&#x8F7D;confluence5.6.61curl -o atlassian-confluence-5.6.6-x64.bin https://downloads.atlassian.com/software/confluence/downloads/atlassian-confluence-5.6.6-x64.bin &#x4E0B;&#x8F7D;confluence&#x7834;&#x89E3;&#x5305;&#x8FD9;&#x91CC;&#x662F;&#x7F51;&#x4E0A;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x6211;&#x5C31;&#x4FDD;&#x5B58;&#x5230;&#x767E;&#x5EA6;&#x7F51;&#x76D8;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4E0B;&#x8F7D;https://pan.baidu.com/s/1kVK3Hm3 &#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x5728;&#x5B89;&#x88C5;confluence&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x5DF2;&#x7ECF;&#x5B89;&#x88C5;&#x597D;&#x4E86;mysql5.6&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5E76;&#x4E14;&#x521B;&#x5EFA;&#x4E86;&#x6570;&#x636E;&#x5E93;&#x548C;&#x7528;&#x6237;&#xFF0C;&#x8BED;&#x53E5;&#x5982;&#x4E0B;1234mysql&gt; CREATE DATABASE confluence CHARACTER SET utf8 COLLATE utf8_bin;mysql&gt; GRANT ALL PRIVILEGES ON confluence.* TO &apos;confluence&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;123.com&apos;;mysql&gt; GRANT ALL PRIVILEGES ON confluence.* TO &apos;confluence&apos;@&apos;10.16.10.44&apos; IDENTIFIED BY &apos;123.com&apos;;mysql&gt; FLUSH PRIVILEGES; &#x5B89;&#x88C5;confluence12chmod +x atlassian-confluence-5.6.6-x64.bin./atlassian-confluence-5.6.6-x64.bin &#x901A;&#x8FC7;&#x4E0A;&#x56FE;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F88;&#x660E;&#x663E;&#x7684;&#x770B;&#x51FA;confluence&#x5B89;&#x88C5;&#x5230;&#x4E86;/opt/atlassian/confluence&#x548C;/var/atlassian/application-data/confluence&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x5E76;&#x4E14;confluence&#x76D1;&#x542C;&#x7684;&#x7AEF;&#x53E3;&#x662F;8090&#x4E0B;&#x9762;&#x8BBF;&#x95EE;&#x5730;&#x5740; 192.168.4.38:8090 &#x7834;&#x89E3;confluence &#x5173;&#x95ED;confluence1service confluence stop &#x5220;&#x9664;jar&#x6587;&#x4EF6;1234cd /opt/atlassian/confluence/confluence/WEB-INF/lib/ll | grep atlassian-extras | wc -l6rm -fr atlassian-extra* &#x89E3;&#x538B;&#x7834;&#x89E3;&#x5305;&#x5E76;&#x5BFC;&#x5165;&#x89E3;&#x538B;&#x7834;&#x89E3;&#x5305;&#xFF0C;&#x628A;&#x91CC;&#x9762;&#x7684;atlassian-extras-3.2.jar&#x3001;Confluence-5.6.6-language-pack-zh_CN.jar&#x3001;mysql-connector-java-5.1.39-bin.jar&#x4E09;&#x4E2A;jar&#x6587;&#x4EF6;&#x590D;&#x5236;&#x5230;/opt/atlassian/confluence/confluence/WEB-INF/lib&#x76EE;&#x5F55;&#x4E0B;1234cd /work/confluence5.6.6-crack/jar/cp ./* /opt/atlassian/confluence/confluence/WEB-INF/lib/service confluence start# &#x5E76;&#x542F;&#x52A8;&#x670D;&#x52A1; &#x5176;&#x4E2D;atlassian-extras-3.2.jar&#x6587;&#x4EF6;&#x662F;&#x548C;license&#x76F8;&#x5173;&#x7684;&#xFF0C;Confluence-5.6.6-language-pack-zh_CN.jar&#x662F;confluence&#x4E2D;&#x6587;&#x8BED;&#x8A00;&#x5305;&#xFF0C;&#x800C;mysql-connector-java-5.1.39-bin.jar&#x662F;confluence&#x8FDE;&#x63A5;mysql&#x6570;&#x636E;&#x5E93;&#x76F8;&#x5173;&#x7684;jar&#x5305;&#x3002; &#x8FD0;&#x884C;&#x7834;&#x89E3;jar&#x5305;1java -jar confluence_keygen.jar &#x628A;&#x4E0A;&#x8FF0;&#x590D;&#x5236;&#x7684;Server ID&#x7C98;&#x8D34;&#x8FDB;&#x53BB;&#xFF0C;&#x7136;&#x540E;&#x70B9;&#x51FB; gen &#x5F00;&#x59CB;&#x5B89;&#x88C5;confluence &#x5B89;&#x88C5;&#x5B8C;&#x6210;]]></content>
      <categories>
        <category>自动化</category>
      </categories>
      <tags>
        <tag>wiki</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[利用logrotate服务切割日志]]></title>
    <url>%2F%E5%88%A9%E7%94%A8logrotate%E6%9C%8D%E5%8A%A1%E5%88%87%E5%89%B2%E6%97%A5%E5%BF%97.html</url>
    <content type="text"><![CDATA[logrotate &#x662F;&#x4E00;&#x4E2A;&#x65E5;&#x5FD7;&#x7BA1;&#x7406;&#x7A0B;&#x5E8F;&#xFF0C;&#x7528;&#x6765;&#x628A;&#x65E7;&#x7684;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x5220;&#x9664;&#xFF08;&#x5907;&#x4EFD;&#xFF09;&#xFF0C;&#x5E76;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x79F0;&#x4E3A;&#x201D;&#x8F6C;&#x50A8;&#x201D;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x65E5;&#x5FD7;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x6216;&#x8005;&#x6839;&#x636E;&#x5176;&#x4F7F;&#x7528;&#x7684;&#x5929;&#x6570;&#x6765;&#x8F6C;&#x50A8;&#x3002; &#x542F;&#x52A8;&#x65B9;&#x5F0F;logrotate &#x7684;&#x6267;&#x884C;&#x7531;crond&#x670D;&#x52A1;&#x5B9E;&#x73B0;&#x3002;&#x5728; /etc/cron.daily &#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#x6709;&#x4E2A;&#x6587;&#x4EF6;logrotate&#xFF0C;&#x5B83;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4E2A;shell script&#xFF0C;&#x7528;&#x6765;&#x542F;&#x52A8;logrotate&#x3002;logrotate&#x7A0B;&#x5E8F;&#x6BCF;&#x5929;&#x7531;cron&#x5728;&#x6307;&#x5B9A;&#x7684;&#x65F6;&#x95F4; &#xFF08;/etc/crontab&#xFF09; &#x542F;&#x52A8;&#x3002;123456789# cat /etc/cron.daily/logrotate #!/bin/sh/usr/sbin/logrotate /etc/logrotate.conf &gt;/dev/null 2&gt;&amp;1EXITVALUE=$?if [ $EXITVALUE != 0 ]; then /usr/bin/logger -t logrotate &quot;ALERT exited abnormally with [$EXITVALUE]&quot;fiexit 0 &#x5728;&#x6267;&#x884C;logrotate&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x5176;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/logrotate.conf &#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x6CE8;&#x91CA;&#x5199;&#x5F97;&#x5F88;&#x6E05;&#x695A;&#xFF0C;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x518D;&#x7F57;&#x55E6;&#x4E86;&#x3002;&#x53EA;&#x60F3;&#x5F3A;&#x8C03;&#x4E0B;&#x9762;&#x8FD9;&#x884C;&#xFF0C;&#x5B83;&#x7684;&#x4F5C;&#x7528;&#x5305;&#x542B;&#x5B58;&#x653E;&#x5728;/etc/logrotate.d&#x76EE;&#x5F55;&#x4E0B;&#x9762;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x4E0D;&#x53EF;&#x6216;&#x7F3A;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5B89;&#x88C5;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x5B83;&#x7684;&#x65E5;&#x5FD7;&#x8F6C;&#x50A8;&#x7684;&#x89C4;&#x5219;&#x53EF;&#x4EE5;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x4E13;&#x95E8;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x653E;&#x5728;/etc/logrotate.d&#x4E0B;&#x9762;&#x3002;&#x5B83;&#x5176;&#x5B9E;&#x4E5F;&#x56E0;&#x4E3A;&#x4E0B;&#x9762;&#x7684;&#x8FD9;&#x53E5;&#x8BDD;&#xFF0C;&#x5728; logrotate&#x670D;&#x52A1;&#x542F;&#x52A8;&#x65F6;&#x88AB;&#x8BFB;&#x53D6;&#x3002; &#x6BCF;&#x4E2A;&#x5B58;&#x653E;&#x5728;/etc/logrotate.d&#x76EE;&#x5F55;&#x91CC;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x90FD;&#x6709;&#x4E0A;&#x9762;&#x683C;&#x5F0F;&#x7684;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#x3002;&#x5728;{}&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x89C4;&#x5219;&#xFF0C;&#x5982;&#x679C;&#x4E0E;logrotate.conf&#x4E2D;&#x7684;&#x51B2;&#x7A81;&#xFF0C;&#x4EE5;/etc/logrotatate.d/&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#x5B9A;&#x4E49;&#x7684;&#x4E3A;&#x51C6;&#x3002; &#x53C2;&#x6570;&#x8BF4;&#x660E;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x5339;&#x914D;&#x89C4;&#x5219;&#x4E2D;&#xFF0C;&#x4E0D;&#x8981;&#x4F7F;&#x7528;/var/log/news/&#xFF0C;&#x8FD9;&#x4F1A;&#x5339;&#x914D;&#x5DF2;&#x7ECF;&#x5207;&#x6362;&#x8FC7;&#x7684;&#x65E5;&#x5FD7;&#xFF0C;&#x5E94;&#x4F7F;&#x7528;/var/log/news/.log &#x9009;&#x9879; &#x7528;&#x9014; nocompress/compress &#x4E0D;&#x538B;&#x7F29;/&#x538B;&#x7F29; delaycompress &#x4E0D;&#x538B;&#x7F29;&#x524D;&#x4E00;&#x4E2A;&#x622A;&#x65AD;&#x7684;&#x6587;&#x4EF6;&#xFF08;&#x9700;&#x8981;&#x4E0E;compress&#x4E00;&#x8D77;&#x7528;&#xFF09; daily/weekly/monthly &#x6BCF;&#x5929;/&#x5468;/&#x6708;&#x8F6E;&#x8F6C;&#x4E00;&#x6B21; copytruncate &#x6E05;&#x7A7A;&#x539F;&#x6709;&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x6587;&#x4EF6; create 0644 root utmp &#x65B0;&#x5EFA;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#xFF0C;&#x6743;&#x9650;&#x3001;&#x5C5E;&#x4E3B;&#x3001;&#x7EC4; ifempty &#x5373;&#x4F7F;&#x7528;&#x7A7A;&#x6587;&#x4EF6;&#x4E5F;&#x8F6C;&#x50A8; notifempty &#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x4E3A;&#x7A7A;&#x4E0D;&#x8FDB;&#x884C;&#x8F6C;&#x50A8; olddir &#x8F6C;&#x50A8;&#x540E;&#x7684;&#x65E5;&#x5FD7;&#x5B58;&#x653E;&#x76EE;&#x5F55;&#xFF0C;&#x5FC5;&#x987B;&#x548C;&#x5F53;&#x524D;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF; rotate 5 &#x4FDD;&#x7559;&#x6700;&#x8FD1;&#x7684;5&#x4E2A;&#x65E5;&#x5FD7;&#x6587;&#x4EF6; minisize 1M &#x5FC5;&#x987B;&#x5927;&#x4E8E;1MB&#x624D;&#x4F1A;&#x8F6C;&#x50A8; size 50M &#x8D85;&#x8FC7;50MB&#x540E;&#x8F6E;&#x8F6C;&#x65E5;&#x5FD7; mail www@my.org &#x8F6E;&#x6362;&#x540E;&#x7684;&#x628A;&#x65E5;&#x5FD7;&#x53D1;&#x7ED9;&#x90AE;&#x7BB1; missingok &#x5982;&#x679C;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x4E0D;&#x62A5;&#x9519; prerotate,endscript &#x5728;logrotate&#x4E4B;&#x524D;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4; postrotate,endscript &#x5728;logrotate&#x4E4B;&#x540E;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4; sharedscripts &#x5171;&#x4EAB;&#x811A;&#x672C;&#xFF0C;&#x8868;&#x793A;&#x5207;&#x6362;&#x65F6;&#x53EA;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x811A;&#x672C; dateext &#x589E;&#x52A0;&#x65E5;&#x671F;&#x4F5C;&#x4E3A;&#x540E;&#x7F00;&#xFF0C;&#x4E0D;&#x7136;&#x4F1A;&#x662F;&#x4E00;&#x4E32;&#x65E0;&#x610F;&#x4E49;&#x7684;&#x6570;&#x5B57; dateformat .%s &#x5207;&#x6362;&#x540E;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x5FC5;&#x987B;&#x914D;&#x5408;dateext&#x4F7F;&#x7528; logrotate.conf&#x8303;&#x4F8B;1234567891011121314151617181920212223242526272829303132333435363738394041424344454647# sample logrotate configuration filecompress # &#x5168;&#x5C40;&#x8BBE;&#x7F6E;, &#x538B;&#x7F29; /var/log/messages { rotate 5 # &#x4FDD;&#x7559;5&#x4EFD;&#x65E5;&#x5FD7; weekly # &#x6BCF;&#x5468;&#x8F6E;&#x6362;&#x4E00;&#x6B21; postrotate # &#x8F6E;&#x6362;&#x4E4B;&#x540E;&#x91CD;&#x542F;syslogd&#x670D;&#x52A1; /usr/bin/killall -HUP syslogd # rhel6&#x4E2D;&#x4E3A;:/bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` 2&gt; /dev/null || true # &#x53EF;&#x67E5;&#x770B;/etc/logrotate.d/&#x4E0B;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6; endscript} &quot;/var/log/httpd/access.log&quot; /var/log/httpd/error.log { # &#x6307;&#x5B9A;&#x591A;&#x4E2A;&#x6587;&#x4EF6;, &#x5982;&#x679C;&#x6709;&#x7279;&#x6B8A;&#x5B57;&#x7B26;&#x9700;&#x8981;&#x7528;&#x5355;&#x5F15;&#x53F7; rotate 5 mail www@my.org size 100k # &#x8D85;&#x8FC7;100k&#x540E;&#x5207;&#x6362;&#x65E5;&#x5FD7;, &#x5E76;&#x628A;&#x8001;&#x7684;&#x65E5;&#x5FD7;&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#x7ED9;www@my.org sharedscripts # &#x5171;&#x4EAB;&#x811A;&#x672C;.&#x4E0B;&#x9762;&#x7684;postrotate&#x811A;&#x672C;&#x53EA;&#x8FD0;&#x884C;&#x4E00;&#x6B21;. postrotate /usr/bin/killall -HUP httpd endscript} /var/log/news/* { # &#x5C11;&#x7528;&#x901A;&#x914D;&#x7B26;, &#x56E0;&#x4F1A;&#x5B83;&#x4F1A;&#x5305;&#x62EC;&#x5DF2;&#x7ECF;&#x5207;&#x6362;&#x8FC7;&#x7684;&#x65E5;&#x5FD7;, &#x8981;&#x7528;&#x7684;&#x8BDD;&#x6700;&#x597D;&#x5728;*&#x53F7;&#x540E;&#x52A0;&#x4E0A;&#x6269;&#x5C55;&#x540D;, &#x5982;*.log monthly rotate 2 olddir /var/log/news/old missingok postrotate kill -HUP &apos;cat /var/run/inn.pid&apos; endscript nocompress} /var/log/ipwall/messages.log { #&#x65E5;&#x5FD7;&#x8DEF;&#x5F84;&#x4E00;&#x5B9A;&#x8981;&#x548C;rsyslog&#x5B9A;&#x4E49;&#x7684;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x4E00;&#x81F4; rotate 65535 #&#x6EDA;&#x52A8;65535&#x6B21; create 0777 syslog adm #&#x8BBE;&#x7F6E;&#x6743;&#x9650;&#xFF0C;&#x65B9;&#x4FBF;windows&#x8FDE;&#x63A5;samba&#x670D;&#x52A1;&#x5668; compress #&#x91C7;&#x7528;&#x538B;&#x7F29; size 50M #&#x6587;&#x4EF6;&#x5927;&#x5C0F;50M&#x4EE5;&#x4E0A;&#x7684;&#x5206;&#x5272;&#x65E5;&#x5FD7; dateext dateformat .%s #&#x5B9A;&#x4E49;&#x6587;&#x4EF6;&#x5207;&#x5272;&#x540E;&#x7684;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x5FC5;&#x987B;&#x914D;&#x5408;dateext&#x4F7F;&#x7528; #posrotate/endscript&#x8FD9;&#x6BB5;&#x811A;&#x672C;&#x4F7F;rsyslog&#x7A0B;&#x5E8F;&#x91CD;&#x65B0;&#x8BFB;&#x53D6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x7A0B;&#x5E8F;&#x91CA;&#x653E;&#x5BF9;messages.log&#x6587;&#x4EF6;&#x6301;&#x6709;&#x7684;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26; postrotate /bin/kill -HUP $(/bin/cat /var/run/rsyslogd.pid 2&gt;/dev/null) &amp;&gt;/dev/null endscript} &#x5F3A;&#x5236;&#x8F6E;&#x8F6C;123456logrotate -f /etc/logrotate.conf # &#x2013;&#x5F3A;&#x5236;&#x8F6E;&#x8F6C;logrotate -vf /etc/logrotate.conf # &#x2013;&#x518D;&#x52A0;&#x4E00;&#x4E2A;-v&#x53C2;&#x6570;&#x67E5;&#x770B;&#x8F6E;&#x8F6C;&#x7684;&#x8FC7;&#x7A0B; logger -t &apos;aaaa&apos; &apos;bbbbbb&apos; #&#x2013;&#x5728;&#x65E5;&#x5FD7;&#x91CC;&#x52A0;&#x4E00;&#x4E2A;&#x5185;&#x5BB9;tag&#x548C;&#x5185;&#x5BB9;tail /var/log/messages# Jun 12 20:34:22 kadefor aaaa: bbbbbb Nginx&#x65E5;&#x5FD7;&#x5207;&#x5272;123456789101112/var/log/nginx/*log { daily rotate 10 missingok notifempty compress sharedscripts su root postrotate /bin/kill -USR1 $(cat /var/run/nginx.pid 2&gt;/dev/null) 2&gt;/dev/null || : endscript} PHP&#x65E5;&#x5FD7;&#x5207;&#x5272;12345678910/var/log/php-fpm/*log { missingok notifempty sharedscripts delaycompress create 0664 www www postrotate /bin/kill -SIGUSR1 `cat /var/run/php-fpm/php-fpm.pid 2&gt;/dev/null` 2&gt;/dev/null || true endscript}]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>日志切割</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Shell中set和shopt命令选项含义]]></title>
    <url>%2FShell%E4%B8%ADset%E5%92%8Cshopt%E5%91%BD%E4%BB%A4%E9%80%89%E9%A1%B9%E5%90%AB%E4%B9%89.html</url>
    <content type="text"><![CDATA[set&#x547D;&#x4EE4;&#x9009;&#x9879;set&#x547D;&#x4EE4;&#x4F5C;&#x7528;&#x4E3B;&#x8981;&#x662F;&#x663E;&#x793A;&#x7CFB;&#x7EDF;&#x4E2D;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x7684;shell&#x53D8;&#x91CF;&#xFF0C;&#x4EE5;&#x53CA;&#x8BBE;&#x7F6E;shell&#x53D8;&#x91CF;&#x7684;&#x65B0;&#x53D8;&#x91CF;&#x503C;&#x3002;&#x4F7F;&#x7528;set&#x66F4;&#x6539;shell&#x7279;&#x6027;&#x65F6;&#xFF0C;&#x7B26;&#x53F7;&quot;+&quot;&#x548C;&quot;-&quot;&#x7684;&#x4F5C;&#x7528;&#x5206;&#x522B;&#x662F;&#x6253;&#x5F00;&#x548C;&#x5173;&#x95ED;&#x6307;&#x5B9A;&#x7684;&#x6A21;&#x5F0F;&#x3002;set&#x547D;&#x4EE4;&#x4E0D;&#x80FD;&#x591F;&#x5B9A;&#x4E49;&#x65B0;&#x7684;shell&#x53D8;&#x91CF;&#x3002;&#x5982;&#x679C;&#x8981;&#x5B9A;&#x4E49;&#x65B0;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;declare&#x547D;&#x4EE4;&#x4EE5;&#x53D8;&#x91CF;&#x540D;=&#x503C;&#x7684;&#x683C;&#x5F0F;&#x8FDB;&#x884C;&#x5B9A;&#x4E49;&#x5373;&#x53EF;&#x3002; &#x5185;&#x7F6E;set&#x547D;&#x4EE4;&#x9009;&#x9879; &#x9009;&#x9879;&#x540D; &#x5FEB;&#x6377;&#x5F00;&#x5173; &#x542B;&#x4E49; allexport -a &#x4ECE;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x4E2D;&#x88AB;&#x8BBE;&#x7F6E;&#x5F00;&#x59CB;&#x5C31;&#x81EA;&#x52A8;&#x6807;&#x660E;&#x8981;&#x8F93;&#x51FA;&#x7684;&#x65B0;&#x53D8;&#x91CF;&#x6216;&#x4FEE;&#x6539;&#x8FC7;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x76F4;&#x81F3;&#x9009;&#x9879;&#x88AB;&#x590D;&#x4F4D; braceexpand -B &#x6253;&#x5F00;&#x82B1;&#x62EC;&#x53F7;&#x6269;&#x5C55;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E; emacs &#x4F7F;&#x7528;emacs&#x5185;&#x7F6E;&#x7F16;&#x8F91;&#x5668;&#x8FDB;&#x884C;&#x547D;&#x4EE4;&#x884C;&#x7F16;&#x8F91;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E; errexit -e &#x5F53;&#x547D;&#x4EE4;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x975E;&#x96F6;&#x9000;&#x51FA;&#x72B6;&#x6001;&#xFF08;&#x5931;&#x8D25;&#xFF09;&#x65F6;&#x9000;&#x51FA;&#x3002;&#x8BFB;&#x53D6;&#x521D;&#x59CB;&#x5316;&#x6587;&#x4EF6;&#x65F6;&#x4E0D;&#x8BBE;&#x7F6E; histexpand -H &#x6267;&#x884C;&#x5386;&#x53F2;&#x66FF;&#x6362;&#x65F6;&#x6253;&#x5F00;!&#x548C;!!&#x6269;&#x5C55;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E; history &#x6253;&#x5F00;&#x547D;&#x4EE4;&#x884C;&#x5386;&#x53F2;&#x3001;&#x9ED8;&#x8BA4;&#x4E3A;&#x6253;&#x5F00; ignoreeof &#x7981;&#x6B62;&#x7528;EOF(Ctrl+D)&#x952E;&#x9000;&#x51FA;shell&#x3002;&#x5FC5;&#x987B;&#x952E;&#x5165;exit&#x624D;&#x80FD;&#x9000;&#x51FA;&#x3002;&#x7B49;&#x4EF7;&#x4E8E;&#x8BBE;&#x7F6E;shell&#x53D8;&#x91CF;IGNOREEOF=10 keyword -k &#x5C06;&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x653E;&#x5230;&#x547D;&#x4EE4;&#x7684;&#x73AF;&#x5883;&#x4E2D; interactive-comments &#x5BF9;&#x4E8E;&#x4EA4;&#x4E92;&#x5F0F;shell&#xFF0C;&#x628A;#&#x7B26;&#x540E;&#x9762;&#x7684;&#x6587;&#x672C;&#x4F5C;&#x4E3A;&#x6CE8;&#x91CA; monitor -m &#x8BBE;&#x7F6E;&#x4F5C;&#x4E1A;&#x63A7;&#x5236; noclobber -C &#x9632;&#x6B62;&#x6587;&#x4EF6;&#x5728;&#x91CD;&#x5B9A;&#x5411;&#x65F6;&#x88AB;&#x91CD;&#x5199; noexec -n &#x8BFB;&#x547D;&#x4EE4;&#xFF0C;&#x4F46;&#x4E0D;&#x6267;&#x884C;&#x3002;&#x7528;&#x6765;&#x68C0;&#x67E5;&#x811A;&#x672C;&#x7684;&#x8BED;&#x6CD5;&#x3002;&#x4EA4;&#x4E92;&#x5F0F;&#x8FD0;&#x884C;&#x65F6;&#x4E0D;&#x5F00;&#x542F; noglob -d &#x7981;&#x6B62;&#x7528;&#x8DEF;&#x5F84;&#x540D;&#x6269;&#x5C55;&#x3002;&#x5373;&#x5173;&#x95ED;&#x901A;&#x914D;&#x7B26; notify -b &#x540E;&#x53F0;&#x4F5C;&#x4E1A;&#x5B8C;&#x6210;&#x65F6;&#x901A;&#x77E5;&#x7528;&#x6237; nounset -u &#x6269;&#x5C55;&#x4E00;&#x4E2A;&#x672A;&#x8BBE;&#x7F6E;&#x7684;&#x53D8;&#x91CF;&#x65F6;&#x663E;&#x793A;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x4FE1;&#x606F; onecmd -t &#x5728;&#x8BFB;&#x53D6;&#x548C;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x540E;&#x9000;&#x51FA; physical -P &#x8BBE;&#x7F6E;&#x65F6;&#xFF0C;&#x5728;&#x952E;&#x5165;cd&#x6216;pwd&#x7981;&#x6B62;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x3002;&#x7528;&#x7269;&#x7406;&#x76EE;&#x5F55;&#x4EE3;&#x66FF; privileged -p &#x8BBE;&#x7F6E;&#x540E;&#xFF0C;shell&#x4E0D;&#x8BFB;&#x53D6;.profile&#x6216;ENV&#x6587;&#x4EF6;&#xFF0C;&#x4E14;&#x4E0D;&#x4ECE;&#x73AF;&#x5883;&#x7EE7;&#x627F;shell&#x51FD;&#x6570;&#xFF0C;&#x5C06;&#x81EA;&#x52A8;&#x4E3A;setuid&#x811A;&#x672C;&#x5F00;&#x542F;&#x7279;&#x6743; verbose -v &#x4E3A;&#x8C03;&#x8BD5;&#x6253;&#x5F00;verbose&#x6A21;&#x5F0F; vi &#x4F7F;&#x7528;vi&#x5185;&#x7F6E;&#x7F16;&#x8F91;&#x5668;&#x8FDB;&#x884C;&#x547D;&#x4EE4;&#x884C;&#x7F16;&#x8F91; xtrace -x &#x4E3A;&#x8C03;&#x8BD5;&#x6253;&#x5F00;echo&#x6A21;&#x5F0F; shopt&#x547D;&#x4EE4;&#x9009;&#x9879;shopt&#x547D;&#x4EE4;&#x662F;set&#x547D;&#x4EE4;&#x7684;&#x4E00;&#x79CD;&#x66FF;&#x4EE3;&#xFF0C;&#x5F88;&#x591A;&#x65B9;&#x9762;&#x90FD;&#x548C;set&#x547D;&#x4EE4;&#x4E00;&#x6837;&#xFF0C;&#x4F46;&#x5B83;&#x589E;&#x52A0;&#x4E86;&#x5F88;&#x591A;&#x9009;&#x9879;&#x3002;&#x53EF;&#x6709;&#x4F7F;&#x7528;&#x201C;-p&#x201D;&#x9009;&#x9879;&#x6765;&#x67E5;&#x770B;shopt&#x9009;&#x9879;&#x7684;&#x8BBE;&#x7F6E;&#x3002;&#x201C;-u&#x201D;&#x5F00;&#x5173;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x590D;&#x4F4D;&#x7684;&#x9009;&#x9879;&#xFF0C;&#x201C;-s&#x201D;&#x8868;&#x793A;&#x9009;&#x9879;&#x5F53;&#x524D;&#x88AB;&#x8BBE;&#x7F6E;&#x3002; shopt&#x547D;&#x4EE4;&#x53C2;&#x6570;&#x7528;&#x6CD5; &#x9009;&#x9879; &#x542B;&#x4E49; cdable_vars &#x5982;&#x679C;&#x7ED9;cd&#x5185;&#x7F6E;&#x547D;&#x4EE4;&#x7684;&#x53C2;&#x6570;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;,&#x5C31;&#x5047;&#x8BBE;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x540D;,&#x53D8;&#x91CF;&#x7684;&#x503C;&#x662F;&#x5C06;&#x8981;&#x8F6C;&#x6362;&#x5230;&#x7684;&#x76EE;&#x5F55; cdspell &#x7EA0;&#x6B63;cd&#x547D;&#x4EE4;&#x4E2D;&#x76EE;&#x5F55;&#x540D;&#x7684;&#x8F83;&#x5C0F;&#x62FC;&#x5199;&#x9519;&#x8BEF;.&#x68C0;&#x67E5;&#x7684;&#x9519;&#x8BEF;&#x5305;&#x62EC;&#x98A0;&#x5012;&#x987A;&#x5E8F;&#x7684;&#x5B57;&#x7B26;,&#x9057;&#x6F0F;&#x7684;&#x5B57;&#x7B26;&#x4EE5;&#x53CA;&#x91CD;&#x590D;&#x7684;&#x5B57;&#x7B26;.&#x5982;&#x679C;&#x627E;&#x5230;&#x4E00;&#x5904;&#x9700;&#x4FEE;&#x6539;&#x4E4B;&#x5904;,&#x6B63;&#x786E;&#x7684;&#x8DEF;&#x5F84;&#x5C06;&#x6253;&#x5370;&#x51FA;,&#x547D;&#x4EE4;&#x5C06;&#x7EE7;&#x7EED;.&#x53EA;&#x7528;&#x4E8E;&#x4EA4;&#x4E92;&#x5F0F;shell checkhash bash&#x5728;&#x8BD5;&#x56FE;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x524D;,&#x5148;&#x5728;&#x54C8;&#x5E0C;&#x8868;&#x4E2D;&#x5BFB;&#x627E;,&#x4EE5;&#x786E;&#x5B9A;&#x547D;&#x4EE4;&#x662F;&#x5426;&#x5B58;&#x5728;.&#x5982;&#x679C;&#x547D;&#x4EE4;&#x4E0D;&#x5B58;&#x5728;,&#x5C31;&#x6267;&#x884C;&#x6B63;&#x5E38;&#x7684;&#x8DEF;&#x5F84;&#x641C;&#x7D22; checkwinsize bash&#x5728;&#x6BCF;&#x4E2A;&#x547D;&#x4EE4;&#x540E;&#x68C0;&#x67E5;&#x7A97;&#x53E3;&#x5927;&#x5C0F;,&#x5982;&#x679C;&#x6709;&#x5FC5;&#x8981;,&#x5C31;&#x66F4;&#x65B0;LINES&#x548C;COLUMNS&#x7684;&#x503C; cmdhist bash&#x8BD5;&#x56FE;&#x5C06;&#x4E00;&#x4E2A;&#x591A;&#x884C;&#x547D;&#x4EE4;&#x7684;&#x6240;&#x6709;&#x884C;&#x4FDD;&#x5B58;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x5386;&#x53F2;&#x9879;&#x4E2D;.&#x8FD9;&#x662F;&#x7684;&#x591A;&#x884C;&#x547D;&#x4EE4;&#x7684;&#x91CD;&#x65B0;&#x7F16;&#x8F91;&#x66F4;&#x65B9;&#x4FBF; dotglob Bash&#x5728;&#x6587;&#x4EF6;&#x540D;&#x6269;&#x5C55;&#x7684;&#x7ED3;&#x679C;&#x4E2D;&#x5305;&#x62EC;&#x4EE5;&#x70B9;(.)&#x5F00;&#x5934;&#x7684;&#x6587;&#x4EF6;&#x540D; execfail &#x5982;&#x679C;&#x4E00;&#x4E2A;&#x975E;&#x4EA4;&#x4E92;&#x5F0F;shell&#x4E0D;&#x80FD;&#x6267;&#x884C;&#x6307;&#x5B9A;&#x7ED9;exec&#x5185;&#x7F6E;&#x547D;&#x4EE4;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x7684;&#x6587;&#x4EF6;,&#x5B83;&#x4E0D;&#x4F1A;&#x9000;&#x51FA;.&#x5982;&#x679C;exec&#x5931;&#x8D25;,&#x4E00;&#x4E2A;&#x4EA4;&#x4E92;&#x5F0F;shell&#x4E0D;&#x4F1A;&#x9000;&#x51FA; expand_aliases &#x522B;&#x540D;&#x88AB;&#x6269;&#x5C55;.&#x7F3A;&#x7701;&#x4E3A;&#x6253;&#x5F00; extglob &#x6253;&#x5F00;&#x6269;&#x5C55;&#x7684;&#x6A21;&#x5F0F;&#x5339;&#x914D;&#x7279;&#x6027;(&#x6B63;&#x5E38;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x5143;&#x5B57;&#x7B26;&#x6765;&#x81EA;Korn shell&#x7684;&#x6587;&#x4EF6;&#x540D;&#x6269;&#x5C55;) histappend &#x5982;&#x679C;readline&#x6B63;&#x88AB;&#x4F7F;&#x7528;,&#x7528;&#x6237;&#x6709;&#x673A;&#x4F1A;&#x91CD;&#x65B0;&#x7F16;&#x8F91;&#x4E00;&#x4E2A;&#x5931;&#x8D25;&#x7684;&#x5386;&#x53F2;&#x66FF;&#x6362; histverify &#x5982;&#x679C;&#x8BBE;&#x7F6E;,&#x4E14;readline&#x6B63;&#x88AB;&#x4F7F;&#x7528;,&#x5386;&#x53F2;&#x66FF;&#x6362;&#x7684;&#x7ED3;&#x679C;&#x4E0D;&#x4F1A;&#x7ACB;&#x5373;&#x4F20;&#x9012;&#x7ED9;shell&#x89E3;&#x91CA;&#x5668;.&#x800C;&#x662F;&#x5C06;&#x7ED3;&#x679C;&#x884C;&#x88C5;&#x5165;readline&#x7F16;&#x8F91;&#x7F13;&#x51B2;&#x533A;&#x4E2D;,&#x5141;&#x8BB8;&#x8FDB;&#x4E00;&#x6B65;&#x4FEE;&#x6539; hostcomplete &#x5982;&#x679C;&#x8BBE;&#x7F6E;,&#x4E14;readline&#x6B63;&#x88AB;&#x4F7F;&#x7528;,&#x5F53;&#x6B63;&#x5728;&#x5B8C;&#x6210;&#x4E00;&#x4E2A;&#x5305;&#x542B;@&#x7684;&#x8BCD;&#x65F6;bash&#x5C06;&#x8BD5;&#x56FE;&#x6267;&#x884C;&#x4E3B;&#x673A;&#x540D;&#x8865;&#x5168;.&#x7F3A;&#x7701;&#x4E3A;&#x6253;&#x5F00; huponexit &#x5982;&#x679C;&#x8BBE;&#x7F6E;,&#x5F53;&#x4E00;&#x4E2A;&#x4EA4;&#x4E92;&#x5F0F;&#x767B;&#x5F55;shell&#x9000;&#x51FA;&#x65F6;,bash&#x5C06;&#x53D1;&#x9001;&#x4E00;&#x4E2A;SIGHUP(&#x6302;&#x8D77;&#x4FE1;&#x53F7;)&#x7ED9;&#x6240;&#x6709;&#x7684;&#x4F5C;&#x4E1A; interactive_comments &#x5728;&#x4E00;&#x4E2A;&#x4EA4;&#x4E92;&#x5F0F;shell&#x4E2D;.&#x5141;&#x8BB8;&#x4EE5;#&#x5F00;&#x5934;&#x7684;&#x8BCD;&#x4EE5;&#x53CA;&#x540C;&#x4E00;&#x884C;&#x4E2D;&#x5176;&#x4ED6;&#x7684;&#x5B57;&#x7B26;&#x88AB;&#x5FFD;&#x7565;.&#x7F3A;&#x7701;&#x4E3A;&#x6253;&#x5F00; lithist &#x5982;&#x679C;&#x6253;&#x5F00;,&#x4E14;cmdhist&#x9009;&#x9879;&#x4E5F;&#x6253;&#x5F00;,&#x591A;&#x884C;&#x547D;&#x4EE4;&#x8BB2;&#x7528;&#x5D4C;&#x5165;&#x7684;&#x6362;&#x884C;&#x7B26;&#x4FDD;&#x5B58;&#x5230;&#x5386;&#x53F2;&#x4E2D;,&#x800C;&#x65E0;&#x9700;&#x5728;&#x53EF;&#x80FD;&#x7684;&#x5730;&#x65B9;&#x7528;&#x5206;&#x53F7;&#x6765;&#x5206;&#x9694; mailwarn &#x5982;&#x679C;&#x8BBE;&#x7F6E;,&#x4E14;bash&#x7528;&#x6765;&#x68C0;&#x67E5;&#x90AE;&#x4EF6;&#x7684;&#x6587;&#x4EF6;&#x81EA;&#x4ECE;&#x4E0A;&#x6B21;&#x68C0;&#x67E5;&#x540E;&#x5DF2;&#x7ECF;&#x88AB;&#x8BBF;&#x95EE;,&#x5C06;&#x663E;&#x793A;&#x6D88;&#x606F;&#x201D;The mail in mailfile has been read&#x201D; nocaseglob &#x5982;&#x679C;&#x8BBE;&#x7F6E;,&#x5F53;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x540D;&#x6269;&#x5C55;&#x65F6;,bash&#x5728;&#x4E0D;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;&#x7684;&#x65B9;&#x5F0F;&#x4E0B;&#x5339;&#x914D;&#x6587;&#x4EF6;&#x540D; nullglob &#x5982;&#x679C;&#x8BBE;&#x7F6E;,bash&#x5141;&#x8BB8;&#x6CA1;&#x6709;&#x5339;&#x914D;&#x4EFB;&#x4F55;&#x6587;&#x4EF6;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x6A21;&#x5F0F;&#x6269;&#x5C55;&#x6210;&#x4E00;&#x4E2A;&#x7A7A;&#x4E32;,&#x800C;&#x4E0D;&#x662F;&#x4ED6;&#x4EEC;&#x672C;&#x8EAB; promptvars &#x5982;&#x679C;&#x8BBE;&#x7F6E;,&#x63D0;&#x793A;&#x4E32;&#x5728;&#x88AB;&#x6269;&#x5C55;&#x540E;&#x518D;&#x8FDB;&#x884C;&#x53D8;&#x91CF;&#x548C;&#x53C2;&#x91CF;&#x6269;&#x5C55;.&#x7F3A;&#x7701;&#x4E3A;&#x6253;&#x5F00; restricted_shell &#x5982;&#x679C;shell&#x5728;&#x53D7;&#x9650;&#x6A21;&#x5F0F;&#x4E0B;&#x542F;&#x52A8;&#x5C31;&#x8BBE;&#x7F6E;&#x8FD9;&#x4E2A;&#x9009;&#x9879;.&#x8BE5;&#x503C;&#x4E0D;&#x80FD;&#x88AB;&#x6539;&#x53D8;.&#x5F53;&#x6267;&#x884C;&#x542F;&#x52A8;&#x6587;&#x4EF6;&#x65F6;&#x4E0D;&#x80FD;&#x590D;&#x4F4D;&#x8BE5;&#x9009;&#x9879;,&#x5141;&#x8BB8;&#x542F;&#x52A8;&#x6587;&#x4EF6;&#x53D1;&#x73B0;shell&#x662F;&#x5426;&#x53D7;&#x9650; shift_verbose &#x5982;&#x679C;&#x8BE5;&#x9009;&#x9879;&#x8BBE;&#x7F6E;,&#x5F53;&#x79FB;&#x52A8;&#x8BA1;&#x6570;&#x8D85;&#x51FA;&#x4F4D;&#x7F6E;&#x53C2;&#x91CF;&#x4E2A;&#x6570;&#x65F6;,shift&#x5185;&#x7F6E;&#x547D;&#x4EE4;&#x5C06;&#x6253;&#x5370;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x6D88;&#x606F; sourcepath &#x5982;&#x679C;&#x8BBE;&#x7F6E;,source&#x5185;&#x7F6E;&#x547D;&#x4EE4;&#x4F7F;&#x7528;PATH&#x7684;&#x503C;&#x6765;&#x5BFB;&#x627E;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x63D0;&#x4F9B;&#x7684;&#x6587;&#x4EF6;&#x7684;&#x76EE;&#x5F55;.&#x7F3A;&#x7701;&#x4E3A;&#x6253;&#x5F00; source &#x70B9;(.)&#x7684;&#x540C;&#x4E49;&#x8BCD; &#x5220;&#x9664;&#x76EE;&#x5F55;&#x4E0B;&#x9664;&#x4E86;filename&#x4E4B;&#x5916;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x4E0B;&#x6765;&#x5217;&#x51FA;&#x4E86;&#x4E0D;&#x540C;&#x7684;&#x6269;&#x5C55;&#x6A21;&#x5F0F;&#x5339;&#x914D;&#x64CD;&#x4F5C;&#x7B26;&#xFF0C;&#x8FD9;&#x4E9B;&#x6A21;&#x5F0F;&#x5217;&#x8868;&#x662F;&#x4E00;&#x4E2A;&#x7528; | &#x5206;&#x5272;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x6216;&#x8005;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#x540D;&#x7684;&#x5217;&#x8868;&#xFF1A; &#x901A;&#x914D;&#x7B26; &#x542B;&#x4E49; *(&#x6A21;&#x5F0F;&#x5217;&#x8868;) &#x5339;&#x914D; 0 &#x4E2A;&#x6216;&#x8005;&#x591A;&#x4E2A;&#x51FA;&#x73B0;&#x7684;&#x6307;&#x5B9A;&#x6A21;&#x5F0F; ?(&#x6A21;&#x5F0F;&#x5217;&#x8868;) &#x5339;&#x914D; 0 &#x4E2A;&#x6216;&#x8005; 1 &#x4E2A;&#x51FA;&#x73B0;&#x7684;&#x6307;&#x5B9A;&#x6A21;&#x5F0F; @(&#x6A21;&#x5F0F;&#x5217;&#x8868;) &#x5339;&#x914D; 1 &#x4E2A;&#x6216;&#x8005;&#x591A;&#x4E2A;&#x51FA;&#x73B0;&#x7684;&#x6307;&#x5B9A;&#x6A21;&#x5F0F; !(&#x6A21;&#x5F0F;&#x5217;&#x8868;) &#x5339;&#x914D;&#x9664;&#x4E86;&#x4E00;&#x4E2A;&#x6307;&#x5B9A;&#x6A21;&#x5F0F;&#x4E4B;&#x5916;&#x7684;&#x4EFB;&#x4F55;&#x5185;&#x5BB9; &#x6253;&#x5F00;extglob shell&#x9009;&#x9879;1shopt -s extglob &#x5220;&#x9664;&#x76EE;&#x5F55;&#x4E0B;&#x9664;&#x4E86;filename&#x4E4B;&#x5916;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;1rm -v !(&quot;filename&quot;) &#x5220;&#x9664;&#x9664;&#x4E86;filename1&#x548C;filename2&#x4E4B;&#x5916;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;1rm -v !(&quot;filename1&quot;|&quot;filename2&quot;) &#x5220;&#x9664;&#x9664;&#x4E86; .zip &#x4E4B;&#x5916;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;1rm -i !(*.zip) &#x5173;&#x95ED;extglob shell&#x9009;&#x9879;1shopt -u extglob]]></content>
      <categories>
        <category>基础</category>
      </categories>
      <tags>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Expect命令使用详解]]></title>
    <url>%2FExpect%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html</url>
    <content type="text"><![CDATA[&#x901A;&#x8FC7; Shell &#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x7B80;&#x5355;&#x7684;&#x63A7;&#x5236;&#x6D41;&#x529F;&#x80FD;&#xFF0C;&#x5982;&#xFF1A;&#x5FAA;&#x73AF;&#x3001;&#x5224;&#x65AD;&#x7B49;&#x3002;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x9700;&#x8981;&#x4EA4;&#x4E92;&#x7684;&#x573A;&#x5408;&#x5219;&#x5FC5;&#x987B;&#x901A;&#x8FC7;&#x4EBA;&#x5DE5;&#x6765;&#x5E72;&#x9884;&#xFF0C;&#x6709;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x4F1A;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x548C;&#x4EA4;&#x4E92;&#x7A0B;&#x5E8F;&#x5982; ssh &#x670D;&#x52A1;&#x5668;&#x7B49;&#x8FDB;&#x884C;&#x4EA4;&#x4E92;&#x7684;&#x529F;&#x80FD;&#x3002;&#x800C; Expect &#x5C31;&#x4F7F;&#x7528;&#x6765;&#x5B9E;&#x73B0;&#x8FD9;&#x79CD;&#x529F;&#x80FD;&#x7684;&#x5DE5;&#x5177;&#x3002; &#x5B89;&#x88C5;expect1yum -y install expect &#x56DB;&#x4E2A;&#x5173;&#x952E;&#x547D;&#x4EE4;Expect&#x4E2D;&#x6700;&#x5173;&#x952E;&#x7684;&#x56DB;&#x4E2A;&#x547D;&#x4EE4;&#x662F;send,expect,spawn,interact&#x3002; &#x547D;&#x4EE4; &#x7528;&#x9014; send &#x7528;&#x4E8E;&#x5411;&#x8FDB;&#x7A0B;&#x53D1;&#x9001;&#x5B57;&#x7B26;&#x4E32; expect &#x4ECE;&#x8FDB;&#x7A0B;&#x63A5;&#x6536;&#x5B57;&#x7B26;&#x4E32; spawn &#x542F;&#x52A8;&#x65B0;&#x7684;&#x8FDB;&#x7A0B; interact &#x5141;&#x8BB8;&#x7528;&#x6237;&#x4EA4;&#x4E92; send&#x547D;&#x4EE4; send &#x547D;&#x4EE4;&#x63A5;&#x6536;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x53C2;&#x6570;&#xFF0C;&#x5E76;&#x5C06;&#x8BE5;&#x53C2;&#x6570;&#x53D1;&#x9001;&#x5230;&#x8FDB;&#x7A0B;12expect1.1&gt; send &quot;hello world\n&quot;hello world expect&#x547D;&#x4EE4; &#x57FA;&#x7840;&#x77E5;&#x8BC6;expect&#x547D;&#x4EE4;&#x548C;send&#x547D;&#x4EE4;&#x6B63;&#x597D;&#x76F8;&#x53CD;&#xFF0C;expect&#x901A;&#x5E38;&#x662F;&#x7528;&#x6765;&#x7B49;&#x5F85;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x7684;&#x53CD;&#x9988;&#x3002;expect&#x53EF;&#x4EE5;&#x63A5;&#x6536;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x53C2;&#x6570;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x63A5;&#x6536;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x53C2;&#x6570;&#x3002;&#x548C;&#x4E0A;&#x6587;&#x7684;send&#x547D;&#x4EE4;&#x7ED3;&#x5408;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x4E00;&#x4E2A;&#x6700;&#x7B80;&#x5355;&#x7684;&#x4EA4;&#x4E92;&#x5F0F;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;12expect &quot;hi\n&quot;send &quot;hello there!\n&quot; &#x8FD9;&#x4E24;&#x884C;&#x4EE3;&#x7801;&#x7684;&#x610F;&#x601D;&#x662F;&#xFF1A;&#x4ECE;&#x6807;&#x51C6;&#x8F93;&#x5165;&#x4E2D;&#x7B49;&#x5230;hi&#x548C;&#x6362;&#x884C;&#x952E;&#x540E;&#xFF0C;&#x5411;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#x8F93;&#x51FA;hello there &#x6BD4;&#x5982;&#x5982;&#x4E0B;&#x7A0B;&#x5E8F;&#xFF1A;123expect &quot;hi\n&quot;send &quot;you typed &lt;$expect_out(buffer)&gt;&quot;send &quot;but I only expected &lt;$expect_out(0,string)&gt;&quot; &#x5F53;&#x5728;&#x6807;&#x51C6;&#x8F93;&#x5165;&#x4E2D;&#x8F93;&#x5165;12testhi &#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x5982;&#x4E0B;123you typed: testhiI only expect: hi &#x6A21;&#x5F0F;-&#x52A8;&#x4F5C;expect&#x6700;&#x5E38;&#x7528;&#x7684;&#x8BED;&#x6CD5;&#x662F;&#x6765;&#x81EA;tcl&#x8BED;&#x8A00;&#x7684;&#x6A21;&#x5F0F;-&#x52A8;&#x4F5C;&#x3002;&#x8FD9;&#x79CD;&#x8BED;&#x6CD5;&#x6781;&#x5176;&#x7075;&#x6D3B;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5C31;&#x5404;&#x79CD;&#x8BED;&#x6CD5;&#x5206;&#x522B;&#x8BF4;&#x660E;&#x3002; &#x5355;&#x4E00;&#x5206;&#x652F;&#x6A21;&#x5F0F;&#x8BED;&#x6CD5;&#xFF1A;12expect &quot;hi&quot; {send &quot;You said hi&quot;}# &#x5339;&#x914D;&#x5230;hi&#x540E;&#xFF0C;&#x4F1A;&#x8F93;&#x51FA;&quot;you said hi&quot; &#x591A;&#x5206;&#x652F;&#x6A21;&#x5F0F;&#x8BED;&#x6CD5;&#xFF1A;123expect &quot;hi&quot; { send &quot;You said hi\n&quot; } \&quot;hello&quot; { send &quot;Hello yourself\n&quot; } \&quot;bye&quot; { send &quot;That was unexpected\n&quot; } &#x5339;&#x914D;&#x5230;hi,hello,bye&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x65F6;&#xFF0C;&#x6267;&#x884C;&#x76F8;&#x5E94;&#x7684;&#x8F93;&#x51FA;&#x3002;&#x7B49;&#x540C;&#x4E8E;&#x5982;&#x4E0B;&#x5199;&#x6CD5;&#xFF1A;12345expect {&quot;hi&quot; { send &quot;You said hi\n&quot;}&quot;hello&quot; { send &quot;Hello yourself\n&quot;}&quot;bye&quot; { send &quot;That was unexpected\n&quot;}} spawn&#x547D;&#x4EE4;&#x4E0A;&#x6587;&#x7684;&#x6240;&#x6709;demo&#x90FD;&#x662F;&#x548C;&#x6807;&#x51C6;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x8FDB;&#x884C;&#x4EA4;&#x4E92;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x8DDF;&#x5E0C;&#x671B;&#x4ED6;&#x53EF;&#x4EE5;&#x548C;&#x67D0;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x8FDB;&#x884C;&#x4EA4;&#x4E92;&#x3002;spawm&#x547D;&#x4EE4;&#x5C31;&#x662F;&#x7528;&#x6765;&#x542F;&#x52A8;&#x65B0;&#x7684;&#x8FDB;&#x7A0B;&#x7684;&#x3002;spawn&#x540E;&#x7684;send&#x548C;expect&#x547D;&#x4EE4;&#x90FD;&#x662F;&#x548C;spawn&#x6253;&#x5F00;&#x7684;&#x8FDB;&#x7A0B;&#x8FDB;&#x884C;&#x4EA4;&#x4E92;&#x7684;&#x3002;&#x7ED3;&#x5408;&#x4E0A;&#x6587;&#x7684;send&#x548C;expect&#x547D;&#x4EE4;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x4E00;&#x4E0B;&#x66F4;&#x590D;&#x6742;&#x7684;&#x7A0B;&#x5E8F;&#x6BB5;&#x4E86;12345678910set timeout -1spawn ftp ftp.test.com //&#x6253;&#x5F00;&#x65B0;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x8BE5;&#x8FDB;&#x7A0B;&#x7528;&#x6237;&#x8FDE;&#x63A5;&#x8FDC;&#x7A0B;ftp&#x670D;&#x52A1;&#x5668;expect &quot;Name&quot; //&#x8FDB;&#x7A0B;&#x8FD4;&#x56DE;Name&#x65F6;send &quot;user\r&quot; //&#x5411;&#x8FDB;&#x7A0B;&#x8F93;&#x5165;anonymous\rexpect &quot;Password:&quot; //&#x8FDB;&#x7A0B;&#x8FD4;&#x56DE;Password:&#x65F6;send &quot;123456\r&quot; //&#x5411;&#x8FDB;&#x7A0B;&#x8F93;&#x5165;don@libes.com\rexpect &quot;ftp&gt; &quot; //&#x8FDB;&#x7A0B;&#x8FD4;&#x56DE;ftp&gt;&#x65F6;send &quot;binary\r&quot; //&#x5411;&#x8FDB;&#x7A0B;&#x8F93;&#x5165;binary\rexpect &quot;ftp&gt; &quot; //&#x8FDB;&#x7A0B;&#x8FD4;&#x56DE;ftp&gt;&#x65F6;send &quot;get test.tar.gz\r&quot; //&#x5411;&#x8FDB;&#x7A0B;&#x8F93;&#x5165;get test.tar.gz\r &#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x767B;&#x5F55;&#x5230;ftp&#x670D;&#x52A1;&#x5668;ftp ftp.test.com&#x4E0A;&#xFF0C;&#x5E76;&#x4EE5;&#x4E8C;&#x8FDB;&#x5236;&#x7684;&#x65B9;&#x5F0F;&#x4E0B;&#x8F7D;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x6587;&#x4EF6;test.tar.gz&#x3002;&#x7A0B;&#x5E8F;&#x4E2D;&#x6709;&#x8BE6;&#x7EC6;&#x7684;&#x6CE8;&#x91CA; interact&#x547D;&#x4EE4;&#x5230;&#x73B0;&#x5728;&#x4E3A;&#x6B62;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x7ED3;&#x5408;spawn&#x3001;expect&#x3001;send&#x81EA;&#x52A8;&#x5316;&#x7684;&#x5B8C;&#x6210;&#x5F88;&#x591A;&#x4EFB;&#x52A1;&#x4E86;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5982;&#x4F55;&#x8BA9;&#x4EBA;&#x5728;&#x9002;&#x5F53;&#x7684;&#x65F6;&#x5019;&#x5E72;&#x9884;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x4E86;&#x3002;&#x6BD4;&#x5982;&#x4E0B;&#x8F7D;&#x5B8C;ftp&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x505C;&#x7559;&#x5728;ftp&#x547D;&#x4EE4;&#x884C;&#x72B6;&#x6001;&#xFF0C;&#x4EE5;&#x4FBF;&#x624B;&#x52A8;&#x7684;&#x6267;&#x884C;&#x540E;&#x7EED;&#x547D;&#x4EE4;&#x3002;interact&#x53EF;&#x4EE5;&#x8FBE;&#x5230;&#x8FD9;&#x4E9B;&#x76EE;&#x7684;&#x3002;&#x4E0B;&#x9762;&#x7684;demo&#x5728;&#x81EA;&#x52A8;&#x767B;&#x5F55;ftp&#x540E;&#xFF0C;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x4EA4;&#x4E92;123456spawn ftp ftp.test.comexpect &quot;Name&quot;send &quot;user\r&quot;expect &quot;Password:&quot;send &quot;123456\r&quot;interact ssh&#x81EA;&#x52A8;&#x8FDC;&#x7A0B;&#x767B;&#x5F55;&#x5982;&#x4F55;&#x4ECE;&#x673A;&#x5668;A&#x4E0A;ssh&#x5230;&#x673A;&#x5668;B&#x4E0A;&#xFF0C;&#x7136;&#x540E;&#x6267;&#x884C;&#x673A;&#x5668;B&#x4E0A;&#x7684;&#x547D;&#x4EE4;&#xFF1F;&#x5982;&#x4F55;&#x4F7F;&#x4E4B;&#x81EA;&#x52A8;&#x5316;&#x5B8C;&#x6210;&#xFF1F;123456789#!/usr/bin/expectspawn ssh root@192.168.16.111 # &#x7528;root&#x7528;&#x6237;&#x767B;&#x5F55;&#x5230;192.168.16.111&#x8FD9;&#x53F0;&#x673A;&#x5668;expect &quot;*password:&quot;send &quot;123\r&quot;# &#x5F53;&#x5339;&#x914D;&#x5230;*password &#x5219;&#x8F93;&#x5165;&#x5BC6;&#x7801;expect &quot;*#&quot;interact# &#x5F53;&#x5339;&#x914D;&#x5230;*# &#x5B57;&#x7B26;&#x662F;&#x5219;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x4EA4;&#x4E92;&#x5F0F;&#x8F93;&#x5165;&#x547D;&#x4EE4;]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>expect</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTML状态消息]]></title>
    <url>%2FHTML%E7%8A%B6%E6%80%81%E6%B6%88%E6%81%AF.html</url>
    <content type="text"><![CDATA[&#x5F53;&#x6D4F;&#x89C8;&#x5668;&#x4ECE; web &#x670D;&#x52A1;&#x5668;&#x8BF7;&#x6C42;&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#x3002;&#x8FD4;&#x56DE;&#x4E0B;&#x9762;&#x7684;&#x4E00;&#x7CFB;&#x5217;&#x72B6;&#x6001;&#x6D88;&#x606F;&#xFF0C;&#x4ECE;&#x72B6;&#x6001;&#x7801;&#x7684;&#x7C7B;&#x578B;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9A;&#x4F4D;&#x6545;&#x969C;&#xFF0C;&#x4ECE;&#x800C;&#x89E3;&#x51B3;&#x7EBF;&#x4E0A;&#x73AF;&#x5883;&#x7684;&#x5404;&#x79CD;&#x95EE;&#x9898;&#x3002; 1xx: &#x4FE1;&#x606F; &#x6D88;&#x606F; &#x63CF;&#x8FF0; 100 Continue &#x670D;&#x52A1;&#x5668;&#x4EC5;&#x63A5;&#x6536;&#x5230;&#x90E8;&#x5206;&#x8BF7;&#x6C42;&#xFF0C;&#x4F46;&#x662F;&#x4E00;&#x65E6;&#x670D;&#x52A1;&#x5668;&#x5E76;&#x6CA1;&#x6709;&#x62D2;&#x7EDD;&#x8BE5;&#x8BF7;&#x6C42;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x5E94;&#x8BE5;&#x7EE7;&#x7EED;&#x53D1;&#x9001;&#x5176;&#x4F59;&#x7684;&#x8BF7;&#x6C42; 101 Switching Protocols &#x670D;&#x52A1;&#x5668;&#x8F6C;&#x6362;&#x534F;&#x8BAE;&#xFF1A;&#x670D;&#x52A1;&#x5668;&#x5C06;&#x9075;&#x4ECE;&#x5BA2;&#x6237;&#x7684;&#x8BF7;&#x6C42;&#x8F6C;&#x6362;&#x5230;&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x534F;&#x8BAE; 2xx: &#x6210;&#x529F; &#x6D88;&#x606F; &#x63CF;&#x8FF0; 200 OK &#x8BF7;&#x6C42;&#x6210;&#x529F;&#xFF08;&#x5176;&#x540E;&#x662F;&#x5BF9;GET&#x548C;POST&#x8BF7;&#x6C42;&#x7684;&#x5E94;&#x7B54;&#x6587;&#x6863;&#xFF09; 201 Created &#x8BF7;&#x6C42;&#x88AB;&#x521B;&#x5EFA;&#x5B8C;&#x6210;&#xFF0C;&#x540C;&#x65F6;&#x65B0;&#x7684;&#x8D44;&#x6E90;&#x88AB;&#x521B;&#x5EFA; 202 Accepted &#x4F9B;&#x5904;&#x7406;&#x7684;&#x8BF7;&#x6C42;&#x5DF2;&#x88AB;&#x63A5;&#x53D7;&#xFF0C;&#x4F46;&#x662F;&#x5904;&#x7406;&#x672A;&#x5B8C;&#x6210; 203 Non-authoritative Information &#x6587;&#x6863;&#x5DF2;&#x7ECF;&#x6B63;&#x5E38;&#x5730;&#x8FD4;&#x56DE;&#xFF0C;&#x4F46;&#x4E00;&#x4E9B;&#x5E94;&#x7B54;&#x5934;&#x53EF;&#x80FD;&#x4E0D;&#x6B63;&#x786E;&#xFF0C;&#x56E0;&#x4E3A;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x6587;&#x6863;&#x7684;&#x62F7;&#x8D1D; 204 No Content &#x6CA1;&#x6709;&#x65B0;&#x6587;&#x6863;&#x3002;&#x6D4F;&#x89C8;&#x5668;&#x5E94;&#x8BE5;&#x7EE7;&#x7EED;&#x663E;&#x793A;&#x539F;&#x6765;&#x7684;&#x6587;&#x6863;&#x3002;&#x5982;&#x679C;&#x7528;&#x6237;&#x5B9A;&#x671F;&#x5730;&#x5237;&#x65B0;&#x9875;&#x9762;&#xFF0C;&#x800C;Servlet&#x53EF;&#x4EE5;&#x786E;&#x5B9A;&#x7528;&#x6237;&#x6587;&#x6863;&#x8DB3;&#x591F;&#x65B0;&#xFF0C;&#x8FD9;&#x4E2A;&#x72B6;&#x6001;&#x4EE3;&#x7801;&#x662F;&#x5F88;&#x6709;&#x7528;&#x7684; 205 Reset Content &#x6CA1;&#x6709;&#x65B0;&#x6587;&#x6863;&#x3002;&#x4F46;&#x6D4F;&#x89C8;&#x5668;&#x5E94;&#x8BE5;&#x91CD;&#x7F6E;&#x5B83;&#x6240;&#x663E;&#x793A;&#x7684;&#x5185;&#x5BB9;&#x3002;&#x7528;&#x6765;&#x5F3A;&#x5236;&#x6D4F;&#x89C8;&#x5668;&#x6E05;&#x9664;&#x8868;&#x5355;&#x8F93;&#x5165;&#x5185;&#x5BB9; 206 Partial Content &#x5BA2;&#x6237;&#x53D1;&#x9001;&#x4E86;&#x4E00;&#x4E2A;&#x5E26;&#x6709;Range&#x5934;&#x7684;GET&#x8BF7;&#x6C42;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x5B8C;&#x6210;&#x4E86;&#x5B83; 3xx: &#x91CD;&#x5B9A;&#x5411; &#x6D88;&#x606F; &#x63CF;&#x8FF0; 300 Multiple Choices &#x591A;&#x91CD;&#x9009;&#x62E9;&#x3002;&#x94FE;&#x63A5;&#x5217;&#x8868;&#x3002;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x67D0;&#x94FE;&#x63A5;&#x5230;&#x8FBE;&#x76EE;&#x7684;&#x5730;&#x3002;&#x6700;&#x591A;&#x5141;&#x8BB8;&#x4E94;&#x4E2A;&#x5730;&#x5740; 301 Moved Permanently &#x6240;&#x8BF7;&#x6C42;&#x7684;&#x9875;&#x9762;&#x5DF2;&#x7ECF;&#x8F6C;&#x79FB;&#x81F3;&#x65B0;&#x7684;url 302 Found &#x6240;&#x8BF7;&#x6C42;&#x7684;&#x9875;&#x9762;&#x5DF2;&#x7ECF;&#x4E34;&#x65F6;&#x8F6C;&#x79FB;&#x81F3;&#x65B0;&#x7684;url 303 See Other &#x6240;&#x8BF7;&#x6C42;&#x7684;&#x9875;&#x9762;&#x53EF;&#x5728;&#x522B;&#x7684;url&#x4E0B;&#x88AB;&#x627E;&#x5230; 304 Not Modified &#x672A;&#x6309;&#x9884;&#x671F;&#x4FEE;&#x6539;&#x6587;&#x6863;&#x3002;&#x5BA2;&#x6237;&#x7AEF;&#x6709;&#x7F13;&#x51B2;&#x7684;&#x6587;&#x6863;&#x5E76;&#x53D1;&#x51FA;&#x4E86;&#x4E00;&#x4E2A;&#x6761;&#x4EF6;&#x6027;&#x7684;&#x8BF7;&#x6C42;&#xFF08;&#x4E00;&#x822C;&#x662F;&#x63D0;&#x4F9B;If-Modified-Since&#x5934;&#x8868;&#x793A;&#x5BA2;&#x6237;&#x53EA;&#x60F3;&#x6BD4;&#x6307;&#x5B9A;&#x65E5;&#x671F;&#x66F4;&#x65B0;&#x7684;&#x6587;&#x6863;&#xFF09;&#x3002;&#x670D;&#x52A1;&#x5668;&#x544A;&#x8BC9;&#x5BA2;&#x6237;&#xFF0C;&#x539F;&#x6765;&#x7F13;&#x51B2;&#x7684;&#x6587;&#x6863;&#x8FD8;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x4F7F;&#x7528; 305 Use Proxy &#x5BA2;&#x6237;&#x8BF7;&#x6C42;&#x7684;&#x6587;&#x6863;&#x5E94;&#x8BE5;&#x901A;&#x8FC7;Location&#x5934;&#x6240;&#x6307;&#x660E;&#x7684;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x63D0;&#x53D6; 306 Unused &#x6B64;&#x4EE3;&#x7801;&#x88AB;&#x7528;&#x4E8E;&#x524D;&#x4E00;&#x7248;&#x672C;&#x3002;&#x76EE;&#x524D;&#x5DF2;&#x4E0D;&#x518D;&#x4F7F;&#x7528;&#xFF0C;&#x4F46;&#x662F;&#x4EE3;&#x7801;&#x4F9D;&#x7136;&#x88AB;&#x4FDD;&#x7559; 307 Temporary Redirect &#x88AB;&#x8BF7;&#x6C42;&#x7684;&#x9875;&#x9762;&#x5DF2;&#x7ECF;&#x4E34;&#x65F6;&#x79FB;&#x81F3;&#x65B0;&#x7684;url 4xx: &#x5BA2;&#x6237;&#x7AEF;&#x9519;&#x8BEF; &#x6D88;&#x606F; &#x63CF;&#x8FF0; 400 Bad Request &#x670D;&#x52A1;&#x5668;&#x672A;&#x80FD;&#x7406;&#x89E3;&#x8BF7;&#x6C42; 401 Unauthorized &#x88AB;&#x8BF7;&#x6C42;&#x7684;&#x9875;&#x9762;&#x9700;&#x8981;&#x7528;&#x6237;&#x540D;&#x548C;&#x5BC6;&#x7801; 402 Payment Required &#x6B64;&#x4EE3;&#x7801;&#x5C1A;&#x65E0;&#x6CD5;&#x4F7F;&#x7528; 403 Forbidden &#x5BF9;&#x88AB;&#x8BF7;&#x6C42;&#x9875;&#x9762;&#x7684;&#x8BBF;&#x95EE;&#x88AB;&#x7981;&#x6B62; 404 Not Found &#x670D;&#x52A1;&#x5668;&#x65E0;&#x6CD5;&#x627E;&#x5230;&#x88AB;&#x8BF7;&#x6C42;&#x7684;&#x9875;&#x9762; 405 Method Not Allowed &#x8BF7;&#x6C42;&#x4E2D;&#x6307;&#x5B9A;&#x7684;&#x65B9;&#x6CD5;&#x4E0D;&#x88AB;&#x5141;&#x8BB8; 406 Not Acceptable &#x670D;&#x52A1;&#x5668;&#x751F;&#x6210;&#x7684;&#x54CD;&#x5E94;&#x65E0;&#x6CD5;&#x88AB;&#x5BA2;&#x6237;&#x7AEF;&#x6240;&#x63A5;&#x53D7; 407 Proxy Authentication Required &#x7528;&#x6237;&#x5FC5;&#x987B;&#x9996;&#x5148;&#x4F7F;&#x7528;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#xFF0C;&#x8FD9;&#x6837;&#x8BF7;&#x6C42;&#x624D;&#x4F1A;&#x88AB;&#x5904;&#x7406; 408 Request Timeout &#x8BF7;&#x6C42;&#x8D85;&#x51FA;&#x4E86;&#x670D;&#x52A1;&#x5668;&#x7684;&#x7B49;&#x5F85;&#x65F6;&#x95F4; 409 Conflict &#x7531;&#x4E8E;&#x51B2;&#x7A81;&#xFF0C;&#x8BF7;&#x6C42;&#x65E0;&#x6CD5;&#x88AB;&#x5B8C;&#x6210; 410 Gone &#x88AB;&#x8BF7;&#x6C42;&#x7684;&#x9875;&#x9762;&#x4E0D;&#x53EF;&#x7528; 411 Length Required &#x201C;Content-Length&#x201D; &#x672A;&#x88AB;&#x5B9A;&#x4E49;&#x3002;&#x5982;&#x679C;&#x65E0;&#x6B64;&#x5185;&#x5BB9;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x4F1A;&#x63A5;&#x53D7;&#x8BF7;&#x6C42; 412 Precondition Failed &#x8BF7;&#x6C42;&#x4E2D;&#x7684;&#x524D;&#x63D0;&#x6761;&#x4EF6;&#x88AB;&#x670D;&#x52A1;&#x5668;&#x8BC4;&#x4F30;&#x4E3A;&#x5931;&#x8D25; 413 Request Entity Too Large &#x7531;&#x4E8E;&#x6240;&#x8BF7;&#x6C42;&#x7684;&#x5B9E;&#x4F53;&#x7684;&#x592A;&#x5927;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x4F1A;&#x63A5;&#x53D7;&#x8BF7;&#x6C42; 414 Request-url Too Long &#x7531;&#x4E8E;url&#x592A;&#x957F;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x4F1A;&#x63A5;&#x53D7;&#x8BF7;&#x6C42;&#x3002;&#x5F53;post&#x8BF7;&#x6C42;&#x88AB;&#x8F6C;&#x6362;&#x4E3A;&#x5E26;&#x6709;&#x5F88;&#x957F;&#x7684;&#x67E5;&#x8BE2;&#x4FE1;&#x606F;&#x7684;get&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x5C31;&#x4F1A;&#x53D1;&#x751F;&#x8FD9;&#x79CD;&#x60C5;&#x51B5; 415 Unsupported Media Type &#x7531;&#x4E8E;&#x5A92;&#x4ECB;&#x7C7B;&#x578B;&#x4E0D;&#x88AB;&#x652F;&#x6301;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x4F1A;&#x63A5;&#x53D7;&#x8BF7;&#x6C42; 416 &#x670D;&#x52A1;&#x5668;&#x4E0D;&#x80FD;&#x6EE1;&#x8DB3;&#x5BA2;&#x6237;&#x5728;&#x8BF7;&#x6C42;&#x4E2D;&#x6307;&#x5B9A;&#x7684;Range&#x5934; 5xx: &#x670D;&#x52A1;&#x5668;&#x9519;&#x8BEF; &#x6D88;&#x606F; &#x63CF;&#x8FF0; 500 Internal Server Error &#x8BF7;&#x6C42;&#x672A;&#x5B8C;&#x6210;&#x3002;&#x670D;&#x52A1;&#x5668;&#x9047;&#x5230;&#x4E0D;&#x53EF;&#x9884;&#x77E5;&#x7684;&#x60C5;&#x51B5; 501 Not Implemented &#x8BF7;&#x6C42;&#x672A;&#x5B8C;&#x6210;&#x3002;&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x652F;&#x6301;&#x6240;&#x8BF7;&#x6C42;&#x7684;&#x529F;&#x80FD; 502 Bad Gateway &#x8BF7;&#x6C42;&#x672A;&#x5B8C;&#x6210;&#x3002;&#x670D;&#x52A1;&#x5668;&#x4ECE;&#x4E0A;&#x6E38;&#x670D;&#x52A1;&#x5668;&#x6536;&#x5230;&#x4E00;&#x4E2A;&#x65E0;&#x6548;&#x7684;&#x54CD;&#x5E94; 503 Service Unavailable &#x8BF7;&#x6C42;&#x672A;&#x5B8C;&#x6210;&#x3002;&#x670D;&#x52A1;&#x5668;&#x4E34;&#x65F6;&#x8FC7;&#x8F7D;&#x6216;&#x5F53;&#x673A; 504 Gateway Timeout &#x7F51;&#x5173;&#x8D85;&#x65F6; 505 HTTP Version Not Supported &#x670D;&#x52A1;&#x5668;&#x4E0D;&#x652F;&#x6301;&#x8BF7;&#x6C42;&#x4E2D;&#x6307;&#x660E;&#x7684;HTTP&#x534F;&#x8BAE;&#x7248;&#x672C;]]></content>
      <categories>
        <category>运维</category>
      </categories>
      <tags>
        <tag>http</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux杀毒软件安装及使用]]></title>
    <url>%2FLinux%E6%9D%80%E6%AF%92%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8.html</url>
    <content type="text"><![CDATA[ClamAV &#x662F;Linux&#x5E73;&#x53F0;&#x6700;&#x53D7;&#x6B22;&#x8FCE;&#x7684;&#x6740;&#x6BD2;&#x8F6F;&#x4EF6;&#xFF0C;ClamAV &#x5C5E;&#x4E8E;&#x514D;&#x8D39;&#x5F00;&#x6E90;&#x4EA7;&#x54C1;&#xFF0C;&#x652F;&#x6301;&#x591A;&#x79CD;&#x5E73;&#x53F0;&#x3002;ClamAV&#x662F;&#x57FA;&#x4E8E;&#x75C5;&#x6BD2;&#x626B;&#x63CF;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#xFF0C;&#x4F46;&#x540C;&#x65F6;&#x4E5F;&#x6709;&#x652F;&#x6301;&#x56FE;&#x5F62;&#x754C;&#x9762;&#x7684;ClamTK&#x5DE5;&#x5177;&#x3002;ClamAV &#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x90AE;&#x4EF6;&#x670D;&#x52A1;&#x5668;&#x626B;&#x63CF;&#x90AE;&#x4EF6;&#x3002;&#x5B83;&#x6709;&#x591A;&#x79CD;&#x63A5;&#x53E3;&#x4ECE;&#x90AE;&#x4EF6;&#x670D;&#x52A1;&#x5668;&#x626B;&#x63CF;&#x90AE;&#x4EF6;&#x3002;ClamAV &#x6709;&#x81EA;&#x52A8;&#x7684;&#x6570;&#x636E;&#x5E93;&#x66F4;&#x65B0;&#x5668;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x4ECE;&#x5171;&#x4EAB;&#x5E93;&#x4E2D;&#x8FD0;&#x884C;&#x3002;&#x547D;&#x4EE4;&#x884C;&#x7684;&#x754C;&#x9762;&#x8BA9; ClamAV&#x8FD0;&#x884C;&#x6D41;&#x7545;&#x3002; YUM&#x6E90;&#x5B89;&#x88C5;&#x8FD9;&#x91CC;&#x76F4;&#x63A5;&#x914D;&#x7F6E;&#x597D;&#x963F;&#x91CC;&#x4E91;&#x7684;epel&#x6E90;&#x5373;&#x53EF;yum&#x4E00;&#x952E;&#x5B89;&#x88C5;1yum -y install clamav &#x7F16;&#x8BD1;&#x5B89;&#x88C5; &#x83B7;&#x53D6;&#x8F6F;&#x4EF6;&#x5305;&#x63A8;&#x8350;&#x4E0A;&#x5B98;&#x7F51;&#x4E0B;&#x8F7D;&#x8F6F;&#x4EF6;&#x5305;&#xFF0C;&#x5B98;&#x7F51; http://www.clamav.net1wget http://www.clamav.net/downloads/production/clamav-0.99.2.tar.gz &#x51C6;&#x5907;&#x7F16;&#x8BD1;&#x73AF;&#x5883;&#x73AF;&#x5883;12345# &#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x5305;yum -y insatll gcc openssl openssl-devel# &#x521B;&#x5EFA;clamav&#x7528;&#x6237;&#x548C;&#x7EC4;groupadd clamavuseradd -g clamav -s /sbin/nologin clamav &#x7F16;&#x8BD1;&#x5B89;&#x88C5;clamav1234tar -zxf clamav-0.99.2.tar.gzcd clamav-0.99.2./configure --sysconfdir=/etcmake &amp;&amp; make install &#x7A0B;&#x5E8F;&#x8BF4;&#x660E;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x9ED8;&#x8BA4;&#x7A0B;&#x5E8F;&#x5B89;&#x88C5;&#x8DEF;&#x5F84;&#x4E3A;/usr/local/bin123cd /usr/local/bin/lsclamav-config clambc clamconf clamdscan clamscan freshclam sigtool &#x7A0B;&#x5E8F;&#x540D;&#x79F0; &#x8BE6;&#x7EC6;&#x8BF4;&#x660E; clamscan &#x626B;&#x63CF;&#x7A0B;&#x5E8F;&#xFF0C;&#x6700;&#x4E3B;&#x8981;&#x7684;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F; clamd daemon&#x7A0B;&#x5E8F;&#xFF0C;&#x914D;&#x5408;clamscan&#xFF0C;&#x56E0;&#x4E3A;&#x662F;&#x9884;&#x8F7D;&#xFF0C;&#x53EF;&#x4EE5;&#x66F4;&#x5FEB;&#x7684;&#x626B;&#x63CF; clamdscan &#x5FC5;&#x987B;&#x914D;&#x5408;clamd&#x4F7F;&#x7528; clamuko &#x662F;&#x914D;&#x7F6E;&#x53CA;&#x65F6;&#x626B;&#x63CF;&#x7684;&#x4E2D;&#x4ECB;&#x7A0B;&#x5E8F;&#xFF0C;&#x9700;&#x914D;&#x5408;dazuko freshclam &#x75C5;&#x6BD2;&#x7801;&#x66F4;&#x65B0;&#x7A0B;&#x5E8F;&#xFF0C;&#x9996;&#x6B21;&#x5B89;&#x88C5;&#x9700;&#x8FD0;&#x884C;&#x6B64;&#x7A0B;&#x5E8F;&#x66F4;&#x65B0;&#x75C5;&#x6BD2;&#x5E93; sigtool &#x6CA1;&#x6709;&#x88AB;clamav&#x626B;&#x63CF;&#x5230;&#x7684;&#x75C5;&#x6BD2;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x6B64;&#x7A0B;&#x5E8F;&#x65B0;&#x589E; &#x4F7F;&#x7528;clamav&#x6740;&#x6BD2; &#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;12345678910cp /etc/clamd.conf.sample /etc/clamd.confvim /etc/clamd.conf&#x5728;Example &#x524D;&#x9762;&#x52A0;#cp /etc/freshclam.conf.sample /etc/freshclam.confvim /etc/freshclam.conf&#x5728;Example &#x524D;&#x9762;&#x52A0;#&#x5728; DatabaseMirror database.clamav.net &#x884C;&#x4E0B;&#x9762;&#x589E;&#x52A0;&#x51E0;&#x4E2A;&#x5730;&#x5740;DatabaseMirror clamav.inet6.frDatabaseMirror clamav.netopia.ptDatabaseMirror clamav.sonic.net &#x66F4;&#x65B0;&#x75C5;&#x6BD2;&#x5E93;123456# &#x65B0;&#x5EFA;&#x6240;&#x9700;&#x8981;&#x76EE;&#x5F55;mkdir /usr/local/share/clamav# &#x4FEE;&#x6539;&#x5C5E;&#x4E3B;&#x5C5E;&#x7EC4;chown clamav.clamav -R /usr/local/share/clamav/# &#x66F4;&#x65B0;&#x75C5;&#x6BD2;&#x5E93;/usr/local/bin/freshclam clamav&#x547D;&#x4EE4;&#x8BE6;&#x89E3; &#x547D;&#x4EE4;&#x53C2;&#x6570; -l [&#x8DEF;&#x5F84;] [&#x6587;&#x4EF6;&#x540D;] &#x589E;&#x52A0;&#x626B;&#x63CF;&#x62A5;&#x544A; &#x2013;quiet &#x5B89;&#x9759;&#x65B9;&#x5F0F;&#xFF0C;&#x4E0D;&#x53D1;&#x51FA;&#x4EFB;&#x4F55;&#x6D88;&#x606F;&#xFF0C;&#x53EA;&#x6709;&#x51FA;&#x73B0;&#x75C5;&#x6BD2;&#x624D;&#x4F1A;&#x63D0;&#x793A; &#x2013;move [&#x8DEF;&#x5F84;] &#x79FB;&#x52A8;&#x75C5;&#x6BD2;&#x6587;&#x4EF6;&#x81F3;&#x2026; &#x2013;remove [&#x8DEF;&#x5F84;] &#x5220;&#x9664;&#x75C5;&#x6BD2;&#x6587;&#x4EF6; &#x2013;unzip(unrar) &#x89E3;&#x538B;&#x538B;&#x7F29;&#x6587;&#x4EF6;&#x626B;&#x63CF; &#x547D;&#x4EE4;&#x5E38;&#x7528;&#x793A;&#x4F8B; &#x626B;&#x63CF;&#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6; 1clamscan file &#x626B;&#x63CF;/home&#x76EE;&#x5F55;&#x4E2D;&#x6240;&#x6709;&#x6587;&#x4EF6; (&#x5305;&#x62EC;&#x5B50;&#x76EE;&#x5F55;) 1clamscan -r /home &#x5C06;&#x626B;&#x63CF;&#x7ED3;&#x679C;&#x5B58;&#x653E;&#x5230;log&#x4E2D; 1clamscan -r /home/test -l /tmp/clamav.log &#x626B;&#x63CF;&#x5230;&#x6709;&#x95EE;&#x9898;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x76F4;&#x63A5;&#x5220;&#x9664; 12clamscan -r --remove /home/test# &#x8FD9;&#x4E00;&#x6B65;&#x8981;&#x5C0F;&#x5FC3;&#xFF0C;&#x6700;&#x597D;&#x4E0D;&#x8981;&#x8FD9;&#x6837;&#x64CD;&#x4F5C;&#xFF0C;&#x5982;&#x679C;&#x5220;&#x9664;&#x4E86;&#x7CFB;&#x7EDF;&#x6587;&#x4EF6;&#x5C31;&#x9EBB;&#x70E6;&#x4E86;&#x3002;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x7CFB;&#x7EDF;&#x5D29;&#x6E83; &#x626B;&#x63CF;&#x8FD4;&#x56DE;&#x503C; 0 : &#x65E0;&#x75C5;&#x6BD2; 1 : &#x53D1;&#x73B0;&#x75C5;&#x6BD2; 40 : &#x5DF2;&#x7ECF;&#x901A;&#x8FC7;&#x7684;&#x672A;&#x77E5;&#x9009;&#x9879; 50 : &#x6570;&#x636E;&#x5E93;&#x521D;&#x59CB;&#x5316;&#x9519;&#x8BEF; 52 : &#x4E0D;&#x652F;&#x6301;&#x7684;&#x6587;&#x4EF6;&#x683C;&#x5F0F; 53 : &#x65E0;&#x6CD5;&#x6253;&#x5F00;&#x76EE;&#x5F55; 54 : &#x4E0D;&#x80FD;&#x6253;&#x5F00;&#x6587;&#x4EF6;(ofm) 55 : &#x8BFB;&#x6587;&#x4EF6;&#x9519;&#x8BEF;(ofm) 56 : Can&#x2019;t stat input file / directory. 57 : Can&#x2019;t get absolute path name of current working directory 58 : I/O &#x9519;&#x8BEF;, &#x8BF7;&#x68C0;&#x67E5;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF; 59 : &#x65E0;&#x6CD5;&#x5728;/etc/passwd&#x83B7;&#x5F97;&#x5F53;&#x524D;&#x7528;&#x6237;&#x7684;&#x4FE1;&#x606F; 60 : &#x65E0;&#x6CD5;&#x5728;/etc/passwd&#x83B7;&#x5F97;&#x2019;clamav&#x2019;&#xFF08;&#x9ED8;&#x8BA4;&#x540D;&#xFF09;&#x7528;&#x6237;&#x7684;&#x4FE1;&#x606F; 61 : Can&#x2019;t fork. 63 : &#x4E0D;&#x80FD;&#x521B;&#x5EFA;&#x4E34;&#x65F6;&#x6587;&#x4EF6;/&#x76EE;&#x5F55;(&#x68C0;&#x67E5;&#x6743;&#x9650;). | 64 : &#x65E0;&#x6CD5;&#x5BF9;&#x4E34;&#x65F6;&#x76EE;&#x5F55;&#x8FDB;&#x884C;&#x5199;&#x64CD;&#x4F5C; (&#x8BF7;&#x6307;&#x5B9A;&#x53E6;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;). 70 : &#x65E0;&#x6CD5;&#x5206;&#x914D;&#x6216;&#x91CA;&#x653E;&#x5185;&#x5B58; (calloc). 71 : &#x65E0;&#x6CD5;&#x5206;&#x914D;&#x5185;&#x5B58; (malloc).]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>ClamAV</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux命令小技巧]]></title>
    <url>%2FLinux%E5%91%BD%E4%BB%A4%E5%B0%8F%E6%8A%80%E5%B7%A7.html</url>
    <content type="text"><![CDATA[&#x672C;&#x6587;&#x4E0D;&#x5BF9;&#x57FA;&#x672C;&#x7684;&#x547D;&#x4EE4;&#x4F5C;&#x8FC7;&#x591A;&#x7684;&#x63CF;&#x8FF0;&#xFF0C;&#x8BA9;&#x4F60;&#x4E86;&#x89E3;&#x4E0D;&#x4E00;&#x6837;Linux&#x547D;&#x4EE4;&#x5C0F;&#x6280;&#x5DE7;&#xFF0C;&#x539F;&#x6765;Linux&#x8FD8;&#x53EF;&#x4EE5;&#x8FD9;&#x4E48;&#x73A9;&#xFF01; &#x83B7;&#x53D6;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x6700;&#x5927;&#x7684;&#x51E0;&#x4E2A;&#x6587;&#x4EF6;1du -hsx * | sort -rh | head -8 &#x547D;&#x4EE4;&#x548C;&#x9009;&#x9879;&#x7684;&#x89E3;&#x91CA;&#xFF1A; du &#x2013; &#x4F30;&#x8BA1;&#x6587;&#x4EF6;&#x7684;&#x7A7A;&#x95F4;&#x4F7F;&#x7528;&#x60C5;&#x51B5; -hsx &#x2013; &#xFF08;-h&#xFF09;&#x66F4;&#x6613;&#x8BFB;&#x7684;&#x683C;&#x5F0F;&#xFF0C;&#xFF08;-s&#xFF09;&#x6C47;&#x603B;&#x8F93;&#x51FA;&#xFF0C;&#xFF08;-x&#xFF09;&#x8DF3;&#x8FC7;&#x5176;&#x4ED6;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x6587;&#x4EF6; sort &#x2013; &#x5BF9;&#x6587;&#x672C;&#x6587;&#x4EF6;&#x6309;&#x884C;&#x6392;&#x5E8F; -rf &#x2013; &#xFF08;-r&#xFF09;&#x5C06;&#x6BD4;&#x8F83;&#x7684;&#x7ED3;&#x679C;&#x9006;&#x5E8F;&#x8F93;&#x51FA;&#xFF0C;&#xFF08;-f&#xFF09;&#x5FFD;&#x7565;&#x5927;&#x5C0F;&#x5199; head &#x2013; &#x8F93;&#x51FA;&#x6587;&#x4EF6;&#x7684;&#x5934;&#x51E0;&#x884C; &#x663E;&#x793A;&#x5269;&#x4F59;&#x5185;&#x5B58;1free -m | grep cache | awk &apos;/[0-9]/{ print $4&quot; MB&quot; }&apos; &#x6D4B;&#x8BD5;&#x78C1;&#x76D8;&#x5199;&#x5165;&#x901F;&#x5EA6;1dd if=/dev/zero of=/tmp/output.img bs=8k count=256k conv=fdatasync &#x547D;&#x4EE4;&#x548C;&#x9009;&#x9879;&#x7684;&#x89E3;&#x91CA;&#xFF1A; dd &#x2013; &#x8F6C;&#x6362;&#x548C;&#x590D;&#x5236;&#x6587;&#x4EF6; if=/dev/zero &#x2013; &#x6307;&#x5B9A;&#x8F93;&#x5165;&#x6587;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;stdin&#xFF08;&#x6807;&#x51C6;&#x8F93;&#x5165;&#xFF09; of=/tmp/output.img &#x2013; &#x6307;&#x5B9A;&#x8F93;&#x51FA;&#x6587;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;stdout&#xFF08;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#xFF09; bs &#x2013; &#x4E00;&#x6B21;&#x8BFB;&#x548C;&#x5199;&#x7684;&#x5757;&#x5927;&#x5C0F;&#xFF0C;&#x6700;&#x5927;&#x53EF;&#x4EE5;&#x4EE5;MB&#x4E3A;&#x5355;&#x4F4D; count &#x2013; &#x590D;&#x5236;&#x6B21;&#x6570; conv &#x2013; &#x4F7F;&#x7528;&#x9017;&#x53F7;&#x5206;&#x9694;&#x7684;&#x7B56;&#x7565;&#x6765;&#x8F6C;&#x6362;&#x6587;&#x4EF6;&#xFF08;LCTT &#x8BD1;&#x6CE8;&#xFF1A;&#x6BD4;&#x5982;&#x5C06;&#x5927;&#x5199;&#x5B57;&#x6BCD;&#x8F6C;&#x6362;&#x6210;&#x5C0F;&#x5199;&#xFF0C;echo AA | dd conv=lcase&#xFF09; &#x6D4B;&#x8BD5;&#x78C1;&#x76D8;&#x8BFB;&#x53D6;&#x901F;&#x5EA6;1hdparm -Tt /dev/vda &#x547D;&#x4EE4;&#x548C;&#x9009;&#x9879;&#x7684;&#x89E3;&#x91CA;&#xFF1A; hdparm - &#x8BFB;&#x53D6;&#x548C;&#x8BBE;&#x7F6E;IDE&#x6216;SCSI&#x786C;&#x76D8;&#x53C2;&#x6570; -T - &#x8BC4;&#x4F30;&#x786C;&#x76D8;&#x5FEB;&#x901F;&#x7684;&#x8BFB;&#x53D6;&#x6548;&#x7387; -t - &#x8BC4;&#x4F30;&#x786C;&#x76D8;&#x7684;&#x8BFB;&#x53D6;&#x6548;&#x7387; &#x5728;history&#x4E2D;&#x52A0;&#x65F6;&#x95F4;&#x548C;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x8005;123vim ~/.bashrcexport HISTTIMEFORMAT=&quot;%d/%m/%y %T `whoami`&quot;source ~/.bashrc &#x547D;&#x4EE4;&#x548C;&#x9009;&#x9879;&#x7684;&#x89E3;&#x91CA;&#xFF1A; history &#x2013; &#x67E5;&#x770B;&#x8FD0;&#x884C;&#x8FC7;&#x7684;&#x547D;&#x4EE4; HISTIMEFORMAT &#x2013; &#x8BBE;&#x7F6E;&#x65F6;&#x95F4;&#x683C;&#x5F0F;&#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;-%d &#x2013; &#x5929; %m &#x2013; &#x6708; %y &#x2013; &#x5E74; %T &#x2013; &#x65F6;&#x95F4;&#x6233; whoami - &#x5F53;&#x524D;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x7684;&#x7528;&#x6237; &#x5B9E;&#x65F6;&#x76D1;&#x63A7;&#x5F53;&#x524D;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;1watch -n 2 &apos;cat /proc/mdstat&apos; &#x547D;&#x4EE4;&#x548C;&#x9009;&#x9879;&#x7684;&#x89E3;&#x91CA;: watch - &#x7528;&#x4E8E;&#x5468;&#x671F;&#x6027;&#x6267;&#x884C;&#x547D;&#x4EE4; -n - &#x6307;&#x5B9A;&#x95F4;&#x9694;&#x7684;&#x65F6;&#x957F; &#x9632;&#x6B62;&#x7CFB;&#x7EDF;&#x5173;&#x952E;&#x6587;&#x4EF6;&#x88AB;&#x7BE1;&#x6539;12chattr +i note.txtlsattr note.txt &#x547D;&#x4EE4;&#x548C;&#x9009;&#x9879;&#x7684;&#x89E3;&#x91CA;: chattr - &#x6539;&#x53D8;&#x6587;&#x4EF6;&#x5C5E;&#x6027; lsattr - &#x67E5;&#x770B;&#x6587;&#x4EF6;&#x5C5E;&#x6027; a - &#x8BA9;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x4EC5;&#x4F9B;&#x9644;&#x52A0;&#x7528;&#x9014; b - &#x4E0D;&#x66F4;&#x65B0;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x7684;&#x6700;&#x540E;&#x5B58;&#x53D6;&#x65F6;&#x95F4; c - &#x5C06;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x538B;&#x7F29;&#x540E;&#x5B58;&#x653E; d - &#x5C06;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x6392;&#x9664;&#x5728;&#x503E;&#x5012;&#x64CD;&#x4F5C;&#x4E4B;&#x5916; i - &#x4E0D;&#x5F97;&#x4EFB;&#x610F;&#x66F4;&#x52A8;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55; s - &#x4FDD;&#x5BC6;&#x6027;&#x5220;&#x9664;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55; S - &#x5373;&#x65F6;&#x66F4;&#x65B0;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55; u - &#x9884;&#x9632;&#x4EE5;&#x5916;&#x5220;&#x9664; &#x7528; Wget &#x7684;&#x9012;&#x5F52;&#x65B9;&#x5F0F;&#x4E0B;&#x8F7D;&#x6574;&#x4E2A;&#x7F51;&#x7AD9;1wget --random-wait -r -p -e robots=off -U Mozilla www.example.com &#x547D;&#x4EE4;&#x548C;&#x9009;&#x9879;&#x7684;&#x89E3;&#x91CA;: &#x2013;random-wait &#x7B49;&#x5F85; 0.5 &#x5230; 1.5 &#x79D2;&#x7684;&#x65F6;&#x95F4;&#x6765;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x6B21;&#x8BF7;&#x6C42; -r &#x5F00;&#x542F;&#x9012;&#x5F52;&#x68C0;&#x7D22; -e robots=off &#x5FFD;&#x7565; robots.txt -U Mozilla &#x8BBE;&#x7F6E; User-Agent &#x5934;&#x4E3A; Mozilla &#x2013;limit-rate=20K &#x9650;&#x5236;&#x4E0B;&#x8F7D;&#x901F;&#x5EA6;&#x4E3A; 20K -o logfile.txt &#x8BB0;&#x5F55;&#x4E0B;&#x8F7D;&#x65E5;&#x5FD7; -l 0 &#x5220;&#x9664;&#x6DF1;&#x5EA6;&#xFF08;&#x9ED8;&#x8BA4;&#x4E3A;5&#xFF09; &#x2013;wait=1h &#x6BCF;&#x4E0B;&#x8F7D;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x540E;&#x7B49;&#x5F85;1&#x5C0F;&#x65F6; &#x4EA7;&#x751F;&#x968F;&#x673A;&#x7684;&#x5341;&#x516D;&#x8FDB;&#x5236;&#x6570;1openssl rand -hex -n &#x547D;&#x4EE4;&#x548C;&#x9009;&#x9879;&#x7684;&#x89E3;&#x91CA;: -n - &#x751F;&#x6210;&#x968F;&#x673A;&#x5B57;&#x7B26;&#x6570;&#x91CF; &#x68C0;&#x67E5;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x662F;&#x5426;&#x5BF9;&#x672C;&#x673A;&#x5F00;&#x653E;1echo &gt; /dev/tcp/8.8.8.8/53 &amp;&amp; echo &quot;open&quot; &#x5FEB;&#x901F;&#x5907;&#x4EFD;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;1cp some_file_name{,.bkp} &#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x95F4;&#x6233;&#x6216;&#x521B;&#x5EFA;&#x7A7A;&#x6587;&#x4EF6;1touch -a -t 201601011111 test.sh &#x547D;&#x4EE4;&#x548C;&#x9009;&#x9879;&#x7684;&#x89E3;&#x91CA;: -t - STAMP:&#x6307;&#x660E;&#x65F6;&#x95F4; [[CC]YY]MMDDhhmm[.ss] -a - &#x4EC5;&#x4FEE;&#x6539;atime -m - &#x4EC5;&#x4FEE;&#x6539;mtime -c - &#x4E0D;&#x521B;&#x5EFA;&#x6587;&#x4EF6; &#x663E;&#x793A;&#x6587;&#x4EF6;&#x6216;&#x7CFB;&#x7EDF;&#x72B6;&#x6001;1stat text.txt &#x547D;&#x4EE4;&#x548C;&#x9009;&#x9879;&#x7684;&#x89E3;&#x91CA;: access time - atime,&#x6587;&#x4EF6;&#x6700;&#x8FD1;&#x4E00;&#x6B21;&#x88AB;&#x8BBF;&#x95EE;&#x7684;&#x65F6;&#x95F4; modify time - mtime,&#x6587;&#x4EF6;&#x6700;&#x8FD1;&#x4E00;&#x6B21;&#x88AB;&#x4FEE;&#x6539;&#x7684;&#x65F6;&#x95F4;&#xFF08;&#x6570;&#x636E;&#xFF09; change time - ctime,&#x6587;&#x4EF6;&#x6700;&#x8FD1;&#x4E00;&#x6B21;&#x6539;&#x52A8;&#x7684;&#x65F6;&#x95F4;&#xFF08;&#x5143;&#x6570;&#x636E;&#xFF09;]]></content>
      <categories>
        <category>基础</category>
      </categories>
      <tags>
        <tag>文件系统</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hexo+github访问出现页面空白问题]]></title>
    <url>%2Fhexo-github%E8%AE%BF%E9%97%AE%E5%87%BA%E7%8E%B0%E9%A1%B5%E9%9D%A2%E7%A9%BA%E7%99%BD%E9%97%AE%E9%A2%98.html</url>
    <content type="text"><![CDATA[&#x6545;&#x969C;&#x91CD;&#x73B0;&#xFF1A;&#x672C;&#x5730;&#x9884;&#x89C8;&#x6CA1;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;deploy&#x5230;github&#x4E4B;&#x540E;&#xFF0C;&#x4E3B;&#x9875;&#xFF0C;&#x53EA;&#x663E;&#x793A;&#x4E2A;&#x7A7A;&#x767D;&#x80CC;&#x666F;&#x3002; &#x6545;&#x969C;&#x539F;&#x56E0;&#x6709;&#x4EBA;&#x8BF4;&#x662F;&#x7531;&#x4E8E;github&#x66F4;&#x65B0;&#xFF0C;&#x5BFC;&#x81F4;source/vendors&#x76EE;&#x5F55;&#x4E0A;&#x4F20;&#x4E0D;&#x4E0A;&#x53BB;&#x5BFC;&#x81F4;&#x7684;&#x3002; &#x89E3;&#x51B3;&#x65B9;&#x6848; &#x9996;&#x5148;&#x4FEE;&#x6539;\themes\next\source&#x4E3A;\themes\next\lib &#x4FEE;&#x6539;next&#x4E3B;&#x9898;&#x7684;_config.yml&#xFF0C; &#x5C06; _internal: vendors&#x4FEE;&#x6539;&#x4E3A;_internal:lib &#x4FEE;&#x6539;next&#x5E95;&#x4E0B;&#x6240;&#x6709;&#x5F15;&#x7528;source/vendors&#x8DEF;&#x5F84;&#x4E3A;source/lib &#x6267;&#x884C;hexo clean | hexo g &#x8BD5;&#x8BD5;hexo d&#x4E0A;&#x4F20;&#x770B;&#x770B;&#x7A0D;&#x7B49;&#x7247;&#x523B;&#x770B;&#x770B;&#x9875;&#x9762;&#x6709;&#x65E0;&#x5185;&#x5BB9; &#x5982;&#x679C;&#x4EE5;&#x4E0A;&#x65E0;&#x6CD5;&#x89E3;&#x51B3;&#xFF0C;&#x4F30;&#x8BA1;&#x6211;&#x4E5F;&#x5E2E;&#x4E0D;&#x4E86;&#x4F60;&#xFF0C;&#x63A8;&#x8350;&#x51E0;&#x4E2A;&#x94FE;&#x63A5;&#xFF0C;&#x81EA;&#x884C;&#x5BFB;&#x627E;&#x7B54;&#x6848;&#x3002;https://github.com/hexojs/hexo/issues/2238https://github.com/iissnan/hexo-theme-next/issues/1219]]></content>
      <categories>
        <category>故障记录</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[隐藏Linux系统常见软件版本号]]></title>
    <url>%2F%E9%9A%90%E8%97%8FLinux%E7%B3%BB%E7%BB%9F%E5%B8%B8%E8%A7%81%E8%BD%AF%E4%BB%B6%E7%89%88%E6%9C%AC%E5%8F%B7.html</url>
    <content type="text"><![CDATA[&#x672C;&#x6587;&#x4E3B;&#x8981;&#x4ECB;&#x7ECD;&#x4E86;&#x5728;Linux&#x7CFB;&#x7EDF;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x9690;&#x85CF;&#x5404;&#x79CD;&#x5E38;&#x7528;&#x8F6F;&#x4EF6;&#x7248;&#x672C;&#x53F7;&#x7684;&#x65B9;&#x6CD5;,&#x6709;&#x52A9;&#x4E8E;&#x9884;&#x9632;&#x653B;&#x51FB;&#x8005;&#x9488;&#x5BF9;&#x8BE6;&#x7EC6;&#x7248;&#x672C;&#x7684;&#x6F0F;&#x6D1E;&#x800C;&#x53D1;&#x8D77;&#x7684;&#x653B;&#x51FB;,&#x9700;&#x8981;&#x7684;&#x670B;&#x53CB;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x4E0B; &#x9690;&#x85CF;Linux&#x7248;&#x672C;&#x4FE1;&#x606F;&#x5728;&#x767B;&#x5F55;Linux&#x4E3B;&#x673A;&#x672C;&#x5730;&#x524D;&#xFF0C;&#x4F1A;&#x663E;&#x793A;&#x7CFB;&#x7EDF;&#x7684;&#x7248;&#x672C;&#x548C;&#x5185;&#x6838;&#x3002;&#x4E3A;&#x4E86;&#x5B89;&#x5168;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x9690;&#x85CF;&#x5B83;&#x6E05;&#x7A7A;&#x547D;&#x4EE4;1&gt;/etc/issue &#x6216; cat /dev/null &gt;etc/issue &#x4E5F;&#x53EF;&#x4EE5;&#x7F16;&#x8F91;/etc/motd&#x6587;&#x4EF6;&#xFF0C;&#x6765;&#x9690;&#x85CF;&#x771F;&#x6B63;&#x7684;&#x7248;&#x672C;&#x4FE1;&#x606F;&#x3002;/etc/motd&#x5373;messageoftoday&#xFF08;&#x5E03;&#x544A;&#x680F;&#x4FE1;&#x606F;&#xFF09;&#x3002;&#x6BCF;&#x6B21;&#x7528;&#x6237;&#x767B;&#x5F55;&#x65F6;&#xFF0C;/etc/motd&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#x4F1A;&#x663E;&#x793A;&#x5728;&#x7528;&#x6237;&#x7684;&#x7EC8;&#x7AEF;&#x3002; &#x9690;&#x85CF;apache&#x7248;&#x672C;&#x4FE1;&#x606F;&#x9690;&#x85CF;Apache&#x7248;&#x672C;&#x53F7;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x4FEE;&#x6539;Apache&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;123vim /etc/httpd/conf/httpd.confServerTokens ProductOnlyServerSignature Off &#x9690;&#x85CF;tomcat&#x7248;&#x672C;&#x4FE1;&#x606F; &#x627E;&#x5230;catalina.jar &#x6587;&#x4EF6;&#xFF0C;&#x4E00;&#x822C;&#x5728;tomcat&#x7684;&#x5B89;&#x88C5;&#x76EE;&#x5F55;lib&#x4E0B; &#x628A;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x89E3;&#x538B;&#x4E86;jar xf catalina.jar &#x5982;&#x679C;&#x8FD9;&#x6837;&#x89E3;&#x538B;&#xFF0C;&#x63D0;&#x793A;&#x6743;&#x9650;&#x4E0D;&#x591F;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4E0B;&#x8F7D;&#x5230;&#x672C;&#x5730;&#xFF0C;&#x7528;winrar&#x89E3;&#x538B;&#x4E5F;&#x53EF;&#x4EE5;&#x7684;&#x53C8;&#x6216;&#x8005;&#x4F60;&#x53EF;&#x4EE5;&#x4E0D;&#x7BA1;&#x5B83;&#xFF0C;&#x4E0D;&#x89E3;&#x538B;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x76F4;&#x63A5;&#x5EFA;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x76F4;&#x63A5;&#x8FDB;&#x5165;&#x7B2C;3&#x6B65; &#x5230;$CATALINA_HOME/lib&#x76EE;&#x5F55; &#x521B;&#x5EFA;org/apache/catalina/util&#x76EE;&#x5F55;mkdir -p org/apache/catalina/util &#x521B;&#x5EFA;ServerInfo.properties&#x6587;&#x4EF6;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x521A;&#x521A;&#x628A;catalina.jar&#x89E3;&#x538B;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;org\apache\catalina\util&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x628A;&#x5B83;&#x590D;&#x5236;&#x8FC7;&#x6765; 123cd $CATALINA_HOME/lib/org/apache/catalina/utilvi ServerInfo.properties #&#x7F16;&#x8F91;&#x4E0B;&#x9762;&#x6587;&#x5B57;server.info=Apache Tomcat Version X0000 #&#x8FD9;&#x91CC;&#x7684;&#x6587;&#x5B57;&#xFF0C;&#x4F60;&#x968F;&#x4FBF;&#x5B9A;&#x4E49; &#x91CD;&#x542F;tomcat&#x670D;&#x52A1; 12/usr/local/tomcat/bin/catalina.sh stop/usr/local/tomcat/bin/catalina.sh start &#x9690;&#x85CF;nginx&#x7248;&#x672C;&#x4FE1;&#x606F;Nginx&#x7684;&#x7248;&#x672C;&#x53F7;&#x4E3B;&#x8981;&#x5728;&#x4E24;&#x4E2A;&#x5730;&#x65B9;&#x4F1A;&#x6709;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;HTTP header&#xFF0C;&#x6709;&#x4E2A;Server:nginx/1.x.x&#x7C7B;&#x4F3C;&#x4F1A;&#x66B4;&#x9732;Web&#x670D;&#x52A1;&#x5668;&#x6240;&#x7528;&#x8F6F;&#x4EF6;&#x540D;&#x79F0;&#x4EE5;&#x53CA;&#x7248;&#x672C;&#x53F7;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E5F;&#x662F;&#x5927;&#x591A;&#x6570;Web&#x670D;&#x52A1;&#x5668;&#x6700;&#x5BB9;&#x6613;&#x66B4;&#x9732;&#x7248;&#x672C;&#x53F7;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x5730;&#x65B9;&#x662F;Nginx&#x51FA;&#x9519;&#x9875;&#x9762;&#xFF0C;&#x6BD4;&#x5982;404&#x9875;&#x9762;&#x6CA1;&#x6709;&#x627E;&#x5230;&#x7B49;&#xFF0C;&#x8FD9;&#x662F;&#x5982;&#x679C;&#x7528;&#x6237;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x9875;&#x9762;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;Nginx&#x81EA;&#x5DF1;&#x7684;&#x9875;&#x9762;&#x4F1A;&#x6709;&#x7248;&#x672C;&#x6233;&#x8BB0;&#x3002; &#x4E0D;&#x8FC7;&#x5E78;&#x8FD0;&#x7684;&#x662F;&#x5BF9;&#x4E8E;&#x8FD9;&#x4E24;&#x4E2A;&#x5730;&#x65B9;&#x7684;&#x7248;&#x672C;&#x53F7;&#x9690;&#x85CF;&#xFF0C;Nginx&#x90FD;&#x63D0;&#x4F9B;&#x4E86;&#x7B80;&#x5355;&#x7684;&#x529E;&#x6CD5;&#x4E00;&#x6B65;&#x5230;&#x4F4D;&#xFF0C;&#x53C2;&#x8003;server_tokens&#x3002;&#x901A;&#x8FC7;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;http&#x8282;&#x914D;&#x7F6E;server_tokens off&#x6765;&#x8FBE;&#x5230;&#x6211;&#x4EEC;&#x76EE;&#x7684;12345vim nginx.conf http { # ...&#x7701;&#x7565;&#x4E00;&#x4E9B;&#x914D;&#x7F6E; server_tokens off; } &#x9690;&#x85CF;PHP&#x7684;&#x7248;&#x672C;&#x4FE1;&#x606F;PHP&#x5BB9;&#x6613;&#x66B4;&#x9732;&#x7684;&#x7248;&#x672C;&#x53F7;&#x5728;&#x4EC0;&#x4E48;&#x5730;&#x65B9;&#x5462;&#xFF1F;&#x5176;&#x5B9E;&#x4E5F;&#x662F;&#x5728;HTTP&#x5934;&#xFF0C;&#x4EE5;&#x7C7B;&#x4F3C;X-Powered-By: PHP/5.2.11&#x8FD9;&#x79CD;&#x5F62;&#x5F0F;&#x5B58;&#x5728;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x80FD;&#x4F1A;&#x60F3;&#x5230;&#x4F1A;&#x4E0D;&#x4F1A;&#x662F;Nginx&#x95EE;&#x9898;&#xFF0C;&#x800C;&#x53BB;&#x5230;Nginx&#x91CC;&#x9762;&#x627E;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#xFF0C;&#x5475;&#x5475;&#xFF0C;&#x5176;&#x5B9E;&#x8FD9;&#x4E2A;&#x662F;&#x5728;PHP&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;php.ini&#x91CC;&#x6539;&#x52A8;12vim /etc/php.iniexpose_php = Off]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>文件系统</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Redis数据库入门]]></title>
    <url>%2FRedis%E6%95%B0%E6%8D%AE%E5%BA%93%E5%85%A5%E9%97%A8.html</url>
    <content type="text"><![CDATA[redis&#x662F;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x7684;&#x3001;&#x4F7F;&#x7528;C&#x8BED;&#x8A00;&#x7F16;&#x5199;&#x7684;&#x3001;&#x652F;&#x6301;&#x7F51;&#x7EDC;&#x4EA4;&#x4E92;&#x7684;&#x3001;&#x53EF;&#x57FA;&#x4E8E;&#x5185;&#x5B58;&#x4E5F;&#x53EF;&#x6301;&#x4E45;&#x5316;&#x7684;Key-Value&#x6570;&#x636E;&#x5E93;&#x3002;redis&#x7684;&#x5B98;&#x7F51;&#x5730;&#x5740;&#xFF0C;&#x975E;&#x5E38;&#x597D;&#x8BB0;&#xFF0C;&#x662F;redis.io&#x3002;&#xFF08;&#x7279;&#x610F;&#x67E5;&#x4E86;&#x4E00;&#x4E0B;&#xFF0C;&#x57DF;&#x540D;&#x540E;&#x7F00;io&#x5C5E;&#x4E8E;&#x56FD;&#x5BB6;&#x57DF;&#x540D;&#xFF0C;&#x662F;british Indian Ocean territory&#xFF0C;&#x5373;&#x82F1;&#x5C5E;&#x5370;&#x5EA6;&#x6D0B;&#x9886;&#x5730;&#xFF09;&#x76EE;&#x524D;&#xFF0C;Vmware&#x5728;&#x8D44;&#x52A9;&#x7740;redis&#x9879;&#x76EE;&#x7684;&#x5F00;&#x53D1;&#x548C;&#x7EF4;&#x62A4;&#x3002; &#x5B89;&#x88C5;redis&#x4ECE;redis.io&#x4E0B;&#x8F7D;&#x6700;&#x65B0;&#x7248;redis-X.Y.Z.tar.gz&#x540E;&#x89E3;&#x538B;&#xFF0C;&#x7136;&#x540E;&#x8FDB;&#x5165;redis-X.Y.Z&#x6587;&#x4EF6;&#x5939;&#x540E;&#x76F4;&#x63A5;make&#x5373;&#x53EF;&#xFF0C;&#x5B89;&#x88C5;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;make&#x6210;&#x529F;&#x540E;&#x4F1A;&#x5728;src&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x4EA7;&#x751F;&#x4E00;&#x4E9B;&#x4E8C;&#x8FDB;&#x5236;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#xFF0C;&#x5305;&#x62EC;redis-server&#x3001;redis-cli&#x7B49;&#x7B49;&#xFF1A;1234567$ find . -type f -executable./redis-benchmark //&#x7528;&#x4E8E;&#x8FDB;&#x884C;redis&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x7684;&#x5DE5;&#x5177;./redis-check-dump //&#x7528;&#x4E8E;&#x4FEE;&#x590D;&#x51FA;&#x95EE;&#x9898;&#x7684;dump.rdb&#x6587;&#x4EF6;./redis-cli //redis&#x7684;&#x5BA2;&#x6237;&#x7AEF;./redis-server //redis&#x7684;&#x670D;&#x52A1;&#x7AEF;./redis-check-aof //&#x7528;&#x4E8E;&#x4FEE;&#x590D;&#x51FA;&#x95EE;&#x9898;&#x7684;AOF&#x6587;&#x4EF6;./redis-sentinel //&#x7528;&#x4E8E;&#x96C6;&#x7FA4;&#x7BA1;&#x7406; &#x542F;&#x52A8;redis&#x542F;&#x52A8;redis&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x76F4;&#x63A5;./redis-server&#x5C31;&#x53EF;&#x4EE5;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x7AEF;&#x4E86;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x65B9;&#x6CD5;&#x6307;&#x5B9A;&#x8981;&#x52A0;&#x8F7D;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1A;1./redis-server ../redis.conf &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;redis-server&#x4F1A;&#x4EE5;&#x975E;daemon&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x8FD0;&#x884C;&#xFF0C;&#x4E14;&#x9ED8;&#x8BA4;&#x670D;&#x52A1;&#x7AEF;&#x53E3;&#x4E3A;6379&#x3002;&#x6709;&#x5173;&#x4F5C;&#x8005;&#x4E3A;&#x4EC0;&#x4E48;&#x9009;&#x62E9;6379&#x4F5C;&#x4E3A;&#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x6BB5;&#x6709;&#x8DA3;&#x7684;&#x5178;&#x6545;&#xFF0C;&#x82F1;&#x8BED;&#x597D;&#x7684;&#x540C;&#x5B66;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#x4F5C;&#x8005;&#x8FD9;&#x7BC7;&#x535A;&#x6587;&#x4E2D;&#x7684;&#x89E3;&#x91CA;&#x3002; redis&#x5BA2;&#x6237;&#x7AEF;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x770B;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;1234567891011//&#x8FD9;&#x6837;&#x6765;&#x542F;&#x52A8;redis&#x5BA2;&#x6237;&#x7AEF;&#x4E86;$ ./redis-cli//&#x7528;set&#x6307;&#x4EE4;&#x6765;&#x8BBE;&#x7F6E;key&#x3001;value127.0.0.1:6379&gt; set name &quot;roc&quot; OK//&#x6765;&#x83B7;&#x53D6;name&#x7684;&#x503C;127.0.0.1:6379&gt; get name &quot;roc&quot;//&#x901A;&#x8FC7;&#x5BA2;&#x6237;&#x7AEF;&#x6765;&#x5173;&#x95ED;redis&#x670D;&#x52A1;&#x7AEF;127.0.0.1:6379&gt; shutdown 127.0.0.1:6379&gt; redis&#x6570;&#x636E;&#x7ED3;&#x6784; &#x2013; &#x7B80;&#x4ECB;redis&#x662F;&#x4E00;&#x79CD;&#x9AD8;&#x7EA7;&#x7684;key:value&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#xFF0C;&#x5176;&#x4E2D;value&#x652F;&#x6301;&#x4E94;&#x79CD;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF1A;123451.&#x5B57;&#x7B26;&#x4E32;&#xFF08;strings&#xFF09;2.&#x5B57;&#x7B26;&#x4E32;&#x5217;&#x8868;&#xFF08;lists&#xFF09;3.&#x5B57;&#x7B26;&#x4E32;&#x96C6;&#x5408;&#xFF08;sets&#xFF09;4.&#x6709;&#x5E8F;&#x5B57;&#x7B26;&#x4E32;&#x96C6;&#x5408;&#xFF08;sorted sets&#xFF09;5.&#x54C8;&#x5E0C;&#xFF08;hashes&#xFF09; &#x800C;&#x5173;&#x4E8E;key&#xFF0C;&#x6709;&#x51E0;&#x4E2A;&#x70B9;&#x8981;&#x63D0;&#x9192;&#x5927;&#x5BB6;&#xFF1A;1231.key&#x4E0D;&#x8981;&#x592A;&#x957F;&#xFF0C;&#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x8D85;&#x8FC7;1024&#x5B57;&#x8282;&#xFF0C;&#x8FD9;&#x4E0D;&#x4EC5;&#x6D88;&#x8017;&#x5185;&#x5B58;&#xFF0C;&#x800C;&#x4E14;&#x4F1A;&#x964D;&#x4F4E;&#x67E5;&#x627E;&#x7684;&#x6548;&#x7387;&#xFF1B;2.key&#x4E5F;&#x4E0D;&#x8981;&#x592A;&#x77ED;&#xFF0C;&#x592A;&#x77ED;&#x7684;&#x8BDD;&#xFF0C;key&#x7684;&#x53EF;&#x8BFB;&#x6027;&#x4F1A;&#x964D;&#x4F4E;&#xFF1B;3.&#x5728;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#x4E2D;&#xFF0C;key&#x6700;&#x597D;&#x4F7F;&#x7528;&#x7EDF;&#x4E00;&#x7684;&#x547D;&#x540D;&#x6A21;&#x5F0F;&#xFF0C;&#x4F8B;&#x5982;user:10000:passwd&#x3002; redis&#x6570;&#x636E;&#x7ED3;&#x6784; &#x2013; strings&#x6709;&#x4EBA;&#x8BF4;&#xFF0C;&#x5982;&#x679C;&#x53EA;&#x4F7F;&#x7528;redis&#x4E2D;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;&#xFF0C;&#x4E14;&#x4E0D;&#x4F7F;&#x7528;redis&#x7684;&#x6301;&#x4E45;&#x5316;&#x529F;&#x80FD;&#xFF0C;&#x90A3;&#x4E48;&#xFF0C;redis&#x5C31;&#x548C;memcache&#x975E;&#x5E38;&#x975E;&#x5E38;&#x7684;&#x50CF;&#x4E86;&#x3002;&#x8FD9;&#x8BF4;&#x660E;strings&#x7C7B;&#x578B;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x57FA;&#x7840;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x4E5F;&#x662F;&#x4EFB;&#x4F55;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x90FD;&#x5FC5;&#x5907;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x3002; &#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x6700;&#x7B80;&#x5355;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;12set mystr &quot;hello world!&quot; //&#x8BBE;&#x7F6E;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;get mystr //&#x8BFB;&#x53D6;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B; &#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;&#x7684;&#x7528;&#x6CD5;&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#xFF0C;&#x56E0;&#x4E3A;&#x662F;&#x4E8C;&#x8FDB;&#x5236;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x628A;&#x4E00;&#x4E2A;&#x56FE;&#x7247;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#x4F5C;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x6765;&#x5B58;&#x50A8;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;&#x8FDB;&#x884C;&#x6570;&#x503C;&#x64CD;&#x4F5C;&#xFF1A;12345678127.0.0.1:6379&gt; set mynum &quot;2&quot;OK127.0.0.1:6379&gt; get mynum&quot;2&quot;127.0.0.1:6379&gt; incr mynum(integer) 3127.0.0.1:6379&gt; get mynum&quot;3&quot; &#x770B;&#xFF0C;&#x5728;&#x9047;&#x5230;&#x6570;&#x503C;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;redis&#x4F1A;&#x5C06;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;&#x8F6C;&#x6362;&#x6210;&#x6570;&#x503C;&#x3002; &#x7531;&#x4E8E;INCR&#x7B49;&#x6307;&#x4EE4;&#x672C;&#x8EAB;&#x5C31;&#x5177;&#x6709;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x5229;&#x7528;redis&#x7684;INCR&#x3001;INCRBY&#x3001;DECR&#x3001;DECRBY&#x7B49;&#x6307;&#x4EE4;&#x6765;&#x5B9E;&#x73B0;&#x539F;&#x5B50;&#x8BA1;&#x6570;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x5047;&#x5982;&#xFF0C;&#x5728;&#x67D0;&#x79CD;&#x573A;&#x666F;&#x4E0B;&#x6709;3&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x540C;&#x65F6;&#x8BFB;&#x53D6;&#x4E86;mynum&#x7684;&#x503C;&#xFF08;&#x503C;&#x4E3A;2&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x5176;&#x540C;&#x65F6;&#x8FDB;&#x884C;&#x4E86;&#x52A0;1&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x90A3;&#x4E48;&#xFF0C;&#x6700;&#x540E;mynum&#x7684;&#x503C;&#x4E00;&#x5B9A;&#x662F;5&#x3002;&#x4E0D;&#x5C11;&#x7F51;&#x7AD9;&#x90FD;&#x5229;&#x7528;redis&#x7684;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#x6765;&#x5B9E;&#x73B0;&#x4E1A;&#x52A1;&#x4E0A;&#x7684;&#x7EDF;&#x8BA1;&#x8BA1;&#x6570;&#x9700;&#x6C42;&#x3002; redis&#x6570;&#x636E;&#x7ED3;&#x6784; &#x2013; listsredis&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x91CD;&#x8981;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x53EB;&#x505A;lists&#xFF0C;&#x7FFB;&#x8BD1;&#x6210;&#x4E2D;&#x6587;&#x53EB;&#x505A;&#x201C;&#x5217;&#x8868;&#x201D;&#x3002;&#x9996;&#x5148;&#x8981;&#x660E;&#x786E;&#x4E00;&#x70B9;&#xFF0C;redis&#x4E2D;&#x7684;lists&#x5728;&#x5E95;&#x5C42;&#x5B9E;&#x73B0;&#x4E0A;&#x5E76;&#x4E0D;&#x662F;&#x6570;&#x7EC4;&#xFF0C;&#x800C;&#x662F;&#x94FE;&#x8868;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x5177;&#x6709;&#x4E0A;&#x767E;&#x4E07;&#x4E2A;&#x5143;&#x7D20;&#x7684;lists&#x6765;&#x8BF4;&#xFF0C;&#x5728;&#x5934;&#x90E8;&#x548C;&#x5C3E;&#x90E8;&#x63D2;&#x5165;&#x4E00;&#x4E2A;&#x65B0;&#x5143;&#x7D20;&#xFF0C;&#x5176;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x662F;&#x5E38;&#x6570;&#x7EA7;&#x522B;&#x7684;&#xFF0C;&#x6BD4;&#x5982;&#x7528;LPUSH&#x5728;10&#x4E2A;&#x5143;&#x7D20;&#x7684;lists&#x5934;&#x90E8;&#x63D2;&#x5165;&#x65B0;&#x5143;&#x7D20;&#xFF0C;&#x548C;&#x5728;&#x4E0A;&#x5343;&#x4E07;&#x5143;&#x7D20;&#x7684;lists&#x5934;&#x90E8;&#x63D2;&#x5165;&#x65B0;&#x5143;&#x7D20;&#x7684;&#x901F;&#x5EA6;&#x5E94;&#x8BE5;&#x662F;&#x76F8;&#x540C;&#x7684;&#x3002;&#x867D;&#x7136;lists&#x6709;&#x8FD9;&#x6837;&#x7684;&#x4F18;&#x52BF;&#xFF0C;&#x4F46;&#x540C;&#x6837;&#x6709;&#x5176;&#x5F0A;&#x7AEF;&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#xFF0C;&#x94FE;&#x8868;&#x578B;lists&#x7684;&#x5143;&#x7D20;&#x5B9A;&#x4F4D;&#x4F1A;&#x6BD4;&#x8F83;&#x6162;&#xFF0C;&#x800C;&#x6570;&#x7EC4;&#x578B;lists&#x7684;&#x5143;&#x7D20;&#x5B9A;&#x4F4D;&#x5C31;&#x4F1A;&#x5FEB;&#x5F97;&#x591A;&#x3002;lists&#x7684;&#x5E38;&#x7528;&#x64CD;&#x4F5C;&#x5305;&#x62EC;LPUSH&#x3001;RPUSH&#x3001;LRANGE&#x7B49;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7528;LPUSH&#x5728;lists&#x7684;&#x5DE6;&#x4FA7;&#x63D2;&#x5165;&#x4E00;&#x4E2A;&#x65B0;&#x5143;&#x7D20;&#xFF0C;&#x7528;RPUSH&#x5728;lists&#x7684;&#x53F3;&#x4FA7;&#x63D2;&#x5165;&#x4E00;&#x4E2A;&#x65B0;&#x5143;&#x7D20;&#xFF0C;&#x7528;LRANGE&#x547D;&#x4EE4;&#x4ECE;lists&#x4E2D;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x8303;&#x56F4;&#x6765;&#x63D0;&#x53D6;&#x5143;&#x7D20;&#x3002;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x51E0;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;12345678910111213141516171819//&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;list&#x53EB;&#x505A;mylist&#xFF0C;&#x5E76;&#x5728;&#x5217;&#x8868;&#x5934;&#x90E8;&#x63D2;&#x5165;&#x5143;&#x7D20;&quot;1&quot;127.0.0.1:6379&gt; lpush mylist &quot;1&quot; //&#x8FD4;&#x56DE;&#x5F53;&#x524D;mylist&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x4E2A;&#x6570;(integer) 1 //&#x5728;mylist&#x53F3;&#x4FA7;&#x63D2;&#x5165;&#x5143;&#x7D20;&quot;2&quot;127.0.0.1:6379&gt; rpush mylist &quot;2&quot; (integer) 2//&#x5728;mylist&#x5DE6;&#x4FA7;&#x63D2;&#x5165;&#x5143;&#x7D20;&quot;0&quot;127.0.0.1:6379&gt; lpush mylist &quot;0&quot; (integer) 3//&#x5217;&#x51FA;mylist&#x4E2D;&#x4ECE;&#x7F16;&#x53F7;0&#x5230;&#x7F16;&#x53F7;1&#x7684;&#x5143;&#x7D20;127.0.0.1:6379&gt; lrange mylist 0 1 1) &quot;0&quot;2) &quot;1&quot;//&#x5217;&#x51FA;mylist&#x4E2D;&#x4ECE;&#x7F16;&#x53F7;0&#x5230;&#x5012;&#x6570;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;127.0.0.1:6379&gt; lrange mylist 0 -1 1) &quot;0&quot;2) &quot;1&quot;3) &quot;2&quot; lists&#x7684;&#x5E94;&#x7528;&#x76F8;&#x5F53;&#x5E7F;&#x6CDB;&#xFF0C;&#x968F;&#x4FBF;&#x4E3E;&#x51E0;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;1.&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5229;&#x7528;lists&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF0C;&#x800C;&#x4E14;&#x53EF;&#x4EE5;&#x786E;&#x4FDD;&#x5148;&#x540E;&#x987A;&#x5E8F;&#xFF0C;&#x4E0D;&#x5FC5;&#x50CF;MySQL&#x90A3;&#x6837;&#x8FD8;&#x9700;&#x8981;&#x901A;&#x8FC7;ORDER BY&#x6765;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002;2.&#x5229;&#x7528;LRANGE&#x8FD8;&#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x5B9E;&#x73B0;&#x5206;&#x9875;&#x7684;&#x529F;&#x80FD;&#x3002;3.&#x5728;&#x535A;&#x5BA2;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x6BCF;&#x7247;&#x535A;&#x6587;&#x7684;&#x8BC4;&#x8BBA;&#x4E5F;&#x53EF;&#x4EE5;&#x5B58;&#x5165;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;list&#x4E2D;&#x3002; redis&#x6570;&#x636E;&#x7ED3;&#x6784; &#x2013; &#x96C6;&#x5408;redis&#x7684;&#x96C6;&#x5408;&#xFF0C;&#x662F;&#x4E00;&#x79CD;&#x65E0;&#x5E8F;&#x7684;&#x96C6;&#x5408;&#xFF0C;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x6CA1;&#x6709;&#x5148;&#x540E;&#x987A;&#x5E8F;&#x3002;&#x96C6;&#x5408;&#x76F8;&#x5173;&#x7684;&#x64CD;&#x4F5C;&#x4E5F;&#x5F88;&#x4E30;&#x5BCC;&#xFF0C;&#x5982;&#x6DFB;&#x52A0;&#x65B0;&#x5143;&#x7D20;&#x3001;&#x5220;&#x9664;&#x5DF2;&#x6709;&#x5143;&#x7D20;&#x3001;&#x53D6;&#x4EA4;&#x96C6;&#x3001;&#x53D6;&#x5E76;&#x96C6;&#x3001;&#x53D6;&#x5DEE;&#x96C6;&#x7B49;&#x3002;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4F8B;&#x5B50;&#xFF1A;1234567891011121314151617181920212223242526272829//&#x5411;&#x96C6;&#x5408;myset&#x4E2D;&#x52A0;&#x5165;&#x4E00;&#x4E2A;&#x65B0;&#x5143;&#x7D20;&quot;one&quot;127.0.0.1:6379&gt; sadd myset &quot;one&quot; (integer) 1127.0.0.1:6379&gt; sadd myset &quot;two&quot;(integer) 1//&#x5217;&#x51FA;&#x96C6;&#x5408;myset&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5143;&#x7D20;127.0.0.1:6379&gt; smembers myset 1) &quot;one&quot;2) &quot;two&quot;//&#x5224;&#x65AD;&#x5143;&#x7D20;1&#x662F;&#x5426;&#x5728;&#x96C6;&#x5408;myset&#x4E2D;&#xFF0C;&#x8FD4;&#x56DE;1&#x8868;&#x793A;&#x5B58;&#x5728;127.0.0.1:6379&gt; sismember myset &quot;one&quot; (integer) 1//&#x5224;&#x65AD;&#x5143;&#x7D20;3&#x662F;&#x5426;&#x5728;&#x96C6;&#x5408;myset&#x4E2D;&#xFF0C;&#x8FD4;&#x56DE;0&#x8868;&#x793A;&#x4E0D;&#x5B58;&#x5728;127.0.0.1:6379&gt; sismember myset &quot;three&quot; (integer) 0//&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x96C6;&#x5408;yourset127.0.0.1:6379&gt; sadd yourset &quot;1&quot; (integer) 1127.0.0.1:6379&gt; sadd yourset &quot;2&quot;(integer) 1127.0.0.1:6379&gt; smembers yourset1) &quot;1&quot;2) &quot;2&quot;//&#x5BF9;&#x4E24;&#x4E2A;&#x96C6;&#x5408;&#x6C42;&#x5E76;&#x96C6;127.0.0.1:6379&gt; sunion myset yourset 1) &quot;1&quot;2) &quot;one&quot;3) &quot;2&quot;4) &quot;two&quot; &#x5BF9;&#x4E8E;&#x96C6;&#x5408;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x4E5F;&#x6709;&#x4E00;&#x4E9B;&#x5E38;&#x89C1;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x6BD4;&#x5982;&#xFF0C;QQ&#x6709;&#x4E00;&#x4E2A;&#x793E;&#x4EA4;&#x529F;&#x80FD;&#x53EB;&#x505A;&#x201C;&#x597D;&#x53CB;&#x6807;&#x7B7E;&#x201D;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x7ED9;&#x4F60;&#x7684;&#x597D;&#x53CB;&#x8D34;&#x6807;&#x7B7E;&#xFF0C;&#x6BD4;&#x5982;&#x201C;&#x5927;&#x7F8E;&#x5973;&#x201D;&#x3001;&#x201C;&#x571F;&#x8C6A;&#x201D;&#x3001;&#x201C;&#x6B27;&#x5DF4;&#x201D;&#x7B49;&#x7B49;&#xFF0C;&#x8FD9;&#x65F6;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;redis&#x7684;&#x96C6;&#x5408;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x628A;&#x6BCF;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x7684;&#x6807;&#x7B7E;&#x90FD;&#x5B58;&#x50A8;&#x5728;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x4E4B;&#x4E2D;&#x3002; redis&#x6570;&#x636E;&#x7ED3;&#x6784; &#x2013; &#x6709;&#x5E8F;&#x96C6;&#x5408;redis&#x4E0D;&#x4F46;&#x63D0;&#x4F9B;&#x4E86;&#x65E0;&#x9700;&#x96C6;&#x5408;&#xFF08;sets&#xFF09;&#xFF0C;&#x8FD8;&#x5F88;&#x4F53;&#x8D34;&#x7684;&#x63D0;&#x4F9B;&#x4E86;&#x6709;&#x5E8F;&#x96C6;&#x5408;&#xFF08;sorted sets&#xFF09;&#x3002;&#x6709;&#x5E8F;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x90FD;&#x5173;&#x8054;&#x4E00;&#x4E2A;&#x5E8F;&#x53F7;&#xFF08;score&#xFF09;&#xFF0C;&#x8FD9;&#x4FBF;&#x662F;&#x6392;&#x5E8F;&#x7684;&#x4F9D;&#x636E;&#x3002;&#x5F88;&#x591A;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x5C06;redis&#x4E2D;&#x7684;&#x6709;&#x5E8F;&#x96C6;&#x5408;&#x53EB;&#x505A;zsets&#xFF0C;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x5728;redis&#x4E2D;&#xFF0C;&#x6709;&#x5E8F;&#x96C6;&#x5408;&#x76F8;&#x5173;&#x7684;&#x64CD;&#x4F5C;&#x6307;&#x4EE4;&#x90FD;&#x662F;&#x4EE5;z&#x5F00;&#x5934;&#x7684;&#xFF0C;&#x6BD4;&#x5982;zrange&#x3001;zadd&#x3001;zrevrange&#x3001;zrangebyscore&#x7B49;&#x7B49; &#x8001;&#x89C4;&#x77E9;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x51E0;&#x4E2A;&#x751F;&#x52A8;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;//&#x65B0;&#x589E;&#x4E00;&#x4E2A;&#x6709;&#x5E8F;&#x96C6;&#x5408;myzset&#xFF0C;&#x5E76;&#x52A0;&#x5165;&#x4E00;&#x4E2A;&#x5143;&#x7D20;baidu.com&#xFF0C;&#x7ED9;&#x5B83;&#x8D4B;&#x4E88;&#x7684;&#x5E8F;&#x53F7;&#x662F;1&#xFF1A;123456789101112131415161718192021127.0.0.1:6379&gt; zadd myzset 1 baidu.com (integer) 1//&#x5411;myzset&#x4E2D;&#x65B0;&#x589E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;360.com&#xFF0C;&#x8D4B;&#x4E88;&#x5B83;&#x7684;&#x5E8F;&#x53F7;&#x662F;3127.0.0.1:6379&gt; zadd myzset 3 360.com (integer) 1//&#x5411;myzset&#x4E2D;&#x65B0;&#x589E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;google.com&#xFF0C;&#x8D4B;&#x4E88;&#x5B83;&#x7684;&#x5E8F;&#x53F7;&#x662F;2127.0.0.1:6379&gt; zadd myzset 2 google.com (integer) 1//&#x5217;&#x51FA;myzset&#x7684;&#x6240;&#x6709;&#x5143;&#x7D20;&#xFF0C;&#x540C;&#x65F6;&#x5217;&#x51FA;&#x5176;&#x5E8F;&#x53F7;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x51FA;myzset&#x5DF2;&#x7ECF;&#x662F;&#x6709;&#x5E8F;&#x7684;&#x4E86;&#x3002;127.0.0.1:6379&gt; zrange myzset 0 -1 with scores 1) &quot;baidu.com&quot;2) &quot;1&quot;3) &quot;google.com&quot;4) &quot;2&quot;5) &quot;360.com&quot;6) &quot;3&quot;//&#x53EA;&#x5217;&#x51FA;myzset&#x7684;&#x5143;&#x7D20;127.0.0.1:6379&gt; zrange myzset 0 -1 1) &quot;baidu.com&quot;2) &quot;google.com&quot;3) &quot;360.com&quot; redis&#x6570;&#x636E;&#x7ED3;&#x6784; &#x2013; &#x54C8;&#x5E0C;&#x6700;&#x540E;&#x8981;&#x7ED9;&#x5927;&#x5BB6;&#x4ECB;&#x7ECD;&#x7684;&#x662F;hashes&#xFF0C;&#x5373;&#x54C8;&#x5E0C;&#x3002;&#x54C8;&#x5E0C;&#x662F;&#x4ECE;redis-2.0.0&#x7248;&#x672C;&#x4E4B;&#x540E;&#x624D;&#x6709;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3002;hashes&#x5B58;&#x7684;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x548C;&#x5B57;&#x7B26;&#x4E32;&#x503C;&#x4E4B;&#x95F4;&#x7684;&#x6620;&#x5C04;&#xFF0C;&#x6BD4;&#x5982;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x8981;&#x5B58;&#x50A8;&#x5176;&#x5168;&#x540D;&#x3001;&#x59D3;&#x6C0F;&#x3001;&#x5E74;&#x9F84;&#x7B49;&#x7B49;&#xFF0C;&#x5C31;&#x5F88;&#x9002;&#x5408;&#x4F7F;&#x7528;&#x54C8;&#x5E0C;&#x3002; &#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;12345678910111213141516171819202122//&#x5EFA;&#x7ACB;&#x54C8;&#x5E0C;&#xFF0C;&#x5E76;&#x8D4B;&#x503C;127.0.0.1:6379&gt; HMSET user:001 username antirez password P1pp0 age 34 OK//&#x5217;&#x51FA;&#x54C8;&#x5E0C;&#x7684;&#x5185;&#x5BB9;127.0.0.1:6379&gt; HGETALL user:001 1) &quot;username&quot;2) &quot;antirez&quot;3) &quot;password&quot;4) &quot;P1pp0&quot;5) &quot;age&quot;6) &quot;34&quot;//&#x66F4;&#x6539;&#x54C8;&#x5E0C;&#x4E2D;&#x7684;&#x67D0;&#x4E00;&#x4E2A;&#x503C;127.0.0.1:6379&gt; HSET user:001 password 12345 (integer) 0//&#x518D;&#x6B21;&#x5217;&#x51FA;&#x54C8;&#x5E0C;&#x7684;&#x5185;&#x5BB9;127.0.0.1:6379&gt; HGETALL user:001 1) &quot;username&quot;2) &quot;antirez&quot;3) &quot;password&quot;4) &quot;12345&quot;5) &quot;age&quot;6) &quot;34&quot; &#x6709;&#x5173;hashes&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x540C;&#x6837;&#x5F88;&#x4E30;&#x5BCC;&#xFF0C;&#x9700;&#x8981;&#x65F6;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x4ECE;&#x8FD9;&#x91CC;&#x67E5;&#x8BE2;&#x3002; redis&#x6301;&#x4E45;&#x5316; &#x2013; &#x4E24;&#x79CD;&#x65B9;&#x5F0F;redis&#x63D0;&#x4F9B;&#x4E86;&#x4E24;&#x79CD;&#x6301;&#x4E45;&#x5316;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5206;&#x522B;&#x662F;RDB&#xFF08;Redis DataBase&#xFF09;&#x548C;AOF&#xFF08;Append Only File&#xFF09;&#x3002;RDB&#xFF0C;&#x7B80;&#x800C;&#x8A00;&#x4E4B;&#xFF0C;&#x5C31;&#x662F;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x65F6;&#x95F4;&#x70B9;&#xFF0C;&#x5C06;redis&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x751F;&#x6210;&#x5FEB;&#x7167;&#x5E76;&#x5B58;&#x50A8;&#x5230;&#x78C1;&#x76D8;&#x7B49;&#x4ECB;&#x8D28;&#x4E0A;&#xFF1B;AOF&#xFF0C;&#x5219;&#x662F;&#x6362;&#x4E86;&#x4E00;&#x4E2A;&#x89D2;&#x5EA6;&#x6765;&#x5B9E;&#x73B0;&#x6301;&#x4E45;&#x5316;&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x5C06;redis&#x6267;&#x884C;&#x8FC7;&#x7684;&#x6240;&#x6709;&#x5199;&#x6307;&#x4EE4;&#x8BB0;&#x5F55;&#x4E0B;&#x6765;&#xFF0C;&#x5728;&#x4E0B;&#x6B21;redis&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x65F6;&#xFF0C;&#x53EA;&#x8981;&#x628A;&#x8FD9;&#x4E9B;&#x5199;&#x6307;&#x4EE4;&#x4ECE;&#x524D;&#x5230;&#x540E;&#x518D;&#x91CD;&#x590D;&#x6267;&#x884C;&#x4E00;&#x904D;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x6062;&#x590D;&#x4E86;&#x3002;&#x5176;&#x5B9E;RDB&#x548C;AOF&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#x4E5F;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#xFF0C;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5982;&#x679C;redis&#x91CD;&#x542F;&#x7684;&#x8BDD;&#xFF0C;&#x5219;&#x4F1A;&#x4F18;&#x5148;&#x91C7;&#x7528;AOF&#x65B9;&#x5F0F;&#x6765;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x6062;&#x590D;&#xFF0C;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;AOF&#x65B9;&#x5F0F;&#x7684;&#x6570;&#x636E;&#x6062;&#x590D;&#x5B8C;&#x6574;&#x5EA6;&#x66F4;&#x9AD8;&#x3002;&#x5982;&#x679C;&#x4F60;&#x6CA1;&#x6709;&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x4E5F;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x5173;&#x95ED;RDB&#x548C;AOF&#x65B9;&#x5F0F;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;redis&#x5C06;&#x53D8;&#x6210;&#x4E00;&#x4E2A;&#x7EAF;&#x5185;&#x5B58;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5C31;&#x50CF;memcache&#x4E00;&#x6837;&#x3002; redis&#x6301;&#x4E45;&#x5316; &#x2013; RDBRDB&#x65B9;&#x5F0F;&#xFF0C;&#x662F;&#x5C06;redis&#x67D0;&#x4E00;&#x65F6;&#x523B;&#x7684;&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;&#x5230;&#x78C1;&#x76D8;&#x4E2D;&#xFF0C;&#x662F;&#x4E00;&#x79CD;&#x5FEB;&#x7167;&#x5F0F;&#x7684;&#x6301;&#x4E45;&#x5316;&#x65B9;&#x6CD5;&#x3002;redis&#x5728;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x4F1A;&#x5148;&#x5C06;&#x6570;&#x636E;&#x5199;&#x5165;&#x5230;&#x4E00;&#x4E2A;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5F85;&#x6301;&#x4E45;&#x5316;&#x8FC7;&#x7A0B;&#x90FD;&#x7ED3;&#x675F;&#x4E86;&#xFF0C;&#x624D;&#x4F1A;&#x7528;&#x8FD9;&#x4E2A;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x66FF;&#x6362;&#x4E0A;&#x6B21;&#x6301;&#x4E45;&#x5316;&#x597D;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x6B63;&#x662F;&#x8FD9;&#x79CD;&#x7279;&#x6027;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x968F;&#x65F6;&#x6765;&#x8FDB;&#x884C;&#x5907;&#x4EFD;&#xFF0C;&#x56E0;&#x4E3A;&#x5FEB;&#x7167;&#x6587;&#x4EF6;&#x603B;&#x662F;&#x5B8C;&#x6574;&#x53EF;&#x7528;&#x7684;&#x3002;&#x5BF9;&#x4E8E;RDB&#x65B9;&#x5F0F;&#xFF0C;redis&#x4F1A;&#x5355;&#x72EC;&#x521B;&#x5EFA;&#xFF08;fork&#xFF09;&#x4E00;&#x4E2A;&#x5B50;&#x8FDB;&#x7A0B;&#x6765;&#x8FDB;&#x884C;&#x6301;&#x4E45;&#x5316;&#xFF0C;&#x800C;&#x4E3B;&#x8FDB;&#x7A0B;&#x662F;&#x4E0D;&#x4F1A;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;IO&#x64CD;&#x4F5C;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x786E;&#x4FDD;&#x4E86;redis&#x6781;&#x9AD8;&#x7684;&#x6027;&#x80FD;&#x3002;&#x5982;&#x679C;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x5927;&#x89C4;&#x6A21;&#x6570;&#x636E;&#x7684;&#x6062;&#x590D;&#xFF0C;&#x4E14;&#x5BF9;&#x4E8E;&#x6570;&#x636E;&#x6062;&#x590D;&#x7684;&#x5B8C;&#x6574;&#x6027;&#x4E0D;&#x662F;&#x975E;&#x5E38;&#x654F;&#x611F;&#xFF0C;&#x90A3;RDB&#x65B9;&#x5F0F;&#x8981;&#x6BD4;AOF&#x65B9;&#x5F0F;&#x66F4;&#x52A0;&#x7684;&#x9AD8;&#x6548;&#x3002;&#x867D;&#x7136;RDB&#x6709;&#x4E0D;&#x5C11;&#x4F18;&#x70B9;&#xFF0C;&#x4F46;&#x5B83;&#x7684;&#x7F3A;&#x70B9;&#x4E5F;&#x662F;&#x4E0D;&#x5BB9;&#x5FFD;&#x89C6;&#x7684;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5BF9;&#x6570;&#x636E;&#x7684;&#x5B8C;&#x6574;&#x6027;&#x975E;&#x5E38;&#x654F;&#x611F;&#xFF0C;&#x90A3;&#x4E48;RDB&#x65B9;&#x5F0F;&#x5C31;&#x4E0D;&#x592A;&#x9002;&#x5408;&#x4F60;&#xFF0C;&#x56E0;&#x4E3A;&#x5373;&#x4F7F;&#x4F60;&#x6BCF;5&#x5206;&#x949F;&#x90FD;&#x6301;&#x4E45;&#x5316;&#x4E00;&#x6B21;&#xFF0C;&#x5F53;redis&#x6545;&#x969C;&#x65F6;&#xFF0C;&#x4ECD;&#x7136;&#x4F1A;&#x6709;&#x8FD1;5&#x5206;&#x949F;&#x7684;&#x6570;&#x636E;&#x4E22;&#x5931;&#x3002;&#x6240;&#x4EE5;&#xFF0C;redis&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;&#x53E6;&#x4E00;&#x79CD;&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;&#xFF0C;&#x90A3;&#x5C31;&#x662F;AOF&#x3002; redis&#x6301;&#x4E45;&#x5316; &#x2013; AOFAOF&#xFF0C;&#x82F1;&#x6587;&#x662F;Append Only File&#xFF0C;&#x5373;&#x53EA;&#x5141;&#x8BB8;&#x8FFD;&#x52A0;&#x4E0D;&#x5141;&#x8BB8;&#x6539;&#x5199;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x5982;&#x524D;&#x9762;&#x4ECB;&#x7ECD;&#x7684;&#xFF0C;AOF&#x65B9;&#x5F0F;&#x662F;&#x5C06;&#x6267;&#x884C;&#x8FC7;&#x7684;&#x5199;&#x6307;&#x4EE4;&#x8BB0;&#x5F55;&#x4E0B;&#x6765;&#xFF0C;&#x5728;&#x6570;&#x636E;&#x6062;&#x590D;&#x65F6;&#x6309;&#x7167;&#x4ECE;&#x524D;&#x5230;&#x540E;&#x7684;&#x987A;&#x5E8F;&#x518D;&#x5C06;&#x6307;&#x4EE4;&#x90FD;&#x6267;&#x884C;&#x4E00;&#x904D;&#xFF0C;&#x5C31;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#x3002;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x914D;&#x7F6E;redis.conf&#x4E2D;&#x7684;appendonly yes&#x5C31;&#x53EF;&#x4EE5;&#x6253;&#x5F00;AOF&#x529F;&#x80FD;&#x3002;&#x5982;&#x679C;&#x6709;&#x5199;&#x64CD;&#x4F5C;&#xFF08;&#x5982;SET&#x7B49;&#xFF09;&#xFF0C;redis&#x5C31;&#x4F1A;&#x88AB;&#x8FFD;&#x52A0;&#x5230;AOF&#x6587;&#x4EF6;&#x7684;&#x672B;&#x5C3E;&#x3002;&#x9ED8;&#x8BA4;&#x7684;AOF&#x6301;&#x4E45;&#x5316;&#x7B56;&#x7565;&#x662F;&#x6BCF;&#x79D2;&#x949F;fsync&#x4E00;&#x6B21;&#xFF08;fsync&#x662F;&#x6307;&#x628A;&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x5199;&#x6307;&#x4EE4;&#x8BB0;&#x5F55;&#x5230;&#x78C1;&#x76D8;&#x4E2D;&#xFF09;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;redis&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x4FDD;&#x6301;&#x5F88;&#x597D;&#x7684;&#x5904;&#x7406;&#x6027;&#x80FD;&#xFF0C;&#x5373;&#x4F7F;redis&#x6545;&#x969C;&#xFF0C;&#x4E5F;&#x53EA;&#x4F1A;&#x4E22;&#x5931;&#x6700;&#x8FD1;1&#x79D2;&#x949F;&#x7684;&#x6570;&#x636E;&#x3002;&#x5982;&#x679C;&#x5728;&#x8FFD;&#x52A0;&#x65E5;&#x5FD7;&#x65F6;&#xFF0C;&#x6070;&#x597D;&#x9047;&#x5230;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x6EE1;&#x3001;inode&#x6EE1;&#x6216;&#x65AD;&#x7535;&#x7B49;&#x60C5;&#x51B5;&#x5BFC;&#x81F4;&#x65E5;&#x5FD7;&#x5199;&#x5165;&#x4E0D;&#x5B8C;&#x6574;&#xFF0C;&#x4E5F;&#x6CA1;&#x6709;&#x5173;&#x7CFB;&#xFF0C;redis&#x63D0;&#x4F9B;&#x4E86;redis-check-aof&#x5DE5;&#x5177;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x8FDB;&#x884C;&#x65E5;&#x5FD7;&#x4FEE;&#x590D;&#x3002;&#x56E0;&#x4E3A;&#x91C7;&#x7528;&#x4E86;&#x8FFD;&#x52A0;&#x65B9;&#x5F0F;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x505A;&#x4EFB;&#x4F55;&#x5904;&#x7406;&#x7684;&#x8BDD;&#xFF0C;AOF&#x6587;&#x4EF6;&#x4F1A;&#x53D8;&#x5F97;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#xFF0C;&#x4E3A;&#x6B64;&#xFF0C;redis&#x63D0;&#x4F9B;&#x4E86;AOF&#x6587;&#x4EF6;&#x91CD;&#x5199;&#xFF08;rewrite&#xFF09;&#x673A;&#x5236;&#xFF0C;&#x5373;&#x5F53;AOF&#x6587;&#x4EF6;&#x7684;&#x5927;&#x5C0F;&#x8D85;&#x8FC7;&#x6240;&#x8BBE;&#x5B9A;&#x7684;&#x9608;&#x503C;&#x65F6;&#xFF0C;redis&#x5C31;&#x4F1A;&#x542F;&#x52A8;AOF&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#x538B;&#x7F29;&#xFF0C;&#x53EA;&#x4FDD;&#x7559;&#x53EF;&#x4EE5;&#x6062;&#x590D;&#x6570;&#x636E;&#x7684;&#x6700;&#x5C0F;&#x6307;&#x4EE4;&#x96C6;&#x3002;&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#x6216;&#x8BB8;&#x66F4;&#x5F62;&#x8C61;&#xFF0C;&#x5047;&#x5982;&#x6211;&#x4EEC;&#x8C03;&#x7528;&#x4E86;100&#x6B21;INCR&#x6307;&#x4EE4;&#xFF0C;&#x5728;AOF&#x6587;&#x4EF6;&#x4E2D;&#x5C31;&#x8981;&#x5B58;&#x50A8;100&#x6761;&#x6307;&#x4EE4;&#xFF0C;&#x4F46;&#x8FD9;&#x660E;&#x663E;&#x662F;&#x5F88;&#x4F4E;&#x6548;&#x7684;&#xFF0C;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x628A;&#x8FD9;100&#x6761;&#x6307;&#x4EE4;&#x5408;&#x5E76;&#x6210;&#x4E00;&#x6761;SET&#x6307;&#x4EE4;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x91CD;&#x5199;&#x673A;&#x5236;&#x7684;&#x539F;&#x7406;&#x3002;&#x5728;&#x8FDB;&#x884C;AOF&#x91CD;&#x5199;&#x65F6;&#xFF0C;&#x4ECD;&#x7136;&#x662F;&#x91C7;&#x7528;&#x5148;&#x5199;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#xFF0C;&#x5168;&#x90E8;&#x5B8C;&#x6210;&#x540E;&#x518D;&#x66FF;&#x6362;&#x7684;&#x6D41;&#x7A0B;&#xFF0C;&#x6240;&#x4EE5;&#x65AD;&#x7535;&#x3001;&#x78C1;&#x76D8;&#x6EE1;&#x7B49;&#x95EE;&#x9898;&#x90FD;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;AOF&#x6587;&#x4EF6;&#x7684;&#x53EF;&#x7528;&#x6027;&#xFF0C;&#x8FD9;&#x70B9;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x653E;&#x5FC3;&#x3002;AOF&#x65B9;&#x5F0F;&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x597D;&#x5904;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x201C;&#x573A;&#x666F;&#x518D;&#x73B0;&#x201D;&#x6765;&#x8BF4;&#x660E;&#x3002;&#x67D0;&#x540C;&#x5B66;&#x5728;&#x64CD;&#x4F5C;redis&#x65F6;&#xFF0C;&#x4E0D;&#x5C0F;&#x5FC3;&#x6267;&#x884C;&#x4E86;FLUSHALL&#xFF0C;&#x5BFC;&#x81F4;redis&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5168;&#x90E8;&#x88AB;&#x6E05;&#x7A7A;&#x4E86;&#xFF0C;&#x8FD9;&#x662F;&#x5F88;&#x60B2;&#x5267;&#x7684;&#x4E8B;&#x60C5;&#x3002;&#x4E0D;&#x8FC7;&#x8FD9;&#x4E5F;&#x4E0D;&#x662F;&#x4E16;&#x754C;&#x672B;&#x65E5;&#xFF0C;&#x53EA;&#x8981;redis&#x914D;&#x7F6E;&#x4E86;AOF&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;&#xFF0C;&#x4E14;AOF&#x6587;&#x4EF6;&#x8FD8;&#x6CA1;&#x6709;&#x88AB;&#x91CD;&#x5199;&#xFF08;rewrite&#xFF09;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x7528;&#x6700;&#x5FEB;&#x7684;&#x901F;&#x5EA6;&#x6682;&#x505C;redis&#x5E76;&#x7F16;&#x8F91;AOF&#x6587;&#x4EF6;&#xFF0C;&#x5C06;&#x6700;&#x540E;&#x4E00;&#x884C;&#x7684;FLUSHALL&#x547D;&#x4EE4;&#x5220;&#x9664;&#xFF0C;&#x7136;&#x540E;&#x91CD;&#x542F;redis&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x6062;&#x590D;redis&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x5230;FLUSHALL&#x4E4B;&#x524D;&#x7684;&#x72B6;&#x6001;&#x4E86;&#x3002;&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x795E;&#x5947;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;AOF&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;&#x7684;&#x597D;&#x5904;&#x4E4B;&#x4E00;&#x3002;&#x4F46;&#x662F;&#x5982;&#x679C;AOF&#x6587;&#x4EF6;&#x5DF2;&#x7ECF;&#x88AB;&#x91CD;&#x5199;&#x4E86;&#xFF0C;&#x90A3;&#x5C31;&#x65E0;&#x6CD5;&#x901A;&#x8FC7;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x6765;&#x6062;&#x590D;&#x6570;&#x636E;&#x4E86;&#x3002;&#x867D;&#x7136;&#x4F18;&#x70B9;&#x591A;&#x591A;&#xFF0C;&#x4F46;AOF&#x65B9;&#x5F0F;&#x4E5F;&#x540C;&#x6837;&#x5B58;&#x5728;&#x7F3A;&#x9677;&#xFF0C;&#x6BD4;&#x5982;&#x5728;&#x540C;&#x6837;&#x6570;&#x636E;&#x89C4;&#x6A21;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;AOF&#x6587;&#x4EF6;&#x8981;&#x6BD4;RDB&#x6587;&#x4EF6;&#x7684;&#x4F53;&#x79EF;&#x5927;&#x3002;&#x800C;&#x4E14;&#xFF0C;AOF&#x65B9;&#x5F0F;&#x7684;&#x6062;&#x590D;&#x901F;&#x5EA6;&#x4E5F;&#x8981;&#x6162;&#x4E8E;RDB&#x65B9;&#x5F0F;&#x3002;&#x5982;&#x679C;&#x4F60;&#x76F4;&#x63A5;&#x6267;&#x884C;BGREWRITEAOF&#x547D;&#x4EE4;&#xFF0C;&#x90A3;&#x4E48;redis&#x4F1A;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x5168;&#x65B0;&#x7684;AOF&#x6587;&#x4EF6;&#xFF0C;&#x5176;&#x4E2D;&#x4FBF;&#x5305;&#x62EC;&#x4E86;&#x53EF;&#x4EE5;&#x6062;&#x590D;&#x73B0;&#x6709;&#x6570;&#x636E;&#x7684;&#x6700;&#x5C11;&#x7684;&#x547D;&#x4EE4;&#x96C6;&#x3002;&#x5982;&#x679C;&#x8FD0;&#x6C14;&#x6BD4;&#x8F83;&#x5DEE;&#xFF0C;AOF&#x6587;&#x4EF6;&#x51FA;&#x73B0;&#x4E86;&#x88AB;&#x5199;&#x574F;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x4E5F;&#x4E0D;&#x5FC5;&#x8FC7;&#x5206;&#x62C5;&#x5FE7;&#xFF0C;redis&#x5E76;&#x4E0D;&#x4F1A;&#x8D38;&#x7136;&#x52A0;&#x8F7D;&#x8FD9;&#x4E2A;&#x6709;&#x95EE;&#x9898;&#x7684;AOF&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x662F;&#x62A5;&#x9519;&#x9000;&#x51FA;&#x3002;&#x8FD9;&#x65F6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x6B65;&#x9AA4;&#x6765;&#x4FEE;&#x590D;&#x51FA;&#x9519;&#x7684;&#x6587;&#x4EF6;&#xFF1A;12341.&#x5907;&#x4EFD;&#x88AB;&#x5199;&#x574F;&#x7684;AOF&#x6587;&#x4EF6;2.&#x8FD0;&#x884C;redis-check-aof &#x2013;fix&#x8FDB;&#x884C;&#x4FEE;&#x590D;3.&#x7528;diff -u&#x6765;&#x770B;&#x4E0B;&#x4E24;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x5DEE;&#x5F02;&#xFF0C;&#x786E;&#x8BA4;&#x95EE;&#x9898;&#x70B9;4.&#x91CD;&#x542F;redis&#xFF0C;&#x52A0;&#x8F7D;&#x4FEE;&#x590D;&#x540E;&#x7684;AOF&#x6587;&#x4EF6; redis&#x6301;&#x4E45;&#x5316; &#x2013; AOF&#x91CD;&#x5199;AOF&#x91CD;&#x5199;&#x7684;&#x5185;&#x90E8;&#x8FD0;&#x884C;&#x539F;&#x7406;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x5FC5;&#x8981;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x3002;&#x5728;&#x91CD;&#x5199;&#x5373;&#x5C06;&#x5F00;&#x59CB;&#x4E4B;&#x9645;&#xFF0C;redis&#x4F1A;&#x521B;&#x5EFA;&#xFF08;fork&#xFF09;&#x4E00;&#x4E2A;&#x201C;&#x91CD;&#x5199;&#x5B50;&#x8FDB;&#x7A0B;&#x201D;&#xFF0C;&#x8FD9;&#x4E2A;&#x5B50;&#x8FDB;&#x7A0B;&#x4F1A;&#x9996;&#x5148;&#x8BFB;&#x53D6;&#x73B0;&#x6709;&#x7684;AOF&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x5305;&#x542B;&#x7684;&#x6307;&#x4EE4;&#x8FDB;&#x884C;&#x5206;&#x6790;&#x538B;&#x7F29;&#x5E76;&#x5199;&#x5165;&#x5230;&#x4E00;&#x4E2A;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x4E2D;&#x3002;&#x4E0E;&#x6B64;&#x540C;&#x65F6;&#xFF0C;&#x4E3B;&#x5DE5;&#x4F5C;&#x8FDB;&#x7A0B;&#x4F1A;&#x5C06;&#x65B0;&#x63A5;&#x6536;&#x5230;&#x7684;&#x5199;&#x6307;&#x4EE4;&#x4E00;&#x8FB9;&#x7D2F;&#x79EF;&#x5230;&#x5185;&#x5B58;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#xFF0C;&#x4E00;&#x8FB9;&#x7EE7;&#x7EED;&#x5199;&#x5165;&#x5230;&#x539F;&#x6709;&#x7684;AOF&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x505A;&#x662F;&#x4FDD;&#x8BC1;&#x539F;&#x6709;&#x7684;AOF&#x6587;&#x4EF6;&#x7684;&#x53EF;&#x7528;&#x6027;&#xFF0C;&#x907F;&#x514D;&#x5728;&#x91CD;&#x5199;&#x8FC7;&#x7A0B;&#x4E2D;&#x51FA;&#x73B0;&#x610F;&#x5916;&#x3002;&#x5F53;&#x201C;&#x91CD;&#x5199;&#x5B50;&#x8FDB;&#x7A0B;&#x201D;&#x5B8C;&#x6210;&#x91CD;&#x5199;&#x5DE5;&#x4F5C;&#x540E;&#xFF0C;&#x5B83;&#x4F1A;&#x7ED9;&#x7236;&#x8FDB;&#x7A0B;&#x53D1;&#x4E00;&#x4E2A;&#x4FE1;&#x53F7;&#xFF0C;&#x7236;&#x8FDB;&#x7A0B;&#x6536;&#x5230;&#x4FE1;&#x53F7;&#x540E;&#x5C31;&#x4F1A;&#x5C06;&#x5185;&#x5B58;&#x4E2D;&#x7F13;&#x5B58;&#x7684;&#x5199;&#x6307;&#x4EE4;&#x8FFD;&#x52A0;&#x5230;&#x65B0;AOF&#x6587;&#x4EF6;&#x4E2D;&#x3002;&#x5F53;&#x8FFD;&#x52A0;&#x7ED3;&#x675F;&#x540E;&#xFF0C;redis&#x5C31;&#x4F1A;&#x7528;&#x65B0;AOF&#x6587;&#x4EF6;&#x6765;&#x4EE3;&#x66FF;&#x65E7;AOF&#x6587;&#x4EF6;&#xFF0C;&#x4E4B;&#x540E;&#x518D;&#x6709;&#x65B0;&#x7684;&#x5199;&#x6307;&#x4EE4;&#xFF0C;&#x5C31;&#x90FD;&#x4F1A;&#x8FFD;&#x52A0;&#x5230;&#x65B0;&#x7684;AOF&#x6587;&#x4EF6;&#x4E2D;&#x4E86;&#x3002; redis&#x6301;&#x4E45;&#x5316; &#x2013; &#x5982;&#x4F55;&#x9009;&#x62E9;RDB&#x548C;AOF&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x9009;&#x62E9;RDB&#x8FD8;&#x662F;AOF&#xFF0C;&#x5B98;&#x65B9;&#x7684;&#x5EFA;&#x8BAE;&#x662F;&#x4E24;&#x4E2A;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#x3002;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x66F4;&#x53EF;&#x9760;&#x7684;&#x6301;&#x4E45;&#x5316;&#x65B9;&#x6848;&#x3002; redis&#x4E3B;&#x4ECE; &#x2013; &#x7528;&#x6CD5;&#x50CF;MySQL&#x4E00;&#x6837;&#xFF0C;redis&#x662F;&#x652F;&#x6301;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x4E5F;&#x652F;&#x6301;&#x4E00;&#x4E3B;&#x591A;&#x4ECE;&#x4EE5;&#x53CA;&#x591A;&#x7EA7;&#x4ECE;&#x7ED3;&#x6784;&#x3002; &#x4E3B;&#x4ECE;&#x7ED3;&#x6784;&#xFF0C;&#x4E00;&#x662F;&#x4E3A;&#x4E86;&#x7EAF;&#x7CB9;&#x7684;&#x5197;&#x4F59;&#x5907;&#x4EFD;&#xFF0C;&#x4E8C;&#x662F;&#x4E3A;&#x4E86;&#x63D0;&#x5347;&#x8BFB;&#x6027;&#x80FD;&#xFF0C;&#x6BD4;&#x5982;&#x5F88;&#x6D88;&#x8017;&#x6027;&#x80FD;&#x7684;SORT&#x5C31;&#x53EF;&#x4EE5;&#x7531;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x6765;&#x627F;&#x62C5;&#x3002; redis&#x7684;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x662F;&#x5F02;&#x6B65;&#x8FDB;&#x884C;&#x7684;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x4E3B;&#x903B;&#x8F91;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x964D;&#x4F4E;redis&#x7684;&#x5904;&#x7406;&#x6027;&#x80FD;&#x3002; &#x4E3B;&#x4ECE;&#x67B6;&#x6784;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x5173;&#x95ED;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x7684;&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;&#x529F;&#x80FD;&#xFF0C;&#x53EA;&#x8BA9;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x6301;&#x4E45;&#x5316;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5904;&#x7406;&#x6027;&#x80FD;&#x3002; &#x5728;&#x4E3B;&#x4ECE;&#x67B6;&#x6784;&#x4E2D;&#xFF0C;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x901A;&#x5E38;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;&#x53EA;&#x8BFB;&#x6A21;&#x5F0F;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7684;&#x6570;&#x636E;&#x88AB;&#x8BEF;&#x4FEE;&#x6539;&#x3002;&#x4F46;&#x662F;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x63A5;&#x53D7;CONFIG&#x7B49;&#x6307;&#x4EE4;&#xFF0C;&#x6240;&#x4EE5;&#x8FD8;&#x662F;&#x4E0D;&#x5E94;&#x8BE5;&#x5C06;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x76F4;&#x63A5;&#x66B4;&#x9732;&#x5230;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#x7F51;&#x7EDC;&#x73AF;&#x5883;&#x4E2D;&#x3002;&#x5982;&#x679C;&#x5FC5;&#x987B;&#x5982;&#x6B64;&#xFF0C;&#x90A3;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x7ED9;&#x91CD;&#x8981;&#x6307;&#x4EE4;&#x8FDB;&#x884C;&#x91CD;&#x547D;&#x540D;&#xFF0C;&#x6765;&#x907F;&#x514D;&#x547D;&#x4EE4;&#x88AB;&#x5916;&#x4EBA;&#x8BEF;&#x6267;&#x884C;&#x3002; redis&#x4E3B;&#x4ECE; &#x2013; &#x540C;&#x6B65;&#x539F;&#x7406;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x4F1A;&#x5411;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x51FA;SYNC&#x6307;&#x4EE4;&#xFF0C;&#x5F53;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x5230;&#x6B64;&#x547D;&#x4EE4;&#x540E;&#xFF0C;&#x5C31;&#x4F1A;&#x8C03;&#x7528;BGSAVE&#x6307;&#x4EE4;&#x6765;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5B50;&#x8FDB;&#x7A0B;&#x4E13;&#x95E8;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;&#x5DE5;&#x4F5C;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5C06;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x7684;&#x6570;&#x636E;&#x5199;&#x5165;RDB&#x6587;&#x4EF6;&#x4E2D;&#x3002;&#x5728;&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;&#x671F;&#x95F4;&#xFF0C;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x5C06;&#x6267;&#x884C;&#x7684;&#x5199;&#x6307;&#x4EE4;&#x90FD;&#x7F13;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x3002; &#x5728;BGSAVE&#x6307;&#x4EE4;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x4F1A;&#x5C06;&#x6301;&#x4E45;&#x5316;&#x597D;&#x7684;RDB&#x6587;&#x4EF6;&#x53D1;&#x9001;&#x7ED9;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x5230;&#x6B64;&#x6587;&#x4EF6;&#x540E;&#x4F1A;&#x5C06;&#x5176;&#x5B58;&#x50A8;&#x5230;&#x78C1;&#x76D8;&#x4E0A;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5C06;&#x5176;&#x8BFB;&#x53D6;&#x5230;&#x5185;&#x5B58;&#x4E2D;&#x3002;&#x8FD9;&#x4E2A;&#x52A8;&#x4F5C;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x4F1A;&#x5C06;&#x8FD9;&#x6BB5;&#x65F6;&#x95F4;&#x7F13;&#x5B58;&#x7684;&#x5199;&#x6307;&#x4EE4;&#x518D;&#x4EE5;redis&#x534F;&#x8BAE;&#x7684;&#x683C;&#x5F0F;&#x53D1;&#x9001;&#x7ED9;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x3002; &#x53E6;&#x5916;&#xFF0C;&#x8981;&#x8BF4;&#x7684;&#x4E00;&#x70B9;&#x662F;&#xFF0C;&#x5373;&#x4F7F;&#x6709;&#x591A;&#x4E2A;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x540C;&#x65F6;&#x53D1;&#x6765;SYNC&#x6307;&#x4EE4;&#xFF0C;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x4E5F;&#x53EA;&#x4F1A;&#x6267;&#x884C;&#x4E00;&#x6B21;BGSAVE&#xFF0C;&#x7136;&#x540E;&#x628A;&#x6301;&#x4E45;&#x5316;&#x597D;&#x7684;RDB&#x6587;&#x4EF6;&#x53D1;&#x7ED9;&#x591A;&#x4E2A;&#x4E0B;&#x6E38;&#x3002;&#x5728;redis2.8&#x7248;&#x672C;&#x4E4B;&#x524D;&#xFF0C;&#x5982;&#x679C;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x4E0E;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x56E0;&#x67D0;&#x4E9B;&#x539F;&#x56E0;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x7684;&#x8BDD;&#xFF0C;&#x90FD;&#x4F1A;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x4E3B;&#x4ECE;&#x4E4B;&#x95F4;&#x7684;&#x5168;&#x91CF;&#x7684;&#x6570;&#x636E;&#x540C;&#x6B65;&#xFF1B;&#x800C;&#x5728;2.8&#x7248;&#x672C;&#x4E4B;&#x540E;&#xFF0C;redis&#x652F;&#x6301;&#x4E86;&#x6548;&#x7387;&#x66F4;&#x9AD8;&#x7684;&#x589E;&#x91CF;&#x540C;&#x6B65;&#x7B56;&#x7565;&#xFF0C;&#x8FD9;&#x5927;&#x5927;&#x964D;&#x4F4E;&#x4E86;&#x8FDE;&#x63A5;&#x65AD;&#x5F00;&#x7684;&#x6062;&#x590D;&#x6210;&#x672C;&#x3002; &#x4E3B;&#x670D;&#x52A1;&#x5668;&#x4F1A;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#x5B58;&#x50A8;&#x7740;&#x5C06;&#x8981;&#x53D1;&#x7ED9;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5185;&#x5BB9;&#x3002;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x5728;&#x4E0E;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x51FA;&#x73B0;&#x7F51;&#x7EDC;&#x77AC;&#x65AD;&#x4E4B;&#x540E;&#xFF0C;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x4F1A;&#x5C1D;&#x8BD5;&#x518D;&#x6B21;&#x4E0E;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x8FDE;&#x63A5;&#xFF0C;&#x4E00;&#x65E6;&#x8FDE;&#x63A5;&#x6210;&#x529F;&#xFF0C;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x5C31;&#x4F1A;&#x628A;&#x201C;&#x5E0C;&#x671B;&#x540C;&#x6B65;&#x7684;&#x4E3B;&#x670D;&#x52A1;&#x5668;ID&#x201D;&#x548C;&#x201C;&#x5E0C;&#x671B;&#x8BF7;&#x6C42;&#x7684;&#x6570;&#x636E;&#x7684;&#x504F;&#x79FB;&#x4F4D;&#x7F6E;&#xFF08;replication offset&#xFF09;&#x201D;&#x53D1;&#x9001;&#x51FA;&#x53BB;&#x3002;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x6536;&#x5230;&#x8FD9;&#x6837;&#x7684;&#x540C;&#x6B65;&#x8BF7;&#x6C42;&#x540E;&#xFF0C;&#x9996;&#x5148;&#x4F1A;&#x9A8C;&#x8BC1;&#x4E3B;&#x670D;&#x52A1;&#x5668;ID&#x662F;&#x5426;&#x548C;&#x81EA;&#x5DF1;&#x7684;ID&#x5339;&#x914D;&#xFF0C;&#x5176;&#x6B21;&#x4F1A;&#x68C0;&#x67E5;&#x201C;&#x8BF7;&#x6C42;&#x7684;&#x504F;&#x79FB;&#x4F4D;&#x7F6E;&#x201D;&#x662F;&#x5426;&#x5B58;&#x5728;&#x4E8E;&#x81EA;&#x5DF1;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x4E24;&#x8005;&#x90FD;&#x6EE1;&#x8DB3;&#x7684;&#x8BDD;&#xFF0C;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x5C31;&#x4F1A;&#x5411;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x589E;&#x91CF;&#x5185;&#x5BB9;&#x3002; &#x589E;&#x91CF;&#x540C;&#x6B65;&#x529F;&#x80FD;&#xFF0C;&#x9700;&#x8981;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x652F;&#x6301;&#x5168;&#x65B0;&#x7684;PSYNC&#x6307;&#x4EE4;&#x3002;&#x8FD9;&#x4E2A;&#x6307;&#x4EE4;&#xFF0C;&#x53EA;&#x6709;&#x5728;redis-2.8&#x4E4B;&#x540E;&#x624D;&#x5177;&#x6709;&#x3002; redis&#x7684;&#x4E8B;&#x52A1;&#x5904;&#x7406;&#x4F17;&#x6240;&#x5468;&#x77E5;&#xFF0C;&#x4E8B;&#x52A1;&#x662F;&#x6307;&#x201C;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x52A8;&#x4F5C;&#xFF0C;&#x8981;&#x4E48;&#x5168;&#x90E8;&#x6267;&#x884C;&#xFF0C;&#x8981;&#x4E48;&#x4EC0;&#x4E48;&#x4E5F;&#x6CA1;&#x6709;&#x505A;&#x201D;&#x3002; &#x5728;&#x804A;redis&#x4E8B;&#x52A1;&#x5904;&#x7406;&#x4E4B;&#x524D;&#xFF0C;&#x8981;&#x5148;&#x548C;&#x5927;&#x5BB6;&#x4ECB;&#x7ECD;&#x56DB;&#x4E2A;redis&#x6307;&#x4EE4;&#xFF0C;&#x5373;MULTI&#x3001;EXEC&#x3001;DISCARD&#x3001;WATCH&#x3002;&#x8FD9;&#x56DB;&#x4E2A;&#x6307;&#x4EE4;&#x6784;&#x6210;&#x4E86;redis&#x4E8B;&#x52A1;&#x5904;&#x7406;&#x7684;&#x57FA;&#x7840;&#x3002; 1.MULTI&#x7528;&#x6765;&#x7EC4;&#x88C5;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#xFF1B;2.EXEC&#x7528;&#x6765;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#xFF1B;3.DISCARD&#x7528;&#x6765;&#x53D6;&#x6D88;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#xFF1B;4.WATCH&#x7528;&#x6765;&#x76D1;&#x89C6;&#x4E00;&#x4E9B;key&#xFF0C;&#x4E00;&#x65E6;&#x8FD9;&#x4E9B;key&#x5728;&#x4E8B;&#x52A1;&#x6267;&#x884C;&#x4E4B;&#x524D;&#x88AB;&#x6539;&#x53D8;&#xFF0C;&#x5219;&#x53D6;&#x6D88;&#x4E8B;&#x52A1;&#x7684;&#x6267;&#x884C;&#x3002; &#x7EB8;&#x4E0A;&#x5F97;&#x6765;&#x7EC8;&#x89C9;&#x6D45;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E2A;MULTI&#x548C;EXEC&#x7684;&#x4F8B;&#x5B50;&#xFF1A;123456789101112131415redis&gt; MULTI //&#x6807;&#x8BB0;&#x4E8B;&#x52A1;&#x5F00;&#x59CB;OKredis&gt; INCR user_id //&#x591A;&#x6761;&#x547D;&#x4EE4;&#x6309;&#x987A;&#x5E8F;&#x5165;&#x961F;QUEUEDredis&gt; INCR user_idQUEUEDredis&gt; INCR user_idQUEUEDredis&gt; PINGQUEUEDredis&gt; EXEC //&#x6267;&#x884C;1) (integer) 12) (integer) 23) (integer) 34) PONG &#x5728;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x5230;&#x4E86;QUEUED&#x7684;&#x5B57;&#x6837;&#xFF0C;&#x8FD9;&#x8868;&#x793A;&#x6211;&#x4EEC;&#x5728;&#x7528;MULTI&#x7EC4;&#x88C5;&#x4E8B;&#x52A1;&#x65F6;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x90FD;&#x4F1A;&#x8FDB;&#x5165;&#x5230;&#x5185;&#x5B58;&#x961F;&#x5217;&#x4E2D;&#x7F13;&#x5B58;&#x8D77;&#x6765;&#xFF0C;&#x5982;&#x679C;&#x51FA;&#x73B0;QUEUED&#x5219;&#x8868;&#x793A;&#x6211;&#x4EEC;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x6210;&#x529F;&#x63D2;&#x5165;&#x4E86;&#x7F13;&#x5B58;&#x961F;&#x5217;&#xFF0C;&#x5728;&#x5C06;&#x6765;&#x6267;&#x884C;EXEC&#x65F6;&#xFF0C;&#x8FD9;&#x4E9B;&#x88AB;QUEUED&#x7684;&#x547D;&#x4EE4;&#x90FD;&#x4F1A;&#x88AB;&#x7EC4;&#x88C5;&#x6210;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x6765;&#x6267;&#x884C;&#x3002; &#x5BF9;&#x4E8E;&#x4E8B;&#x52A1;&#x7684;&#x6267;&#x884C;&#x6765;&#x8BF4;&#xFF0C;&#x5982;&#x679C;redis&#x5F00;&#x542F;&#x4E86;AOF&#x6301;&#x4E45;&#x5316;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;&#x4E00;&#x65E6;&#x4E8B;&#x52A1;&#x88AB;&#x6210;&#x529F;&#x6267;&#x884C;&#xFF0C;&#x4E8B;&#x52A1;&#x4E2D;&#x7684;&#x547D;&#x4EE4;&#x5C31;&#x4F1A;&#x901A;&#x8FC7;write&#x547D;&#x4EE4;&#x4E00;&#x6B21;&#x6027;&#x5199;&#x5230;&#x78C1;&#x76D8;&#x4E2D;&#x53BB;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x5411;&#x78C1;&#x76D8;&#x4E2D;&#x5199;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x6070;&#x597D;&#x51FA;&#x73B0;&#x65AD;&#x7535;&#x3001;&#x786C;&#x4EF6;&#x6545;&#x969C;&#x7B49;&#x95EE;&#x9898;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x53EA;&#x6709;&#x90E8;&#x5206;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x4E86;AOF&#x6301;&#x4E45;&#x5316;&#xFF0C;&#x8FD9;&#x65F6;AOF&#x6587;&#x4EF6;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x4E0D;&#x5B8C;&#x6574;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x8FD9;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;redis-check-aof&#x5DE5;&#x5177;&#x6765;&#x4FEE;&#x590D;&#x8FD9;&#x4E00;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x4E2A;&#x5DE5;&#x5177;&#x4F1A;&#x5C06;AOF&#x6587;&#x4EF6;&#x4E2D;&#x4E0D;&#x5B8C;&#x6574;&#x7684;&#x4FE1;&#x606F;&#x79FB;&#x9664;&#xFF0C;&#x786E;&#x4FDD;AOF&#x6587;&#x4EF6;&#x5B8C;&#x6574;&#x53EF;&#x7528;&#x3002; &#x6709;&#x5173;&#x4E8B;&#x52A1;&#xFF0C;&#x5927;&#x5BB6;&#x7ECF;&#x5E38;&#x4F1A;&#x9047;&#x5230;&#x7684;&#x662F;&#x4E24;&#x7C7B;&#x9519;&#x8BEF;&#xFF1A; 1.&#x8C03;&#x7528;EXEC&#x4E4B;&#x524D;&#x7684;&#x9519;&#x8BEF;2.&#x8C03;&#x7528;EXEC&#x4E4B;&#x540E;&#x7684;&#x9519;&#x8BEF; &#x201C;&#x8C03;&#x7528;EXEC&#x4E4B;&#x524D;&#x7684;&#x9519;&#x8BEF;&#x201D;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x662F;&#x7531;&#x4E8E;&#x8BED;&#x6CD5;&#x6709;&#x8BEF;&#x5BFC;&#x81F4;&#x7684;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x65F6;&#x7531;&#x4E8E;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x5BFC;&#x81F4;&#x7684;&#x3002;&#x53EA;&#x8981;&#x51FA;&#x73B0;&#x67D0;&#x4E2A;&#x547D;&#x4EE4;&#x65E0;&#x6CD5;&#x6210;&#x529F;&#x5199;&#x5165;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x7684;&#x60C5;&#x51B5;&#xFF0C;redis&#x90FD;&#x4F1A;&#x8FDB;&#x884C;&#x8BB0;&#x5F55;&#xFF0C;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x8C03;&#x7528;EXEC&#x65F6;&#xFF0C;redis&#x4F1A;&#x62D2;&#x7EDD;&#x6267;&#x884C;&#x8FD9;&#x4E00;&#x4E8B;&#x52A1;&#x3002;&#xFF08;&#x8FD9;&#x65F6;2.6.5&#x7248;&#x672C;&#x4E4B;&#x540E;&#x7684;&#x7B56;&#x7565;&#x3002;&#x5728;2.6.5&#x4E4B;&#x524D;&#x7684;&#x7248;&#x672C;&#x4E2D;&#xFF0C;redis&#x4F1A;&#x5FFD;&#x7565;&#x90A3;&#x4E9B;&#x5165;&#x961F;&#x5931;&#x8D25;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x53EA;&#x6267;&#x884C;&#x90A3;&#x4E9B;&#x5165;&#x961F;&#x6210;&#x529F;&#x7684;&#x547D;&#x4EE4;&#xFF09;&#x3002;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x8FD9;&#x6837;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;123456789127.0.0.1:6379&gt; multiOK127.0.0.1:6379&gt; haha //&#x4E00;&#x4E2A;&#x660E;&#x663E;&#x9519;&#x8BEF;&#x7684;&#x6307;&#x4EE4;(error) ERR unknown command &apos;haha&apos;127.0.0.1:6379&gt; pingQUEUED127.0.0.1:6379&gt; exec//redis&#x65E0;&#x60C5;&#x7684;&#x62D2;&#x7EDD;&#x4E86;&#x4E8B;&#x52A1;&#x7684;&#x6267;&#x884C;&#xFF0C;&#x539F;&#x56E0;&#x662F;&#x201C;&#x4E4B;&#x524D;&#x51FA;&#x73B0;&#x4E86;&#x9519;&#x8BEF;&#x201D;(error) EXECABORT Transaction discarded because of previous errors. &#x800C;&#x5BF9;&#x4E8E;&#x201C;&#x8C03;&#x7528;EXEC&#x4E4B;&#x540E;&#x7684;&#x9519;&#x8BEF;&#x201D;&#xFF0C;redis&#x5219;&#x91C7;&#x53D6;&#x4E86;&#x5B8C;&#x5168;&#x4E0D;&#x540C;&#x7684;&#x7B56;&#x7565;&#xFF0C;&#x5373;redis&#x4E0D;&#x4F1A;&#x7406;&#x776C;&#x8FD9;&#x4E9B;&#x9519;&#x8BEF;&#xFF0C;&#x800C;&#x662F;&#x7EE7;&#x7EED;&#x5411;&#x4E0B;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x4E2D;&#x7684;&#x5176;&#x4ED6;&#x547D;&#x4EE4;&#x3002;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#xFF0C;&#x5BF9;&#x4E8E;&#x5E94;&#x7528;&#x5C42;&#x9762;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x5E76;&#x4E0D;&#x662F;redis&#x81EA;&#x8EAB;&#x9700;&#x8981;&#x8003;&#x8651;&#x548C;&#x5904;&#x7406;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x4E2D;&#x5982;&#x679C;&#x67D0;&#x4E00;&#x6761;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x5931;&#x8D25;&#xFF0C;&#x5E76;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x5176;&#x4ED6;&#x547D;&#x4EE4;&#x7684;&#x6267;&#x884C;&#x3002;&#x6211;&#x4EEC;&#x4E5F;&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A; 123456789101112131415127.0.0.1:6379&gt; multiOK127.0.0.1:6379&gt; set age 23QUEUED//age&#x4E0D;&#x662F;&#x96C6;&#x5408;&#xFF0C;&#x6240;&#x4EE5;&#x5982;&#x4E0B;&#x662F;&#x4E00;&#x6761;&#x660E;&#x663E;&#x9519;&#x8BEF;&#x7684;&#x6307;&#x4EE4;127.0.0.1:6379&gt; sadd age 15 QUEUED127.0.0.1:6379&gt; set age 29QUEUED127.0.0.1:6379&gt; exec //&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x65F6;&#xFF0C;redis&#x4E0D;&#x4F1A;&#x7406;&#x776C;&#x7B2C;2&#x6761;&#x6307;&#x4EE4;&#x6267;&#x884C;&#x9519;&#x8BEF;1) OK2) (error) WRONGTYPE Operation against a key holding the wrong kind of value3) OK127.0.0.1:6379&gt; get age&quot;29&quot; //&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x7B2C;3&#x6761;&#x6307;&#x4EE4;&#x88AB;&#x6210;&#x529F;&#x6267;&#x884C;&#x4E86; &#x597D;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x8BF4;&#x8BF4;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x6307;&#x4EE4;&#x201C;WATCH&#x201D;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x597D;&#x7528;&#x7684;&#x6307;&#x4EE4;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x7C7B;&#x4F3C;&#x4E8E;&#x201C;&#x4E50;&#x89C2;&#x9501;&#x201D;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x5373;CAS&#xFF08;check and set&#xFF09;&#x3002; WATCH&#x672C;&#x8EAB;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x201C;&#x76D1;&#x89C6;key&#x662F;&#x5426;&#x88AB;&#x6539;&#x52A8;&#x8FC7;&#x201D;&#xFF0C;&#x800C;&#x4E14;&#x652F;&#x6301;&#x540C;&#x65F6;&#x76D1;&#x89C6;&#x591A;&#x4E2A;key&#xFF0C;&#x53EA;&#x8981;&#x8FD8;&#x6CA1;&#x771F;&#x6B63;&#x89E6;&#x53D1;&#x4E8B;&#x52A1;&#xFF0C;WATCH&#x90FD;&#x4F1A;&#x5C3D;&#x804C;&#x5C3D;&#x8D23;&#x7684;&#x76D1;&#x89C6;&#xFF0C;&#x4E00;&#x65E6;&#x53D1;&#x73B0;&#x67D0;&#x4E2A;key&#x88AB;&#x4FEE;&#x6539;&#x4E86;&#xFF0C;&#x5728;&#x6267;&#x884C;EXEC&#x65F6;&#x5C31;&#x4F1A;&#x8FD4;&#x56DE;nil&#xFF0C;&#x8868;&#x793A;&#x4E8B;&#x52A1;&#x65E0;&#x6CD5;&#x89E6;&#x53D1;&#x3002; 1234567891011121314127.0.0.1:6379&gt; set age 23OK127.0.0.1:6379&gt; watch age //&#x5F00;&#x59CB;&#x76D1;&#x89C6;ageOK127.0.0.1:6379&gt; set age 24 //&#x5728;EXEC&#x4E4B;&#x524D;&#xFF0C;age&#x7684;&#x503C;&#x88AB;&#x4FEE;&#x6539;&#x4E86;OK127.0.0.1:6379&gt; multiOK127.0.0.1:6379&gt; set age 25QUEUED127.0.0.1:6379&gt; get ageQUEUED127.0.0.1:6379&gt; exec //&#x89E6;&#x53D1;EXEC(nil) //&#x4E8B;&#x52A1;&#x65E0;&#x6CD5;&#x88AB;&#x6267;&#x884C; redis&#x914D;&#x7F6E; &#x2013; &#x7B80;&#x4ECB;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x542F;&#x52A8;redis-server&#x65F6;&#x6307;&#x5B9A;&#x5E94;&#x8BE5;&#x52A0;&#x8F7D;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x65B9;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A; 1$ ./redis-server /path/to/redis.conf &#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x6765;&#x8BB2;&#x89E3;&#x4E0B;redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x5404;&#x4E2A;&#x914D;&#x7F6E;&#x9879;&#x7684;&#x542B;&#x4E49;&#xFF0C;&#x6CE8;&#x610F;&#xFF0C;&#x672C;&#x6587;&#x662F;&#x57FA;&#x4E8E;redis-2.8.4&#x7248;&#x672C;&#x8FDB;&#x884C;&#x8BB2;&#x89E3;&#x7684;&#x3002;redis&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;redis.conf&#x6587;&#x4EF6;&#xFF0C;&#x8DB3;&#x6709;700+&#x884C;&#xFF0C;&#x5176;&#x4E2D;100&#x591A;&#x884C;&#x4E3A;&#x6709;&#x6548;&#x914D;&#x7F6E;&#x884C;&#xFF0C;&#x53E6;&#x5916;&#x7684;600&#x591A;&#x884C;&#x4E3A;&#x6CE8;&#x91CA;&#x8BF4;&#x660E;&#x3002;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x5F00;&#x5934;&#x90E8;&#x5206;&#xFF0C;&#x9996;&#x5148;&#x660E;&#x786E;&#x4E86;&#x4E00;&#x4E9B;&#x5EA6;&#x91CF;&#x5355;&#x4F4D;&#xFF1A; 123456# 1k =&gt; 1000 bytes# 1kb =&gt; 1024 bytes# 1m =&gt; 1000000 bytes# 1mb =&gt; 1024*1024 bytes# 1g =&gt; 1000000000 bytes# 1gb =&gt; 1024*1024*1024 bytes &#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;redis&#x914D;&#x7F6E;&#x4E2D;&#x5BF9;&#x5355;&#x4F4D;&#x7684;&#x5927;&#x5C0F;&#x5199;&#x4E0D;&#x654F;&#x611F;&#xFF0C;1GB&#x3001;1Gb&#x548C;1gB&#x90FD;&#x662F;&#x76F8;&#x540C;&#x7684;&#x3002;&#x7531;&#x6B64;&#x4E5F;&#x8BF4;&#x660E;&#xFF0C;redis&#x53EA;&#x652F;&#x6301;bytes&#xFF0C;&#x4E0D;&#x652F;&#x6301;bit&#x5355;&#x4F4D;&#x3002;redis&#x652F;&#x6301;&#x201C;&#x4E3B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x5F15;&#x5165;&#x5916;&#x90E8;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x201D;&#xFF0C;&#x5F88;&#x50CF;C/C++&#x4E2D;&#x7684;include&#x6307;&#x4EE4;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;1include /path/to/other.conf &#x5982;&#x679C;&#x4F60;&#x770B;&#x8FC7;redis&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x8FD8;&#x662F;&#x5F88;&#x6709;&#x6761;&#x7406;&#x7684;&#x3002;redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x88AB;&#x5206;&#x6210;&#x4E86;&#x51E0;&#x5927;&#x5757;&#x533A;&#x57DF;&#xFF0C;&#x5B83;&#x4EEC;&#x5206;&#x522B;&#x662F;&#xFF1A;1234567891.&#x901A;&#x7528;&#xFF08;general&#xFF09;2.&#x5FEB;&#x7167;&#xFF08;snapshotting&#xFF09;3.&#x590D;&#x5236;&#xFF08;replication&#xFF09;4.&#x5B89;&#x5168;&#xFF08;security&#xFF09;5.&#x9650;&#x5236;&#xFF08;limits)6.&#x8FFD;&#x52A0;&#x6A21;&#x5F0F;&#xFF08;append only mode)7.LUA&#x811A;&#x672C;&#xFF08;lua scripting)8.&#x6162;&#x65E5;&#x5FD7;&#xFF08;slow log)9.&#x4E8B;&#x4EF6;&#x901A;&#x77E5;&#xFF08;event notification&#xFF09; redis&#x914D;&#x7F6E; -&#x901A;&#x7528;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;redis&#x5E76;&#x4E0D;&#x662F;&#x4EE5;daemon&#x5F62;&#x5F0F;&#x6765;&#x8FD0;&#x884C;&#x7684;&#x3002;&#x901A;&#x8FC7;daemonize&#x914D;&#x7F6E;&#x9879;&#x53EF;&#x4EE5;&#x63A7;&#x5236;redis&#x7684;&#x8FD0;&#x884C;&#x5F62;&#x5F0F;&#xFF0C;&#x5982;&#x679C;&#x6539;&#x4E3A;yes&#xFF0C;&#x90A3;&#x4E48;redis&#x5C31;&#x4F1A;&#x4EE5;daemon&#x5F62;&#x5F0F;&#x8FD0;&#x884C;&#xFF1A;1daemonize no &#x5F53;&#x4EE5;daemon&#x5F62;&#x5F0F;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;redis&#x4F1A;&#x751F;&#x6210;&#x4E00;&#x4E2A;pid&#x6587;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F1A;&#x751F;&#x6210;&#x5728;/var/run/redis.pid&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;pidfile&#x6765;&#x6307;&#x5B9A;pid&#x6587;&#x4EF6;&#x751F;&#x6210;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;1pidfile /path/to/redis.pid &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;redis&#x4F1A;&#x54CD;&#x5E94;&#x672C;&#x673A;&#x6240;&#x6709;&#x53EF;&#x7528;&#x7F51;&#x5361;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x3002;&#x5F53;&#x7136;&#xFF0C;redis&#x5141;&#x8BB8;&#x4F60;&#x901A;&#x8FC7;bind&#x914D;&#x7F6E;&#x9879;&#x6765;&#x6307;&#x5B9A;&#x8981;&#x7ED1;&#x5B9A;&#x7684;IP&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;1bind 192.168.1.2 10.8.4.2 redis&#x7684;&#x9ED8;&#x8BA4;&#x670D;&#x52A1;&#x7AEF;&#x53E3;&#x662F;6379&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;port&#x914D;&#x7F6E;&#x9879;&#x6765;&#x4FEE;&#x6539;&#x3002;&#x5982;&#x679C;&#x7AEF;&#x53E3;&#x8BBE;&#x7F6E;&#x4E3A;0&#x7684;&#x8BDD;&#xFF0C;redis&#x4FBF;&#x4E0D;&#x4F1A;&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x4E86;&#x3002;1port 6379 &#x6709;&#x4E9B;&#x540C;&#x5B66;&#x4F1A;&#x95EE;&#x201C;&#x5982;&#x679C;redis&#x4E0D;&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#xFF0C;&#x8FD8;&#x600E;&#x4E48;&#x4E0E;&#x5916;&#x754C;&#x901A;&#x4FE1;&#x5462;&#x201D;&#xFF0C;&#x5176;&#x5B9E;redis&#x8FD8;&#x652F;&#x6301;&#x901A;&#x8FC7;unix socket&#x65B9;&#x5F0F;&#x6765;&#x63A5;&#x6536;&#x8BF7;&#x6C42;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;unixsocket&#x914D;&#x7F6E;&#x9879;&#x6765;&#x6307;&#x5B9A;unix socket&#x6587;&#x4EF6;&#x7684;&#x8DEF;&#x5F84;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;unixsocketperm&#x6765;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;&#x3002;12unixsocket /tmp/redis.sockunixsocketperm 755 &#x5F53;&#x4E00;&#x4E2A;redis-client&#x4E00;&#x76F4;&#x6CA1;&#x6709;&#x8BF7;&#x6C42;&#x53D1;&#x5411;server&#x7AEF;&#xFF0C;&#x90A3;&#x4E48;server&#x7AEF;&#x6709;&#x6743;&#x4E3B;&#x52A8;&#x5173;&#x95ED;&#x8FD9;&#x4E2A;&#x8FDE;&#x63A5;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;timeout&#x6765;&#x8BBE;&#x7F6E;&#x201C;&#x7A7A;&#x95F2;&#x8D85;&#x65F6;&#x65F6;&#x9650;&#x201D;&#xFF0C;0&#x8868;&#x793A;&#x6C38;&#x4E0D;&#x5173;&#x95ED;&#x3002;1timeout 0 TCP&#x8FDE;&#x63A5;&#x4FDD;&#x6D3B;&#x7B56;&#x7565;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;tcp-keepalive&#x914D;&#x7F6E;&#x9879;&#x6765;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#xFF0C;&#x5355;&#x4F4D;&#x4E3A;&#x79D2;&#xFF0C;&#x5047;&#x5982;&#x8BBE;&#x7F6E;&#x4E3A;60&#x79D2;&#xFF0C;&#x5219;server&#x7AEF;&#x4F1A;&#x6BCF;60&#x79D2;&#x5411;&#x8FDE;&#x63A5;&#x7A7A;&#x95F2;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x8D77;&#x4E00;&#x6B21;ACK&#x8BF7;&#x6C42;&#xFF0C;&#x4EE5;&#x68C0;&#x67E5;&#x5BA2;&#x6237;&#x7AEF;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x6302;&#x6389;&#xFF0C;&#x5BF9;&#x4E8E;&#x65E0;&#x54CD;&#x5E94;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x5219;&#x4F1A;&#x5173;&#x95ED;&#x5176;&#x8FDE;&#x63A5;&#x3002;&#x6240;&#x4EE5;&#x5173;&#x95ED;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x6700;&#x957F;&#x9700;&#x8981;120&#x79D2;&#x7684;&#x65F6;&#x95F4;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A;0&#xFF0C;&#x5219;&#x4E0D;&#x4F1A;&#x8FDB;&#x884C;&#x4FDD;&#x6D3B;&#x68C0;&#x6D4B;&#x3002;1tcp-keepalive 0 redis&#x652F;&#x6301;&#x901A;&#x8FC7;loglevel&#x914D;&#x7F6E;&#x9879;&#x8BBE;&#x7F6E;&#x65E5;&#x5FD7;&#x7B49;&#x7EA7;&#xFF0C;&#x5171;&#x5206;&#x56DB;&#x7EA7;&#xFF0C;&#x5373;debug&#x3001;verbose&#x3001;notice&#x3001;warning&#x3002;1loglevel notice redis&#x4E5F;&#x652F;&#x6301;&#x901A;&#x8FC7;logfile&#x914D;&#x7F6E;&#x9879;&#x6765;&#x8BBE;&#x7F6E;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7684;&#x751F;&#x6210;&#x4F4D;&#x7F6E;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5219;redis&#x4F1A;&#x5C06;&#x65E5;&#x5FD7;&#x8F93;&#x51FA;&#x5230;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#x3002;&#x5047;&#x5982;&#x4F60;&#x5728;daemon&#x60C5;&#x51B5;&#x4E0B;&#x5C06;&#x65E5;&#x5FD7;&#x8BBE;&#x7F6E;&#x4E3A;&#x8F93;&#x51FA;&#x5230;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#xFF0C;&#x5219;&#x65E5;&#x5FD7;&#x4F1A;&#x88AB;&#x5199;&#x5230;/dev/null&#x4E2D;&#x3002;1logfile &quot;&quot; &#x5982;&#x679C;&#x5E0C;&#x671B;&#x65E5;&#x5FD7;&#x6253;&#x5370;&#x5230;syslog&#x4E2D;&#xFF0C;&#x4E5F;&#x5F88;&#x5BB9;&#x6613;&#xFF0C;&#x901A;&#x8FC7;syslog-enabled&#x6765;&#x63A7;&#x5236;&#x3002;&#x53E6;&#x5916;&#xFF0C;syslog-ident&#x8FD8;&#x53EF;&#x4EE5;&#x8BA9;&#x4F60;&#x6307;&#x5B9A;syslog&#x91CC;&#x7684;&#x65E5;&#x5FD7;&#x6807;&#x5FD7;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;1syslog-ident redis &#x800C;&#x4E14;&#x8FD8;&#x652F;&#x6301;&#x6307;&#x5B9A;syslog&#x8BBE;&#x5907;&#xFF0C;&#x503C;&#x53EF;&#x4EE5;&#x662F;USER&#x6216;LOCAL0-LOCAL7&#x3002;&#x5177;&#x4F53;&#x53EF;&#x4EE5;&#x53C2;&#x8003;syslog&#x670D;&#x52A1;&#x672C;&#x8EAB;&#x7684;&#x7528;&#x6CD5;&#x3002;1syslog-facility local0 &#x5BF9;&#x4E8E;redis&#x6765;&#x8BF4;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x5176;&#x6570;&#x636E;&#x5E93;&#x7684;&#x603B;&#x6570;&#x91CF;&#xFF0C;&#x5047;&#x5982;&#x4F60;&#x5E0C;&#x671B;&#x4E00;&#x4E2A;redis&#x5305;&#x542B;16&#x4E2A;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x90A3;&#x4E48;&#x8BBE;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;1databases 16 &#x8FD9;16&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x7684;&#x7F16;&#x53F7;&#x5C06;&#x662F;0&#x5230;15&#x3002;&#x9ED8;&#x8BA4;&#x7684;&#x6570;&#x636E;&#x5E93;&#x662F;&#x7F16;&#x53F7;&#x4E3A;0&#x7684;&#x6570;&#x636E;&#x5E93;&#x3002;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;select &#x6765;&#x9009;&#x62E9;&#x76F8;&#x5E94;&#x7684;&#x6570;&#x636E;&#x5E93;&#x3002; redis&#x914D;&#x7F6E; &#x2013; &#x5FEB;&#x7167;&#x5FEB;&#x7167;&#xFF0C;&#x4E3B;&#x8981;&#x6D89;&#x53CA;&#x7684;&#x662F;redis&#x7684;RDB&#x6301;&#x4E45;&#x5316;&#x76F8;&#x5173;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x4E00;&#x8D77;&#x770B;&#x4E00;&#x770B;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7528;&#x5982;&#x4E0B;&#x7684;&#x6307;&#x4EE4;&#x6765;&#x8BA9;&#x6570;&#x636E;&#x4FDD;&#x5B58;&#x5230;&#x78C1;&#x76D8;&#x4E0A;&#xFF0C;&#x5373;&#x63A7;&#x5236;RDB&#x5FEB;&#x7167;&#x529F;&#x80FD;&#xFF1A;1save &lt;seconds&gt; &lt;changes&gt; &#x4E3E;&#x4F8B;&#x6765;&#x8BF4;&#xFF1A;123save 900 1 //&#x8868;&#x793A;&#x6BCF;15&#x5206;&#x949F;&#x4E14;&#x81F3;&#x5C11;&#x6709;1&#x4E2A;key&#x6539;&#x53D8;&#xFF0C;&#x5C31;&#x89E6;&#x53D1;&#x4E00;&#x6B21;&#x6301;&#x4E45;&#x5316;save 300 10 //&#x8868;&#x793A;&#x6BCF;5&#x5206;&#x949F;&#x4E14;&#x81F3;&#x5C11;&#x6709;10&#x4E2A;key&#x6539;&#x53D8;&#xFF0C;&#x5C31;&#x89E6;&#x53D1;&#x4E00;&#x6B21;&#x6301;&#x4E45;&#x5316;save 60 10000 //&#x8868;&#x793A;&#x6BCF;60&#x79D2;&#x81F3;&#x5C11;&#x6709;10000&#x4E2A;key&#x6539;&#x53D8;&#xFF0C;&#x5C31;&#x89E6;&#x53D1;&#x4E00;&#x6B21;&#x6301;&#x4E45;&#x5316; &#x5982;&#x679C;&#x4F60;&#x60F3;&#x7981;&#x7528;RDB&#x6301;&#x4E45;&#x5316;&#x7684;&#x7B56;&#x7565;&#xFF0C;&#x53EA;&#x8981;&#x4E0D;&#x8BBE;&#x7F6E;&#x4EFB;&#x4F55;save&#x6307;&#x4EE4;&#x5C31;&#x53EF;&#x4EE5;&#xFF0C;&#x6216;&#x8005;&#x7ED9;save&#x4F20;&#x5165;&#x4E00;&#x4E2A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#x53C2;&#x6570;&#x4E5F;&#x53EF;&#x4EE5;&#x8FBE;&#x5230;&#x76F8;&#x540C;&#x6548;&#x679C;&#xFF0C;&#x5C31;&#x50CF;&#x8FD9;&#x6837;&#xFF1A;1save &quot;&quot; &#x5982;&#x679C;&#x7528;&#x6237;&#x5F00;&#x542F;&#x4E86;RDB&#x5FEB;&#x7167;&#x529F;&#x80FD;&#xFF0C;&#x90A3;&#x4E48;&#x5728;redis&#x6301;&#x4E45;&#x5316;&#x6570;&#x636E;&#x5230;&#x78C1;&#x76D8;&#x65F6;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x5931;&#x8D25;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;redis&#x4F1A;&#x505C;&#x6B62;&#x63A5;&#x53D7;&#x6240;&#x6709;&#x7684;&#x5199;&#x8BF7;&#x6C42;&#x3002;&#x8FD9;&#x6837;&#x505A;&#x7684;&#x597D;&#x5904;&#x5728;&#x4E8E;&#x53EF;&#x4EE5;&#x8BA9;&#x7528;&#x6237;&#x5F88;&#x660E;&#x786E;&#x7684;&#x77E5;&#x9053;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x548C;&#x78C1;&#x76D8;&#x4E0A;&#x7684;&#x6570;&#x636E;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x4E0D;&#x4E00;&#x81F4;&#x4E86;&#x3002;&#x5982;&#x679C;redis&#x4E0D;&#x987E;&#x8FD9;&#x79CD;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x4E00;&#x610F;&#x5B64;&#x884C;&#x7684;&#x7EE7;&#x7EED;&#x63A5;&#x6536;&#x5199;&#x8BF7;&#x6C42;&#xFF0C;&#x5C31;&#x53EF;&#x80FD;&#x4F1A;&#x5F15;&#x8D77;&#x4E00;&#x4E9B;&#x707E;&#x96BE;&#x6027;&#x7684;&#x540E;&#x679C;&#x3002;&#x5982;&#x679C;&#x4E0B;&#x4E00;&#x6B21;RDB&#x6301;&#x4E45;&#x5316;&#x6210;&#x529F;&#xFF0C;redis&#x4F1A;&#x81EA;&#x52A8;&#x6062;&#x590D;&#x63A5;&#x53D7;&#x5199;&#x8BF7;&#x6C42;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x5728;&#x4E4E;&#x8FD9;&#x79CD;&#x6570;&#x636E;&#x4E0D;&#x4E00;&#x81F4;&#x6216;&#x8005;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x624B;&#x6BB5;&#x53D1;&#x73B0;&#x548C;&#x63A7;&#x5236;&#x8FD9;&#x79CD;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x8BDD;&#xFF0C;&#x4F60;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x5173;&#x95ED;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;&#x5FEB;&#x7167;&#x5199;&#x5165;&#x5931;&#x8D25;&#x65F6;&#xFF0C;&#x4E5F;&#x80FD;&#x786E;&#x4FDD;redis&#x7EE7;&#x7EED;&#x63A5;&#x53D7;&#x65B0;&#x7684;&#x5199;&#x8BF7;&#x6C42;&#x3002;&#x914D;&#x7F6E;&#x9879;&#x5982;&#x4E0B;&#xFF1A;1stop-writes-on-bgsave-error yes &#x5BF9;&#x4E8E;&#x5B58;&#x50A8;&#x5230;&#x78C1;&#x76D8;&#x4E2D;&#x7684;&#x5FEB;&#x7167;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x662F;&#x5426;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x5B58;&#x50A8;&#x3002;&#x5982;&#x679C;&#x662F;&#x7684;&#x8BDD;&#xFF0C;redis&#x4F1A;&#x91C7;&#x7528;LZF&#x7B97;&#x6CD5;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x3002;&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x60F3;&#x6D88;&#x8017;CPU&#x6765;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;&#x5173;&#x95ED;&#x6B64;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x662F;&#x5B58;&#x50A8;&#x5728;&#x78C1;&#x76D8;&#x4E0A;&#x7684;&#x5FEB;&#x7167;&#x4F1A;&#x6BD4;&#x8F83;&#x5927;&#x3002;1rdbcompression yes &#x5728;&#x5B58;&#x50A8;&#x5FEB;&#x7167;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x8BA9;redis&#x4F7F;&#x7528;CRC64&#x7B97;&#x6CD5;&#x6765;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x6821;&#x9A8C;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x6837;&#x505A;&#x4F1A;&#x589E;&#x52A0;&#x5927;&#x7EA6;10%&#x7684;&#x6027;&#x80FD;&#x6D88;&#x8017;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x5E0C;&#x671B;&#x83B7;&#x53D6;&#x5230;&#x6700;&#x5927;&#x7684;&#x6027;&#x80FD;&#x63D0;&#x5347;&#xFF0C;&#x53EF;&#x4EE5;&#x5173;&#x95ED;&#x6B64;&#x529F;&#x80FD;&#x3002;1rdbchecksum yes &#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x5FEB;&#x7167;&#x6587;&#x4EF6;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&#x8FD9;&#x6837;&#x914D;&#x7F6E;&#x7684;&#xFF1A;1dbfilename dump.rdb &#x6700;&#x540E;&#xFF0C;&#x4F60;&#x8FD8;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x8FD9;&#x4E2A;&#x5FEB;&#x7167;&#x6587;&#x4EF6;&#x5B58;&#x653E;&#x7684;&#x8DEF;&#x5F84;&#x3002;&#x6BD4;&#x5982;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#x5C31;&#x662F;&#x5F53;&#x524D;&#x6587;&#x4EF6;&#x5939;&#xFF1A;1dir ./ redis&#x914D;&#x7F6E; &#x2013; &#x590D;&#x5236;redis&#x63D0;&#x4F9B;&#x4E86;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x529F;&#x80FD;&#x3002;&#x901A;&#x8FC7;slaveof&#x914D;&#x7F6E;&#x9879;&#x53EF;&#x4EE5;&#x63A7;&#x5236;&#x67D0;&#x4E00;&#x4E2A;redis&#x4F5C;&#x4E3A;&#x53E6;&#x4E00;&#x4E2A;redis&#x7684;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x901A;&#x8FC7;&#x6307;&#x5B9A;IP&#x548C;&#x7AEF;&#x53E3;&#x6765;&#x5B9A;&#x4F4D;&#x5230;&#x4E3B;redis&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x5EFA;&#x8BAE;&#x7528;&#x6237;&#x4E3A;&#x4ECE;redis&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x4E0D;&#x540C;&#x9891;&#x7387;&#x7684;&#x5FEB;&#x7167;&#x6301;&#x4E45;&#x5316;&#x7684;&#x5468;&#x671F;&#xFF0C;&#x6216;&#x8005;&#x4E3A;&#x4ECE;redis&#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x670D;&#x52A1;&#x7AEF;&#x53E3;&#x7B49;&#x7B49;&#x3002;1slaveof &lt;masterip&gt; &lt;masterport&gt; &#x5982;&#x679C;&#x4E3B;redis&#x8BBE;&#x7F6E;&#x4E86;&#x9A8C;&#x8BC1;&#x5BC6;&#x7801;&#x7684;&#x8BDD;&#xFF08;&#x4F7F;&#x7528;requirepass&#x6765;&#x8BBE;&#x7F6E;&#xFF09;&#xFF0C;&#x5219;&#x5728;&#x4ECE;redis&#x7684;&#x914D;&#x7F6E;&#x4E2D;&#x8981;&#x4F7F;&#x7528;masterauth&#x6765;&#x8BBE;&#x7F6E;&#x6821;&#x9A8C;&#x5BC6;&#x7801;&#xFF0C;&#x5426;&#x5219;&#x7684;&#x8BDD;&#xFF0C;&#x4E3B;redis&#x4F1A;&#x62D2;&#x7EDD;&#x4ECE;redis&#x7684;&#x8BBF;&#x95EE;&#x8BF7;&#x6C42;&#x3002; 1masterauth &lt;master-password&gt; &#x5F53;&#x4ECE;redis&#x5931;&#x53BB;&#x4E86;&#x4E0E;&#x4E3B;redis&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x6216;&#x8005;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x4E2D;&#x65F6;&#xFF0C;redis&#x8BE5;&#x5982;&#x4F55;&#x5904;&#x7406;&#x5916;&#x90E8;&#x53D1;&#x6765;&#x7684;&#x8BBF;&#x95EE;&#x8BF7;&#x6C42;&#x5462;&#xFF1F;&#x8FD9;&#x91CC;&#xFF0C;&#x4ECE;redis&#x53EF;&#x4EE5;&#x6709;&#x4E24;&#x79CD;&#x9009;&#x62E9;&#xFF1A;&#x7B2C;&#x4E00;&#x79CD;&#x9009;&#x62E9;&#xFF1A;&#x5982;&#x679C;slave-serve-stale-data&#x8BBE;&#x7F6E;&#x4E3A;yes&#xFF08;&#x9ED8;&#x8BA4;&#xFF09;&#xFF0C;&#x5219;&#x4ECE;redis&#x4ECD;&#x4F1A;&#x7EE7;&#x7EED;&#x54CD;&#x5E94;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8BFB;&#x5199;&#x8BF7;&#x6C42;&#x3002;&#x7B2C;&#x4E8C;&#x79CD;&#x9009;&#x62E9;&#xFF1A;&#x5982;&#x679C;slave-serve-stale-data&#x8BBE;&#x7F6E;&#x4E3A;no&#xFF0C;&#x5219;&#x4ECE;redis&#x4F1A;&#x5BF9;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8BF7;&#x6C42;&#x8FD4;&#x56DE;&#x201C;SYNC with master in progress&#x201D;&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x6709;&#x4F8B;&#x5916;&#xFF0C;&#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x6765;INFO&#x8BF7;&#x6C42;&#x548C;SLAVEOF&#x8BF7;&#x6C42;&#xFF0C;&#x4ECE;redis&#x8FD8;&#x662F;&#x4F1A;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x63A7;&#x5236;&#x4E00;&#x4E2A;&#x4ECE;redis&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x63A5;&#x53D7;&#x5199;&#x8BF7;&#x6C42;&#x3002;&#x5C06;&#x6570;&#x636E;&#x76F4;&#x63A5;&#x5199;&#x5165;&#x4ECE;redis&#xFF0C;&#x4E00;&#x822C;&#x53EA;&#x9002;&#x7528;&#x4E8E;&#x90A3;&#x4E9B;&#x751F;&#x547D;&#x5468;&#x671F;&#x975E;&#x5E38;&#x77ED;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x65F6;&#xFF0C;&#x8FD9;&#x4E9B;&#x4E34;&#x65F6;&#x6570;&#x636E;&#x5C31;&#x4F1A;&#x88AB;&#x6E05;&#x7406;&#x6389;&#x3002;&#x81EA;&#x4ECE;redis2.6&#x7248;&#x672C;&#x4E4B;&#x540E;&#xFF0C;&#x9ED8;&#x8BA4;&#x4ECE;redis&#x4E3A;&#x53EA;&#x8BFB;&#x3002;1slave-read-only yes &#x53EA;&#x8BFB;&#x7684;&#x4ECE;redis&#x5E76;&#x4E0D;&#x9002;&#x5408;&#x76F4;&#x63A5;&#x66B4;&#x9732;&#x7ED9;&#x4E0D;&#x53EF;&#x4FE1;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x4E3A;&#x4E86;&#x5C3D;&#x91CF;&#x964D;&#x4F4E;&#x98CE;&#x9669;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;rename-command&#x6307;&#x4EE4;&#x6765;&#x5C06;&#x4E00;&#x4E9B;&#x53EF;&#x80FD;&#x6709;&#x7834;&#x574F;&#x529B;&#x7684;&#x547D;&#x4EE4;&#x91CD;&#x547D;&#x540D;&#xFF0C;&#x907F;&#x514D;&#x5916;&#x90E8;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x3002;&#x6BD4;&#x5982;&#xFF1A;1rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52 &#x4ECE;redis&#x4F1A;&#x5468;&#x671F;&#x6027;&#x7684;&#x5411;&#x4E3B;redis&#x53D1;&#x51FA;PING&#x5305;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;repl_ping_slave_period&#x6307;&#x4EE4;&#x6765;&#x63A7;&#x5236;&#x5176;&#x5468;&#x671F;&#x3002;&#x9ED8;&#x8BA4;&#x662F;10&#x79D2;&#x3002;1repl-ping-slave-period 10 &#x5728;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x65F6;&#xFF0C;&#x53EF;&#x80FD;&#x5728;&#x8FD9;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x6709;&#x8D85;&#x65F6;&#x53D1;&#x751F;&#xFF1A;1231.&#x4EE5;&#x4ECE;redis&#x7684;&#x89D2;&#x5EA6;&#x6765;&#x770B;&#xFF0C;&#x5F53;&#x6709;&#x5927;&#x89C4;&#x6A21;IO&#x4F20;&#x8F93;&#x65F6;&#x3002;2.&#x4EE5;&#x4ECE;redis&#x7684;&#x89D2;&#x5EA6;&#x6765;&#x770B;&#xFF0C;&#x5F53;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x6216;PING&#x65F6;&#xFF0C;&#x4E3B;redis&#x8D85;&#x65F6;3.&#x4EE5;&#x4E3B;redis&#x7684;&#x89D2;&#x5EA6;&#x6765;&#x770B;&#xFF0C;&#x5728;&#x56DE;&#x590D;&#x4ECE;redis&#x7684;PING&#x65F6;&#xFF0C;&#x4ECE;redis&#x8D85;&#x65F6; &#x7528;&#x6237;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E0A;&#x8FF0;&#x8D85;&#x65F6;&#x7684;&#x65F6;&#x9650;&#xFF0C;&#x4E0D;&#x8FC7;&#x8981;&#x786E;&#x4FDD;&#x8FD9;&#x4E2A;&#x65F6;&#x9650;&#x6BD4;repl-ping-slave-period&#x7684;&#x503C;&#x8981;&#x5927;&#xFF0C;&#x5426;&#x5219;&#x6BCF;&#x6B21;&#x4E3B;redis&#x90FD;&#x4F1A;&#x8BA4;&#x4E3A;&#x4ECE;redis&#x8D85;&#x65F6;&#x3002;1repl-timeout 60 &#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x63A7;&#x5236;&#x5728;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x65F6;&#x662F;&#x5426;&#x7981;&#x7528;TCP_NODELAY&#x3002;&#x5982;&#x679C;&#x5F00;&#x542F;TCP_NODELAY&#xFF0C;&#x90A3;&#x4E48;&#x4E3B;redis&#x4F1A;&#x4F7F;&#x7528;&#x66F4;&#x5C11;&#x7684;TCP&#x5305;&#x548C;&#x66F4;&#x5C11;&#x7684;&#x5E26;&#x5BBD;&#x6765;&#x5411;&#x4ECE;redis&#x4F20;&#x8F93;&#x6570;&#x636E;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x53EF;&#x80FD;&#x4F1A;&#x589E;&#x52A0;&#x4E00;&#x4E9B;&#x540C;&#x6B65;&#x7684;&#x5EF6;&#x8FDF;&#xFF0C;&#x5927;&#x6982;&#x4F1A;&#x8FBE;&#x5230;40&#x6BEB;&#x79D2;&#x5DE6;&#x53F3;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5173;&#x95ED;&#x4E86;TCP_NODELAY&#xFF0C;&#x90A3;&#x4E48;&#x6570;&#x636E;&#x540C;&#x6B65;&#x7684;&#x5EF6;&#x8FDF;&#x65F6;&#x95F4;&#x4F1A;&#x964D;&#x4F4E;&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x6D88;&#x8017;&#x66F4;&#x591A;&#x7684;&#x5E26;&#x5BBD;&#x3002;&#xFF08;&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x4E86;&#x89E3;TCP_NODELAY&#xFF0C;&#x53EF;&#x4EE5;&#x5230;&#x8FD9;&#x91CC;&#x6765;&#x79D1;&#x666E;&#x4E00;&#x4E0B;&#xFF09;&#x3002;1repl-disable-tcp-nodelay no &#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x540C;&#x6B65;&#x961F;&#x5217;&#x957F;&#x5EA6;&#x3002;&#x961F;&#x5217;&#x957F;&#x5EA6;&#xFF08;backlog)&#x662F;&#x4E3B;redis&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x5728;&#x4E0E;&#x4ECE;redis&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x671F;&#x95F4;&#xFF0C;&#x4E3B;redis&#x4F1A;&#x7528;&#x8FD9;&#x4E2A;&#x7F13;&#x51B2;&#x533A;&#x6765;&#x7F13;&#x5B58;&#x5E94;&#x8BE5;&#x53D1;&#x7ED9;&#x4ECE;redis&#x7684;&#x6570;&#x636E;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x5F53;&#x4ECE;redis&#x91CD;&#x65B0;&#x8FDE;&#x63A5;&#x4E0A;&#x4E4B;&#x540E;&#xFF0C;&#x5C31;&#x4E0D;&#x5FC5;&#x91CD;&#x65B0;&#x5168;&#x91CF;&#x540C;&#x6B65;&#x6570;&#x636E;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x540C;&#x6B65;&#x8FD9;&#x90E8;&#x5206;&#x589E;&#x91CF;&#x6570;&#x636E;&#x5373;&#x53EF;&#x3002;1repl-backlog-size 1mb &#x5982;&#x679C;&#x4E3B;redis&#x7B49;&#x4E86;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x4E4B;&#x540E;&#xFF0C;&#x8FD8;&#x662F;&#x65E0;&#x6CD5;&#x8FDE;&#x63A5;&#x5230;&#x4ECE;redis&#xFF0C;&#x90A3;&#x4E48;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5C06;&#x88AB;&#x6E05;&#x7406;&#x6389;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3B;redis&#x8981;&#x7B49;&#x5F85;&#x7684;&#x65F6;&#x95F4;&#x957F;&#x5EA6;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A;0&#xFF0C;&#x5219;&#x8868;&#x793A;&#x6C38;&#x8FDC;&#x4E0D;&#x6E05;&#x7406;&#x3002;&#x9ED8;&#x8BA4;&#x662F;1&#x4E2A;&#x5C0F;&#x65F6;&#x3002;1repl-backlog-ttl 3600 &#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7ED9;&#x4F17;&#x591A;&#x7684;&#x4ECE;redis&#x8BBE;&#x7F6E;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x5728;&#x4E3B;redis&#x6301;&#x7EED;&#x5DE5;&#x4F5C;&#x4E0D;&#x6B63;&#x5E38;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x4F18;&#x5148;&#x7EA7;&#x9AD8;&#x7684;&#x4ECE;redis&#x5C06;&#x4F1A;&#x5347;&#x7EA7;&#x4E3A;&#x4E3B;redis&#x3002;&#x800C;&#x7F16;&#x53F7;&#x8D8A;&#x5C0F;&#xFF0C;&#x4F18;&#x5148;&#x7EA7;&#x8D8A;&#x9AD8;&#x3002;&#x6BD4;&#x5982;&#x4E00;&#x4E2A;&#x4E3B;redis&#x6709;&#x4E09;&#x4E2A;&#x4ECE;redis&#xFF0C;&#x4F18;&#x5148;&#x7EA7;&#x7F16;&#x53F7;&#x5206;&#x522B;&#x4E3A;10&#x3001;100&#x3001;25&#xFF0C;&#x90A3;&#x4E48;&#x7F16;&#x53F7;&#x4E3A;10&#x7684;&#x4ECE;redis&#x5C06;&#x4F1A;&#x88AB;&#x9996;&#x5148;&#x9009;&#x4E2D;&#x5347;&#x7EA7;&#x4E3A;&#x4E3B;redis&#x3002;&#x5F53;&#x4F18;&#x5148;&#x7EA7;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;0&#x65F6;&#xFF0C;&#x8FD9;&#x4E2A;&#x4ECE;redis&#x5C06;&#x6C38;&#x8FDC;&#x4E5F;&#x4E0D;&#x4F1A;&#x88AB;&#x9009;&#x4E2D;&#x3002;&#x9ED8;&#x8BA4;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x4E3A;100&#x3002;1slave-priority 100 &#x5047;&#x5982;&#x4E3B;redis&#x53D1;&#x73B0;&#x6709;&#x8D85;&#x8FC7;M&#x4E2A;&#x4ECE;redis&#x7684;&#x8FDE;&#x63A5;&#x5EF6;&#x65F6;&#x5927;&#x4E8E;N&#x79D2;&#xFF0C;&#x90A3;&#x4E48;&#x4E3B;redis&#x5C31;&#x505C;&#x6B62;&#x63A5;&#x53D7;&#x5916;&#x6765;&#x7684;&#x5199;&#x8BF7;&#x6C42;&#x3002;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x4ECE;redis&#x4E00;&#x822C;&#x4F1A;&#x6BCF;&#x79D2;&#x949F;&#x90FD;&#x5411;&#x4E3B;redis&#x53D1;&#x51FA;PING&#xFF0C;&#x800C;&#x4E3B;redis&#x4F1A;&#x8BB0;&#x5F55;&#x6BCF;&#x4E00;&#x4E2A;&#x4ECE;redis&#x6700;&#x8FD1;&#x4E00;&#x6B21;&#x53D1;&#x6765;PING&#x7684;&#x65F6;&#x95F4;&#x70B9;&#xFF0C;&#x6240;&#x4EE5;&#x4E3B;redis&#x80FD;&#x591F;&#x4E86;&#x89E3;&#x6BCF;&#x4E00;&#x4E2A;&#x4ECE;redis&#x7684;&#x8FD0;&#x884C;&#x60C5;&#x51B5;&#x3002;12min-slaves-to-write 3min-slaves-max-lag 10 &#x4E0A;&#x9762;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x8868;&#x793A;&#xFF0C;&#x5047;&#x5982;&#x6709;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;3&#x4E2A;&#x4ECE;redis&#x7684;&#x8FDE;&#x63A5;&#x5EF6;&#x8FDF;&#x5927;&#x4E8E;10&#x79D2;&#xFF0C;&#x90A3;&#x4E48;&#x4E3B;redis&#x5C31;&#x4E0D;&#x518D;&#x63A5;&#x53D7;&#x5916;&#x90E8;&#x7684;&#x5199;&#x8BF7;&#x6C42;&#x3002;&#x4E0A;&#x8FF0;&#x4E24;&#x4E2A;&#x914D;&#x7F6E;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x88AB;&#x7F6E;&#x4E3A;0&#xFF0C;&#x5219;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#x5C06;&#x88AB;&#x5173;&#x95ED;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;min-slaves-to-write&#x4E3A;0&#xFF0C;&#x800C;min-slaves-max-lag&#x4E3A;10 redis&#x914D;&#x7F6E; &#x2013; &#x5B89;&#x5168;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8981;&#x6C42;redis&#x5BA2;&#x6237;&#x7AEF;&#x5728;&#x5411;redis-server&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x4E4B;&#x524D;&#xFF0C;&#x5148;&#x8FDB;&#x884C;&#x5BC6;&#x7801;&#x9A8C;&#x8BC1;&#x3002;&#x5F53;&#x4F60;&#x7684;redis-server&#x5904;&#x4E8E;&#x4E00;&#x4E2A;&#x4E0D;&#x592A;&#x53EF;&#x4FE1;&#x7684;&#x7F51;&#x7EDC;&#x73AF;&#x5883;&#x4E2D;&#x65F6;&#xFF0C;&#x76F8;&#x4FE1;&#x4F60;&#x4F1A;&#x7528;&#x4E0A;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x3002;&#x7531;&#x4E8E;redis&#x6027;&#x80FD;&#x975E;&#x5E38;&#x9AD8;&#xFF0C;&#x6240;&#x4EE5;&#x6BCF;&#x79D2;&#x949F;&#x53EF;&#x4EE5;&#x5B8C;&#x6210;&#x591A;&#x8FBE;15&#x4E07;&#x6B21;&#x7684;&#x5BC6;&#x7801;&#x5C1D;&#x8BD5;&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x6700;&#x597D;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x8DB3;&#x591F;&#x590D;&#x6742;&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x5426;&#x5219;&#x5F88;&#x5BB9;&#x6613;&#x88AB;&#x9ED1;&#x5BA2;&#x7834;&#x89E3;&#x3002;1requirepass zhimakaimen &#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x901A;&#x8FC7;requirepass&#x5C06;&#x5BC6;&#x7801;&#x8BBE;&#x7F6E;&#x6210;&#x201C;&#x829D;&#x9EBB;&#x5F00;&#x95E8;&#x201D;&#x3002; redis&#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x5BF9;redis&#x6307;&#x4EE4;&#x8FDB;&#x884C;&#x66F4;&#x540D;&#xFF0C;&#x6BD4;&#x5982;&#x5C06;&#x4E00;&#x4E9B;&#x6BD4;&#x8F83;&#x5371;&#x9669;&#x7684;&#x547D;&#x4EE4;&#x6539;&#x4E2A;&#x540D;&#x5B57;&#xFF0C;&#x907F;&#x514D;&#x88AB;&#x8BEF;&#x6267;&#x884C;&#x3002;&#x6BD4;&#x5982;&#x53EF;&#x4EE5;&#x628A;CONFIG&#x547D;&#x4EE4;&#x6539;&#x6210;&#x4E00;&#x4E2A;&#x5F88;&#x590D;&#x6742;&#x7684;&#x540D;&#x5B57;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x5916;&#x90E8;&#x7684;&#x8C03;&#x7528;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x53EF;&#x4EE5;&#x6EE1;&#x8DB3;&#x5185;&#x90E8;&#x8C03;&#x7528;&#x7684;&#x9700;&#x8981;&#xFF1A;1rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c89 &#x6211;&#x4EEC;&#x751A;&#x81F3;&#x53EF;&#x4EE5;&#x7981;&#x7528;&#x6389;CONFIG&#x547D;&#x4EE4;&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x628A;CONFIG&#x7684;&#x540D;&#x5B57;&#x6539;&#x6210;&#x4E00;&#x4E2A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#xFF1A;1rename-command CONFIG &quot;&quot; &#x4F46;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4F7F;&#x7528;AOF&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;&#xFF0C;&#x6216;&#x8005;&#x9700;&#x8981;&#x4E0E;&#x4ECE;redis&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#xFF0C;&#x90A3;&#x4E48;&#x66F4;&#x6539;&#x6307;&#x4EE4;&#x7684;&#x540D;&#x5B57;&#x53EF;&#x80FD;&#x4F1A;&#x5F15;&#x8D77;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#x3002; redis&#x914D;&#x7F6E; -&#x9650;&#x5236;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;redis&#x540C;&#x65F6;&#x53EF;&#x4EE5;&#x4E0E;&#x591A;&#x5C11;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x8FDB;&#x884C;&#x8FDE;&#x63A5;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x4E3A;10000&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x5F53;&#x4F60;&#x65E0;&#x6CD5;&#x8BBE;&#x7F6E;&#x8FDB;&#x7A0B;&#x6587;&#x4EF6;&#x53E5;&#x67C4;&#x9650;&#x5236;&#x65F6;&#xFF0C;redis&#x4F1A;&#x8BBE;&#x7F6E;&#x4E3A;&#x5F53;&#x524D;&#x7684;&#x6587;&#x4EF6;&#x53E5;&#x67C4;&#x9650;&#x5236;&#x503C;&#x51CF;&#x53BB;32&#xFF0C;&#x56E0;&#x4E3A;redis&#x4F1A;&#x4E3A;&#x81EA;&#x8EAB;&#x5185;&#x90E8;&#x5904;&#x7406;&#x903B;&#x8F91;&#x7559;&#x4E00;&#x4E9B;&#x53E5;&#x67C4;&#x51FA;&#x6765;&#x3002; &#x5982;&#x679C;&#x8FBE;&#x5230;&#x4E86;&#x6B64;&#x9650;&#x5236;&#xFF0C;redis&#x5219;&#x4F1A;&#x62D2;&#x7EDD;&#x65B0;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#xFF0C;&#x5E76;&#x4E14;&#x5411;&#x8FD9;&#x4E9B;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x65B9;&#x53D1;&#x51FA;&#x201C;max number of clients reached&#x201D;&#x4EE5;&#x4F5C;&#x56DE;&#x5E94;&#x3002;1maxclients 10000 &#x6211;&#x4EEC;&#x751A;&#x81F3;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;redis&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7684;&#x5185;&#x5B58;&#x91CF;&#x3002;&#x4E00;&#x65E6;&#x5230;&#x8FBE;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x4E0A;&#x9650;&#xFF0C;redis&#x5C06;&#x4F1A;&#x8BD5;&#x56FE;&#x79FB;&#x9664;&#x5185;&#x90E8;&#x6570;&#x636E;&#xFF0C;&#x79FB;&#x9664;&#x89C4;&#x5219;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;maxmemory-policy&#x6765;&#x6307;&#x5B9A;&#x3002; &#x5982;&#x679C;redis&#x65E0;&#x6CD5;&#x6839;&#x636E;&#x79FB;&#x9664;&#x89C4;&#x5219;&#x6765;&#x79FB;&#x9664;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x6216;&#x8005;&#x6211;&#x4EEC;&#x8BBE;&#x7F6E;&#x4E86;&#x201C;&#x4E0D;&#x5141;&#x8BB8;&#x79FB;&#x9664;&#x201D;&#xFF0C;&#x90A3;&#x4E48;redis&#x5219;&#x4F1A;&#x9488;&#x5BF9;&#x90A3;&#x4E9B;&#x9700;&#x8981;&#x7533;&#x8BF7;&#x5185;&#x5B58;&#x7684;&#x6307;&#x4EE4;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x5982;SET&#x3001;LPUSH&#x7B49;&#x3002;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x65E0;&#x5185;&#x5B58;&#x7533;&#x8BF7;&#x7684;&#x6307;&#x4EE4;&#xFF0C;&#x4ECD;&#x7136;&#x4F1A;&#x6B63;&#x5E38;&#x54CD;&#x5E94;&#xFF0C;&#x6BD4;&#x5982;GET&#x7B49;&#x3002;1maxmemory &lt;bytes&gt; &#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x4E00;&#x70B9;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x7684;redis&#x662F;&#x4E3B;redis&#xFF08;&#x8BF4;&#x660E;&#x4F60;&#x7684;redis&#x6709;&#x4ECE;redis&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x8BBE;&#x7F6E;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x4E0A;&#x9650;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x7CFB;&#x7EDF;&#x4E2D;&#x7559;&#x51FA;&#x4E00;&#x4E9B;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x7ED9;&#x540C;&#x6B65;&#x961F;&#x5217;&#x7F13;&#x5B58;&#xFF0C;&#x53EA;&#x6709;&#x5728;&#x4F60;&#x8BBE;&#x7F6E;&#x7684;&#x662F;&#x201C;&#x4E0D;&#x79FB;&#x9664;&#x201D;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x624D;&#x4E0D;&#x7528;&#x8003;&#x8651;&#x8FD9;&#x4E2A;&#x56E0;&#x7D20;&#x3002; &#x5BF9;&#x4E8E;&#x5185;&#x5B58;&#x79FB;&#x9664;&#x89C4;&#x5219;&#x6765;&#x8BF4;&#xFF0C;redis&#x63D0;&#x4F9B;&#x4E86;&#x591A;&#x8FBE;6&#x79CD;&#x7684;&#x79FB;&#x9664;&#x89C4;&#x5219;&#x3002;&#x4ED6;&#x4EEC;&#x662F;&#xFF1A;1234561.volatile-lru&#xFF1A;&#x4F7F;&#x7528;LRU&#x7B97;&#x6CD5;&#x79FB;&#x9664;&#x8FC7;&#x671F;&#x96C6;&#x5408;&#x4E2D;&#x7684;key2.allkeys-lru&#xFF1A;&#x4F7F;&#x7528;LRU&#x7B97;&#x6CD5;&#x79FB;&#x9664;key3.volatile-random&#xFF1A;&#x5728;&#x8FC7;&#x671F;&#x96C6;&#x5408;&#x4E2D;&#x79FB;&#x9664;&#x968F;&#x673A;&#x7684;key4.allkeys-random&#xFF1A;&#x79FB;&#x9664;&#x968F;&#x673A;&#x7684;key5.volatile-ttl&#xFF1A;&#x79FB;&#x9664;&#x90A3;&#x4E9B;TTL&#x503C;&#x6700;&#x5C0F;&#x7684;key&#xFF0C;&#x5373;&#x90A3;&#x4E9B;&#x6700;&#x8FD1;&#x624D;&#x8FC7;&#x671F;&#x7684;key&#x3002;6.noeviction&#xFF1A;&#x4E0D;&#x8FDB;&#x884C;&#x79FB;&#x9664;&#x3002;&#x9488;&#x5BF9;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x53EA;&#x662F;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x3002; &#x65E0;&#x8BBA;&#x4F7F;&#x7528;&#x4E0A;&#x8FF0;&#x54EA;&#x4E00;&#x79CD;&#x79FB;&#x9664;&#x89C4;&#x5219;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5408;&#x9002;&#x7684;key&#x53EF;&#x4EE5;&#x79FB;&#x9664;&#x7684;&#x8BDD;&#xFF0C;redis&#x90FD;&#x4F1A;&#x9488;&#x5BF9;&#x5199;&#x8BF7;&#x6C42;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x3002;1maxmemory-policy volatile-lru LRU&#x7B97;&#x6CD5;&#x548C;&#x6700;&#x5C0F;TTL&#x7B97;&#x6CD5;&#x90FD;&#x5E76;&#x975E;&#x662F;&#x7CBE;&#x786E;&#x7684;&#x7B97;&#x6CD5;&#xFF0C;&#x800C;&#x662F;&#x4F30;&#x7B97;&#x503C;&#x3002;&#x6240;&#x4EE5;&#x4F60;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x6837;&#x672C;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x5047;&#x5982;redis&#x9ED8;&#x8BA4;&#x4F1A;&#x68C0;&#x67E5;&#x4E09;&#x4E2A;key&#x5E76;&#x9009;&#x62E9;&#x5176;&#x4E2D;LRU&#x7684;&#x90A3;&#x4E2A;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x53EF;&#x4EE5;&#x6539;&#x53D8;&#x8FD9;&#x4E2A;key&#x6837;&#x672C;&#x7684;&#x6570;&#x91CF;&#x3002;1maxmemory-samples 3 &#x6700;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x8865;&#x5145;&#x4E00;&#x4E2A;&#x4FE1;&#x606F;&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x5230;&#x76EE;&#x524D;&#x7248;&#x672C;&#xFF08;2.8.4&#xFF09;&#x4E3A;&#x6B62;&#xFF0C;redis&#x652F;&#x6301;&#x7684;&#x5199;&#x6307;&#x4EE4;&#x5305;&#x62EC;&#x4E86;&#x5982;&#x4E0B;&#x8FD9;&#x4E9B;&#xFF1A;12345set setnx setex appendincr decr rpush lpush rpushx lpushx linsert lset rpoplpush saddsinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrbyzunionstore zinterstore hset hsetnx hmset hincrby incrby decrbygetset mset msetnx exec sort redis&#x914D;&#x7F6E; &#x2013; &#x8FFD;&#x52A0;&#x6A21;&#x5F0F;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;redis&#x4F1A;&#x5F02;&#x6B65;&#x7684;&#x5C06;&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;&#x5230;&#x78C1;&#x76D8;&#x3002;&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x5728;&#x5927;&#x90E8;&#x5206;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x5DF2;&#x88AB;&#x9A8C;&#x8BC1;&#x662F;&#x5F88;&#x6709;&#x6548;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#x53D1;&#x751F;&#x65F6;&#xFF0C;&#x6BD4;&#x5982;&#x65AD;&#x7535;&#xFF0C;&#x5219;&#x8FD9;&#x79CD;&#x673A;&#x5236;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x6570;&#x5206;&#x949F;&#x7684;&#x5199;&#x8BF7;&#x6C42;&#x4E22;&#x5931;&#x3002; &#x5982;&#x535A;&#x6587;&#x4E0A;&#x534A;&#x90E8;&#x5206;&#x4E2D;&#x4ECB;&#x7ECD;&#x7684;&#xFF0C;&#x8FFD;&#x52A0;&#x6587;&#x4EF6;&#xFF08;Append Only File&#xFF09;&#x662F;&#x4E00;&#x79CD;&#x66F4;&#x597D;&#x7684;&#x4FDD;&#x6301;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x5373;&#x4F7F;&#x5F53;&#x670D;&#x52A1;&#x5668;&#x65AD;&#x7535;&#x65F6;&#xFF0C;&#x4E5F;&#x4EC5;&#x4F1A;&#x6709;1&#x79D2;&#x949F;&#x7684;&#x5199;&#x8BF7;&#x6C42;&#x4E22;&#x5931;&#xFF0C;&#x5F53;redis&#x8FDB;&#x7A0B;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#x4E14;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8FD0;&#x884C;&#x6B63;&#x5E38;&#x65F6;&#xFF0C;&#x751A;&#x81F3;&#x53EA;&#x4F1A;&#x4E22;&#x5931;&#x4E00;&#x6761;&#x5199;&#x8BF7;&#x6C42;&#x3002; &#x6211;&#x4EEC;&#x5EFA;&#x8BAE;&#x5927;&#x5BB6;&#xFF0C;AOF&#x673A;&#x5236;&#x548C;RDB&#x673A;&#x5236;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#xFF0C;&#x4E0D;&#x4F1A;&#x6709;&#x4EFB;&#x4F55;&#x51B2;&#x7A81;&#x3002;&#x5BF9;&#x4E8E;&#x5982;&#x4F55;&#x4FDD;&#x6301;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x8BA8;&#x8BBA;&#xFF0C;&#x8BF7;&#x53C2;&#x89C1;&#x672C;&#x6587;&#x3002;1appendonly no &#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;aof&#x6587;&#x4EF6;&#x7684;&#x540D;&#x79F0;&#xFF1A;1appendfilename &quot;appendonly.aof&quot; fsync()&#x8C03;&#x7528;&#xFF0C;&#x7528;&#x6765;&#x544A;&#x8BC9;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7ACB;&#x5373;&#x5C06;&#x7F13;&#x5B58;&#x7684;&#x6307;&#x4EE4;&#x5199;&#x5165;&#x78C1;&#x76D8;&#x3002;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4F1A;&#x201C;&#x7ACB;&#x5373;&#x201D;&#x8FDB;&#x884C;&#xFF0C;&#x800C;&#x53E6;&#x5916;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5219;&#x4F1A;&#x201C;&#x5C3D;&#x5FEB;&#x201D;&#x8FDB;&#x884C;&#x3002; redis&#x652F;&#x6301;&#x4E09;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x6A21;&#x5F0F;&#xFF1A; 1.no&#xFF1A;&#x4E0D;&#x8C03;&#x7528;fsync()&#x3002;&#x800C;&#x662F;&#x8BA9;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x81EA;&#x884C;&#x51B3;&#x5B9A;sync&#x7684;&#x65F6;&#x95F4;&#x3002;&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;redis&#x7684;&#x6027;&#x80FD;&#x4F1A;&#x6700;&#x5FEB;&#x3002;2.always&#xFF1A;&#x5728;&#x6BCF;&#x6B21;&#x5199;&#x8BF7;&#x6C42;&#x540E;&#x90FD;&#x8C03;&#x7528;fsync()&#x3002;&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;redis&#x4F1A;&#x76F8;&#x5BF9;&#x8F83;&#x6162;&#xFF0C;&#x4F46;&#x6570;&#x636E;&#x6700;&#x5B89;&#x5168;&#x3002;3.everysec&#xFF1A;&#x6BCF;&#x79D2;&#x949F;&#x8C03;&#x7528;&#x4E00;&#x6B21;fsync()&#x3002;&#x8FD9;&#x662F;&#x6027;&#x80FD;&#x548C;&#x5B89;&#x5168;&#x7684;&#x6298;&#x8877;&#x3002; &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x4E3A;everysec&#x3002;&#x6709;&#x5173;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x63ED;&#x79D8;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x672C;&#x6587;&#x3002;1appendfsync everysec &#x5F53;fsync&#x65B9;&#x5F0F;&#x8BBE;&#x7F6E;&#x4E3A;always&#x6216;everysec&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x540E;&#x53F0;&#x6301;&#x4E45;&#x5316;&#x8FDB;&#x7A0B;&#x9700;&#x8981;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x5F88;&#x5927;&#x7684;&#x78C1;&#x76D8;IO&#x64CD;&#x4F5C;&#xFF0C;&#x90A3;&#x4E48;redis&#x53EF;&#x80FD;&#x4F1A;&#x5728;fsync()&#x8C03;&#x7528;&#x65F6;&#x5361;&#x4F4F;&#x3002;&#x76EE;&#x524D;&#x5C1A;&#x672A;&#x4FEE;&#x590D;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x5373;&#x4F7F;&#x6211;&#x4EEC;&#x5728;&#x53E6;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x7EBF;&#x7A0B;&#x4E2D;&#x53BB;&#x6267;&#x884C;fsync()&#xFF0C;&#x4E5F;&#x4F1A;&#x963B;&#x585E;&#x4F4F;&#x540C;&#x6B65;&#x5199;&#x8C03;&#x7528;&#x3002; &#x4E3A;&#x4E86;&#x7F13;&#x89E3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x914D;&#x7F6E;&#x9879;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x5F53;BGSAVE&#x6216;BGWRITEAOF&#x8FD0;&#x884C;&#x65F6;&#xFF0C;fsync()&#x5728;&#x4E3B;&#x8FDB;&#x7A0B;&#x4E2D;&#x7684;&#x8C03;&#x7528;&#x4F1A;&#x88AB;&#x963B;&#x6B62;&#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5F53;&#x53E6;&#x4E00;&#x8DEF;&#x8FDB;&#x7A0B;&#x6B63;&#x5728;&#x5BF9;AOF&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x91CD;&#x6784;&#x65F6;&#xFF0C;redis&#x7684;&#x6301;&#x4E45;&#x5316;&#x529F;&#x80FD;&#x5C31;&#x5931;&#x6548;&#x4E86;&#xFF0C;&#x5C31;&#x597D;&#x50CF;&#x6211;&#x4EEC;&#x8BBE;&#x7F6E;&#x4E86;&#x201C;appendsync none&#x201D;&#x4E00;&#x6837;&#x3002;&#x5982;&#x679C;&#x4F60;&#x7684;redis&#x6709;&#x65F6;&#x5EF6;&#x95EE;&#x9898;&#xFF0C;&#x90A3;&#x4E48;&#x8BF7;&#x5C06;&#x4E0B;&#x9762;&#x7684;&#x9009;&#x9879;&#x8BBE;&#x7F6E;&#x4E3A;yes&#x3002;&#x5426;&#x5219;&#x8BF7;&#x4FDD;&#x6301;no&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x662F;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x5B8C;&#x6574;&#x6027;&#x7684;&#x6700;&#x5B89;&#x5168;&#x7684;&#x9009;&#x62E9;&#x3002;1no-appendfsync-on-rewrite no &#x6211;&#x4EEC;&#x5141;&#x8BB8;redis&#x81EA;&#x52A8;&#x91CD;&#x5199;aof&#x3002;&#x5F53;aof&#x589E;&#x957F;&#x5230;&#x4E00;&#x5B9A;&#x89C4;&#x6A21;&#x65F6;&#xFF0C;redis&#x4F1A;&#x9690;&#x5F0F;&#x8C03;&#x7528;BGREWRITEAOF&#x6765;&#x91CD;&#x5199;log&#x6587;&#x4EF6;&#xFF0C;&#x4EE5;&#x7F29;&#x51CF;&#x6587;&#x4EF6;&#x4F53;&#x79EF;&#x3002; redis&#x662F;&#x8FD9;&#x6837;&#x5DE5;&#x4F5C;&#x7684;&#xFF1A;redis&#x4F1A;&#x8BB0;&#x5F55;&#x4E0A;&#x6B21;&#x91CD;&#x5199;&#x65F6;&#x7684;aof&#x5927;&#x5C0F;&#x3002;&#x5047;&#x5982;redis&#x81EA;&#x542F;&#x52A8;&#x81F3;&#x4ECA;&#x8FD8;&#x6CA1;&#x6709;&#x8FDB;&#x884C;&#x8FC7;&#x91CD;&#x5199;&#xFF0C;&#x90A3;&#x4E48;&#x542F;&#x52A8;&#x65F6;aof&#x6587;&#x4EF6;&#x7684;&#x5927;&#x5C0F;&#x4F1A;&#x88AB;&#x4F5C;&#x4E3A;&#x57FA;&#x51C6;&#x503C;&#x3002;&#x8FD9;&#x4E2A;&#x57FA;&#x51C6;&#x503C;&#x4F1A;&#x548C;&#x5F53;&#x524D;&#x7684;aof&#x5927;&#x5C0F;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;&#x5982;&#x679C;&#x5F53;&#x524D;aof&#x5927;&#x5C0F;&#x8D85;&#x51FA;&#x6240;&#x8BBE;&#x7F6E;&#x7684;&#x589E;&#x957F;&#x6BD4;&#x4F8B;&#xFF0C;&#x5219;&#x4F1A;&#x89E6;&#x53D1;&#x91CD;&#x5199;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x4F60;&#x8FD8;&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x6700;&#x5C0F;&#x5927;&#x5C0F;&#xFF0C;&#x662F;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x5728;aof&#x5F88;&#x5C0F;&#x65F6;&#x5C31;&#x89E6;&#x53D1;&#x91CD;&#x5199;&#x3002;12auto-aof-rewrite-percentage 100auto-aof-rewrite-min-size 64mb &#x5982;&#x679C;&#x8BBE;&#x7F6E;auto-aof-rewrite-percentage&#x4E3A;0&#xFF0C;&#x5219;&#x4F1A;&#x5173;&#x95ED;&#x6B64;&#x91CD;&#x5199;&#x529F;&#x80FD;&#x3002; redis&#x914D;&#x7F6E; &#x2013; LUA&#x811A;&#x672C;lua&#x811A;&#x672C;&#x7684;&#x6700;&#x5927;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x662F;&#x9700;&#x8981;&#x88AB;&#x4E25;&#x683C;&#x9650;&#x5236;&#x7684;&#xFF0C;&#x8981;&#x6CE8;&#x610F;&#x5355;&#x4F4D;&#x662F;&#x6BEB;&#x79D2;&#xFF1A;1lua-time-limit 5000 &#x5982;&#x679C;&#x6B64;&#x503C;&#x8BBE;&#x7F6E;&#x4E3A;0&#x6216;&#x8D1F;&#x6570;&#xFF0C;&#x5219;&#x65E2;&#x4E0D;&#x4F1A;&#x6709;&#x62A5;&#x9519;&#x4E5F;&#x4E0D;&#x4F1A;&#x6709;&#x65F6;&#x95F4;&#x9650;&#x5236;&#x3002; redis&#x914D;&#x7F6E; &#x2013; &#x6162;&#x65E5;&#x5FD7;redis&#x6162;&#x65E5;&#x5FD7;&#x662F;&#x6307;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x8FDB;&#x884C;&#x65E5;&#x5FD7;&#x67E5;&#x8BE2;&#x8D85;&#x8FC7;&#x4E86;&#x6307;&#x5B9A;&#x7684;&#x65F6;&#x957F;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x957F;&#x4E0D;&#x5305;&#x62EC;IO&#x64CD;&#x4F5C;&#xFF0C;&#x6BD4;&#x5982;&#x4E0E;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x4EA4;&#x4E92;&#x3001;&#x53D1;&#x9001;&#x54CD;&#x5E94;&#x5185;&#x5BB9;&#x7B49;&#xFF0C;&#x800C;&#x4EC5;&#x5305;&#x62EC;&#x5B9E;&#x9645;&#x6267;&#x884C;&#x67E5;&#x8BE2;&#x547D;&#x4EE4;&#x7684;&#x65F6;&#x95F4;&#x3002; &#x9488;&#x5BF9;&#x6162;&#x65E5;&#x5FD7;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x6267;&#x884C;&#x65F6;&#x957F;&#xFF0C;&#x5355;&#x4F4D;&#x662F;&#x5FAE;&#x79D2;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x662F;&#x6162;&#x65E5;&#x5FD7;&#x7684;&#x957F;&#x5EA6;&#x3002;&#x5F53;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x547D;&#x4EE4;&#x88AB;&#x5199;&#x5165;&#x65E5;&#x5FD7;&#x65F6;&#xFF0C;&#x6700;&#x8001;&#x7684;&#x4E00;&#x6761;&#x4F1A;&#x4ECE;&#x547D;&#x4EE4;&#x65E5;&#x5FD7;&#x961F;&#x5217;&#x4E2D;&#x88AB;&#x79FB;&#x9664;&#x3002; &#x5355;&#x4F4D;&#x662F;&#x5FAE;&#x79D2;&#xFF0C;&#x5373;1000000&#x8868;&#x793A;&#x4E00;&#x79D2;&#x3002;&#x8D1F;&#x6570;&#x5219;&#x4F1A;&#x7981;&#x7528;&#x6162;&#x65E5;&#x5FD7;&#x529F;&#x80FD;&#xFF0C;&#x800C;0&#x5219;&#x8868;&#x793A;&#x5F3A;&#x5236;&#x8BB0;&#x5F55;&#x6BCF;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x3002;1slowlog-log-slower-than 10000 &#x6162;&#x65E5;&#x5FD7;&#x6700;&#x5927;&#x957F;&#x5EA6;&#xFF0C;&#x53EF;&#x4EE5;&#x968F;&#x4FBF;&#x586B;&#x5199;&#x6570;&#x503C;&#xFF0C;&#x6CA1;&#x6709;&#x4E0A;&#x9650;&#xFF0C;&#x4F46;&#x8981;&#x6CE8;&#x610F;&#x5B83;&#x4F1A;&#x6D88;&#x8017;&#x5185;&#x5B58;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;SLOWLOG RESET&#x6765;&#x91CD;&#x8BBE;&#x8FD9;&#x4E2A;&#x503C;&#x3002;1slowlog-max-len 128 redis&#x914D;&#x7F6E; &#x2013; &#x4E8B;&#x4EF6;&#x901A;&#x77E5;redis&#x53EF;&#x4EE5;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x901A;&#x77E5;&#x67D0;&#x4E9B;&#x4E8B;&#x4EF6;&#x7684;&#x53D1;&#x751F;&#x3002;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#x7684;&#x5177;&#x4F53;&#x89E3;&#x91CA;&#x53EF;&#x4EE5;&#x53C2;&#x89C1;&#x672C;&#x6587;&#x3002; redis&#x914D;&#x7F6E; &#x2013; &#x9AD8;&#x7EA7;&#x914D;&#x7F6E;&#x6709;&#x5173;&#x54C8;&#x5E0C;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x4E00;&#x4E9B;&#x914D;&#x7F6E;&#x9879;&#xFF1A;12hash-max-ziplist-entries 512hash-max-ziplist-value 64 &#x6709;&#x5173;&#x5217;&#x8868;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x4E00;&#x4E9B;&#x914D;&#x7F6E;&#x9879;&#xFF1A;12list-max-ziplist-entries 512list-max-ziplist-value 64 &#x6709;&#x5173;&#x96C6;&#x5408;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x914D;&#x7F6E;&#x9879;&#xFF1A;1set-max-intset-entries 512 &#x6709;&#x5173;&#x6709;&#x5E8F;&#x96C6;&#x5408;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x914D;&#x7F6E;&#x9879;&#xFF1A;12zset-max-ziplist-entries 128zset-max-ziplist-value 64 &#x5173;&#x4E8E;&#x662F;&#x5426;&#x9700;&#x8981;&#x518D;&#x54C8;&#x5E0C;&#x7684;&#x914D;&#x7F6E;&#x9879;&#xFF1A;1activerehashing yes &#x5173;&#x4E8E;&#x5BA2;&#x6237;&#x7AEF;&#x8F93;&#x51FA;&#x7F13;&#x51B2;&#x7684;&#x63A7;&#x5236;&#x9879;&#xFF1A;123client-output-buffer-limit normal 0 0 0client-output-buffer-limit slave 256mb 64mb 60client-output-buffer-limit pubsub 32mb 8mb 60 &#x6709;&#x5173;&#x9891;&#x7387;&#x7684;&#x914D;&#x7F6E;&#x9879;&#xFF1A;1hz 10 &#x6709;&#x5173;&#x91CD;&#x5199;aof&#x7684;&#x914D;&#x7F6E;&#x9879;1aof-rewrite-incremental-fsync yes &#x81F3;&#x6B64;&#xFF0C;redis&#x7684;&#x5165;&#x95E8;&#x5185;&#x5BB9;&#x5C31;&#x7ED3;&#x675F;&#x4E86;&#xFF0C;&#x5185;&#x5BB9;&#x5B9E;&#x5728;&#x4E0D;&#x5C11;&#xFF0C;&#x4F46;&#x76F8;&#x5BF9;&#x6765;&#x8BF4;&#x90FD;&#x5F88;&#x57FA;&#x7840;&#xFF0C;&#x672C;&#x6587;&#x6CA1;&#x6709;&#x6D89;&#x53CA;redis&#x96C6;&#x7FA4;&#x3001;redis&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x3001;redis&#x6E90;&#x7801;&#x3001;redis&#x76F8;&#x5173;LIB&#x5E93;&#x7B49;&#x5185;&#x5BB9;&#xFF0C;&#x540E;&#x7EED;&#x4F1A;&#x9646;&#x7EED;&#x5949;&#x732E;&#xFF0C;&#x5927;&#x5BB6;&#x656C;&#x8BF7;&#x671F;&#x5F85;]]></content>
      <categories>
        <category>NoSQL</category>
      </categories>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ELK + Kafka日志收集平台部署]]></title>
    <url>%2FELK-Kafka%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86%E5%B9%B3%E5%8F%B0%E9%83%A8%E7%BD%B2.html</url>
    <content type="text"><![CDATA[&#x6700;&#x8FD1;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x51C6;&#x5907;&#x4F7F;&#x7528;ELK&#xFF0C;&#x4E8E;&#x662F;&#x81EA;&#x5DF1;&#x52A8;&#x624B;&#x5F00;&#x59CB;&#x642D;&#x5EFA;&#x73AF;&#x5883;&#x6D4B;&#x8BD5;&#x3002; ELK&#x67B6;&#x6784;&#x62D3;&#x6251; &#x4F7F;&#x7528;&#x4E00;&#x53F0;Nginx&#x4EE3;&#x7406;&#x8BBF;&#x95EE;kibana&#x7684;&#x8BF7;&#x6C42; &#x4E24;&#x53F0;es&#x7EC4;&#x6210;es&#x96C6;&#x7FA4;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x4E24;&#x53F0;es&#x4E0A;&#x9762;&#x90FD;&#x5B89;&#x88C5;kibana &#x4E2D;&#x95F4;&#x4E09;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x5C31;&#x662F;kafka(zookeeper)&#x96C6;&#x7FA4; &#x6700;&#x540E;&#x9762;&#x7684;&#x5C31;&#x662F;&#x4E00;&#x5927;&#x5806;&#x7684;&#x751F;&#x4EA7;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4E0A;&#x9762;&#x4F7F;&#x7528;&#x7684;&#x662F;logstash &#x89D2;&#x8272;&#x4FE1;&#x606F; &#x4E3B;&#x673A;&#x540D; IP&#x5730;&#x5740; &#x64CD;&#x4F5C;&#x7CFB;&#x7EDF; &#x7528;&#x9014; nginx-upstream 10.16.50.22 Centos 6.5 x64 &#x53CD;&#x5411;&#x4EE3;&#x7406;&#x81F3;Kibana es-kibana-1 10.16.50.16 Centos 6.5 x64 es&#x96C6;&#x7FA4;+Kibana es-kibana-2 10.16.50.17 Centos 6.5 x64 es&#x96C6;&#x7FA4;+Kibana kafka-zookeeper-1 10.16.50.19 Centos 6.5 x64 kafka+zookeeper&#x96C6;&#x7FA4; kafka-zookeeper-2 10.16.50.20 Centos 6.5 x64 kafka+zookeeper&#x96C6;&#x7FA4; kafka-zookeeper-3 10.16.60.21 Centos 6.5 x64 kafka+zookeeper&#x96C6;&#x7FA4; nginx-client 10.16.50.18 Centos 6.5 x64 &#x6A21;&#x62DF;&#x7EBF;&#x4E0A;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#xFF0C;&#x4EA7;&#x751F;&#x65E5;&#x5FD7; &#x8F6F;&#x4EF6;&#x9009;&#x7528; elasticsearch-1.7.3.tar.gz kibana-4.1.2-linux-x64.tar.gz logstash-2.4.0.noarch.rpm &#x4EE5;&#x4E0A;&#x8F6F;&#x4EF6;&#x5747;&#x53EF;&#x4ECE;&#x5B98;&#x7F51;&#x4E0B;&#x8F7D;&#xFF0C;https://www.elastic.co/downloads nginx-1.8.1.tar.gz jdk-8u101-linux-x64.rpm kafka_2.11-0.8.2.1.tgz &#x90E8;&#x7F72;&#x6B65;&#x9AA4; ES&#x96C6;&#x7FA4;&#x5B89;&#x88C5;&#x914D;&#x7F6E; Logstash&#x5BA2;&#x6237;&#x7AEF;&#x914D;&#x7F6E;(&#x76F4;&#x63A5;&#x5199;&#x5165;&#x6570;&#x636E;&#x5230;ES&#x96C6;&#x7FA4;&#xFF0C;&#x5199;&#x5165;&#x7CFB;&#x7EDF;messages&#x65E5;&#x5FD7;) Kafka(zookeeper)&#x96C6;&#x7FA4;&#x914D;&#x7F6E;;(Logstash&#x5199;&#x5165;&#x6570;&#x636E;&#x5230;Kafka&#x6D88;&#x606F;&#x7CFB;&#x7EDF;) Kibana&#x90E8;&#x7F72; Nginx&#x8D1F;&#x8F7D;&#x5747;&#x8861;Kibana&#x8BF7;&#x6C42; ES&#x96C6;&#x7FA4;&#x5B89;&#x88C5;&#x914D;&#x7F6E;&#x6240;&#x6709;&#x670D;&#x52A1;&#x5668;&#x65F6;&#x95F4;&#x540C;&#x6B65;&#xFF1A;1ntpdate 133.100.11.8 &#x5B89;&#x88C5;java-1.8.0&#x4EE5;&#x53CA;&#x4F9D;&#x8D56;&#x5305;12345678910yum -y install jdk-8u101-linux-x64.rpm gitvim /etc/profile.d/java.sh #&#x914D;&#x7F6E;java&#x73AF;&#x5883;&#x53D8;&#x91CF;export JAVA_HOME=/usr/java/jdk1.8.0_101/export PATH=$JAVA_HOME/bin:$PATHexport CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar. /etc/profile.d/java.sh #&#x91CD;&#x8F7D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;java -version #&#x68C0;&#x6D4B;jdk&#x662F;&#x5426;&#x5B89;&#x88C5;&#x6210;&#x529F;java version &quot;1.8.0_101&quot;Java(TM) SE Runtime Environment (build 1.8.0_101-b13)Java HotSpot(TM) 64-Bit Server VM (build 25.101-b13, mixed mode) &#x5B89;&#x88C5;elasticsearch&#x8F6F;&#x4EF6;&#x5305;123wget https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-1.7.3.tar.gtar -xf elasticsearch-1.7.3.tar.gz -C /usr/localln -sv /usr/local/elasticsearch-1.7.3 /usr/local/elasticsearch &#x4FEE;&#x6539;ES&#x914D;&#x7F6E;&#x6587;&#x4EF6;es_kibana-1 &#x914D;&#x7F6E;1234567891011121314151617181920212223vim /usr/local/elasticsearch/config/elasticsearch.ymlcluster.name: es-cluster #&#x7EC4;&#x64AD;&#x7684;&#x540D;&#x79F0;&#x5730;&#x5740; node.name: &quot;node1&quot; #&#x8282;&#x70B9;&#x540D;&#x79F0;&#xFF0C;&#x4E0D;&#x80FD;&#x548C;&#x5176;&#x4ED6;&#x8282;&#x70B9;&#x91CD;&#x590D;node.master: true #&#x8282;&#x70B9;&#x80FD;&#x5426;&#x88AB;&#x9009;&#x4E3E;&#x4E3A;masternode.data: true #&#x8282;&#x70B9;&#x662F;&#x5426;&#x5B58;&#x50A8;&#x6570;&#x636E;index.number_of_shards: 5 #&#x7D22;&#x5F15;&#x5206;&#x7247;&#x7684;&#x4E2A;&#x6570;index.number_of_replicas: 1 #&#x5206;&#x7247;&#x7684;&#x526F;&#x672C;&#x4E2A;&#x6570;path.data: /usr/local/elasticsearch/config/ #&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x8DEF;&#x5F84;path.data: /work/es/data #&#x6570;&#x636E;&#x76EE;&#x5F55;&#x8DEF;&#x5F84;path.work: /work/es/work #&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x8DEF;&#x5F84;path.logs: /work/es/logs #&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;path.plugins: /work/es/plugins #&#x63D2;&#x4EF6;&#x8DEF;&#x5F84;bootstrap.mlockall: true #&#x5185;&#x5B58;&#x4E0D;&#x5411;swap&#x4EA4;&#x6362;http.port: 9200 #&#x542F;&#x7528;httpmkdir -pv /work/es/{logs,data,plugins,work} #&#x521B;&#x5EFA;&#x6240;&#x9700;&#x8981;&#x7684;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;git clone https://github.com/elastic/elasticsearch-servicewrapper.git mv elasticsearch-servicewrapper/service /usr/local/elasticsearch/bin//usr/local/elasticsearch/bin/service/elasticsearch install#&#x8FD9;&#x65F6;&#x5C31;&#x4F1A;&#x5728;/etc/init.d/&#x76EE;&#x5F55;&#x4E0B;&#x5B89;&#x88C5;&#x4E0A;es&#x7684;&#x7BA1;&#x7406;&#x811A;&#x672C;&#x5566;#&#x4FEE;&#x6539;&#x5176;&#x914D;&#x7F6E;:vim /etc/init.d/elasticsearchES_HOME=/usr/local/elasticsearch es_kibana-2 &#x7684;&#x914D;&#x7F6E;&#x53EA;&#x9700;&#x8981;&#x628A;node.name&#x548C;IP&#x5730;&#x5740;&#x6539;&#x4E00;&#x4E0B;&#x5373;&#x53EF; &#x68C0;&#x67E5;&#x5176;&#x670D;&#x52A1;&#x662F;&#x5426;&#x6B63;&#x5E38;1234ss -tanl# &#x786E;&#x5B9A;9200&#x548C;9300&#x7AEF;&#x53E3;&#x542F;&#x52A8;# 9200&#xFF1A;&#x96C6;&#x7FA4;&#x4E4B;&#x95F4;&#x4E8B;&#x52A1;&#x901A;&#x4FE1;# 9300&#xFF1A;&#x96C6;&#x7FA4;&#x9009;&#x4E3E;&#x7B49; &#x67E5;&#x770B;&#x5065;&#x5EB7;&#x4FE1;&#x606F;12345678910111213141516 curl -XGET &apos;http://10.16.50.16:9200/_cluster/health?pretty&apos;{ &quot;cluster_name&quot; : &quot;es-cluster&quot;, &quot;status&quot; : &quot;green&quot;, &quot;timed_out&quot; : false, &quot;number_of_nodes&quot; : 2, &quot;number_of_data_nodes&quot; : 2, &quot;active_primary_shards&quot; : 0, &quot;active_shards&quot; : 0, &quot;relocating_shards&quot; : 0, &quot;initializing_shards&quot; : 0, &quot;unassigned_shards&quot; : 0, &quot;delayed_unassigned_shards&quot; : 0, &quot;number_of_pending_tasks&quot; : 0, &quot;number_of_in_flight_fetch&quot; : 0} &#x67E5;&#x770B;&#x8282;&#x70B9;&#x6570;12345curl -XGET &apos;http://10.16.50.16:9200/_cat/nodes?v&apos;host ip heap.percent ram.percent load node.role master name es-kibana-1 10.16.50.16 10 17 0.30 d m node1 es-kibana-2 10.16.50.17 10 17 0.37 d * node2# &#x7531;&#x6B64;&#x53EF;&#x89C1;&#xFF0C;10.16.50.16&#x5DF2;&#x7ECF;&#x6210;&#x4E3A;&#x4E3B;&#x8282;&#x70B9; &#x5B89;&#x88C5;head&#x63D2;&#x4EF6;1/usr/local/elasticsearch/bin/plugin -i mobz/elasticsearch-head &#x9A8C;&#x8BC1;head&#x63D2;&#x4EF6; &#x597D;&#x4E86;&#xFF0C;es&#x96C6;&#x7FA4;&#x7EC8;&#x4E8E;&#x90E8;&#x7F72;&#x5B8C;&#x6210;&#x2026; Logstash&#x5BA2;&#x6237;&#x7AEF;&#x5B89;&#x88C5;&#x914D;&#x7F6E;&#x5728;nginx_client&#x4E0A;&#x5B89;&#x88C5;logstash &#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x73AF;&#x5883;12yum -y install jdk-8u101-linux-x64.rpm# &#x914D;&#x7F6E;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x540C;&#x4E0A; &#x5B89;&#x88C5;logstash1yum -y install logstash-2.4.0.noarch.rpm &#x7F16;&#x5199;&#x4E00;&#x4E2A;logstash&#x914D;&#x7F6E;&#x6587;&#x4EF6;123456789vim /etc/logstash/conf.d/logstash_server.confinput { stdin {} # &#x6570;&#x636E;&#x7684;&#x8F93;&#x5165;&#x662F;&#x6807;&#x51C6;&#x8F93;&#x5165;}output { elasticsearch { # &#x6570;&#x636E;&#x7684;&#x8F93;&#x51FA;&#x662F;es&#x96C6;&#x7FA4; hosts =&gt; [&quot;10.16.50.16:9200&quot;,&quot;10.16.50.17:9200&quot;] }} &#x68C0;&#x67E5;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x6709;&#x8BED;&#x6CD5;&#x9519;&#x8BEF;12/opt/logstash/bin/logstash -f /etc/logstash/conf.d/logstash_server.conf --configtestConfiguration OK &#x542F;&#x52A8;logstash,&#x5E76;&#x5199;&#x5165;&#x6570;&#x636E;123/opt/logstash/bin/logstash -f /etc/logstash/conf.d/logstash_server.conf test ELKchen-hao.com.cn &#x4E0A;&#x56FE;&#x5DF2;&#x7ECF;&#x770B;&#x5230;logstash&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x4E86; &#x4E0B;&#x9762;&#x6F14;&#x793A;&#x4E00;&#x4E0B;&#x5982;&#x4F55;&#x6536;&#x96C6;nginx&#x65E5;&#x5FD7;&#x4FE1;&#x606F;&#x8FD9;&#x91CC;&#x4E3A;&#x4E86;&#x7701;&#x4E8B;&#xFF0C;&#x5C31;&#x76F4;&#x63A5;yum&#x5B89;&#x88C5;nginx&#xFF0C;&#x5B89;&#x88C5;&#x5B8C;&#x6BD5;&#x540E;&#x5E76;&#x542F;&#x52A8;nginx1234567891011121314vim /etc/logstash/conf.d/logstash_nginx.confinput { file { path =&gt; [&quot;/var/log/nginx/access.log&quot;] # &#x8FD9;&#x662F;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7684;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84; type =&gt; &quot;nginx_log&quot; # &#x65E5;&#x5FD7;&#x7C7B;&#x578B; start_position =&gt; &quot;beginning&quot; # &#x8FD9;&#x4E2A;&#x8868;&#x793A;&#x4ECE;messages&#x7684;&#x7B2C;&#x4E00;&#x884C;&#x8BFB;&#x53D6; }}output { elasticsearch { hosts =&gt; [&quot;10.16.20.19:9200&quot;,&quot;10.16.20.20:9200&quot;] index =&gt; &quot;system-messages-%{+YYYY-MM}&quot; # &#x8FD9;&#x91CC;&#x5C06;&#x6309;&#x7167;&#x8FD9;&#x4E2A;&#x7D22;&#x5F15;&#x683C;&#x5F0F;&#x6765;&#x521B;&#x5EFA;&#x7D22;&#x5F15; }} &#x68C0;&#x6D4B;&#x914D;&#x7F6E;&#x65E0;&#x8BEF;&#x540E;&#xFF0C;&#x542F;&#x52A8;logstash&#xFF0C;&#x8BBF;&#x95EE;nginx&#x7F51;&#x9875;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x518D;&#x770B;head&#x8FD9;&#x4E2A;&#x63D2;&#x4EF6;&#x7684;web&#x9875;&#x9762; nginx&#x65E5;&#x5FD7;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x6210;&#x529F;&#x7684;&#x6536;&#x96C6;&#xFF0C;&#x5E76;&#x4E14;&#x5DF2;&#x7ECF;&#x5199;&#x5165;&#x5230;es&#x96C6;&#x7FA4;&#x4E2D;&#xFF0C;&#x90A3;&#x4E0A;&#x9762;&#x7684;&#x6F14;&#x793A;&#x662F;logstash&#x76F4;&#x63A5;&#x5C06;&#x65E5;&#x5FD7;&#x5199;&#x5165;&#x5230;es&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#xFF0C;&#x8FD9;&#x79CD;&#x573A;&#x5408;&#x6211;&#x89C9;&#x5F97;&#x5982;&#x679C;&#x91CF;&#x4E0D;&#x662F;&#x5F88;&#x5927;&#x7684;&#x8BDD;&#x76F4;&#x63A5;&#x50CF;&#x4E0A;&#x9762;&#x5DF2;&#x5C06;&#x5C06;&#x8F93;&#x51FA;output&#x5B9A;&#x4E49;&#x5230;es&#x96C6;&#x7FA4;&#x5373;&#x53EF;&#xFF0C;&#x5982;&#x679C;&#x91CF;&#x5927;&#x7684;&#x8BDD;&#x9700;&#x8981;&#x52A0;&#x4E0A;&#x6D88;&#x606F;&#x961F;&#x5217;&#x6765;&#x7F13;&#x89E3;es&#x96C6;&#x7FA4;&#x7684;&#x538B;&#x529B;&#x3002;&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x63D0;&#x5230;&#x4E86;&#x6211;&#x8FD9;&#x8FB9;&#x4E4B;&#x524D;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x5355;&#x53F0;redis&#x4F5C;&#x4E3A;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF0C;&#x4F46;&#x662F;redis&#x4E0D;&#x80FD;&#x4F5C;&#x4E3A;list&#x7C7B;&#x578B;&#x7684;&#x96C6;&#x7FA4;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;redis&#x5355;&#x70B9;&#x7684;&#x95EE;&#x9898;&#x6CA1;&#x6CD5;&#x89E3;&#x51B3;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x6211;&#x9009;&#x7528;&#x4E86;kafka ; Kafka&#x96C6;&#x7FA4;&#x5B89;&#x88C5;&#x914D;&#x7F6E;&#x642D;&#x5EFA;kafka&#x96C6;&#x7FA4;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x63D0;&#x524D;&#x5B89;&#x88C5;zookeeper&#x96C6;&#x7FA4;&#xFF08;&#x540C;&#x6837;&#x9700;&#x8981;&#x4F9D;&#x8D56;jdk&#xFF09;&#xFF0C;&#x5F53;&#x7136;kafka&#x5DF2;&#x7ECF;&#x81EA;&#x5E26;zookeeper&#x7A0B;&#x5E8F;&#x53EA;&#x9700;&#x8981;&#x89E3;&#x538B;&#x5E76;&#x4E14;&#x5B89;&#x88C5;&#x914D;&#x7F6E;&#x5C31;&#x884C;&#x4E86; &#x89E3;&#x538B;&#x8F6F;&#x4EF6;&#x5305;&#xFF08;3&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x9700;&#x8981;&#x914D;&#x7F6E;&#xFF09;1234wget http://mirror.rise.ph/apache/kafka/0.8.2.1/kafka_2.11-0.8.2.1.tgztar -zxf kafka_2.11-0.8.2.1.tgz -C /usr/local/cd /usr/local/ln -sv kafka_2.11-0.8.2.1 kafka &#x914D;&#x7F6E;hosts1234vim /etc/hosts10.16.50.19 kafka-zookeeper-110.16.50.20 kafka-zookeeper-210.16.50.21 kafka-zookeeper-3 &#x914D;&#x7F6E;zookeeper&#x96C6;&#x7FA4;&#xFF0C;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;123456789101112131415vim /usr/local/kafka/config/zookeeper.propertiedataDir=/work/zookeeperclientPort=2181maxClientCnxns=0tickTime=2000initLimit=20syncLimit=10server.2=10.16.50.19:2888:3888server.3=10.16.50.20:2888:3888server.4=10.16.50.21:2888:3888# &#x8BF4;&#x660E;&#xFF1A;# tickTime: &#x8FD9;&#x4E2A;&#x65F6;&#x95F4;&#x662F;&#x4F5C;&#x4E3A; Zookeeper &#x670D;&#x52A1;&#x5668;&#x4E4B;&#x95F4;&#x6216;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x4E4B;&#x95F4;&#x7EF4;&#x6301;&#x5FC3;&#x8DF3;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6BCF;&#x4E2A; tickTime &#x65F6;&#x95F4;&#x5C31;&#x4F1A;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x5FC3;&#x8DF3;&#x3002;# 2888&#x7AEF;&#x53E3;&#xFF1A;&#x8868;&#x793A;&#x7684;&#x662F;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x4E0E;&#x96C6;&#x7FA4;&#x4E2D;&#x7684; Leader &#x670D;&#x52A1;&#x5668;&#x4EA4;&#x6362;&#x4FE1;&#x606F;&#x7684;&#x7AEF;&#x53E3;&#xFF1B;# 3888&#x7AEF;&#x53E3;&#xFF1A;&#x8868;&#x793A;&#x7684;&#x662F;&#x4E07;&#x4E00;&#x96C6;&#x7FA4;&#x4E2D;&#x7684; Leader &#x670D;&#x52A1;&#x5668;&#x6302;&#x4E86;&#xFF0C;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x7AEF;&#x53E3;&#x6765;&#x91CD;&#x65B0;&#x8FDB;&#x884C;&#x9009;&#x4E3E;&#xFF0C;&#x9009;&#x51FA;&#x4E00;&#x4E2A;&#x65B0;&#x7684; Leader&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x7AEF;&#x53E3;&#x5C31;&#x662F;&#x7528;&#x6765;&#x6267;&#x884C;&#x9009;&#x4E3E;&#x65F6;&#x670D;&#x52A1;&#x5668;&#x76F8;&#x4E92;&#x901A;&#x4FE1;&#x7684;&#x7AEF;&#x53E3;&#x3002; &#x521B;&#x5EFA;zookeeper&#x6240;&#x9700;&#x8981;&#x76EE;&#x5F55;&#x53CA;&#x6587;&#x4EF6;1234mkdir /work/zookeeper# &#x5728;/work/zookeeper&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;myid&#x6587;&#x4EF6;&#xFF0C;&#x91CC;&#x9762;&#x7684;&#x5185;&#x5BB9;&#x4E3A;&#x6570;&#x5B57;&#xFF0C;&#x7528;&#x4E8E;&#x6807;&#x8BC6;&#x4E3B;&#x673A;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x6CA1;&#x6709;&#x7684;&#x8BDD;&#xFF0C;zookeeper&#x662F;&#x6CA1;&#x6CD5;&#x542F;&#x52A8;&#x7684;echo 2 &gt; /work/zookeeper/myid# &#x53E6;&#x5916;&#x4E24;&#x4E2A;&#x8282;&#x70B9;&#x5206;&#x522B;&#x66FF;&#x6362;&#x4E3A;3 &#x3001; 4 &#x5373;&#x53EF; kafka&#x914D;&#x7F6E;12345678vim /usr/local/kafka/config/server.propertiesbroker.id=2 # &#x552F;&#x4E00;&#xFF0C;&#x586B;&#x6570;&#x5B57;&#xFF0C;&#x672C;&#x6587;&#x4E2D;&#x5206;&#x522B;&#x4E3A;2/3/4port=9092host.name=10.16.50.19log.dirs=/work/kafka-logs # &#x8BE5;&#x76EE;&#x5F55;&#x53EF;&#x4EE5;&#x4E0D;&#x7528;&#x63D0;&#x524D;&#x521B;&#x5EFA;&#xFF0C;&#x5728;&#x542F;&#x52A8;&#x65F6;&#x81EA;&#x5DF1;&#x4F1A;&#x521B;&#x5EFA;zookeeper.connect=10.16.50.19:2181,10.16.50.20:2181,10.16.50.21:2181num.partitions=16 # &#x9700;&#x8981;&#x914D;&#x7F6E;&#x8F83;&#x5927; &#x5206;&#x7247;&#x5F71;&#x54CD;&#x8BFB;&#x5199;&#x901F;&#x5EA6;log.retention.hours=168 # &#x65F6;&#x95F4;&#x6309;&#x9700;&#x6C42;&#x4FDD;&#x7559;&#x8FC7;&#x671F;&#x65F6;&#x95F4; &#x907F;&#x514D;&#x78C1;&#x76D8;&#x6EE1; &#x4FEE;&#x6539;&#x5B8C;&#x6BD5;&#x914D;&#x7F6E;&#x4E4B;&#x540E;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x542F;&#x52A8;&#x4E86;&#xFF0C;&#x8FD9;&#x91CC;&#x5148;&#x8981;&#x542F;&#x52A8;zookeeper&#x96C6;&#x7FA4;&#xFF0C;&#x624D;&#x80FD;&#x542F;&#x52A8;kafka&#x542F;&#x52A8;&#x987A;&#x5E8F;&#x5206;&#x522B;&#x4E3A; kafka1 &#x2013;&gt; kafka2 &#x2013;&gt;kafka312/usr/local/kafka/bin/zookeeper-server-start.sh /usr/local/kafka/config/zookeeper.properties &amp; # &#x542F;&#x52A8;&#x547D;&#x4EE4;/usr/local/kafka/bin/zookeeper-server-stop.sh # &#x505C;&#x6B62;&#x547D;&#x4EE4; zookeeper&#x670D;&#x52A1;&#x68C0;&#x67E5;12345678910111213[root@kafka-zookeeper-1 zookeeper]# netstat -nlpt | grep -E &quot;2181|2888|3888&quot;tcp 0 0 ::ffff:10.16.20.21:3888 :::* LISTEN 12223/java tcp 0 0 :::2181 :::* LISTEN 12223/java [root@kafka-zookeeper-2 work]# netstat -nlpt | grep -E &quot;2181|2888|3888&quot;tcp 0 0 ::ffff:10.16.20.22:3888 :::* LISTEN 10370/java tcp 0 0 :::2181 :::* LISTEN 10370/java tcp 0 0 ::ffff:10.16.20.22:2888 :::* LISTEN 10370/java [root@kafka-zookeeper-3 work]# netstat -nlpt | grep -E &quot;2181|2888|3888&quot;tcp 0 0 ::ffff:10.16.20.24:3888 :::* LISTEN 10329/java tcp 0 0 :::2181 :::* LISTEN 10329/java # &#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x5982;&#x679C;&#x54EA;&#x53F0;&#x662F;Leader,&#x90A3;&#x4E48;&#x5B83;&#x5C31;&#x62E5;&#x6709;2888&#x8FD9;&#x4E2A;&#x7AEF;&#x53E3; ok. &#x8FD9;&#x65F6;&#x5019;zookeeper&#x96C6;&#x7FA4;&#x5DF2;&#x7ECF;&#x542F;&#x52A8;&#x8D77;&#x6765;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x542F;&#x52A8;kafka&#xFF0C;&#x4E5F;&#x662F;&#x4F9D;&#x6B21;&#x6309;&#x7167;&#x987A;&#x5E8F;&#x542F;&#x52A8; &#x542F;&#x52A8;kafka12nohup /usr/local/kafka/bin/kafka-server-start.sh /usr/local/kafka/config/server.properties &amp;cat nohup.log &#x786E;&#x8BA4;&#x6CA1;&#x6709;&#x62A5;&#x9519;&#x4FE1;&#x606F; &#x6B64;&#x65F6;&#x4E09;&#x53F0;&#x4E0A;&#x9762;&#x7684;zookeeper&#x53CA;kafka&#x90FD;&#x5DF2;&#x7ECF;&#x542F;&#x52A8;&#x5B8C;&#x6BD5;&#xFF0C;&#x6765;&#x68C0;&#x6D4B;&#x4EE5;&#x4E0B;&#x5427; &#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x4E3B;&#x9898;1/usr/local/kafka/bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 3 --partitions 1 --topic test_ch &#x67E5;&#x770B;&#x6709;&#x54EA;&#x4E9B;&#x4E3B;&#x9898;&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;12/usr/local/kafka/bin/kafka-topics.sh --list --zookeeper 10.16.50.20:2181test_ch &#x67E5;&#x770B;test_ch&#x8FD9;&#x4E2A;&#x4E3B;&#x9898;&#x7684;&#x8BE6;&#x60C5;123456789/usr/local/kafka/bin/kafka-topics.sh --describe --zookeeper 10.16.50.20:2181 --topic test_chTopic:test_ch PartitionCount:1 ReplicationFactor:3 Configs: Topic: test_ch Partition: 0 Leader: 4 Replicas: 4,3,2 Isr: 4,3,2# &#x4E3B;&#x9898;&#x540D;&#x79F0;&#xFF1A;test_ch# Partition:&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#xFF0C;&#x4ECE;0&#x5F00;&#x59CB;# leader &#xFF1A;id&#x4E3A;4&#x7684;broker# Replicas &#x526F;&#x672C;&#x5B58;&#x5728;&#x4E8E;broker id&#x4E3A;2,3,4&#x7684;&#x4E0A;&#x9762;# Isr:&#x6D3B;&#x8DC3;&#x72B6;&#x6001;&#x7684;broker &#x6211;&#x4EEC;&#x5728;zk2&#x4E0A;&#xFF0C;&#x5F00;&#x4E00;&#x4E2A;&#x7EC8;&#x7AEF;&#xFF0C;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x81F3;kafka&#xFF08;zk2&#x6A21;&#x62DF;&#x751F;&#x4EA7;&#x8005;&#xFF09;123[root@kafka-zookeeper-2 ~]# /usr/local/kafka/bin/kafka-console-producer.sh --broker-list 10.16.50.19:9092 --sync --topic test_ch123456test &#x6211;&#x4EEC;&#x5728;zk3&#x4E0A;&#xFF0C;&#x5F00;&#x4E00;&#x4E2A;&#x7EC8;&#x7AEF;&#xFF0C;&#x663E;&#x793A;&#x6D88;&#x606F;&#x7684;&#x6D88;&#x8D39;&#xFF08;zk3&#x6A21;&#x62DF;&#x6D88;&#x8D39;&#x8005;&#xFF09;123[root@kafka-zookeeper-3 ~]# /usr/local/kafka/bin/kafka-console-consumer.sh --zookeeper 10.16.50.19:2181 --topic test_ch --from-beginningtest 12344567 &#x5982;&#x679C;&#x80FD;&#x591F;&#x50CF;&#x4E0A;&#x9762;&#x4E00;&#x6837;&#x80FD;&#x591F;&#x63A5;&#x6536;&#x5230;&#x751F;&#x4EA7;&#x8005;&#x53D1;&#x8FC7;&#x6765;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x90A3;&#x8BF4;&#x660E;&#x57FA;&#x4E8E;kafka&#x7684;zookeeper&#x96C6;&#x7FA4;&#x5C31;&#x6210;&#x529F;&#x5566; &#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5C06;nginx-client&#x4E0A;&#x9762;&#x7684;logstash&#x7684;&#x8F93;&#x51FA;&#x6539;&#x5230;kafka&#x4E0A;&#x9762;&#xFF0C;&#x5C06;&#x6570;&#x636E;&#x5199;&#x5165;&#x5230;kafka&#x4E2D;1234567891011121314151617vim /etc/logstash/conf.d/logstash_kafka.confinput { file { type =&gt; &quot;system-message&quot; path =&gt; &quot;/var/log/messages&quot; start_position =&gt; &quot;beginning&quot; }}output { stdout { codec =&gt; rubydebug } kafka { bootstrap_servers =&gt; &quot;10.16.50.19:9092,10.16.50.19:9092,10.16.50.19:9092&quot; topic_id =&gt; &quot;system-messages&quot; compression_type =&gt; &quot;snappy&quot; }} &#x68C0;&#x6D4B;&#x914D;&#x7F6E;&#x5E76;&#x8FD0;&#x884C;12/opt/logstash/bin/logstash -f /etc/logstash/conf.d/logstash_kafka.conf --configtest --verbose/opt/logstash/bin/logstash -f /etc/logstash/conf.d/logstash_kafka.conf &#x9A8C;&#x8BC1;&#x6570;&#x636E;&#x662F;&#x5426;&#x5199;&#x5165;&#x5230;kafka&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x68C0;&#x67E5;&#x662F;&#x5426;&#x751F;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x53EB;system-messages&#x7684;&#x4E3B;&#x9898;12345678910111213141516171819202122/usr/local/kafka/bin/kafka-topics.sh --list --zookeeper 10.16.50.19:2181summersystem-messagestest_ch/usr/local/kafka/bin/kafka-topics.sh --describe --zookeeper 10.16.50.19:2181 --topic system-messagesTopic:system-messages PartitionCount:8 ReplicationFactor:1 Configs: Topic: system-messages Partition: 0 Leader: 3 Replicas: 3 Isr: 3 Topic: system-messages Partition: 1 Leader: 4 Replicas: 4 Isr: 4 Topic: system-messages Partition: 2 Leader: 2 Replicas: 2 Isr: 2 Topic: system-messages Partition: 3 Leader: 3 Replicas: 3 Isr: 3 Topic: system-messages Partition: 4 Leader: 4 Replicas: 4 Isr: 4 Topic: system-messages Partition: 5 Leader: 2 Replicas: 2 Isr: 2 Topic: system-messages Partition: 6 Leader: 3 Replicas: 3 Isr: 3 Topic: system-messages Partition: 7 Leader: 4 Replicas: 4 Isr: 4 Topic: system-messages Partition: 8 Leader: 2 Replicas: 2 Isr: 2 Topic: system-messages Partition: 9 Leader: 3 Replicas: 3 Isr: 3 Topic: system-messages Partition: 10 Leader: 4 Replicas: 4 Isr: 4 Topic: system-messages Partition: 11 Leader: 2 Replicas: 2 Isr: 2 Topic: system-messages Partition: 12 Leader: 3 Replicas: 3 Isr: 3 Topic: system-messages Partition: 13 Leader: 4 Replicas: 4 Isr: 4 Topic: system-messages Partition: 14 Leader: 2 Replicas: 2 Isr: 2 Topic: system-messages Partition: 15 Leader: 3 Replicas: 3 Isr: 3 &#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E3B;&#x9898;&#x751F;&#x6210;&#x4E86;16&#x4E2A;&#x5206;&#x533A;&#xFF0C;&#x6BCF;&#x4E2A;&#x5206;&#x533A;&#x90FD;&#x6709;&#x5BF9;&#x5E94;&#x81EA;&#x5DF1;&#x7684;Leader&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x60F3;&#x8981;&#x6709;10&#x4E2A;&#x5206;&#x533A;&#xFF0C;3&#x4E2A;&#x526F;&#x672C;&#x5982;&#x4F55;&#x529E;&#xFF1F;&#x8FD8;&#x662F;&#x8DDF;&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x4E00;&#x6837;&#x547D;&#x4EE4;&#x884C;&#x6765;&#x521B;&#x5EFA;&#x4E3B;&#x9898;&#x5C31;&#x884C;&#xFF0C;&#x5F53;&#x7136;&#x5BF9;&#x4E8E;logstash&#x8F93;&#x51FA;&#x7684;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x63D0;&#x524D;&#x5148;&#x5B9A;&#x4E49;&#x4E3B;&#x9898;&#xFF0C;&#x7136;&#x540E;&#x542F;&#x52A8;logstash &#x76F4;&#x63A5;&#x5F80;&#x5B9A;&#x4E49;&#x597D;&#x7684;&#x4E3B;&#x9898;&#x5199;&#x6570;&#x636E;&#x5C31;&#x884C;&#x5566;&#xFF0C;&#x547D;&#x4EE4;&#x5982;&#x4E0B;&#xFF1A; 1/usr/local/kafka/bin/kafka-topics.sh --create --zookeeper 10.16.20.21:2181 --replication-factor 3 --partitions 10 --topic TOPIC_NAME &#x6211;&#x4EEC;&#x5C06;logstash&#x6536;&#x96C6;&#x5230;&#x7684;&#x6570;&#x636E;&#x5199;&#x5165;&#x5230;&#x4E86;kafka&#x4E2D;&#x4E86;&#xFF0C;&#x5728;&#x5B9E;&#x9A8C;&#x8FC7;&#x7A0B;&#x4E2D;&#x6211;&#x4F7F;&#x7528;while&#x811A;&#x672C;&#x6D4B;&#x8BD5;&#x4E86;&#x5982;&#x679C;&#x4E0D;&#x65AD;&#x7684;&#x5F80;kafka&#x5199;&#x6570;&#x636E;&#x7684;&#x540C;&#x65F6;&#x505C;&#x6389;&#x4E24;&#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x6570;&#x636E;&#x5199;&#x5165;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x95EE;&#x9898;&#x3002; &#x90A3;&#x5982;&#x4F55;&#x5C06;&#x6570;&#x636E;&#x4ECE;kafka&#x4E2D;&#x8BFB;&#x53D6;&#x7136;&#x540E;&#x7ED9;&#x6211;&#x4EEC;&#x7684;es&#x96C6;&#x7FA4;&#x5462;&#xFF1F;&#x90A3;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5728;kafka&#x96C6;&#x7FA4;&#x4E0A;&#x5B89;&#x88C5;Logstash&#xFF0C;&#x5B89;&#x88C5;&#x6B65;&#x9AA4;&#x4E0D;&#x518D;&#x8D58;&#x8FF0;&#xFF1B;&#x4E09;&#x53F0;&#x4E0A;&#x9762;&#x7684;logstash &#x7684;&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF0C;&#x4F5C;&#x7528;&#x662F;&#x5C06;kafka&#x96C6;&#x7FA4;&#x7684;&#x6570;&#x636E;&#x8BFB;&#x53D6;&#x7136;&#x540E;&#x8F6C;&#x4EA4;&#x7ED9;es&#x96C6;&#x7FA4;&#xFF0C;&#x8FD9;&#x91CC;&#x4E3A;&#x4E86;&#x6D4B;&#x8BD5;&#x6211;&#x8BA9;&#x4ED6;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x7D22;&#x5F15;&#x6587;&#x4EF6;&#xFF0C;&#x6CE8;&#x610F;&#x8FD9;&#x91CC;&#x7684;&#x8F93;&#x5165;&#x65E5;&#x5FD7;&#x8FD8;&#x662F;messages&#xFF0C;&#x4E3B;&#x9898;&#x540D;&#x79F0;&#x8FD8;&#x662F;&#x201C;system-messages&#x201D;123456789101112131415161718vim /etc/logstash/conf.d/logstash_es.confinput { kafka { zk_connect =&gt; &quot;10.16.50.19:2181,10.16.50.20:2181,10.16.50.21:2181&quot; topic_id =&gt; &quot;system-messages&quot; codec =&gt; plain reset_beginning =&gt; false consumer_threads =&gt; 5 decorate_events =&gt; true }}output { elasticsearch { hosts =&gt; [&quot;10.16.50.16:9200&quot;,&quot;10.16.50.17:9200&quot;] index =&gt; &quot;test-system-messages-%{+YYYY-MM}&quot; } } &#x5728;&#x4E09;&#x53F0;kafka&#x4E0A;&#x9762;&#x542F;&#x52A8;Logstash1/opt/logstash/bin/logstash -f /etc/logstash/conf.d/logstash_es.conf &#x5728;nginx-client&#x4E0A;&#x5199;&#x5165;&#x6D4B;&#x8BD5;&#x5185;&#x5BB9;&#xFF0C;&#x5373;nginx-client&#x4E0A;&#x9762;&#x5229;&#x7528;message&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x6765;&#x6D4B;&#x8BD5;12[root@nginx-client work]# echo &apos;chen-hao.com.cn&apos; &gt;&gt; /var/log/messages[root@nginx-client work]# echo &apos;ELK&#x90E8;&#x7F72;&#x96C6;&#x7FA4;&apos; &gt;&gt; /var/log/messages &#x5BA2;&#x6237;&#x7AEF;&#x5199;&#x5165;&#x5230;kafka&#x96C6;&#x7FA4;&#x7684;&#x540C;&#x65F6;&#x4E5F;&#x5C06;&#x5176;&#x8F93;&#x5165;&#x5230;&#x7EC8;&#x7AEF;&#xFF0C;&#x8FD9;&#x91CC;&#x5199;&#x5165;&#x4E86;2&#x6761;&#x5185;&#x5BB9;12345678910111213141516{ &quot;message&quot; =&gt; &quot;chen-hao.com.cn&quot;, &quot;@version&quot; =&gt; &quot;1&quot;, &quot;@timestamp&quot; =&gt; &quot;2016-11-16T06:18:32.565Z&quot;, &quot;path&quot; =&gt; &quot;/var/log/messages&quot;, &quot;host&quot; =&gt; &quot;0.0.0.0&quot;, &quot;type&quot; =&gt; &quot;system-message&quot;}{ &quot;message&quot; =&gt; &quot;ELK&#x90E8;&#x7F72;&#x96C6;&#x7FA4;&quot;, &quot;@version&quot; =&gt; &quot;1&quot;, &quot;@timestamp&quot; =&gt; &quot;2016-11-16T06:18:46.584Z&quot;, &quot;path&quot; =&gt; &quot;/var/log/messages&quot;, &quot;host&quot; =&gt; &quot;0.0.0.0&quot;, &quot;type&quot; =&gt; &quot;system-message&quot;} &#x63A5;&#x4E0B;&#x6765;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#x6211;&#x4EEC;&#x7684;es&#x7BA1;&#x7406;&#x754C;&#x9762; OK,&#x6211;&#x4EEC;&#x7684;E+L&#x90E8;&#x7F72;&#x5B8C;&#x6BD5; Kibana&#x90E8;&#x7F72;Kibana&#x7684;&#x4F5C;&#x7528;&#xFF0C;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5C55;&#x793A;&#x5DE5;&#x5177;&#xFF0C;&#x62A5;&#x8868;&#x5185;&#x5BB9;&#x975E;&#x5E38;&#x7684;&#x4E30;&#x5BCC;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5728;&#x4E24;&#x53F0;es&#x4E0A;&#x9762;&#x642D;&#x5EFA;&#x4E24;&#x5957;kibana &#x5B89;&#x88C5;kibana&#x8F6F;&#x4EF6;&#x5305;1234567891011 wget https://download.elastic.co/kibana/kibana/kibana-4.1.2-linux-x64.tar.gztar -zxf kibana-4.1.2-linux-x64.tar.gz -C /usr/local/cd /usr/local/ln -sv kibana-4.1.2-linux-x64 kibana&lt;h3&gt;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&lt;/h3&gt;```bashvim /usr/local/kibana/config/kibana.ymlserver.port: 5601 #&#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x7684;server.host: &quot;0.0.0.0&quot; #kibana&#x76D1;&#x542C;&#x7684;ipelasticsearch.url: &quot;http://localhost:9200&quot; #&#x7531;&#x4E8E;es&#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;&#x4E0A;&#x9762;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x6253;&#x5F00;&#x6CE8;&#x91CA;&#x5373;&#x53EF; &#x63D0;&#x4F9B;kibana&#x670D;&#x52A1;&#x7BA1;&#x7406;&#x811A;&#x672C;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657cat /etc/init.d/kibana#!/bin/bash#chkconfig: 2345 55 24#description: kibana service manager KIBBIN=&apos;/usr/local/kibana/bin/kibana&apos;LOCK=&apos;/usr/local/kibana/locks&apos; START() { if [ -f $LOCK ];then echo -e &quot;kibana is already \033[32mrunning\033[0m, do nothing.&quot; else echo -e &quot;Start kibana service.\033[32mdone\033[m&quot; cd /usr/local/kibana/bin nohup ./kibana &amp; &gt;/dev/null touch $LOCK fi} STOP() { if [ ! -f $LOCK ];then echo -e &quot;kibana is already stop, do nothing.&quot; else echo -e &quot;Stop kibana serivce \033[32mdone\033[m&quot; rm -rf $LOCK ps -ef | grep kibana | grep -v &quot;grep&quot; | awk &apos;{print $2}&apos; | xargs kill -s 9 &gt;/dev/null fi} STATUS() { Port=$(netstat -tunl | grep &quot;:5602&quot;) if [ &quot;$Port&quot; != &quot;&quot; ] &amp;&amp; [ -f $LOCK ];then echo -e &quot;kibana is: \033[32mrunning\033[0m...&quot; else echo -e &quot;kibana is: \033[31mstopped\033[0m...&quot; fi} case &quot;$1&quot; in start) START ;; stop) STOP ;; status) STATUS ;; restart) STOP sleep 2 START ;; *) echo &quot;Usage: /etc/init.d/kibana (|start|stop|status|restart)&quot; ;;esac &#x542F;&#x52A8;kibana&#x670D;&#x52A1;12chkconfig --add kibanaservice kibana start &#x8BBF;&#x95EE;kibana&#x9875;&#x9762;&#x80FD;&#x6210;&#x529F;&#x7684;&#x8BBF;&#x95EE;5601&#x7AEF;&#x53E3;&#xFF0C;&#x90A3;&#x6211;&#x628A;es1&#x8FD9;&#x53F0;&#x7684;&#x914D;&#x7F6E;&#x653E;&#x5230;es2&#x4E0A;&#x9762;&#x53BB;&#x7136;&#x540E;&#x542F;&#x52A8;&#xFF0C;&#x6548;&#x679C;&#x8DDF;&#x8BBF;&#x95EE;es1&#x4E00;&#x6837; Nginx&#x8D1F;&#x8F7D;&#x5747;&#x8861;kibana&#x7684;&#x8BF7;&#x6C42;&#x5728;nginx-upstream&#x4E0A;&#x5B89;&#x88C5;nginx1yum -y install nginx &#x7F16;&#x5199;&#x914D;&#x7F6E;&#x6587;&#x4EF6;nginx.conf123456789101112131415161718vim /etc/nginx/nginx.confupstream es { server 10.16.50.17:5601 max_fails=3 fail_timeout=30s; server 10.16.50.16:5601 max_fails=3 fail_timeout=30s;}server { listen 80; server_name localhost; location / { proxy_pass http://es/; index index.html index.htm; #auth auth_basic &quot;ELK Private&quot;; auth_basic_user_file /etc/nginx/.htpasswd; } } &#x521B;&#x5EFA;&#x8BA4;&#x8BC1;12345htpasswd -cm /etc/nginx/.htpasswd elkNew password: Re-type new password: Adding password for user elknginx -t &amp;&amp; nginx -s restart #&#x68C0;&#x6D4B;&#x5E76;&#x542F;&#x52A8;nginx &#x5165;&#x8BA4;&#x8BC1;&#x7528;&#x6237;&#x53CA;&#x5BC6;&#x7801;&#x5C31;&#x53EF;&#x8BBF;&#x95EE;http://10.16.50.22/ &#x57FA;&#x672C;&#x4E0A;ELK&#x96C6;&#x7FA4;&#x7B97;&#x662F;&#x5B89;&#x88C5;&#x5B8C;&#x6BD5;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x4E0B;&#x6B21;&#x5C06;&#x4ECB;&#x7ECD;&#x7EBF;&#x4E0A;&#x5404;&#x79CD;&#x65E5;&#x5FD7;&#x7684;&#x65B9;&#x6CD5;&#x548C;&#x65B9;&#x5F0F;]]></content>
      <categories>
        <category>运维</category>
      </categories>
      <tags>
        <tag>ELK</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nginx配置与优化]]></title>
    <url>%2Fnginx%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BC%98%E5%8C%96.html</url>
    <content type="text"><![CDATA[Nginx&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x6D41;&#x884C;&#x548C;&#x6210;&#x719F;&#x7684;Web Server&#x548C;Reserve Proxy Server&#xFF0C;&#x7F51;&#x4E0A;&#x6709;&#x5927;&#x91CF;&#x7684;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x6559;&#x7A0B;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x540C;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x5343;&#x5DEE;&#x4E07;&#x522B;&#xFF0C;&#x4EC0;&#x4E48;&#x914D;&#x7F6E;&#x662F;&#x6700;&#x9002;&#x5408;&#x81EA;&#x5DF1;&#x7684;&#xFF0C;&#x8FD8;&#x662F;&#x53EA;&#x6709;&#x57FA;&#x4E8E;&#x81EA;&#x5DF1;&#x7684;&#x4E1A;&#x52A1;&#x624D;&#x80FD;&#x914D;&#x7F6E;&#x51FA;&#x9002;&#x5408;&#x81EA;&#x5DF1;&#x7684;&#x53C2;&#x6570;&#x3002; nginx&#x7684;&#x5B89;&#x88C5; &#x81EA;&#x52A8;&#x5B89;&#x88C5;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x914D;&#x7F6E;&#x597D;&#x5B98;&#x65B9;yum&#x6E90;&#xFF0C;&#x76F4;&#x63A5;yum&#x5B89;&#x88C5;&#x5373;&#x53EF;12345678vim /etc/yum.repos.d/nginx.repo[nginx]name=nginx repobaseurl=http://nginx.org/packages/centos/6/$basearch/gpgcheck=0enabled=1# &#x786E;&#x8BA4;yum&#x6E90;&#x65E0;&#x8BEF;&#x540E;&#x76F4;&#x63A5;yum&#x5B89;&#x88C5;&#x5373;&#x53EF;yum -y install nginx &#x7F16;&#x8BD1;&#x5B89;&#x88C5;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657# &#x68C0;&#x67E5;&#x548C;&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x9879;&#xFF08;gcc&#x3001;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x5DE5;&#x5177;&#x3001;&#x4F20;&#x9001;&#x5185;&#x5BB9;&#x538B;&#x7F29;&#x7684;zlib&#x5E93;&#x3001;openssl&#x5F00;&#x542F;https&#x652F;&#x6301;&#xFF09;&#xFF0C;-y&#x8868;&#x793A;&#x9759;&#x9ED8;&#x5B89;&#x88C5;yum -y install gcc pcre pcre-devel zlib zlib-devel openssl openssl-devel# &#x4E0B;&#x8F7D;&#x6E90;&#x7801;&#x5305;wget http://nginx.org/download/nginx-1.8.0.tar.gz# &#x89E3;&#x538B;&#x6E90;&#x7801;&#x5305;tar zxvf nginx-1.8.0.tar.gz# &#x8FDB;&#x5165;&#x89E3;&#x538B;&#x7684;&#x76EE;&#x5F55;&#x914D;&#x7F6E;&#x76F8;&#x5173;&#x53C2;&#x6570;&#xFF08;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;--help&#x67E5;&#x770B;&#x53EF;&#x9009;&#x9879;&#xFF09;cd nginx-1.8.0/./configure \ --prefix=/usr/local #&#x5B89;&#x88C5;&#x8DEF;&#x5F84; --sbin-path=/usr/sbin/nginx #&#x7A0B;&#x5E8F;&#x6587;&#x4EF6;&#x5B89;&#x88C5;&#x8DEF;&#x5F84; --conf-path=/etc/nginx/nginx.conf #&#x4E3B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5B89;&#x88C5;&#x8DEF;&#x5F84; --error-log-path=/var/log/nginx/error.log #&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7684;&#x8DEF;&#x5F84; --http-log-path=/var/log/nginx/access.log #&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7684;&#x8DEF;&#x5F84; --pid-path=/var/run/nginx.pid #pid&#x6587;&#x4EF6;&#x7684;&#x8DEF;&#x5F84; --lock-path=/var/run/nginx.lock #&#x9501;&#x6587;&#x4EF6;&#x7684;&#x8DEF;&#x5F84; --http-client-body-temp-path=/var/cache/nginx/client_temp #&#x5BA2;&#x6237;&#x7AEF;body&#x90E8;&#x5206;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x5B58;&#x653E;&#x8DEF;&#x5F84; --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx #&#x4EE5;nginx&#x5C5E;&#x4E3B;&#x8FD0;&#x884C;worker&#x8FDB;&#x7A0B; --group=nginx #&#x4EE5;nginx&#x5C5E;&#x7EC4;&#x8FD0;&#x884C;worker&#x8FDB;&#x7A0B; --with-http_ssl_module #SSL&#x6A21;&#x5757;&#xFF0C;&#x9700;&#x5B89;&#x88C5;OPENSSL --with-http_realip_module --with-http_addition_module --with-http_sub_module --with-http_dav_module --with-http_flv_module #&#x542F;&#x7528;ngx_http_flv&#x6A21;&#x5757; --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module #&#x542F;&#x7528;&#x9700;&#x8981;&#x4F9D;&#x8D56;zlib --with-http_random_index_module --with-http_secure_link_module --with-http_stub_status_module #&#x542F;&#x7528;server status&#x9875;&#x9762; --with-http_auth_request_module --with-threads --with-stream --with-stream_ssl_module --with-http_slice_module --with-file-aio --with-http_v2_module --with-debug #&#x6253;&#x5F00;&#x8C03;&#x8BD5;&#x673A;&#x5236;# &#x5B89;&#x88C5;make &amp;&amp; make install# &#x542F;&#x52A8;&#x548C;&#x5173;&#x95ED;nginxcd /opt/nginx/sbin/./nginxps -aux|grep nginx # &#x67E5;&#x770B;&#x8FDB;&#x7A0B;&#xFF08;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#x6709;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x548C;&#x5DE5;&#x4F5C;&#x8FDB;&#x7A0B;&#xFF09;./nginx -h # &#x67E5;&#x770B;&#x5E2E;&#x52A9; nginx&#x7684;&#x914D;&#x7F6E;nginx&#x7684;&#x4E3B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4F4D;&#x4E8E;&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#x4E0B;&#x7684;conf/nginx.conf123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596# &#x6307;&#x660E;worker&#x7684;&#x8FDB;&#x7A0B;&#x6570;&#xFF1B;&#x901A;&#x5E38;&#x5E94;&#x8BE5;&#x4E3A;CPU&#x7684;&#x6838;&#x5FC3;&#x6570;&#x51CF;1worker_processes 7;# event&#x6307;&#x4EE4;&#x4E0E;&#x4E8B;&#x4EF6;&#x6A21;&#x578B;&#x6709;&#x5173;&#xFF0C;&#x914D;&#x7F6E;&#x5904;&#x7406;&#x8FDE;&#x63A5;&#x6709;&#x5173;&#x4FE1;&#x606F;events {# &#x5355;&#x4E2A;worker&#x8FDB;&#x7A0B;&#x6240;&#x80FD;&#x591F;&#x5E76;&#x53D1;&#x6253;&#x5F00;&#x7684;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;&#xFF1B;&#x9ED8;&#x8BA4;&#x4E3A;1024# &#x5F53;&#x524D;&#x4E3B;&#x673A;&#x80FD;&#x54CD;&#x5E94;&#x6700;&#x5927;&#x5E76;&#x53D1;&#x8FDE;&#x63A5;&#x6570;&#xFF1A;worker_processes * worker_connections worker_connections 1024;}# http&#x6307;&#x4EE4;&#x5904;&#x7406;http&#x8BF7;&#x6C42;http { # mime type&#x6620;&#x5C04; include mime.types; default_type application/octet-stream; sendfile on; #tcp_nopush on; #keepalive_timeout 0; keepalive_timeout 65; #gzip on; # server &#x8868;&#x793A;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x4E3B;&#x673A;&#xFF0C;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x53EF;&#x914D;&#x7F6E;&#x591A;&#x4E2A;&#x865A;&#x62DF;&#x4E3B;&#x673A; server { # &#x76D1;&#x542C;&#x7AEF;&#x53E3; listen 80; # &#x8BC6;&#x522B;&#x7684;&#x57DF;&#x540D; server_name localhost; # &#x4E00;&#x4E2A;&#x5173;&#x952E;&#x8BBE;&#x7F6E;&#xFF0C;&#x4E0E;url&#x53C2;&#x6570;&#x4E71;&#x7801;&#x95EE;&#x9898;&#x6709;&#x5173; charset utf-8; #access_log logs/host.access.log main; #location&#x8868;&#x8FBE;&#x5F0F;&#xFF1A; #syntax: location [=|~|~*|^~|@] /uri/ { &#x2026; } #&#x5206;&#x4E3A;&#x4E24;&#x79CD;&#x5339;&#x914D;&#x6A21;&#x5F0F;&#xFF0C;&#x666E;&#x901A;&#x5B57;&#x7B26;&#x4E32;&#x5339;&#x914D;&#xFF0C;&#x6B63;&#x5219;&#x5339;&#x914D; #&#x65E0;&#x5F00;&#x5934;&#x5F15;&#x5BFC;&#x5B57;&#x7B26;&#x6216;&#x4EE5;=&#x5F00;&#x5934;&#x8868;&#x793A;&#x666E;&#x901A;&#x5B57;&#x7B26;&#x4E32;&#x5339;&#x914D; #&#x4EE5;~&#x6216;~* &#x5F00;&#x5934;&#x8868;&#x793A;&#x6B63;&#x5219;&#x5339;&#x914D;&#xFF0C;~*&#x8868;&#x793A;&#x4E0D;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199; #&#x591A;&#x4E2A;location&#x65F6;&#x5339;&#x914D;&#x89C4;&#x5219; #&#x603B;&#x4F53;&#x662F;&#x5148;&#x666E;&#x901A;&#x540E;&#x6B63;&#x5219;&#x539F;&#x5219;&#xFF0C;&#x53EA;&#x8BC6;&#x522B;URI&#x90E8;&#x5206;&#xFF0C;&#x4F8B;&#x5982;&#x8BF7;&#x6C42;&#x4E3A;/test/1/abc.do?arg=xxx #1. &#x5148;&#x67E5;&#x627E;&#x662F;&#x5426;&#x6709;=&#x5F00;&#x5934;&#x7684;&#x7CBE;&#x786E;&#x5339;&#x914D;&#xFF0C;&#x5373;location = /test/1/abc.do {...} #2. &#x518D;&#x67E5;&#x627E;&#x666E;&#x901A;&#x5339;&#x914D;&#xFF0C;&#x4EE5; &#x6700;&#x5927;&#x524D;&#x7F00; &#x4E3A;&#x89C4;&#x5219;&#xFF0C;&#x5982;&#x6709;&#x4EE5;&#x4E0B;&#x4E24;&#x4E2A;location # location /test/ {...} # location /test/1/ {...} # &#x5219;&#x5339;&#x914D;&#x540E;&#x4E00;&#x9879; #3. &#x5339;&#x914D;&#x5230;&#x4E00;&#x4E2A;&#x666E;&#x901A;&#x683C;&#x5F0F;&#x540E;&#xFF0C;&#x641C;&#x7D22;&#x5E76;&#x672A;&#x7ED3;&#x675F;&#xFF0C;&#x800C;&#x662F;&#x6682;&#x5B58;&#x5F53;&#x524D;&#x7ED3;&#x679C;&#xFF0C;&#x5E76;&#x7EE7;&#x7EED;&#x518D;&#x641C;&#x7D22;&#x6B63;&#x5219;&#x6A21;&#x5F0F; #4. &#x5728;&#x6240;&#x6709;&#x6B63;&#x5219;&#x6A21;&#x5F0F;location&#x4E2D;&#x627E;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#x9879;&#x540E;&#xFF0C;&#x4EE5;&#x6B64;&#x5339;&#x914D;&#x9879;&#x4E3A;&#x6700;&#x7EC8;&#x7ED3;&#x679C; # &#x6240;&#x4EE5;&#x6B63;&#x5219;&#x5339;&#x914D;&#x9879;&#x5339;&#x914D;&#x89C4;&#x5219;&#x53D7;&#x5B9A;&#x4E49;&#x524D;&#x540E;&#x987A;&#x5E8F;&#x5F71;&#x54CD;&#xFF0C;&#x4F46;&#x666E;&#x901A;&#x5339;&#x914D;&#x4E0D;&#x4F1A; #5. &#x5982;&#x679C;&#x672A;&#x627E;&#x5230;&#x6B63;&#x5219;&#x5339;&#x914D;&#x9879;&#xFF0C;&#x5219;&#x4EE5;3&#x4E2D;&#x7F13;&#x5B58;&#x7684;&#x7ED3;&#x679C;&#x4E3A;&#x6700;&#x7EC8;&#x7ED3;&#x679C; #6. &#x5982;&#x679C;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#x90FD;&#x6CA1;&#x6709;&#xFF0C;&#x8FD4;&#x56DE;404 #location =/ {...} &#x4E0E; location / {...} &#x7684;&#x5DEE;&#x522B; #&#x524D;&#x4E00;&#x4E2A;&#x662F;&#x7CBE;&#x786E;&#x5339;&#x914D;&#xFF0C;&#x53EA;&#x54CD;&#x5E94;/&#x8BF7;&#x6C42;&#xFF0C;&#x6240;&#x6709;/xxx&#x7C7B;&#x8BF7;&#x6C42;&#x4E0D;&#x4F1A;&#x4EE5;&#x524D;&#x7F00;&#x5339;&#x914D;&#x5F62;&#x5F0F;&#x5339;&#x914D;&#x5230;&#x5B83; #&#x800C;&#x540E;&#x4E00;&#x4E2A;&#x6B63;&#x76F8;&#x53CD;&#xFF0C;&#x6240;&#x6709;&#x8BF7;&#x6C42;&#x5FC5;&#x7136;&#x90FD;&#x662F;&#x4EE5;/&#x5F00;&#x5934;&#xFF0C;&#x6240;&#x4EE5;&#x6CA1;&#x6709;&#x5176;&#x5B83;&#x5339;&#x914D;&#x7ED3;&#x679C;&#x65F6;&#x4E00;&#x5B9A;&#x4F1A;&#x6267;&#x884C;&#x5230;&#x5B83; #location ^~ / {...} ^~&#x610F;&#x601D;&#x662F;&#x975E;&#x6B63;&#x5219;&#xFF0C;&#x8868;&#x793A;&#x5339;&#x914D;&#x5230;&#x6B64;&#x6A21;&#x5F0F;&#x540E;&#x4E0D;&#x518D;&#x7EE7;&#x7EED;&#x6B63;&#x5219;&#x641C;&#x7D22; #&#x6240;&#x6709;&#x5982;&#x679C;&#x8FD9;&#x6837;&#x914D;&#x7F6E;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x5173;&#x95ED;&#x4E86;&#x6B63;&#x5219;&#x5339;&#x914D;&#x529F;&#x80FD; #&#x56E0;&#x4E3A;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x5728;&#x666E;&#x901A;&#x5339;&#x914D;&#x89C4;&#x5219;&#x4E0B;&#x6CA1;&#x5F97;&#x5230;&#x5176;&#x5B83;&#x666E;&#x901A;&#x5339;&#x914D;&#x7ED3;&#x679C;&#x65F6;&#xFF0C;&#x6700;&#x7EC8;&#x5339;&#x914D;&#x5230;&#x8FD9;&#x91CC; #&#x800C;&#x8FD9;&#x4E2A;^~&#x6307;&#x4EE4;&#x53C8;&#x76F8;&#x5F53;&#x4E8E;&#x4E0D;&#x5141;&#x8BB8;&#x6B63;&#x5219;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x5339;&#x914D;&#x5230;&#x6B64;&#x4E3A;&#x6B62; location / { root html; # &#x7F51;&#x7AD9;&#x6839;&#x76EE;&#x5F55;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#x4E0B;&#x7684;html&#x76EE;&#x5F55;&#xFF08;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;&#xFF09; index index.html index.htm; # deny all; &#x62D2;&#x7EDD;&#x8BF7;&#x6C42;&#xFF0C;&#x8FD4;&#x56DE;403 # allow all; &#x5141;&#x8BB8;&#x8BF7;&#x6C42; } location /test/ { deny all; } location ~ /test/.+\.jsp$ { # proxy_pass&#x8868;&#x793A;&#x4EE3;&#x7406; proxy_pass http://192.168.132.144:8080; } location ~ \.jsp$ { proxy_pass http://192.168.132.144:8080; } # &#x5B9A;&#x4E49;&#x5404;&#x7C7B;&#x9519;&#x8BEF;&#x9875; error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html { root html; } # @&#x7C7B;&#x4F3C;&#x4E8E;&#x53D8;&#x91CF;&#x5B9A;&#x4E49; # error_page 403 http://www.jikexueyuan.com&#x8FD9;&#x79CD;&#x5B9A;&#x4E49;&#x4E0D;&#x5141;&#x8BB8;&#xFF0C;&#x6240;&#x4EE5;&#x5229;&#x7528;@&#x5B9E;&#x73B0; error_page 403 @page403; location @page403 { proxy_pass http://http://www.jikexueyuan.com; } } # another virtual host using mix of IP-, name-, and port-based configuration server { listen 80; #listen 9090 server_name www.test.com test.com other.cc; location / { # root d:\\test; &#x6CE8;&#x610F;&#xFF0C;win&#x4E0B;d:\test&#x56E0;&#x8F6C;&#x4E49;&#x7B26;&#x95EE;&#x9898;&#x4E0D;&#x5141;&#x8BB8; root d:/test index index.html index.htm; } }} nginx&#x7684;&#x4F18;&#x5316;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157# nginx&#x4E0D;&#x540C;&#x4E8E;apache&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5F53;&#x8FDB;&#x884C;&#x4E86;&#x5927;&#x91CF;&#x4F18;&#x5316;&#x8BBE;&#x7F6E;&#x540E;&#x4F1A;&#x9B54;&#x672F;&#x822C;&#x7684;&#x660E;&#x663E;&#x6027;&#x80FD;&#x63D0;&#x5347;&#x6548;&#x679C;# nginx&#x5728;&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x53C2;&#x6570;&#x5C31;&#x5DF2;&#x7ECF;&#x662F;&#x6700;&#x4F18;&#x5316;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7BA1;&#x7406;&#x7684;&#x4E1C;&#x897F;&#x5E76;&#x4E0D;&#x591A;#user nginx;# &#x963B;&#x585E;&#x548C;&#x975E;&#x963B;&#x585E;&#x7F51;&#x7EDC;&#x6A21;&#x578B;&#xFF1A;# &#x540C;&#x6B65;&#x963B;&#x585E;&#x6A21;&#x578B;&#xFF0C;&#x4E00;&#x8BF7;&#x6C42;&#x4E00;&#x8FDB;&#xFF08;&#x7EBF;&#xFF09;&#x7A0B;&#xFF0C;&#x5F53;&#x8FDB;&#xFF08;&#x7EBF;&#xFF09;&#x7A0B;&#x589E;&#x52A0;&#x5230;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x540E;# &#x66F4;&#x591A;CPU&#x65F6;&#x95F4;&#x6D6A;&#x8D39;&#x5230;&#x5207;&#x6362;&#x4E00;&#xFF0C;&#x6027;&#x80FD;&#x6025;&#x5267;&#x4E0B;&#x964D;&#xFF0C;&#x6240;&#x4EE5;&#x8D1F;&#x8F7D;&#x7387;&#x4E0D;&#x9AD8;# Nginx&#x57FA;&#x4E8E;&#x4E8B;&#x4EF6;&#x7684;&#x975E;&#x963B;&#x585E;&#x591A;&#x8DEF;&#x590D;&#x7528;(epoll&#x6216;kquene)&#x6A21;&#x578B;# &#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x5728;&#x77ED;&#x65F6;&#x95F4;&#x5185;&#x53EF;&#x4EE5;&#x54CD;&#x5E94;&#x5927;&#x91CF;&#x7684;&#x8BF7;&#x6C42;# &#x5EFA;&#x8BAE;&#x503C; &lt;= cpu&#x6838;&#x5FC3;&#x6570;&#x91CF;&#xFF0C;&#x4E00;&#x822C;&#x9AD8;&#x4E8E;cpu&#x6570;&#x91CF;&#x4E0D;&#x4F1A;&#x5E26;&#x597D;&#x5904;&#xFF0C;&#x4E5F;&#x8BB8;&#x8FD8;&#x6709;&#x8FDB;&#x7A0B;&#x5207;&#x6362;&#x5F00;&#x9500;&#x7684;&#x8D1F;&#x9762;&#x5F71;&#x54CD;worker_processes 4;# &#x5C06;work process&#x7ED1;&#x5B9A;&#x5230;&#x7279;&#x5B9A;cpu&#x4E0A;&#xFF08;&#x6838;&#x5FC3;&#x6570;&#x91CF;&#x4E0E;&#x6570;&#x5B57;&#x4F4D;&#x6570;&#x5BF9;&#x5E94;&#xFF0C;&#x8FDB;&#x7A0B;&#x6570;&#x91CF;&#x4E0E;&#x6570;&#x5B57;&#x7684;&#x7EC4;&#x6570;&#x5BF9;&#x5E94;&#xFF09;&#xFF0C;&#x907F;&#x514D;&#x8FDB;&#x7A0B;&#x5728;cpu&#x95F4;&#x5207;&#x6362;&#x7684;&#x5F00;&#x9500;worker_cpu_affinity 0001 0010 0100 1000 # 8&#x5185;&#x6838;4&#x8FDB;&#x7A0B;&#x65F6;&#x7684;&#x8BBE;&#x7F6E;&#x65B9;&#x6CD5; worker_cpu_affinity 00000001 00000010 00000100 10000000# &#x6BCF;&#x8FDB;&#x7A0B;&#x6700;&#x5927;&#x53EF;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x6570;&#x91CF;(linux&#x4E0A;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x6BD4;&#x8F83;&#x5E7F;&#x4E49;&#xFF0C;&#x7F51;&#x7EDC;&#x7AEF;&#x53E3;&#x3001;&#x8BBE;&#x5907;&#x3001;&#x78C1;&#x76D8;&#x6587;&#x4EF6;&#x90FD;&#x662F;)# &#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x7528;&#x5B8C;&#x4E86;&#xFF0C;&#x65B0;&#x7684;&#x8FDE;&#x63A5;&#x4F1A;&#x88AB;&#x62D2;&#x7EDD;&#xFF0C;&#x4EA7;&#x751F;502&#x7C7B;&#x9519;&#x8BEF;# linux&#x6700;&#x5927;&#x53EF;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x6570;&#x53EF;&#x901A;&#x8FC7;ulimit -n FILECNT&#x6216; /etc/security/limits.conf&#x914D;&#x7F6E;# &#x7406;&#x8BBA;&#x503C; &#x7CFB;&#x7EDF;&#x6700;&#x5927;&#x6570;&#x91CF; / &#x8FDB;&#x7A0B;&#x6570;&#x3002;&#x4F46;&#x8FDB;&#x7A0B;&#x95F4;&#x5DE5;&#x4F5C;&#x91CF;&#x5E76;&#x4E0D;&#x662F;&#x5E73;&#x5747;&#x5206;&#x914D;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x7684;&#x5927;&#x4E00;&#x4E9B;worker_rlimit_nofile 655350 #error_log logs/error.log;#error_log logs/error.log notice;#error_log logs/error.log info;#pid logs/nginx.pid;events { # &#x5E76;&#x53D1;&#x54CD;&#x5E94;&#x80FD;&#x529B;&#x7684;&#x5173;&#x952E;&#x914D;&#x7F6E;&#x503C; # &#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x5141;&#x8BB8;&#x7684;&#x6700;&#x5927;&#x540C;&#x65F6;&#x8FDE;&#x63A5;&#x6570;&#xFF0C;work_connectins * worker_processes = maxConnection; # &#x8981;&#x6CE8;&#x610F;maxConnections&#x4E0D;&#x7B49;&#x540C;&#x4E8E;&#x53EF;&#x54CD;&#x5E94;&#x7684;&#x7528;&#x6237;&#x6570;&#x91CF;&#xFF0C; # &#x56E0;&#x4E3A;&#x4E00;&#x822C;&#x4E00;&#x4E2A;&#x6D4F;&#x89C8;&#x5668;&#x4F1A;&#x540C;&#x65F6;&#x5F00;&#x4E24;&#x6761;&#x8FDE;&#x63A5;&#xFF0C;&#x5982;&#x679C;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#xFF0C;nginx&#x5230;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8FDE;&#x63A5;&#x4E5F;&#x8981;&#x5360;&#x7528;&#x8FDE;&#x63A5;&#x6570; # &#x6240;&#x4EE5;&#xFF0C;&#x505A;&#x9759;&#x6001;&#x670D;&#x52A1;&#x5668;&#x65F6;&#xFF0C;&#x4E00;&#x822C; maxClient = work_connectins * worker_processes / 2 # &#x505A;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x65F6; maxClient = work_connectins * worker_processes / 4 # &#x8FD9;&#x4E2A;&#x503C;&#x7406;&#x8BBA;&#x4E0A;&#x8D8A;&#x5927;&#x8D8A;&#x597D;&#xFF0C;&#x4F46;&#x6700;&#x591A;&#x53EF;&#x627F;&#x53D7;&#x591A;&#x5C11;&#x8BF7;&#x6C42;&#x4E0E;&#x914D;&#x4EF6;&#x548C;&#x7F51;&#x7EDC;&#x76F8;&#x5173;,&#x4E5F;&#x53EF;&#x6700;&#x5927;&#x53EF;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#xFF0C;&#x6700;&#x5927;&#x53EF;&#x7528;sockets&#x6570;&#x91CF;&#xFF08;&#x7EA6;64K&#xFF09;&#x6709;&#x5173; worker_connections 500; # &#x6307;&#x660E;&#x4F7F;&#x7528;epoll &#x6216; kquene (*BSD) use epoll # &#x5907;&#x6CE8;&#xFF1A;&#x8981;&#x8FBE;&#x5230;&#x8D85;&#x9AD8;&#x8D1F;&#x8F7D;&#x4E0B;&#x6700;&#x597D;&#x7684;&#x7F51;&#x7EDC;&#x54CD;&#x5E94;&#x80FD;&#x529B;&#xFF0C;&#x8FD8;&#x6709;&#x5FC5;&#x8981;&#x4F18;&#x5316;&#x4E0E;&#x7F51;&#x7EDC;&#x76F8;&#x5173;&#x7684;linux&#x5185;&#x6838;&#x53C2;&#x6570;}http { include mime.types; default_type application/octet-stream; #log_format main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos; # &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos; # &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;; # &#x5173;&#x95ED;&#x6B64;&#x9879;&#x53EF;&#x51CF;&#x5C11;IO&#x5F00;&#x9500;&#xFF0C;&#x4F46;&#x4E5F;&#x65E0;&#x6CD5;&#x8BB0;&#x5F55;&#x8BBF;&#x95EE;&#x4FE1;&#x606F;&#xFF0C;&#x4E0D;&#x5229;&#x7528;&#x4E1A;&#x52A1;&#x5206;&#x6790;&#xFF0C;&#x4E00;&#x822C;&#x8FD0;&#x7EF4;&#x60C5;&#x51B5;&#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528; access_log off # &#x53EA;&#x8BB0;&#x5F55;&#x66F4;&#x4E3A;&#x4E25;&#x91CD;&#x7684;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#xFF0C;&#x53EF;&#x51CF;&#x5C11;IO&#x538B;&#x529B; error_log logs/error.log crit; #access_log logs/access.log main; # &#x542F;&#x7528;&#x5185;&#x6838;&#x590D;&#x5236;&#x6A21;&#x5F0F;&#xFF0C;&#x5E94;&#x8BE5;&#x4FDD;&#x6301;&#x5F00;&#x542F;&#x8FBE;&#x5230;&#x6700;&#x5FEB;IO&#x6548;&#x7387; sendfile on; # &#x7B80;&#x5355;&#x8BF4;&#xFF0C;&#x542F;&#x52A8;&#x5982;&#x4E0B;&#x4E24;&#x9879;&#x914D;&#x7F6E;&#xFF0C;&#x4F1A;&#x5728;&#x6570;&#x636E;&#x5305;&#x8FBE;&#x5230;&#x4E00;&#x5B9A;&#x5927;&#x5C0F;&#x540E;&#x518D;&#x53D1;&#x9001;&#x6570;&#x636E; # &#x8FD9;&#x6837;&#x4F1A;&#x51CF;&#x5C11;&#x7F51;&#x7EDC;&#x901A;&#x4FE1;&#x6B21;&#x6570;&#xFF0C;&#x964D;&#x4F4E;&#x963B;&#x585E;&#x6982;&#x7387;&#xFF0C;&#x4F46;&#x4E5F;&#x4F1A;&#x5F71;&#x54CD;&#x54CD;&#x5E94;&#x53CA;&#x65F6;&#x6027; # &#x6BD4;&#x8F83;&#x9002;&#x5408;&#x4E8E;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;&#x8FD9;&#x7C7B;&#x7684;&#x5927;&#x6570;&#x636E;&#x5305;&#x901A;&#x4FE1;&#x573A;&#x666F; #tcp_nopush on; &#x5728; #tcp_nodelay on|off on&#x7981;&#x7528;Nagle&#x7B97;&#x6CD5; #keepalive_timeout 0; # HTTP1.1&#x652F;&#x6301;&#x6301;&#x4E45;&#x8FDE;&#x63A5;alive # &#x964D;&#x4F4E;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x7684;alive&#x65F6;&#x95F4;&#x53EF;&#x5728;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x4E0A;&#x63D0;&#x9AD8;&#x53EF;&#x54CD;&#x5E94;&#x8FDE;&#x63A5;&#x6570;&#x91CF;&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x822C;&#x53EF;&#x9002;&#x5F53;&#x964D;&#x4F4E;&#x6B64;&#x503C; keepalive_timeout 30s; #&#x9690;&#x85CF;nginx&#x7248;&#x672C;&#x53F7; server_tokens off; # &#x542F;&#x52A8;&#x5185;&#x5BB9;&#x538B;&#x7F29;&#xFF0C;&#x6709;&#x6548;&#x964D;&#x4F4E;&#x7F51;&#x7EDC;&#x6D41;&#x91CF; gzip on; # &#x8FC7;&#x77ED;&#x7684;&#x5185;&#x5BB9;&#x538B;&#x7F29;&#x6548;&#x679C;&#x4E0D;&#x4F73;&#xFF0C;&#x538B;&#x7F29;&#x8FC7;&#x7A0B;&#x8FD8;&#x4F1A;&#x6D6A;&#x8D39;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90; gzip_min_length 1000; # &#x53EF;&#x9009;&#x503C;1~9,&#x538B;&#x7F29;&#x7EA7;&#x522B;&#x8D8A;&#x9AD8;&#x538B;&#x7F29;&#x7387;&#x8D8A;&#x9AD8;&#xFF0C;&#x4F46;&#x5BF9;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x8981;&#x6C42;&#x8D8A;&#x9AD8; gzip_comp_level 4; # &#x538B;&#x7F29;&#x7684;&#x5185;&#x5BB9;&#x7C7B;&#x522B; gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript; # &#x9759;&#x6001;&#x6587;&#x4EF6;&#x7F13;&#x5B58; # &#x6700;&#x5927;&#x7F13;&#x5B58;&#x6570;&#x91CF;&#xFF0C;&#x6587;&#x4EF6;&#x672A;&#x4F7F;&#x7528;&#x5B58;&#x6D3B;&#x671F; open_file_cache max=655350 inactive=20s; # &#x9A8C;&#x8BC1;&#x7F13;&#x5B58;&#x6709;&#x6548;&#x671F;&#x65F6;&#x95F4;&#x95F4;&#x9694; open_file_cache_valid 30s; # &#x6709;&#x6548;&#x671F;&#x5185;&#x6587;&#x4EF6;&#x6700;&#x5C11;&#x4F7F;&#x7528;&#x6B21;&#x6570; open_file_cache_min_uses 2; server { listen 80; server_name localhost; #charset koi8-r; #access_log logs/host.access.log main; location / { root html; index index.html index.htm; } #error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html { root html; } # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # #location ~ \.php$ { # proxy_pass http://127.0.0.1; #} # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # #location ~ \.php$ { # root html; # fastcgi_pass 127.0.0.1:9000; # fastcgi_index index.php; # fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; # include fastcgi_params; #} # deny access to .htaccess files, if Apache&apos;s document root # concurs with nginx&apos;s one # #location ~ /\.ht { # deny all; #} } # another virtual host using mix of IP-, name-, and port-based configuration # #server { # listen 8000; # listen somename:8080; # server_name somename alias another.alias; # location / { # root html; # index index.html index.htm; # } #} # HTTPS server # #server { # listen 443 ssl; # server_name localhost; # ssl_certificate cert.pem; # ssl_certificate_key cert.key; # ssl_session_cache shared:SSL:1m; # ssl_session_timeout 5m; # ssl_ciphers HIGH:!aNULL:!MD5; # ssl_prefer_server_ciphers on; # location / { # root html; # index index.html index.htm; # } #}} nginx&#x7684;&#x5E38;&#x7528;&#x6A21;&#x5757; ngx_http_stub_status_module&#x6A21;&#x5757;&#x6B64;&#x6A21;&#x5757;&#x7528;&#x6765;&#x663E;&#x793A;nginx&#x8BBF;&#x95EE;&#x7684;&#x4E00;&#x4E9B;&#x91CD;&#x8981;&#x4FE1;&#x606F;&#x57FA;&#x672C;&#x914D;&#x7F6E;123456location /nginx_status {stub_status on;access_log off;allow SOME.IP.ADD.RESS;deny all;} &#x91CD;&#x542F;nginx&#x4E4B;&#x540E;&#x76F4;&#x63A5;&#x5728;&#x7F51;&#x9875;&#x8F93;&#x5165;http://IP/nginx_status &#x5373;&#x53EF;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x7C7B;&#x4F3C;&#x4E8E;&#xFF1A;1234Active connections: 1 server accepts handled requests155 155 298 Reading: 0 Writing: 1 Waiting: 0 Active connections: &#x5904;&#x4E8E;&#x6D3B;&#x52A8;&#x72B6;&#x6001;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x7684;&#x6570;&#x91CF;&#xFF1B;accepts&#xFF1A;&#x5DF2;&#x7ECF;&#x63A5;&#x53D7;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x7684;&#x603B;&#x6570;&#xFF1B;handled&#xFF1A;&#x5DF2;&#x7ECF;&#x5904;&#x7406;&#x5B8C;&#x6210;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x7684;&#x603B;&#x6570;&#xFF1B;requests&#xFF1A;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x6765;&#x7684;&#x603B;&#x7684;&#x8BF7;&#x6C42;&#x6570;&#xFF1B;Reading&#xFF1A;&#x5904;&#x4E8E;&#x8BFB;&#x53D6;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x9996;&#x90E8;&#x7684;&#x8FDE;&#x63A5;&#x6570;&#xFF1B;Writing&#xFF1A;&#x5904;&#x4E8E;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x8FDE;&#x63A5;&#x6570;&#xFF1B;Waiting&#xFF1A;&#x5904;&#x4E8E;&#x7B49;&#x5F85;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x51FA;&#x8BF7;&#x6C42;&#x7684;&#x7A7A;&#x95F2;&#x8FDE;&#x63A5;&#x6570;&#xFF1B; ngx_http_gzip_module&#x6A21;&#x5757;&#x6B64;&#x6A21;&#x5757;&#x7528;&#x6765;&#x538B;&#x7F29;&#x9875;&#x9762;&#x8D44;&#x6E90;1234567891011121314151617181920gzip on|off;#&#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x538B;&#x7F29;gzip&#x54CD;&#x5E94;&#x62A5;&#x6587;gzip_comp_level level;#&#x6307;&#x5B9A;&#x538B;&#x7F29;&#x6BD4;&#xFF08;1-&gt;9&#xFF09;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;1gzip_disable regex...;#regex&#x662F;&#x5339;&#x914D;&#x5BA2;&#x6237;&#x7AEF;&#x6D4F;&#x89C8;&#x5668;&#x7C7B;&#x578B;&#x7684;&#x6A21;&#x5F0F;&#xFF0C;&#x8868;&#x793A;&#x5BF9;&#x6240;&#x6709;&#x5339;&#x914D;&#x5230;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x4E0D;&#x6267;&#x884C;&#x538B;&#x7F29;gzip_min_length length;#&#x89E6;&#x53D1;&#x542F;&#x7528;&#x538B;&#x7F29;&#x529F;&#x80FD;&#x7684;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x7684;&#x6700;&#x5C0F;&#x957F;&#x5EA6;&#xFF08;&#x542F;&#x7528;&#x538B;&#x7F29;&#x7684;&#x4E0B;&#x9650;&#xFF09;gzip_http_version 1.0|1.1 ;#&#x8BBE;&#x5B9A;&#x542F;&#x7528;&#x538B;&#x7F29;&#x54CD;&#x5E94;&#x529F;&#x80FD;&#x65F6;&#xFF0C;&#x534F;&#x8BAE;&#x7684;&#x6700;&#x5C0F;&#x7248;&#x672C;gzip_types mime-type;#&#x6307;&#x5B9A;&#x4EC5;&#x6267;&#x884C;&#x538B;&#x7F29;&#x7684;&#x8D44;&#x6E90;&#x5185;&#x5BB9;&#x7C7B;&#x578B;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;text/html;gzip proxied off|expired|no-cache|no-store|private|no_last_modified|no_etag|auth|ant...;#&#x5BF9;&#x4EE3;&#x7406;&#x7684;&#x8BF7;&#x6C42;&#x57FA;&#x4E8E;&#x4F55;&#x79CD;&#x5C5E;&#x6027;&#x5224;&#x65AD;&#x5176;&#x662F;&#x5426;&#x5E94;&#x8BE5;&#x542F;&#x7528;&#x538B;&#x7F29;&#x529F;&#x80FD; &#x914D;&#x7F6E;&#x793A;&#x4F8B;&#xFF1A;123456gzip on;gzip_http_version 1.0;gzip_comp_level 6;gzip_disable msie6;gzip_min_length 2;gzip_types text/plain text/css text/xml application/x-javascript application/xml application/json application/java-script; ngx_http_ssl_module&#x6A21;&#x5757;&#x6B64;&#x6A21;&#x5757;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x914D;&#x7F6E;https1234567891011121314151617181920212223242526ssl on|off&#xFF1B; #&#x662F;&#x5426;&#x542F;&#x7528;ssl&#x5E94;&#x7528;ssl_certificate file; #&#x5F53;&#x524D;&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x4F7F;&#x7528;&#x7684;PEM&#x683C;&#x5F0F;&#x7684;&#x8BC1;&#x4E66;&#x6587;&#x4EF6;ssk_certificate_key file; #&#x5F53;&#x524D;&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x4F7F;&#x7528;&#x8BC1;&#x4E66;&#x6587;&#x4EF6;&#x7684;&#x79C1;&#x94A5;&#x6587;&#x4EF6;ssl_protocols [SSLv3][TLSv1][TLSv1.1][TLSv1.2]#&#x5F53;&#x524D;ssl&#x7684;&#x534F;&#x8BAE;&#x7248;&#x672C;ssl_session_cache off|none|[builtin[:size]][shared:name:size];#&#x6307;&#x660E;ssl&#x4F1A;&#x8BDD;&#x7684;&#x7F13;&#x5B58;&#x673A;&#x5236; off &#x575A;&#x51B3;&#x88AB;&#x7981;&#x6B62;&#x4F7F;&#x7528;&#x4F1A;&#x8BDD; none &#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x7981;&#x6B62; builtin &#x4F7F;&#x7528;openssl&#x5185;&#x5EFA;&#x7684;&#x5E93;&#x7F13;&#x5B58;&#x673A;&#x5236;&#xFF0C;&#x6B64;&#x4E3A;&#x5404;worker&#x72EC;&#x6709;&#x7684; &#x7F3A;&#x9677;&#xFF1A;&#x540C;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#x7B2C;&#x4E00;&#x6B21;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x8C03;&#x5EA6;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;worker&#xFF0C;&#x7B2C;&#x4E8C;&#x6B21;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x8C03;&#x5EA6;&#x5230;&#x7B2C;&#x4E8C;&#x4E2A;worker&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x7F13;&#x5B58;&#x65E0;&#x6CD5;&#x547D;&#x4E2D; shared &#x7531;&#x5404;worker&#x5171;&#x4EAB;&#x7684;&#x7F13;&#x5B58; name &#x7F13;&#x5B58;&#x7A7A;&#x95F4;&#x7684;&#x540D;&#x79F0; size &#x5B57;&#x8282;&#x4E3A;&#x5355;&#x4F4D;&#x7684;&#x7F13;&#x5B58;&#x7A7A;&#x95F4;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x6BCF;1MB&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x53EF;&#x7F13;&#x5B58;4000&#x4E2A;&#x4F1A;&#x8BDD;ssl_clphers clphers;#&#x6307;&#x660E;ssl&#x7684;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;ssl_session_timeout time;#ssl&#x4F1A;&#x8BDD;&#x8D85;&#x65F6;&#x65F6;&#x957F;&#xFF0C;&#x81F3;ssl session cache&#x4E2D;&#x7F13;&#x5B58;&#x6761;&#x76EE;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x957F; &#x914D;&#x7F6E;&#x793A;&#x4F8B;&#xFF1A;123456server { listen 443; ssl on; ssl_certificate /usr/local/nginx/conf/server.crt; ssl_certificate_key /usr/local/nginx/conf/server_nopwd.key;} ngx_http_referer_module&#x6A21;&#x5757;&#x6B64;&#x6A21;&#x5757;&#x7528;&#x4E8E;&#x5C4F;&#x853D;&#x7684;&#x7F51;&#x7AD9;&#x8BF7;&#x6C42;&#x65E0;&#x6548;&#x503C;&#x7684;&#x5B57;&#x6BB5;,&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x9632;&#x76D7;&#x94FE;12345678910valid_referers none | blocked | server_names | string ...;#&#x5B9A;&#x4E49;&#x5408;&#x6CD5;&#x7684;referer&#x6570;&#x636E;&#xFF1B; none&#xFF1A;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x9996;&#x90E8;&#x6CA1;&#x6709;refe rer&#x9996;&#x90E8;&#xFF1B; blocked&#xFF1A;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x7684;referer&#x9996;&#x90E8;&#x6CA1;&#x6709;&#x503C;&#xFF1B; server_names&#xFF1A;&#x5176;&#x503C;&#x662F;&#x4E3B;&#x673A;&#x540D;&#xFF1B; arbitrary string&#xFF1A;&#x76F4;&#x63A5;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;*&#x4F5C;&#x4E3A;&#x901A;&#x914D;&#x7B26;&#xFF1B; regular expression&#xFF1A;&#x88AB;&#x6307;&#x5B9A;&#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x6A21;&#x5F0F;&#x5339;&#x914D;&#x5230;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF1B;&#x8981;&#x4F7F;&#x7528;~&#x8D77;&#x59CB;&#xFF1B; $invalid_referer&#x53D8;&#x91CF;&#x662F;&#x7531;ngx_http_referer_module&#x6A21;&#x5757;&#x81EA;&#x52A8;&#x5F15;&#x5165;&#x7684;#&#x53EA;&#x8981;&#x4E0D;&#x80FD;&#x88AB;valid_referers none blocked...&#x5339;&#x914D;&#x5230;&#x7684;&#xFF0C;&#x7EDF;&#x7EDF;&#x88AB;&#x5F52;&#x7C7B;&#x5230;&#x53D8;&#x91CF;$invalid_referer&#x4E2D; &#x914D;&#x7F6E;&#x793A;&#x4F8B;&#xFF1A;12345valid_referers none blocked server_names *.magedu.com magedu.* ~\.magedu\.;if ($invalid_referer) { return 403;} ngx_http_rewrite_module&#x6A21;&#x5757;&#x6B64;&#x6A21;&#x5757;&#x4E3B;&#x8981;&#x7528;&#x4E8E;url&#x91CD;&#x5199;&#x64CD;&#x4F5C;last:&#x91CD;&#x5199;&#x5B8C;&#x6210;&#x540E;&#x505C;&#x6B62;&#x5BF9;&#x5F53;&#x524D;uri&#x5728;&#x5F53;&#x524D;locatuion&#x4E2D;&#x7684;&#x540E;&#x7EED;&#x64CD;&#x4F5C;,&#x6539;&#x4E3A;&#x5BF9;&#x65B0;uri&#x7684;&#x65B0;&#x4E00;&#x8F6E;&#x5904;&#x7406;break&#xFF1A;&#x91CD;&#x5199;&#x5B8C;&#x6210;&#x540E;&#x505C;&#x6B62;&#x5BF9;&#x5F53;&#x524D;uri&#x5728;&#x5F53;&#x524D;location&#x4E2D;&#x7684;&#x540E;&#x7EED;&#x5176;&#x4ED6;&#x91CD;&#x5199;&#x64CD;&#x4F5C;redirect: &#x91CD;&#x5199;&#x5B8C;&#x6210;&#x540E;&#x4EE5;&#x6C38;&#x4E45;&#x91CD;&#x5B9A;&#x5411;&#x65B9;&#x5F0F;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x91CD;&#x5199;&#x540E;&#x751F;&#x6210;&#x7684;&#x65B0;URL&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x7531;&#x5BA2;&#x6237;&#x5BF9;&#x65B0;URL&#x8FDB;&#x884C;&#x8BF7;&#x6C42;&#xFF08;302&#xFF09;permanent:&#x91CD;&#x5199;&#x5B8C;&#x6210;&#x540E;&#x4EE5;&#x6C38;&#x4E45;&#x91CD;&#x5B9A;&#x5411;&#x65B9;&#x5F0F;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x91CD;&#x5199;&#x540E;&#x751F;&#x6210;&#x7684;&#x65B0;URL&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x7531;&#x5BA2;&#x6237;&#x5BF9;&#x65B0;URL&#x8FDB;&#x884C;&#x8BF7;&#x6C42;&#xFF08;301&#xFF09;&#x914D;&#x7F6E;&#x793A;&#x4F8B;&#xFF1A;12345678910111213141516171819if ($http_user_agent ~ MSIE) { rewrite ^(.*)$ /msie/$1 break;}if ($http_cookie ~* &quot;id=([^;]+)(?:;|$)&quot;) { set $id $1;} if ($request_method = POST) { return 405;} if ($slow) { limit_rate 10k;} if ($invalid_referer) { return 403;} ngx_http_fastcgi_module&#x6A21;&#x5757;&#x6B64;&#x6A21;&#x5757;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x57FA;&#x4E8E;fastcgi&#x901A;&#x4FE1; 1234567891011121314151617181920212223242526272829303132333435363738fastcgi_connect_timeout 300;#&#x6307;&#x5B9A;&#x94FE;&#x63A5;&#x5230;&#x540E;&#x7AEF;FastCGI&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x3002;fastcgi_send_timeout 300;#&#x5411;FastCGI&#x4F20;&#x9001;&#x8BF7;&#x6C42;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF0C;&#x8FD9;&#x4E2A;&#x503C;&#x662F;&#x6307;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x4E24;&#x6B21;&#x63E1;&#x624B;&#x540E;&#x5411;FastCGI&#x4F20;&#x9001;&#x8BF7;&#x6C42;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x3002;fastcgi_read_timeout 300;#&#x6307;&#x5B9A;&#x63A5;&#x6536;FastCGI&#x5E94;&#x7B54;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF0C;&#x8FD9;&#x4E2A;&#x503C;&#x662F;&#x6307;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x4E24;&#x6B21;&#x63E1;&#x624B;&#x540E;&#x63A5;&#x6536;FastCGI&#x5E94;&#x7B54;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x3002;fastcgi_buffer_size 64k;#&#x6307;&#x5B9A;&#x8BFB;&#x53D6;FastCGI&#x5E94;&#x7B54;&#x7B2C;&#x4E00;&#x90E8;&#x5206;&#x9700;&#x8981;&#x7528;&#x591A;&#x5927;&#x7684;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x8FD9;&#x4E2A;&#x503C;&#x8868;&#x793A;&#x5C06;&#x4F7F;&#x7528;1&#x4E2A;64KB&#x7684;&#x7F13;&#x51B2;&#x533A;&#x8BFB;&#x53D6;&#x5E94;&#x7B54;&#x7684;&#x7B2C;&#x4E00;&#x90E8;&#x5206;&#xFF08;&#x5E94;&#x7B54;&#x5934;&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;gastcgi_buffers&#x9009;&#x9879;&#x6307;&#x5B9A;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;&#x3002;fastcgi_buffers 4 64k;#&#x6307;&#x5B9A;&#x672C;&#x5730;&#x9700;&#x8981;&#x7528;&#x591A;&#x5C11;&#x548C;&#x591A;&#x5927;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x6765;&#x7F13;&#x51B2;FastCGI&#x7684;&#x5E94;&#x7B54;&#x8BF7;&#x6C42;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A;php&#x811A;&#x672C;&#x6240;&#x4EA7;&#x751F;&#x7684;&#x9875;&#x9762;&#x5927;&#x5C0F;&#x4E3A;256KB&#xFF0C;&#x90A3;&#x4E48;&#x4F1A;&#x5206;&#x914D;4&#x4E2A;64KB&#x7684;&#x7F13;&#x51B2;&#x533A;&#x6765;&#x7F13;&#x5B58;&#xFF0C;&#x5982;&#x679C;&#x9875;&#x9762;&#x5927;&#x5C0F;&#x5927;&#x4E8E;256KB&#xFF0C;&#x90A3;&#x4E48;&#x5927;&#x4E8E;256KB&#x7684;&#x90E8;&#x5206;&#x4F1A;&#x7F13;&#x5B58;&#x5230;fastcgi_temp&#x6307;&#x5B9A;&#x7684;&#x8DEF;&#x5F84;&#x4E2D;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x5E76;&#x4E0D;&#x662F;&#x597D;&#x65B9;&#x6CD5;&#xFF0C;&#x56E0;&#x4E3A;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5904;&#x7406;&#x901F;&#x5EA6;&#x8981;&#x5FEB;&#x4E8E;&#x78C1;&#x76D8;&#x3002;&#x4E00;&#x822C;&#x8FD9;&#x4E2A;&#x503C;&#x5E94;&#x8BE5;&#x4E3A;&#x7AD9;&#x70B9;&#x4E2D;php&#x811A;&#x672C;&#x6240;&#x4EA7;&#x751F;&#x7684;&#x9875;&#x9762;&#x5927;&#x5C0F;&#x7684;&#x4E2D;&#x95F4;&#x503C;&#xFF0C;&#x5982;&#x679C;&#x7AD9;&#x70B9;&#x5927;&#x90E8;&#x5206;&#x811A;&#x672C;&#x6240;&#x4EA7;&#x751F;&#x7684;&#x9875;&#x9762;&#x5927;&#x5C0F;&#x4E3A;256KB&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x628A;&#x8FD9;&#x4E2A;&#x503C;&#x8BBE;&#x7F6E;&#x4E3A;&#x201C;8 16K&#x201D;&#x3001;&#x201C;4 64k&#x201D;&#x7B49;&#x3002;fastcgi_busy_buffers_size 128k;#&#x5EFA;&#x8BAE;&#x8BBE;&#x7F6E;&#x4E3A;fastcgi_buffer&#x7684;&#x4E24;&#x500D;&#xFF0C;&#x7E41;&#x5FD9;&#x65F6;&#x5019;&#x7684;bufferfastcgi_temp_file_write_size 128k;#&#x5728;&#x5199;&#x5165;fastcgi_temp_path&#x65F6;&#x5C06;&#x7528;&#x591A;&#x5927;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x9ED8;&#x8BA4;&#x503C;&#x662F;fastcgi_buffers&#x7684;&#x4E24;&#x500D;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E0A;&#x8FF0;&#x6570;&#x503C;&#x8BBE;&#x7F6E;&#x5C0F;&#x65F6;&#x82E5;&#x8D1F;&#x8F7D;&#x4E0A;&#x6765;&#x65F6;&#x53EF;&#x80FD;&#x62A5;502 Bad Gatewayfastcgi_cache oldboy_ngnix;#&#x8868;&#x793A;&#x5F00;&#x542F;FastCGI&#x7F13;&#x5B58;&#x5E76;&#x4E3A;&#x5176;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x540D;&#x79F0;&#x3002;&#x5F00;&#x542F;&#x7F13;&#x5B58;&#x975E;&#x5E38;&#x6709;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x6709;&#x6548;&#x964D;&#x4F4E;CPU&#x7684;&#x8D1F;&#x8F7D;&#xFF0C;&#x5E76;&#x4E14;&#x9632;&#x6B62;502&#x7684;&#x9519;&#x8BEF;&#x653E;&#x751F;&#xFF0C;&#x4F46;&#x662F;&#x5F00;&#x542F;&#x7F13;&#x5B58;&#x4E5F;&#x53EF;&#x80FD;&#x4F1A;&#x5F15;&#x8D77;&#x5176;&#x4ED6;&#x95EE;&#x9898;&#xFF0C;&#x8981;&#x5F88;&#x636E;&#x5177;&#x4F53;&#x60C5;&#x51B5;&#x9009;&#x62E9;fastcgi_cache_valid 200 302 1h;#&#x7528;&#x6765;&#x6307;&#x5B9A;&#x5E94;&#x7B54;&#x4EE3;&#x7801;&#x7684;&#x7F13;&#x5B58;&#x65F6;&#x95F4;&#xFF0C;&#x5B9E;&#x4F8B;&#x4E2D;&#x7684;&#x503C;&#x8868;&#x793A;&#x5C06;2000&#x548C;302&#x5E94;&#x7B54;&#x7F13;&#x5B58;&#x4E00;&#x5C0F;&#x65F6;&#xFF0C;&#x8981;&#x548C;fastcgi_cache&#x914D;&#x5408;&#x4F7F;&#x7528;fastcgi_cache_valid 301 1d;#&#x5C06;301&#x5E94;&#x7B54;&#x7F13;&#x5B58;&#x4E00;&#x5929;fastcgi_cache_valid any 1m;#&#x5C06;&#x5176;&#x4ED6;&#x5E94;&#x7B54;&#x7F13;&#x5B58;&#x4E3A;1&#x5206;&#x949F;fastcgi_cache_min_uses 1;#&#x8BF7;&#x6C42;&#x7684;&#x6570;&#x91CF;fastcgi_cache_path /data/ngx_fcgi_cache levels=2:2 keys_zone=ngx_fcgi_cache:512m;#&#x5B9A;&#x4E49;&#x7F13;&#x5B58;&#x7684;&#x8DEF;&#x5F84; &#x914D;&#x7F6E;&#x793A;&#x4F8B;&#xFF1A; 1234567location ~ \.php$ { root html; fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME /www/html/$fastcgi_script_name; include fastcgi_params;} &#x81F3;&#x4E8E;&#x5176;&#x4ED6;&#x7684;&#x4E00;&#x4E9B;&#x6A21;&#x5757;&#xFF08;&#x4F8B;&#x5982;ngx_http_proxy_module&#x3001;ngx_http_upstream_module&#xFF09;&#x8FD8;&#x542C;&#x4E0B;&#x56DE;&#x5206;&#x89E3;&#x3002;]]></content>
      <categories>
        <category>性能优化</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux常见配置文件汇总]]></title>
    <url>%2FLinux%E5%B8%B8%E8%A7%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%B1%87%E6%80%BB.html</url>
    <content type="text"><![CDATA[&#x5728;&#x6211;&#x4EEC;&#x7684;&#x8FD0;&#x7EF4;&#x5DE5;&#x4F5C;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x80FD;&#x591F;&#x6E05;&#x695A;&#x7684;&#x77E5;&#x9053;Linux&#x7CFB;&#x7EDF;&#x4E2D;&#x5E38;&#x7528;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x662F;&#x505A;&#x4EC0;&#x4E48;&#x7684;&#x3002;&#x90A3;&#x4E48;&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x548C;&#x7EF4;&#x62A4;Linux&#x7CFB;&#x7EDF;&#x90FD;&#x6709;&#x6781;&#x5927;&#x5E2E;&#x52A9;&#xFF0C;&#x672C;&#x6587;&#x4E3B;&#x8981;&#x4ECB;&#x7ECD;&#x4E00;&#x4E9B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x4F5C;&#x7528;&#x548C;&#x529F;&#x80FD;&#x3002; FHS&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6807;&#x51C6;1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950/bin&#xFF1A;&#x6240;&#x6709;&#x7528;&#x6237;&#x53EF;&#x7528;&#x7684;&#x57FA;&#x672C;&#x547D;&#x4EE4;&#x7A0B;&#x5E8F;&#x6587;&#x4EF6;&#xFF1B;/sbin&#xFF1A;&#x5B9E;&#x73B0;&#x7BA1;&#x7406;&#x529F;&#x80FD;&#x7684;&#x7A0B;&#x5E8F;&#x6587;&#x4EF6;&#xFF1B;/boot&#xFF1A;&#x5F15;&#x5BFC;&#x52A0;&#x8F7D;&#x5668;&#x7684;&#x9759;&#x6001;&#x6587;&#x4EF6;&#xFF1B;&#x5185;&#x6838;&#x3001;ramdisk&#xFF08;initrd&#xFF0C;initramfs&#xFF09;&#x6587;&#x4EF6;&#x4E5F;&#x5728;&#x6B64;&#x5904;&#xFF1B;&#x53EF;&#x72EC;&#x7ACB;&#x5206;&#x533A;&#xFF1B;/dev&#xFF1A;&#x5B58;&#x50A8;&#x7279;&#x6B8A;&#x6587;&#x4EF6;&#x6216;&#x8BBE;&#x5907;&#x6587;&#x4EF6;&#xFF1B; &#x8BBE;&#x5907;&#x6709;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#xFF1B; &#x5757;&#x8BBE;&#x5907;&#xFF1A;&#x652F;&#x6301;&#x968F;&#x673A;&#x8BBF;&#x95EE;&#xFF0C;&#x4EE5;&#x201C;&#x5757;&#x201D;&#x4E3A;&#x5355;&#x4F4D;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x4EA4;&#x6362;&#xFF1B;&#x6587;&#x4EF6;&#x7C7B;&#x578B;&#x6807;&#x8BC6;&#x7B26;&#x4E3A;&#x201C;b&#x201D;&#xFF1B; &#x5B57;&#x7B26;&#x8BBE;&#x5907;&#xFF1A;&#x662F;&#x7EBF;&#x6027;&#x8BBF;&#x95EE;&#xFF0C;&#x4EE5;&#x201C;&#x5B57;&#x7B26;&#x201D;&#x4E3A;&#x5355;&#x4F4D;&#xFF0C;&#x6309;&#x987A;&#x5E8F;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x4EA4;&#x6362;&#xFF1B;&#x6587;&#x4EF6;&#x7C7B;&#x578B;&#x6807;&#x8BC6;&#x7B26;&#x4E3A;&#x201C;c&#x201D;&#xFF1B;/etc&#xFF1A;&#x7CFB;&#x7EDF;&#x548C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x5B58;&#x653E;&#x4F4D;&#x7F6E;&#xFF1B;/home&#xFF1A;&#x666E;&#x901A;&#x7528;&#x6237;&#x7684;&#x5BB6;&#x76EE;&#x5F55;&#xFF1B;&#x53EF;&#x72EC;&#x7ACB;&#x5206;&#x533A;&#xFF1B; /home/USERNAME&#xFF1A;&#x6BCF;&#x4E2A;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x4E13;&#x7528;&#x7684;&#x5BB6;&#x76EE;&#x5F55;&#xFF1B;/root&#xFF1A;&#x7BA1;&#x7406;&#x5458;&#x7684;&#x5BB6;&#x76EE;&#x5F55;&#xFF1B;/lib&#xFF1A;&#x5B58;&#x653E;&#x5171;&#x4EAB;&#x5E93;&#x6587;&#x4EF6;&#xFF0C;&#x4EE5;&#x53CA;&#x5185;&#x6838;&#x6A21;&#x5757;&#x6587;&#x4EF6;&#xFF1B; modules&#xFF1A;&#x5185;&#x6838;&#x6A21;&#x5757;&#xFF1B;/lib64:64&#x4F4D;&#x7CFB;&#x7EDF;&#x7279;&#x6709;&#x7684;&#x5B58;&#x653E;&#x4F4D;&#x7F6E;&#xFF1B;/media&#xFF1A;&#x6302;&#x8F7D;&#x4FBF;&#x643A;&#x6027;&#x8BBE;&#x5907;&#xFF1B;/mnt&#xFF1A;&#x6302;&#x8F7D;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF1B;&#x5982;&#x786C;&#x76D8;&#xFF0C;&#x6216;&#x786C;&#x76D8;&#x5206;&#x533A;&#xFF1B;/opt&#xFF1A;&#x7B2C;&#x4E09;&#x65B9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x5B89;&#x88C5;&#x8DEF;&#x5F84;&#xFF1B;/srv&#xFF1A;&#x5B58;&#x653E;&#x5F53;&#x524D;&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#x7684;&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x4E2D;&#x7528;&#x5230;&#x7684;&#x4E2D;&#x95F4;&#x6570;&#x636E;&#xFF1B;/tmp&#xFF1A;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x5B58;&#x653E;&#x4F4D;&#x7F6E;&#xFF1B;/usr&#xFF1A;&#x53EF;&#x72EC;&#x7ACB;&#x5206;&#x533A;&#xFF1B; /usr Hierarchy&#x662F;&#x4E00;&#x4E2A;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#xFF0C;&#x5B58;&#x653E;&#x5168;&#x5C40;&#x5171;&#x4EAB;&#xFF08;&#x666E;&#x901A;&#x7528;&#x6237;&#xFF09;&#x53EA;&#x8BFB;&#x6570;&#x636E;&#xFF1B; &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7B2C;&#x4E8C;&#x91CD;&#x8981;&#x5206;&#x533A;&#xFF0C;&#x53EF;&#x5728;&#x5404;&#x9075;&#x5FAA;FHS&#x53D1;&#x884C;&#x7248;&#x4E4B;&#x95F4;&#x5171;&#x4EAB;&#xFF1B; /usr&#x76EE;&#x5F55;&#x4E0B;&#x5FC5;&#x987B;&#x6709;&#x7684;&#x76EE;&#x5F55;&#xFF1A; /bin&#xFF0C;/sbin&#xFF1B; /lib&#xFF1B; /include&#xFF1A;&#x5B58;&#x653E;c&#x7A0B;&#x5E8F;&#x7684;&#x5934;&#x6587;&#x4EF6;&#xFF08;&#x5F00;&#x53D1;C&#x7A0B;&#x5E8F;&#x6216;&#x624B;&#x52A8;&#x7F16;&#x8BD1;&#x65F6;&#x7528;&#x5230;&#xFF09;&#xFF1B; /share&#xFF1A;&#x5E73;&#x53F0;&#x7684;&#x72EC;&#x7ACB;&#x7684;&#x5171;&#x4EAB;&#x6570;&#x636E;&#x6587;&#x4EF6;&#xFF1B; /local&#xFF1A;&#x662F;&#x53E6;&#x4E00;&#x4E2A;&#x5C42;&#x7EA7;&#x76EE;&#x5F55;&#xFF0C;&#x53EF;&#x72EC;&#x7ACB;&#x5206;&#x533A;&#xFF1B;&#x7B2C;&#x4E09;&#x65B9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5B89;&#x88C5;&#x8DEF;&#x5F84;&#xFF1B; /usr&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x7279;&#x522B;&#x53EF;&#x9009;&#x76EE;&#x5F55;&#xFF1A; /X11R6&#xFF1A;X Window System&#xFF0C;&#x7248;&#x672C;&#x4E3A;11&#xFF0C;&#x53D1;&#x884C;&#x53F7;&#x4E3A;6&#xFF1B; /game /lib64&#xFF1A;&#x5E93;&#x6587;&#x4EF6;&#xFF1B; /src&#xFF1A;&#x7A0B;&#x5E8F;&#x6E90;&#x4EE3;&#x7801;&#xFF08;&#x5B89;&#x88C5;&#x540E;&#x653E;&#x5728;bin&#xFF0C;sbin&#x76EE;&#x5F55;&#x4E0B;&#xFF09;&#xFF1B; /usr/local&#xFF1A;&#x662F;&#x53E6;&#x4E00;&#x4E2A;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x76EE;&#x5F55;&#xFF08;&#x5FC5;&#x987B;&#x6709;&#x76F8;&#x5173;&#x76EE;&#x5F55;&#xFF09;&#xFF0C;&#x7B2C;&#x4E09;&#x65B9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5B89;&#x88C5;&#x8DEF;&#x5F84;&#xFF1B;&#x53EF;&#x4F7F;&#x7528;&#x72EC;&#x5206;&#x533A;&#xFF1B; /bin&#xFF0C;/sbin&#xFF1B; /lib&#xFF1B;/var&#xFF1A;&#x53EF;&#x53D8;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#x6570;&#x636E;&#xFF1B;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;Hierarchy&#xFF08;&#x5FC5;&#x987B;&#x6709;&#x76F8;&#x5173;&#x76EE;&#x5F55;&#xFF09;&#xFF0C;&#x53EF;&#x53D8;&#x6570;&#x636E;&#x5B58;&#x653E;&#x4F4D;&#x7F6E;&#xFF1B;&#x53EF;&#x72EC;&#x7ACB;&#x5206;&#x533A;&#xFF1B; /var&#x76EE;&#x5F55;&#x4E0B;&#x5FC5;&#x987B;&#x6709;&#x7684;&#x76EE;&#x5F55;&#xFF1A; /cache&#xFF1A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x7F13;&#x5B58;&#x6570;&#x636E;&#xFF1B; /lib&#xFF1A;&#x5B58;&#x653E;&#x53D8;&#x5316;&#x7684;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#xFF1B; /local&#xFF1A;&#x5B58;&#x653E;/usr/local&#x4E0B;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x53EF;&#x53D8;&#x7684;&#x4FE1;&#x606F;&#xFF1B; /lock&#xFF1A;&#x9501;&#x6587;&#x4EF6;&#xFF1B; /log&#xFF1A;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#xFF1B; /opt&#xFF1A;&#x5B58;&#x653E;/opt&#x76EE;&#x5F55;&#x4E0B;&#x8FD0;&#x884C;&#x7A0B;&#x5E8F;&#x7684;&#x53EF;&#x53D8;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#x6570;&#x636E;&#xFF1B; /run&#xFF1A;&#x5B58;&#x653E;&#x8FD0;&#x884C;&#x8FDB;&#x7A0B;&#x76F8;&#x5173;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x5B58;&#x50A8;pid&#x6587;&#x4EF6;&#xFF1B; /spool&#xFF1A; /tmp&#xFF1A;&#x5B58;&#x653E;&#x7CFB;&#x7EDF;&#x91CD;&#x542F;&#x540E;&#x80FD;&#x4FDD;&#x7559;&#x7684;&#x6587;&#x4EF6;&#xFF1B;/proc&#xFF1A;&#x57FA;&#x4E8E;&#x5185;&#x5B58;&#x7684;&#x865A;&#x62DF;&#xFF08;&#x4F2A;&#xFF09;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x7528;&#x4E8E;&#x4E3A;&#x5185;&#x6838;&#x53CA;&#x8FDB;&#x7A0B;&#x5B58;&#x50A8;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#xFF1B;&#x5B83;&#x4EEC;&#x591A;&#x6570;&#x4E3A;&#x5185;&#x6838;&#x53C2;&#x6570;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;net.ipv4.ip_forward,&#x865A;&#x62DF;&#x4E3A;/proc/sys/net/ipv4/ip_forward&#xFF1B;&#x5173;&#x673A;&#x540E;&#x5185;&#x5BB9;&#x4E3A;&#x7A7A;&#xFF1B;/sys&#xFF1A;sysfs&#x865A;&#x62DF;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x662F;&#x4E00;&#x79CD;&#x63D0;&#x4F9B;&#x4E86;&#x6BD4;/proc&#x66F4;&#x4E3A;&#x7406;&#x60F3;&#x7684;&#x8BBF;&#x95EE;&#x5185;&#x6838;&#x6570;&#x636E;&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x9014;&#x5F84;&#xFF1B;&#x5176;&#x4E3B;&#x8981;&#x4F5C;&#x7528;&#x5728;&#x4E8E;&#x4E3A;&#x7BA1;&#x7406;Linux&#x7CFB;&#x7EDF;&#x4E0A;&#x7684;&#x8BBE;&#x5907;&#x63D0;&#x4F9B;&#x4E00;&#x79CD;&#x7EDF;&#x4E00;&#x6A21;&#x578B;&#x7684;&#x63A5;&#x53E3;&#xFF1B; &#x6587;&#x4EF6;&#x7684;&#x7279;&#x5F81; &#x4E0D;&#x540C;&#x989C;&#x8272;&#x7684;&#x6587;&#x4EF6;&#x7C7B;&#x578B; &#x84DD;&#x8272;&#x6587;&#x4EF6; +++++++++++++++++++++ &#x76EE;&#x5F55; &#x767D;&#x8272;&#x6587;&#x4EF6; +++++++++++++++++++++ &#x666E;&#x901A;&#x6587;&#x4EF6; &#x7EFF;&#x8272;&#x6587;&#x4EF6; +++++++++++++++++++++ &#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#xFF0C;&#x53EF;&#x6267;&#x884C;&#x7684;&#x7A0B;&#x5E8F; &#x7EA2;&#x8272;&#x6587;&#x4EF6; +++++++++++++++++++++ &#x538B;&#x7F29;&#x6587;&#x4EF6;&#x6216;&#x8005;&#x5305;&#x6587;&#x4EF6; &#x9EC4;&#x8272;&#x6587;&#x4EF6; +++++++++++++++++++++ &#x8BBE;&#x5907;&#x6587;&#x4EF6;&#xFF08;dev&#x76EE;&#x5F55;&#x4E0B;&#xFF09; &#x9752;&#x7EFF;&#x8272;&#x6587;&#x4EF6; +++++++++++++++++++ &#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6; &#x9752;&#x84DD;&#x8272;&#x6587;&#x4EF6; +++++++++++++++++++ &#x94FE;&#x63A5;&#x6587;&#x4EF6;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4F7F;&#x7528;ln&#x547D;&#x4EE4;&#x5EFA;&#x7ACB;&#x7684;&#x6587;&#x4EF6; &#x7C89;&#x7EA2;&#x8272;&#x6587;&#x4EF6; +++++++++++++++++++ &#x56FE;&#x7247;&#x6587;&#x4EF6;&#x6216;&#x8005;&#x662F;socket&#x6587;&#x4EF6; &#x9752;&#x9EC4;&#x8272;&#x6587;&#x4EF6; +++++++++++++++++++ &#x7BA1;&#x9053;&#x6587;&#x4EF6; &#x4E0D;&#x540C;&#x5B57;&#x7B26;&#x7684;&#x6587;&#x4EF6;&#x7C7B;&#x578B; -&#xFF1A;&#x666E;&#x901A;&#x6587;&#x4EF6; d&#xFF1A;&#x76EE;&#x5F55;&#x6587;&#x4EF6; l&#xFF1A;&#x94FE;&#x63A5;&#x6587;&#x4EF6; b&#xFF1A;&#x5757;&#x8BBE;&#x5907;&#x6587;&#x4EF6; c&#xFF1A;&#x5B57;&#x7B26;&#x8BBE;&#x5907;&#x6587;&#x4EF6; p&#xFF1A;&#x7BA1;&#x9053;&#x6587;&#x4EF6; /etc &#x914D;&#x7F6E;&#x6587;&#x4EF6;12345678910111213141516171819202122232425262728/etc/passwd &#x7528;&#x6237;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5176;&#x4E2D;&#x7684;&#x57DF;&#x7ED9;&#x51FA;&#x4E86;&#x7528;&#x6237;&#x540D;&#x3001;&#x771F;&#x5B9E;&#x59D3;&#x540D;&#x3001;&#x5BB6;&#x76EE;&#x5F55;&#x3001;&#x52A0;&#x5BC6;&#x53E3;&#x4EE4;&#x548C;&#x7528;&#x6237;&#x7684;&#x5176;&#x4ED6;&#x4FE1;&#x606F;/etc/group &#x7C7B;&#x4F3C;/etc/passwd,&#x4F46;&#x5BF9;&#x5E94;&#x7684;&#x662F;&#x7EC4;/etc/inittab init &#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF08;&#x521D;&#x59CB;&#x5316;&#x914D;&#x7F6E;&#xFF09;/etc/issue &#x5728;&#x767B;&#x5F55;&#x63D0;&#x793A;&#x7B26;&#x524D;&#x7684;&#x8F93;&#x51FA;&#x4FE1;&#x606F;&#xFF08;&#x901A;&#x5E38;&#x5305;&#x62EC;&#x7CFB;&#x7EDF;&#x7684;&#x4E00;&#x6BB5;&#x77ED;&#x8BF4;&#x660E;&#x6216;&#x6B22;&#x8FCE;&#x4FE1;&#x606F;&#xFF09;/etc/motd &#x6210;&#x529F;&#x767B;&#x5F55;&#x540E;&#x81EA;&#x52A8;&#x8F93;&#x51FA;&#xFF08;&#x7ECF;&#x5E38;&#x7528;&#x4E8E;&#x901A;&#x544A;&#x4FE1;&#x606F;&#xFF0C;&#x5982;&#x8BA1;&#x5212;&#x5173;&#x65F6;&#x95F4;&#x7684;&#x8B66;&#x544A;&#xFF09;/etc/mtab &#x5F53;&#x524D;&#x5B89;&#x88C5;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5217;&#x8868;&#x3002;&#x7531;scripts&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5E76;&#x7531;mount&#x547D;&#x4EE4;&#x81EA;&#x52A8;&#x66F4;&#x65B0;&#x3002;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5F53;&#x524D;&#x5B89;&#x88C5;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x5217;&#x8868;&#x65F6;&#x4F7F;&#x7528;&#xFF0C;&#x4F8B;&#x5982;df &#x547D;&#x4EE4;&#xFF0C;&#x5F53;df &#x2013;a &#x65F6;&#xFF0C;&#x67E5;&#x770B;&#x5230;&#x7684;&#x4FE1;&#x606F;&#x5E94;&#x548C;&#x5176;&#x4E00;&#x81F4;/etc/shadow &#x5728;&#x5B89;&#x88C5;&#x4E86;&#x5F71;&#x5B50;&#x53E3;&#x4EE4;&#x8F6F;&#x4EF6;&#x7684;&#x7CFB;&#x7EDF;&#x4E0A;&#x7684;&#x5F71;&#x5B50;&#x53E3;&#x4EE4;&#x6587;&#x4EF6;&#xFF0C;&#x5F71;&#x5B50;&#x53E3;&#x4EE4;&#x6587;&#x4EF6;&#x5C06;/etc/passwd &#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x52A0;&#x5BC6;&#x53E3;&#x4EE4;&#x79FB;&#x52A8;&#x5230;/etc/shadow&#x4E2D;/etc/securetty &#x786E;&#x8BA4;&#x5B89;&#x5168;&#x7EC8;&#x7AEF;&#xFF0C;&#x5373;&#x54EA;&#x4E2A;&#x7EC8;&#x7AEF;&#x5141;&#x8BB8;root &#x767B;&#x5F55;/etc/shells &#x5217;&#x51FA;&#x53EF;&#x4FE1;&#x4EFB;&#x7684;shell&#xFF08;chsh &#x547D;&#x4EE4;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x5728;&#x672C;&#x6587;&#x4EF6;&#x6307;&#x5B9A;&#x8303;&#x56F4;&#x5185;&#x6539;&#x53D8;&#x767B;&#x5F55;shell&#xFF09;/etc/profile &#x7528;&#x6237;&#x767B;&#x5F55;&#x65F6;&#x90FD;&#x4F1A;&#x8FD0;&#x884C;&#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;/etc/hosts &#x66F4;&#x6539;&#x4E3B;&#x673A;&#x540D;&#x548C;IP &#x5730;&#x5740;&#x7684;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;/etc/bashrc &#x547D;&#x4EE4;&#x7684;&#x522B;&#x540D;/etc/yum.repos.d &#x914D;&#x7F6E;&#x672C;&#x5730;YUM&#x6E90;/etc/fstab &#x7CFB;&#x7EDF;&#x542F;&#x52A8;&#x65F6;&#x81EA;&#x52A8;&#x52A0;&#x8F7D;&#x7684;&#x8BBE;&#x5907;&#xFF0C;&#xFF08;&#x7528;&#x4E8E;&#x914D;&#x7F6E;&#x81EA;&#x52A8;&#x6302;&#x8F7D;&#x8BBE;&#x5907;&#xFF09;/etc/resolv.conf &#x914D;&#x7F6E;DNS &#x5730;&#x5740;/etc/rc.d/init.d &#x7528;&#x4E8E;&#x653E;&#x7F6E;&#x51E0;&#x4E4E;&#x6240;&#x6709;&#x670D;&#x52A1;&#x7684;&#x542F;&#x52A8;&#x811A;&#x672C;/etc/sysctl.conf &#x5185;&#x6838;&#x53C2;&#x6570;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/crontab &#x7CFB;&#x7EDF;&#x5B9A;&#x4E49;&#x7684;&#x4EFB;&#x52A1;&#x8BA1;&#x5212;/etc/anacrontab &#x5B9E;&#x73B0;&#x68C0;&#x67E5;&#x8FC7;&#x671F;&#x548C;&#x672A;&#x5B8C;&#x6210;&#x7684;crontab&#x7684;&#x4EFB;&#x52A1;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/xinetd.con xinetd &#x7684;&#x4E3B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/hosts.allow TCP&#x7684;&#x4E00;&#x4E2A;&#x8BB8;&#x53EF;&#x8868;/etc/host.deny TCP&#x7684;&#x4E00;&#x4E2A;&#x62D2;&#x7EDD;&#x8868;/etc/udev/rules.d &#x7CFB;&#x7EDF;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x5C06;&#x786C;&#x4EF6;&#x63A2;&#x6D4B;&#x4FE1;&#x606F;&#x8F93;&#x51FA;&#x6210;&#x8BBE;&#x5907;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/rc.d/rc.sysinit &#x7CFB;&#x7EDF;&#x542F;&#x52A8;&#x8BBE;&#x7F6E;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/sysconfig/i18n* &#x8BBE;&#x7F6E;&#x7CFB;&#x7EDF;&#x8BED;&#x8A00;&#x548C;&#x5B57;&#x7B26;&#x7C7B;&#x578B;/etc/sysconfig/network &#x66F4;&#x6539;hostname&#xFF08;&#x4E3B;&#x673A;&#x540D;&#xFF09;&#x4EE5;&#x53CA;&#x7F51;&#x5361;&#x5DE5;&#x4F5C;&#x72B6;&#x6001;/etc/sysconfig/iptables &#x9632;&#x706B;&#x5899;&#x4E3B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/sysconfig/network-scripts/ifcfg-eth0 &#x914D;&#x7F6E;&#x7F51;&#x5361;eth0 &#x6CE8; /etc/passwd &#x5B58;&#x653E;&#x7528;&#x6237;&#x7684;&#x8D26;&#x53F7; 12slaceware:x:5000:5000:Test User:/home/slackware:/bin/bashName&#xFF1A;passwd&#x4F4D;&#x7F6E;&#xFF1A;UID&#xFF1A;GID:CECOS(&#x6CE8;&#x91CA;):diectory&#xFF08;&#x5BB6;&#x76EE;&#x5F55;&#xFF09;:shell /etc/shadow &#x5B58;&#x653E;&#x7528;&#x6237;&#x7684;&#x5BC6;&#x7801; 12slaceware:$1$12345678$0ME5N6oDyoEAwUp7b5UDM/:15355:0:99999:7::: Name:&#x52A0;&#x5BC6;&#x540E;&#x7684;&#x5BC6;&#x7801;&#xFF1A;&#x65F6;&#x95F4;1&#xFF1A;&#x65F6;&#x95F4;2&#xFF1A;&#x65F6;&#x95F4;3&#xFF1A;&#x65F6;&#x95F4;4&#xFF1A;&#x65F6;&#x95F4;5&#xFF1A;&#x65F6;&#x95F4;6&#xFF1A;&#x9884;&#x7559;&#x6BB5; &#x52A0;&#x5BC6;&#x540E;&#x7684;&#x5BC6;&#x7801;&#xFF1A;&#x4EE5;$&#x5206;&#x5F00;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;$&#x540E;&#x662F;1&#xFF0C;&#x8BF4;&#x660E;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;&#x662F;md5&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;$&#x540E;&#x662F;&#x52A0;&#x7684;sail&#xFF0C;&#x7B2C;&#x4E09;&#x4E2A;$&#x540E;&#x662F;&#x52A0;&#x7684;&#x5BC6;&#x7801;&#x65F6;&#x95F4;1&#xFF1A;&#x4ECE;1970&#x5E74;1&#x6708;1&#x65E5;&#x8D77;&#x5230;&#x6700;&#x8FD1;&#x7684;&#x4FEE;&#x6539;&#x7684;&#x5929;&#x6570;&#x65F6;&#x95F4;2&#xFF1A;&#x5BC6;&#x7801;&#x7684;&#x6700;&#x77ED;&#x4F7F;&#x7528;&#x671F;&#x9650;&#x65F6;&#x95F4;3&#xFF1A;&#x5BC6;&#x7801;&#x6700;&#x957F;&#x4F7F;&#x7528;&#x671F;&#x9650;&#x65F6;&#x95F4;4&#xFF1A;&#x5728;&#x5BC6;&#x7801;&#x8FC7;&#x671F;&#x4E4B;&#x524D;&#x591A;&#x5C11;&#x5929;&#x5F00;&#x59CB;&#x8B66;&#x544A;&#x65F6;&#x95F4;5&#xFF1A;&#x5728;&#x5BC6;&#x7801;&#x8FC7;&#x671F;&#x591A;&#x5C11;&#x5929;&#x7528;&#x6237;&#x7981;&#x7528;&#x65F6;&#x95F4;6&#xFF1A;&#x81EA;1970&#x5E74;1&#x6708;1&#x65E5;&#x8D77;&#x591A;&#x957F;&#x65F6;&#x95F4;&#x7528;&#x6237;&#x88AB;&#x7981;&#x7528; &#x4EA4;&#x4E92;&#x5F0F;&#x767B;&#x9646;&#x7684;&#x7528;&#x6237;&#xFF1A; 1/etc/profile --&gt;/etc/profile.d/* --&gt;~/.bash_profile --&gt;~/.bashrc --&gt;/etc/bashrc &#x975E;&#x4EA4;&#x4E92;&#x5F0F;&#x767B;&#x5F55;&#xFF1A; 1~/.bashrc --&gt;/etc/bashrc --&gt;.etc/profile.d/* /proc &#x914D;&#x7F6E;&#x6587;&#x4EF6;123456789101112131415161718192021222324252627282930/proc/dma &#x663E;&#x793A;&#x5F53;&#x524D;&#x4F7F;&#x7528;&#x7684;DMA &#x901A;&#x9053;/proc/filesystems &#x6838;&#x5FC3;&#x914D;&#x7F6E;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;/proc/interrupts &#x663E;&#x793A;&#x4F7F;&#x7528;&#x7684;&#x4E2D;/proc/ioports &#x5F53;&#x524D;&#x4F7F;&#x7528;&#x7684;I/O &#x7AEF;&#x53E3;/proc/kcore &#x7CFB;&#x7EDF;&#x7269;&#x7406;&#x5185;&#x5B58;&#x6620;&#x8C61;&#x3002;&#x4E0E;&#x7269;&#x7406;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x5B8C;&#x5168;&#x4E00;&#x6837;&#xFF0C;&#x4F46;&#x4E0D;&#x5B9E;&#x9645;&#x5360;&#x7528;&#x8FD9;&#x4E48;&#x591A;&#x5185;&#x5B58; (&#x8BB0;&#x4F4F;&#xFF1A;&#x9664;&#x975E;&#x4F60;&#x628A;&#x5B83;&#x62F7;&#x8D1D;&#x5230;&#x4EC0;&#x4E48;&#x5730;&#x65B9;&#xFF0C;/proc &#x4E0B;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x4E1C;&#x897F;&#x5360;&#x7528;&#x4EFB;&#x4F55;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x3002;&#xFF09;/proc/kmsg &#x6838;&#x5FC3;&#x8F93;&#x51FA;&#x7684;&#x6D88;&#x606F;&#x3002;&#x4E5F;&#x88AB;&#x9001;&#x5230;syslog/proc/ksyms &#x6838;&#x5FC3;&#x7B26;&#x53F7;&#x8868;/proc/loadavg &#x7CFB;&#x7EDF;&quot;&#x5E73;&#x5747;&#x8D1F;&#x8F7D;&quot;&#xFF1B;3 &#x4E2A;&#x6307;&#x793A;&#x5668;&#x6307;&#x51FA;&#x7CFB;&#x7EDF;&#x5F53;&#x524D;&#x7684;&#x5DE5;&#x4F5C;&#x91CF;/proc/meminfo &#x5B58;&#x50A8;&#x5668;&#x4F7F;&#x7528;&#x4FE1;&#x606F;&#xFF0C;&#x5305;&#x62EC;&#x7269;&#x7406;&#x5185;&#x5B58;&#x548C;swap/proc/modules &#x5F53;&#x524D;&#x52A0;&#x8F7D;&#x4E86;&#x54EA;&#x4E9B;&#x6838;&#x5FC3;&#x6A21;&#x5757;/proc/net &#x7F51;&#x7EDC;&#x534F;&#x8BAE;&#x72B6;&#x6001;&#x4FE1;&#x606F;/proc/self &#x5230;&#x67E5;&#x770B;/proc &#x7684;&#x7A0B;&#x5E8F;&#x7684;&#x8FDB;&#x7A0B;&#x76EE;&#x5F55;&#x7684;&#x7B26;&#x53F7;&#x8FDE;&#x63A5;&#x3002;&#x5F53;2&#x4E2A;&#x8FDB;&#x7A0B;&#x67E5;&#x770B;/proc&#x65F6;&#xFF0C;&#x662F;&#x4E0D;&#x540C;&#x7684;&#x8FDE;&#x63A5; /proc/stat &#x7CFB;&#x7EDF;&#x7684;&#x4E0D;&#x540C;&#x72B6;&#x6001;/proc/uptime &#x7CFB;&#x7EDF;&#x542F;&#x52A8;&#x7684;&#x65F6;&#x95F4;&#x957F;&#x5EA6; /proc/cpuinfo &#x5904;&#x7406;&#x5668;&#x4FE1;&#x606F;&#xFF0C;&#x5982;&#x7C7B;&#x578B;&#x3001;&#x5236;&#x9020;&#x5546;&#x3001;&#x578B;&#x53F7;&#x548C;&#x6027;&#x80FD;/proc/devices &#x5F53;&#x524D;&#x8FD0;&#x884C;&#x7684;&#x6838;&#x5FC3;&#x914D;&#x7F6E;&#x7684;&#x8BBE;&#x5907;&#x9A71;&#x52A8;&#x7684;&#x5217;&#x8868;/proc/version &#x6838;&#x5FC3;&#x7248;&#x672C;/proc/mdstat RAID&#x8BBE;&#x5907;&#x7684;&#x4FE1;&#x606F;/proc/cmdline grub&#x4FE1;&#x606F;/proc/cpuinfo &#x663E;&#x793A;CPU&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;/proc/cpuset cpu&#x96C6;&#x5408; &#x7528;&#x4E8E;&#x663E;&#x793A;&#x5F53;&#x524D;&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x5E94;&#x7528;&#x5230;&#x54EA;&#x4E9B;cpu&#x4E0A;/proc/filesystem &#x5F53;&#x524D;&#x7CFB;&#x7EDF;&#x652F;&#x6301;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x79CD;&#x7C7B;/etc/245/vm &#x7CFB;&#x7EDF;&#x8FDB;&#x7A0B;ID&#x53F7;&#x4E3A;245&#x7684;&#x8FDB;&#x7A0B;&#x7684;&#x865A;&#x62DF;&#x5185;&#x5B58;&#x4FE1;&#x606F;/etc/245/kernel &#x7CFB;&#x7EDF;&#x8FDB;&#x7A0B;ID&#x53F7;&#x4E3A;245&#x7684;&#x8FDB;&#x7A0B;&#x7684;&#x5185;&#x6838;&#x4FE1;&#x606F;/proc/mounts &#x6302;&#x8F7D;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;/proc/swaps &#x4EA4;&#x6362;&#x5206;&#x533A;&#x4FE1;&#x606F; /proc/uptime &#x542F;&#x52A8;&#x7CFB;&#x7EDF;&#x8FD0;&#x884C;&#x65F6;&#x957F;/proc/sys (&#x5177;&#x6709;&#x5199;&#x6743;&#x9650;)&#x5B9A;&#x4E49;&#x5185;&#x6838;&#x53C2;&#x6570;&#x7684;&#x503C;&#x6765;&#x5B9A;&#x4E49;&#x5185;&#x6838;&#x7684;&#x529F;&#x80FD;/proc/sys/kernel/hostname &#x4E3B;&#x673A;&#x540D;&#x7684;&#x8BBE;&#x5B9A; /usr&#x914D;&#x7F6E;&#x6587;&#x4EF6;1234567891011121314/usr/bin &#x666E;&#x901A;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;/usr/doc linux &#x6587;&#x6863;/usr/include linux &#x4E0B;C &#x5F00;&#x53D1;&#x548C;&#x7F16;&#x8BD1;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6240;&#x9700;&#x8981;&#x7684;&#x5934;&#x6587;&#x4EF6;/usr/include/g++ C++&#x7F16;&#x8BD1;&#x5668;&#x7684;&#x5934;&#x6587;/usr/lib &#x5E38;&#x7528;&#x7684;&#x52A8;&#x6001;&#x94FE;&#x63A5;&#x5E93;&#x548C;&#x8F6F;&#x4EF6;&#x5305;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/usr/src &#x7CFB;&#x7EDF;&#x8F6F;&#x4EF6;&#x7684;&#x6E90;&#x4EE3;&#x7801;/usr/src/linux linux &#x5185;&#x6838;&#x7684;&#x6E90;&#x4EE3;&#x7801;/usr/local/bin &#x672C;&#x5730;&#x589E;&#x52A0;&#x7684;&#x547D;&#x4EE4;/usr/local/lib &#x672C;&#x5730;&#x589E;&#x52A0;&#x7684;&#x5E93;/usr/sbin &#x4E3A;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x5458;&#x4FDD;&#x7559;&#x7684;&#x7A0B;&#x5E8F;/usr/share/fonts &#x5B57;&#x4F53;&#x6587;&#x4EF6;/usr/share/doc &#x5404;&#x79CD;&#x6587;&#x6863;&#x6587;&#x4EF6;/usr/share/man &#x7CFB;&#x7EDF;&#x624B;&#x518C;&#x9875;/usr/local/apache/man &#x5B9A;&#x4E49;man&#x76EE;&#x5F55;&#x6587;&#x96C6; &#x5176;&#x5B83;&#x76EE;&#x5F55;&#x914D;&#x7F6E;&#x6587;&#x4EF6;12345678910/dev/null &#x6CA1;&#x6709;&#x7528;&#x7684;&#x6587;&#x4EF6;&#x6240;&#x653E;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x56DE;&#x6536;&#x7AD9;&#xFF0C;&#x541E;&#x566C;&#x8BBE;&#x5907;/dev/zero &#x521D;&#x59CB;&#x5316;&#x78C1;&#x76D8;&#xFF08;&#x5410;&#x96F6;&#xFF09; /dev/random &#x968F;&#x673A;&#x6570;&#x751F;&#x6210;&#x5668;&#xFF0C;&#x71B5;&#x6C60;/dev/urandom &#x4F2A;&#x968F;&#x673A;&#x6570;&#x751F;&#x6210;&#x5668;&#xFF0C;&#x71B5;&#x6C60;&#x3002;&#xFF08;&#x5F53;&#x71B5;&#x6C60;&#x8017;&#x5C3D;&#x65F6;&#xFF0C;&#x7528;&#x8F6F;&#x4EF6;&#x751F;&#x6210;&#x968F;&#x673A;&#x6570;&#xFF09;/var/spool/mail/root &#x5B9A;&#x4E49;mail&#x8BBE;&#x7F6E;&#x53D1;&#x9001;&#x7528;&#x6237;&#x4E3A;root/bin/bash &#x7CFB;&#x7EDF;&#x5185;&#x7F6E;&#x811A;&#x672C;/home/USERNAME &#x7528;&#x6237;&#x914D;&#x989D;&#x6587;&#x4EF6;/var/spool/cron/USERNAME &#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x4EFB;&#x52A1;&#x8BA1;&#x5212;/sbin/nologin &#x4E0D;&#x80FD;&#x767B;&#x9646;&#x7684;&#x7528;&#x6237;/var/log/message &#x7CFB;&#x7EDF;&#x7684;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;]]></content>
      <categories>
        <category>基础</category>
      </categories>
      <tags>
        <tag>文件系统</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux数据恢复]]></title>
    <url>%2FLinux%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D.html</url>
    <content type="text"><![CDATA[&#x5BF9;&#x4E8E;&#x4E00;&#x540D;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x6765;&#x8BF4;&#xFF0C;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x5B89;&#x5168;&#x662F;&#x6839;&#x672C;&#x804C;&#x8D23;&#x3002;&#x6240;&#x4EE5;&#x5728;&#x7EF4;&#x62A4;&#x7CFB;&#x7EDF;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8981;&#x614E;&#x4E4B;&#x53C8;&#x614E;&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x65F6;&#x96BE;&#x514D;&#x4F1A;&#x51FA;&#x73B0;&#x6570;&#x636E;&#x88AB;&#x8BEF;&#x5220;&#x9664;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x6539;&#x5982;&#x4F55;&#x5FEB;&#x901F;&#x3001;&#x6709;&#x6548;&#x5730;&#x6062;&#x590D;&#x6570;&#x636E;&#x5462;&#xFF1F;&#x672C;&#x6587;&#x5C31;&#x4E3B;&#x8981;&#x4ECB;&#x7ECD;&#x4E00;&#x6B3E;Linux&#x6062;&#x590D;&#x6570;&#x636E;&#x7684;&#x795E;&#x5668;&#x3002; extundelete&#x6062;&#x590D;&#x539F;&#x7406;extundelete&#x6062;&#x590D;&#x6587;&#x4EF6;&#x65F6;&#x5E76;&#x4E0D;&#x4F9D;&#x8D56;&#x7279;&#x5B9A;&#x6587;&#x4EF6;&#x683C;&#x5F0F;&#xFF0C;&#x9996;&#x5148;extundelete&#x4F1A;&#x901A;&#x8FC7;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;inode&#x4FE1;&#x606F;&#xFF08;&#x6839;&#x76EE;&#x5F55;&#x7684;inode&#x4E00;&#x822C;&#x4E3A;2&#xFF09;&#x6765;&#x83B7;&#x5F97;&#x5F53;&#x524D;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E0B;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x5305;&#x62EC;&#x5B58;&#x5728;&#x7684;&#x548C;&#x5DF2;&#x7ECF;&#x5220;&#x9664;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x5305;&#x62EC;&#x6587;&#x4EF6;&#x540D;&#x548C;inode&#x3002;&#x7136;&#x540E;&#x5229;&#x7528;inode&#x4FE1;&#x606F;&#x7ED3;&#x5408;&#x65E5;&#x5FD7;&#x53BB;&#x67E5;&#x8BE2;&#x8BE5;inode&#x6240;&#x5728;&#x7684;block&#x4F4D;&#x7F6E;&#xFF0C;&#x5305;&#x62EC;&#x76F4;&#x63A5;&#x5757;&#xFF0C;&#x95F4;&#x63A5;&#x5757;&#x7B49;&#x4FE1;&#x606F;&#x3002;&#x6700;&#x540E;&#x5229;&#x7528;dd&#x547D;&#x4EE4;&#x5C06;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x5907;&#x4EFD;&#x51FA;&#x6765;&#xFF0C;&#x4ECE;&#x800C;&#x6062;&#x590D;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x3002;extundelete&#x5B89;&#x88C5; extundelete&#x7684;&#x5B98;&#x65B9;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF0C;&#x76EE;&#x524D;&#x7684;&#x7A33;&#x5B9A;&#x7248;&#x672C;&#x662F;extundelete-0.2.4&#x3002;12345yum -y install e2fsprogs.x86_64 e2fsprogs-devel.x86_64 e2fsprogs-libs.x86_64 # &#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x5305;tar -jxvf extundelete-0.2.4.tar.bz2 cd extundelete-0.2.4 ./configure --prefix=/usr/local/extundelete make &amp;&amp; make install &#x6210;&#x529F;&#x5B89;&#x88C5;extundelete&#x540E;&#xFF0C;&#x4F1A;&#x5728;&#x7CFB;&#x7EDF;&#x4E2D;&#x751F;&#x6210;&#x4E00;&#x4E2A;extundelete&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x201C;extundelete &#x2013;help&#x201D;&#x83B7;&#x5F97;&#x6B64;&#x8F6F;&#x4EF6;&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x3002; extundelete&#x547D;&#x4EE4;&#x8BE6;&#x89E3;extundelete [options] [action] device-file options&#xFF1A;&#x2013;version, -[vV]&#xFF0C;&#x663E;&#x793A;&#x8F6F;&#x4EF6;&#x7248;&#x672C;&#x53F7;&#x3002;&#x2013;help&#xFF0C;&#x663E;&#x793A;&#x8F6F;&#x4EF6;&#x5E2E;&#x52A9;&#x4FE1;&#x606F;&#x3002;&#x2013;superblock&#xFF0C;&#x663E;&#x793A;&#x8D85;&#x7EA7;&#x5757;&#x4FE1;&#x606F;&#x3002;&#x2013;journal&#xFF0C;&#x663E;&#x793A;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;&#x3002;&#x2013;after dtime&#xFF0C;&#x65F6;&#x95F4;&#x53C2;&#x6570;&#xFF0C;&#x8868;&#x793A;&#x5728;&#x67D0;&#x6BB5;&#x65F6;&#x95F4;&#x4E4B;&#x540E;&#x88AB;&#x5220;&#x7684;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x3002;&#x2013;before dtime&#xFF0C;&#x65F6;&#x95F4;&#x53C2;&#x6570;&#xFF0C;&#x8868;&#x793A;&#x5728;&#x67D0;&#x6BB5;&#x65F6;&#x95F4;&#x4E4B;&#x524D;&#x88AB;&#x5220;&#x7684;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x3002; action&#xFF1A;&#x2013;inode ino&#xFF0C;&#x663E;&#x793A;&#x8282;&#x70B9;&#x201C;ino&#x201D;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x2013;block blk&#xFF0C;&#x663E;&#x793A;&#x6570;&#x636E;&#x5757;&#x201C;blk&#x201D;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x2013;restore-inode ino[,ino,&#x2026;]&#xFF0C;&#x6062;&#x590D;&#x547D;&#x4EE4;&#x53C2;&#x6570;&#xFF0C;&#x8868;&#x793A;&#x6062;&#x590D;&#x8282;&#x70B9;&#x201C;ino&#x201D;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x6062;&#x590D;&#x7684;&#x6587;&#x4EF6;&#x4F1A;&#x81EA;&#x52A8;&#x653E;&#x5728;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#x4E0B;&#x7684;RESTORED_FILES&#x6587;&#x4EF6;&#x5939;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;&#x8282;&#x70B9;&#x7F16;&#x53F7;&#x4F5C;&#x4E3A;&#x6269;&#x5C55;&#x540D;&#x3002;&#x2013;restore-file &#x2018;path&#x2019;&#xFF0C;&#x6062;&#x590D;&#x547D;&#x4EE4;&#x53C2;&#x6570;&#xFF0C;&#x8868;&#x793A;&#x5C06;&#x6062;&#x590D;&#x6307;&#x5B9A;&#x8DEF;&#x5F84;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x628A;&#x6062;&#x590D;&#x7684;&#x6587;&#x4EF6;&#x653E;&#x5728;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#x4E0B;&#x7684;RECOVERED_FILES&#x76EE;&#x5F55;&#x4E2D;&#x3002;&#x2013;restore-files &#x2018;path&#x2019;&#xFF0C;&#x6062;&#x590D;&#x547D;&#x4EE4;&#x53C2;&#x6570;&#xFF0C;&#x8868;&#x793A;&#x5C06;&#x6062;&#x590D;&#x5728;&#x8DEF;&#x5F84;&#x4E2D;&#x5DF2;&#x5217;&#x51FA;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x3002;&#x2013;restore-all&#xFF0C;&#x6062;&#x590D;&#x547D;&#x4EE4;&#x53C2;&#x6570;&#xFF0C;&#x8868;&#x793A;&#x5C06;&#x5C1D;&#x8BD5;&#x6062;&#x590D;&#x6240;&#x6709;&#x76EE;&#x5F55;&#x548C;&#x6587;&#x4EF6;&#x3002;-j journal&#xFF0C;&#x8868;&#x793A;&#x4ECE;&#x5DF2;&#x7ECF;&#x547D;&#x540D;&#x7684;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;&#x6269;&#x5C55;&#x65E5;&#x5FD7;&#x3002;-b blocknumber&#xFF0C;&#x8868;&#x793A;&#x4F7F;&#x7528;&#x4E4B;&#x524D;&#x5907;&#x4EFD;&#x7684;&#x8D85;&#x7EA7;&#x5757;&#x6765;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x4E00;&#x822C;&#x7528;&#x4E8E;&#x67E5;&#x770B;&#x73B0;&#x6709;&#x8D85;&#x7EA7;&#x5757;&#x662F;&#x4E0D;&#x662F;&#x5F53;&#x524D;&#x6240;&#x8981;&#x7684;&#x6587;&#x4EF6;&#x3002;-B blocksize&#xFF0C;&#x8868;&#x793A;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x5757;&#x5927;&#x5C0F;&#x6765;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x4E00;&#x822C;&#x7528;&#x4E8E;&#x67E5;&#x770B;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#x5927;&#x5C0F;&#x7684;&#x6587;&#x4EF6;&#x3002; &#x6062;&#x590D;&#x6570;&#x636E;&#x5B9E;&#x6218; &#x8FD9;&#x91CC;&#x7279;&#x522B;&#x63D0;&#x9192;&#x4E00;&#x4E0B;&#xFF0C;&#x5F53;&#x786E;&#x5B9A;&#x5220;&#x9664;&#x91CD;&#x8981;&#x7684;&#x6570;&#x636E;&#x4E86;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x5343;&#x4E07;&#x5343;&#x4E07;&#x4E0D;&#x8981;&#x5F80;&#x8FD9;&#x5757;&#x78C1;&#x76D8;&#x4E0A;&#x5199;&#x6570;&#x636E;&#x3002;&#x6B63;&#x786E;&#x7684;&#x64CD;&#x4F5C;&#x5E94;&#x8BE5;&#x662F;&#x7ACB;&#x9A6C;umount&#xFF0C;&#x7136;&#x540E;&#x4EE5;&#x53EA;&#x8BFB;&#x65B9;&#x5F0F;&#x6302;&#x8F7D;&#xFF08;mount -o remount,ro /dev/test&#xFF09;&#x5230;&#x5176;&#x4ED6;&#x670D;&#x52A1;&#x5668;&#x6216;&#x6D4B;&#x8BD5;&#x673A;&#x3002;&#x5426;&#x5219;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;&#x6570;&#x636E;&#x6062;&#x590D;&#x4E0D;&#x4E86;&#x7684;&#x60C5;&#x666F;&#x3002; &#x67E5;&#x770B;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;12345678df -hT&#x6587;&#x4EF6;&#x7CFB;&#x7EDF; &#x7C7B;&#x578B; &#x5BB9;&#x91CF; &#x5DF2;&#x7528; &#x53EF;&#x7528; &#x5DF2;&#x7528;%% &#x6302;&#x8F7D;&#x70B9;/dev/mapper/vg_weiwang1-lv_root ext4 50G 40G 7.2G 85% /tmpfs tmpfs 5.3G 0 5.3G 0% /dev/shm/dev/vda1 ext4 485M 32M 428M 7% /boot/dev/mapper/vg_weiwang1-lv_home ext4 44G 182M 42G 1% /home &#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x548C;&#x6302;&#x8F7D;&#x70B9; &#x67E5;&#x770B;&#x5F53;&#x524D;&#x8DEF;&#x5F84;&#x4E0B;&#x7684;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x5220;&#x9664;&#x60C5;&#x51B5;1234567891011extundelete --inode 2 /dev/vda1lost+found 11grub 65025efi 65027222 32513 Deleted.vmlinuz-2.6.32-358.el6.x86_64.hmac 12System.map-2.6.32-358.el6.x86_64 13config-2.6.32-358.el6.x86_64 14symvers-2.6.32-358.el6.x86_64.gz 15vmlinuz-2.6.32-358.el6.x86_64 16initramfs-2.6.32-358.el6.x86_64.img 17 &#x6062;&#x590D;&#x88AB;&#x5220;&#x9664;&#x6587;&#x4EF6;123extundelete /dev/vda1 --restore-file 222 # &#x6062;&#x590D;&#x5355;&#x4E2A;&#x6587;&#x4EF6;extundelete /dev/vda1 --restore-directory grub # &#x6062;&#x590D;&#x5355;&#x4E2A;&#x76EE;&#x5F55;extundelete /dev/vda1 --restore-all # &#x6062;&#x590D;&#x6240;&#x6709;&#x88AB;&#x5220;&#x9664;&#x6570;&#x636E; &#x8865;&#x5145;&#x5728;Linux&#x7CFB;&#x7EDF;&#x4E0B;&#xFF0C;&#x901A;&#x8FC7;&#x547D;&#x4EE4;&#x201C;rm -rf&#x201D;&#x53EF;&#x4EE5;&#x5C06;&#x4EFB;&#x4F55;&#x6570;&#x636E;&#x76F4;&#x63A5;&#x4ECE;&#x786C;&#x76D8;&#x5220;&#x9664;&#xFF0C;&#x5E76;&#x4E14;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x63D0;&#x793A;&#xFF0C;&#x540C;&#x65F6;Linux&#x4E0B;&#x4E5F;&#x6CA1;&#x6709;&#x4E0E;Windows&#x4E0B;&#x56DE;&#x6536;&#x7AD9;&#x7C7B;&#x4F3C;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4E5F;&#x5C31;&#x610F;&#x5473;&#x7740;&#xFF0C;&#x6570;&#x636E;&#x5728;&#x5220;&#x9664;&#x540E;&#x901A;&#x8FC7;&#x5E38;&#x89C4;&#x7684;&#x624B;&#x6BB5;&#x662F;&#x65E0;&#x6CD5;&#x6062;&#x590D;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x8981;&#x975E;&#x5E38;&#x614E;&#x91CD;&#x3002;&#x5176;&#x5B9E;&#x6709;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x5C06;&#x8981;&#x5220;&#x9664;&#x7684;&#x4E1C;&#x897F;&#x901A;&#x8FC7;mv&#x547D;&#x4EE4;&#x79FB;&#x52A8;&#x5230;&#x7CFB;&#x7EDF;&#x4E0B;&#x7684;/tmp&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x7136;&#x540E;&#x5199;&#x4E2A;&#x811A;&#x672C;&#x5B9A;&#x671F;&#x6267;&#x884C;&#x6E05;&#x9664;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD9;&#x6837;&#x505A;&#x53EF;&#x4EE5;&#x5728;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x4E0A;&#x964D;&#x4F4E;&#x8BEF;&#x5220;&#x9664;&#x6570;&#x636E;&#x7684;&#x5371;&#x9669;&#x6027;&#x3002;&#x5176;&#x5B9E;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x5B89;&#x5168;&#x6700;&#x597D;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x505A;&#x597D;&#x5907;&#x4EFD;&#xFF0C;&#x867D;&#x7136;&#x5907;&#x4EFD;&#x4E0D;&#x662F;&#x4E07;&#x80FD;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x6CA1;&#x6709;&#x5907;&#x4EFD;&#x662F;&#x4E07;&#x4E07;&#x4E0D;&#x884C;&#x7684;&#x3002;&#x4EFB;&#x4F55;&#x6570;&#x636E;&#x6062;&#x590D;&#x5DE5;&#x5177;&#x90FD;&#x6709;&#x4E00;&#x5B9A;&#x5C40;&#x9650;&#x6027;&#xFF0C;&#x90FD;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x5B8C;&#x6574;&#x5730;&#x6062;&#x590D;&#x51FA;&#x6240;&#x6709;&#x6570;&#x636E;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x628A;&#x5907;&#x4EFD;&#x4F5C;&#x4E3A;&#x6838;&#x5FC3;&#xFF0C;&#x628A;&#x6570;&#x636E;&#x6062;&#x590D;&#x5DE5;&#x5177;&#x4F5C;&#x4E3A;&#x8F85;&#x52A9;&#x662F;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x5FC5;&#x987B;&#x575A;&#x6301;&#x7684;&#x4E00;&#x4E2A;&#x51C6;&#x5219;&#x3002;]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>extundelete</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TCP三次握手，四次断开]]></title>
    <url>%2FTCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%EF%BC%8C%E5%9B%9B%E6%AC%A1%E6%96%AD%E5%BC%80.html</url>
    <content type="text"><![CDATA[&#x4E4B;&#x524D;&#x9762;&#x8BD5;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x603B;&#x662F;&#x56E0;&#x4E3A;&#x4E00;&#x4E9B;&#x57FA;&#x7840;&#x77E5;&#x8BC6;&#x800C;&#x88AB;PASS&#x6389;&#xFF0C;&#x540C;&#x6837;&#x4E07;&#x4E08;&#x9AD8;&#x697C;&#x5E73;&#x5730;&#x8D77;&#xFF0C;&#x4EFB;&#x4F55;&#x9AD8;&#x5927;&#x4E0A;&#x7684;&#x4E1C;&#x897F;&#x90FD;&#x79BB;&#x4E0D;&#x5F00;&#x57FA;&#x7840;&#x77E5;&#x8BC6;&#x3002;&#x6240;&#x4EE5;&#x628A;&#x57FA;&#x7840;&#x6253;&#x7262;&#x540E;&#x9762;&#x7684;&#x77E5;&#x8BC6;&#x5B66;&#x4E60;&#x8D77;&#x6765;&#x5E94;&#x8BE5;&#x4F1A;&#x4E00;&#x65E5;&#x5343;&#x91CC;&#xFF0C;&#x8FD9;&#x91CC;&#x5E9F;&#x8BDD;&#x4E0D;&#x591A;&#x8BF4;&#xFF0C;&#x5F00;&#x59CB;&#x8FDB;&#x5165;&#x4E3B;&#x9898;&#x3002; OSI &#x4E03;&#x5C42;&#x7F51;&#x7EDC;&#x6A21;&#x578B; &#x5F00;&#x653E;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E92;&#x8054;&#x901A;&#x4FE1;&#x53C2;&#x8003;&#x6A21;&#x578B;&#xFF08;&#x82F1;&#x8BED;&#xFF1A;Open System Interconnection Reference Model&#xFF0C;ISO/IEC 7498-1&#xFF09;&#xFF0C;&#x7B80;&#x79F0;&#x4E3A;OSI&#x6A21;&#x578B;&#xFF08;OSI model&#xFF09;&#xFF0C;&#x4E00;&#x79CD;&#x6982;&#x5FF5;&#x6A21;&#x578B;&#xFF0C;&#x7531;&#x56FD;&#x9645;&#x6807;&#x51C6;&#x5316;&#x7EC4;&#x7EC7;&#xFF08;ISO&#xFF09;&#x63D0;&#x51FA;&#xFF0C;&#x4E00;&#x4E2A;&#x8BD5;&#x56FE;&#x4F7F;&#x5404;&#x79CD;&#x8BA1;&#x7B97;&#x673A;&#x5728;&#x4E16;&#x754C;&#x8303;&#x56F4;&#x5185;&#x4E92;&#x8FDE;&#x4E3A;&#x7F51;&#x7EDC;&#x7684;&#x6807;&#x51C6;&#x6846;&#x67B6;&#x3002; &#x2014; &#x7EF4;&#x57FA;&#x767E;&#x79D1; &#x7B2C;7&#x5C42; &#x5E94;&#x7528;&#x5C42;(Application Layer)&#x63D0;&#x4F9B;&#x4E3A;&#x5E94;&#x7528;&#x8F6F;&#x4EF6;&#x800C;&#x8BBE;&#x7684;&#x754C;&#x9762;&#xFF0C;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E0E;&#x53E6;&#x4E00;&#x5E94;&#x7528;&#x8F6F;&#x4EF6;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x3002;&#x4F8B;&#x5982;: HTTP&#xFF0C;HTTPS&#xFF0C;FTP&#xFF0C;TELNET&#xFF0C;SSH&#xFF0C;SMTP&#xFF0C;POP3&#x7B49;&#x3002; &#x7B2C;6&#x5C42; &#x8868;&#x793A;&#x5C42;(Presentation Layer)&#x628A;&#x6570;&#x636E;&#x8F6C;&#x6362;&#x4E3A;&#x80FD;&#x4E0E;&#x63A5;&#x6536;&#x8005;&#x7684;&#x7CFB;&#x7EDF;&#x683C;&#x5F0F;&#x517C;&#x5BB9;&#x5E76;&#x9002;&#x5408;&#x4F20;&#x8F93;&#x7684;&#x683C;&#x5F0F;&#x3002; &#x7B2C;5&#x5C42; &#x4F1A;&#x8BDD;&#x5C42;(Session Layer)&#x8D1F;&#x8D23;&#x5728;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x4E2D;&#x8BBE;&#x7F6E;&#x548C;&#x7EF4;&#x62A4;&#x7535;&#x8111;&#x7F51;&#x7EDC;&#x4E2D;&#x4E24;&#x53F0;&#x7535;&#x8111;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x8FDE;&#x63A5;&#x3002; &#x7B2C;4&#x5C42; &#x4F20;&#x8F93;&#x5C42;(Transport Layer)&#x628A;&#x4F20;&#x8F93;&#x8868;&#x5934;(TH)&#x52A0;&#x81F3;&#x6570;&#x636E;&#x4EE5;&#x5F62;&#x6210;&#x6570;&#x636E;&#x62A5;&#x3002;&#x4F20;&#x8F93;&#x8868;&#x5934;&#x5305;&#x542B;&#x4E86;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x534F;&#x8BAE;&#x7B49;&#x53D1;&#x9001;&#x4FE1;&#x606F;&#x3002;&#x4F8B;&#x5982;:&#x4F20;&#x8F93;&#x63A7;&#x5236;&#x534F;&#x8BAE;&#x4E49;(TCP) &#x7B49;&#x3002; &#x7B2C;3&#x5C42; &#x7F51;&#x7EDC;&#x5C42;(Network Layer)&#x51B3;&#x5B9A;&#x6570;&#x636E;&#x7684;&#x8DEF;&#x5F84;&#x9009;&#x62E9;&#x548C;&#x8F6C;&#x5BC4;&#xFF0C;&#x5B83;&#x7F51;&#x7EDC;&#x8868;&#x5934;(NH)&#x52A0;&#x81F3;&#x6570;&#x636E;&#x62A5;&#xFF0C;&#x4EE5;&#x5F62;&#x6210;&#x5206;&#x7EC4;&#x3002;&#x7F51;&#x7EDC;&#x8868;&#x5934;&#x5305;&#x542B;&#x4E86;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x3002;&#x4F8B;&#x5982;:&#x4E92;&#x8054;&#x7F51;&#x534F;&#x8BAE;(IP) &#x7B49;&#x3002; &#x7B2C;2&#x5C42; &#x6570;&#x636E;&#x94FE;&#x8DEF;&#x5C42;(Data Link Layer)&#x8D1F;&#x8D23;&#x7F51;&#x7EDC;&#x5BFB;&#x5740;&#x3001;&#x9519;&#x8BEF;&#x4FA6;&#x6D4B;&#x548C;&#x6539;&#x9519;&#x3002;&#x5F53;&#x8868;&#x5934;&#x548C;&#x8868;&#x5C3E;&#x88AB;&#x52A0;&#x81F3;&#x6570;&#x636E;&#x5305;&#x65F6;&#xFF0C;&#x4F1A;&#x5F62;&#x6210;&#x4E86;&#x5E27;&#x3002;&#x6570;&#x636E;&#x94FE;&#x8868;&#x5934;(DLH)&#x662F;&#x5305;&#x542B;&#x4E86;&#x7269;&#x7406;&#x5730;&#x5740;&#x548C;&#x9519;&#x8BEF;&#x4FA6;&#x6D4B;&#x53CA;&#x6539;&#x9519;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x6570;&#x636E;&#x94FE;&#x8868;&#x5C3E;(DLT)&#x662F;&#x4E00;&#x4E32;&#x6307;&#x793A;&#x6570;&#x636E;&#x5305;&#x672B;&#x7AEF;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x4F8B;&#x5982;&#x4EE5;&#x592A;&#x7F51;&#x3001;&#x65E0;&#x7EBF;&#x5C40;&#x57DF;&#x7F51;(Wi-Fi)&#x548C;&#x901A;&#x7528;&#x5206;&#x7EC4;&#x65E0;&#x7EBF;&#x670D;&#x52A1;(GPRS)&#x7B49;&#x3002; &#x7B2C;1&#x5C42; &#x7269;&#x7406;&#x5C42;(Physical Layer)&#x5728;&#x5C40;&#x90E8;&#x5C40;&#x57DF;&#x7F51;&#x7EDC;&#x4E0A;&#x4F20;&#x9001;&#x5E27;&#xFF0C;&#x5B83;&#x8D1F;&#x8D23;&#x7BA1;&#x7406;&#x7535;&#x8111;&#x901A;&#x4FE1;&#x8BBE;&#x5907;&#x548C;&#x7F51;&#x7EDC;&#x5A92;&#x4F53;&#x4E4B;&#x95F4;&#x7684;&#x4E92;&#x901A;&#x3002;&#x5305;&#x62EC;&#x4E86;&#x9488;&#x811A;&#x3001;&#x7535;&#x538B;&#x3001;&#x7EBF;&#x7F06;&#x89C4;&#x8303;&#x3001;&#x96C6;&#x7EBF;&#x5668;&#x3001;&#x4E2D;&#x7EE7;&#x5668;&#x3001;&#x7F51;&#x5361;&#x3001;&#x4E3B;&#x673A;&#x9002;&#x914D;&#x5668;&#x7B49; TCP/IP TCP/IP&#x662F;&#x4E00;&#x4E2A;&#x534F;&#x8BAE;&#x65CF;&#xFF0C;&#x901A;&#x5E38;&#x5206;&#x4E0D;&#x540C;&#x5C42;&#x6B21;&#x8FDB;&#x884C;&#x5F00;&#x53D1;&#xFF0C;&#x6BCF;&#x4E2A;&#x5C42;&#x6B21;&#x8D1F;&#x8D23;&#x4E0D;&#x540C;&#x7684;&#x901A;&#x4FE1;&#x529F;&#x80FD;&#x3002;&#x5305;&#x542B;&#x4EE5;&#x4E0B;&#x56DB;&#x4E2A;&#x5C42;&#x6B21;&#xFF0C;&#x4E0E;OSI7&#x5C42;&#x5173;&#x7CFB;&#x5982;&#x4E0B;&#xFF1A; &#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x5C42;&#xFF0C;&#x901A;&#x5E38;&#x5305;&#x62EC;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x8BBE;&#x5907;&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x548C;&#x8BA1;&#x7B97;&#x673A;&#x4E2D;&#x5BF9;&#x5E94;&#x7684;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x5361;&#x3002;&#x5B83;&#x4EEC;&#x4E00;&#x8D77;&#x5904;&#x7406;&#x4E0E;&#x7535;&#x7F06;&#xFF08;&#x6216;&#x5176;&#x4ED6;&#x4EFB;&#x4F55;&#x4F20;&#x8F93;&#x5A92;&#x4ECB;&#xFF09;&#x7684;&#x7269;&#x7406;&#x63A5;&#x53E3;&#x7EC6;&#x8282;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x7F51;&#x7EDC;&#x534F;&#x8BAE;&#x4E3B;&#x8981;&#x662F;&#xFF1A;Ethernet&#x3001;FDDI&#x548C;&#x80FD;&#x4F20;&#x8F93;IP&#x6570;&#x636E;&#x5305;&#x7684;&#x4EFB;&#x4F55;&#x534F;&#x8BAE;&#x3002; &#x7F51;&#x9645;&#x5C42;&#xFF0C;&#x5904;&#x7406;&#x5206;&#x7EC4;&#x5728;&#x7F51;&#x7EDC;&#x4E2D;&#x7684;&#x6D3B;&#x52A8;&#xFF0C;&#x4F8B;&#x5982;&#x5206;&#x7EC4;&#x7684;&#x9009;&#x8DEF;&#x3002;&#x7F51;&#x7EDC;&#x5C42;&#x534F;&#x8BAE;&#x5305;&#x62EC;IP&#x534F;&#x8BAE;&#xFF08;&#x7F51;&#x9645;&#x534F;&#x8BAE;&#xFF09;&#x3001;ICMP&#x534F;&#x8BAE;&#xFF08;Internet&#x4E92;&#x8054;&#x7F51;&#x63A7;&#x5236;&#x62A5;&#x6587;&#x534F;&#x8BAE;&#xFF09;&#xFF0C;&#x4EE5;&#x53CA;IGMP&#x534F;&#x8BAE;&#xFF08;Internet&#x7EC4;&#x7BA1;&#x7406;&#x534F;&#x8BAE;&#xFF09;&#x3002; &#x4F20;&#x8F93;&#x5C42;&#x4E3B;&#x8981;&#x4E3A;&#x4E24;&#x53F0;&#x4E3B;&#x673A;&#x4E0A;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x63D0;&#x4F9B;&#x7AEF;&#x5230;&#x7AEF;&#x7684;&#x901A;&#x4FE1;&#x3002;&#x5728;TCP/IP&#x534F;&#x8BAE;&#x65CF;&#x4E2D;&#xFF0C;&#x6709;&#x4E24;&#x4E2A;&#x4E92;&#x4E0D;&#x76F8;&#x540C;&#x7684;&#x4F20;&#x8F93;&#x534F;&#x8BAE;&#xFF1A;TCP&#xFF08;&#x4F20;&#x8F93;&#x63A7;&#x5236;&#x534F;&#x8BAE;&#xFF09;&#x548C;UDP&#xFF08;&#x7528;&#x6237;&#x6570;&#x636E;&#x62A5;&#x534F;&#x8BAE;&#xFF09;&#x3002;TCP&#x4E3A;&#x4E24;&#x53F0;&#x4E3B;&#x673A;&#x63D0;&#x4F9B;&#x9AD8;&#x53EF;&#x9760;&#x6027;&#x7684;&#x6570;&#x636E;&#x901A;&#x4FE1;&#x3002;&#x4ED6;&#x6240;&#x4F5C;&#x7684;&#x5DE5;&#x4F5C;&#x5305;&#x62EC;&#x628A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4EA4;&#x7ED9;&#x5B83;&#x7684;&#x6570;&#x636E;&#x5206;&#x6210;&#x5408;&#x9002;&#x7684;&#x5C0F;&#x5757;&#x4EA4;&#x7ED9;&#x4E0B;&#x9762;&#x7684;&#x7F51;&#x7EDC;&#x5C42;&#xFF0C;&#x786E;&#x8BA4;&#x63A5;&#x6536;&#x5230;&#x7684;&#x5206;&#x7EC4;&#xFF0C;&#x8BBE;&#x7F6E;&#x53D1;&#x9001;&#x6700;&#x540E;&#x786E;&#x8BA4;&#x5206;&#x7EC4;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x949F;&#x7B49;&#x3002;&#x7531;&#x4E8E;&#x8FD0;&#x8F93;&#x5C42;&#x63D0;&#x4F9B;&#x4E86;&#x9AD8;&#x53EF;&#x9760;&#x6027;&#x7684;&#x7AEF;&#x5230;&#x7AEF;&#x901A;&#x4FE1;&#xFF0C;&#x56E0;&#x6B64;&#x5E94;&#x7528;&#x5C42;&#x53EF;&#x4EE5;&#x5FFD;&#x7565;&#x6240;&#x6709;&#x8FD9;&#x4E9B;&#x7EC6;&#x8282;&#x3002;&#x800C;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;UDP&#x5219;&#x4E3A;&#x5E94;&#x7528;&#x5C42;&#x63D0;&#x4F9B;&#x4E00;&#x79CD;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x7684;&#x670D;&#x52A1;&#x3002;&#x5B83;&#x53EA;&#x662F;&#x628A;&#x79F0;&#x4F5C;&#x6570;&#x636E;&#x62A5;&#x7684;&#x5206;&#x7EC4;&#x4ECE;&#x4E00;&#x53F0;&#x4E3B;&#x673A;&#x53D1;&#x9001;&#x5230;&#x53E6;&#x4E00;&#x53F0;&#x4E3B;&#x673A;&#xFF0C;&#x4F46;&#x5E76;&#x4E0D;&#x4FDD;&#x8BC1;&#x8BE5;&#x6570;&#x636E;&#x62A5;&#x80FD;&#x5230;&#x8FBE;&#x53E6;&#x4E00;&#x7AEF;&#x3002;&#x4EFB;&#x4F55;&#x5FC5;&#x987B;&#x7684;&#x53EF;&#x9760;&#x6027;&#x5FC5;&#x987B;&#x7531;&#x5E94;&#x7528;&#x5C42;&#x6765;&#x63D0;&#x4F9B;&#x3002; &#x5E94;&#x7528;&#x5C42;&#x8D1F;&#x8D23;&#x5904;&#x7406;&#x7279;&#x5B9A;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7EC6;&#x8282;&#x3002;&#x5305;&#x62EC;Telnet&#xFF08;&#x8FDC;&#x7A0B;&#x767B;&#x5F55;&#xFF09;&#x3001;FTP&#xFF08;&#x6587;&#x4EF6;&#x4F20;&#x8F93;&#x534F;&#x8BAE;&#xFF09;&#x3001;SMTP&#xFF08;&#x7B80;&#x5355;&#x90AE;&#x4EF6;&#x4F20;&#x9001;&#x534F;&#x8BAE;&#xFF09;&#x4EE5;&#x53CA;SNMP&#xFF08;&#x7B80;&#x5355;&#x7F51;&#x7EDC;&#x7BA1;&#x7406;&#x534F;&#x8BAE;&#xFF09;&#x7B49;&#x3002; TCP&#x6982;&#x5FF5; TCP&#x662F;&#x4E00;&#x79CD;&#x9762;&#x5411;&#x8FDE;&#x63A5;&#xFF08;&#x8FDE;&#x63A5;&#x5BFC;&#x5411;&#xFF09;&#x7684;&#x3001;&#x53EF;&#x9760;&#x7684;&#x57FA;&#x4E8E;&#x5B57;&#x8282;&#x6D41;&#x7684;&#x4F20;&#x8F93;&#x5C42;&#x901A;&#x4FE1;&#x534F;&#x8BAE;&#x3002;TCP&#x5C06;&#x7528;&#x6237;&#x6570;&#x636E;&#x6253;&#x5305;&#x6210;&#x62A5;&#x6587;&#x6BB5;&#xFF0C;&#x5B83;&#x53D1;&#x9001;&#x540E;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x5B9A;&#x65F6;&#x5668;&#xFF0C;&#x53E6;&#x4E00;&#x7AEF;&#x6536;&#x5230;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x786E;&#x8BA4;&#x3001;&#x5BF9;&#x5931;&#x5E8F;&#x7684;&#x6570;&#x636E;&#x91CD;&#x65B0;&#x6392;&#x5E8F;&#x3001;&#x4E22;&#x5F03;&#x91CD;&#x590D;&#x6570;&#x636E;&#x3002; TCP&#x7684;&#x7279;&#x70B9;&#x6709;&#xFF1A; TCP&#x662F;&#x9762;&#x5411;&#x8FDE;&#x63A5;&#x7684;&#x8FD0;&#x8F93;&#x5C42;&#x534F;&#x8BAE; &#x6BCF;&#x4E00;&#x6761;TCP&#x8FDE;&#x63A5;&#x53EA;&#x80FD;&#x6709;&#x4E24;&#x4E2A;&#x7AEF;&#x70B9;&#xFF0C;&#x6BCF;&#x4E00;&#x6761;TCP&#x8FDE;&#x63A5;&#x53EA;&#x80FD;&#x662F;&#x70B9;&#x5BF9;&#x70B9;&#x7684; TCP&#x63D0;&#x4F9B;&#x53EF;&#x9760;&#x4EA4;&#x4ED8;&#x7684;&#x670D;&#x52A1; TCP&#x63D0;&#x4F9B;&#x5168;&#x53CC;&#x5DE5;&#x901A;&#x4FE1;&#x3002;&#x6570;&#x636E;&#x5728;&#x4E24;&#x4E2A;&#x65B9;&#x5411;&#x4E0A;&#x72EC;&#x7ACB;&#x7684;&#x8FDB;&#x884C;&#x4F20;&#x8F93;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x8FDE;&#x63A5;&#x7684;&#x6BCF;&#x4E00;&#x7AEF;&#x5FC5;&#x987B;&#x4FDD;&#x6301;&#x6BCF;&#x4E2A;&#x65B9;&#x5411;&#x4E0A;&#x7684;&#x4F20;&#x8F93;&#x6570;&#x636E;&#x5E8F;&#x53F7;&#x3002; &#x9762;&#x5411;&#x5B57;&#x8282;&#x6D41;&#x3002;&#x9762;&#x5411;&#x5B57;&#x8282;&#x6D41;&#x7684;&#x542B;&#x4E49;&#xFF1A;&#x867D;&#x7136;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x548C;TCP&#x4EA4;&#x4E92;&#x662F;&#x4E00;&#x6B21;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5757;&#xFF0C;&#x4F46;TCP&#x628A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4EA4;&#x4E0B;&#x6765;&#x7684;&#x6570;&#x636E;&#x4EC5;&#x4EC5;&#x662F;&#x4E00;&#x8FDE;&#x4E32;&#x7684;&#x65E0;&#x7ED3;&#x6784;&#x7684;&#x5B57;&#x8282;&#x6D41; TCP&#x62A5;&#x6587;&#x9996;&#x90E8;&#x7ED3;&#x6784;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;&#x56FE;&#x89E3;&#xFF1A; &#x6E90;&#x7AEF;&#x53E3;&#x53F7;&#xFF1A;&#x6570;&#x636E;&#x53D1;&#x8D77;&#x8005;&#x7684;&#x7AEF;&#x53E3;&#x53F7;&#xFF0C;16bit &#x76EE;&#x7684;&#x7AEF;&#x53E3;&#x53F7;&#xFF1A;&#x6570;&#x636E;&#x63A5;&#x6536;&#x8005;&#x7684;&#x7AEF;&#x53E3;&#x53F7;&#xFF0C;16bit &#x5E8F;&#x53F7;&#xFF1A;32bit&#x7684;&#x5E8F;&#x5217;&#x53F7;&#xFF0C;&#x7531;&#x53D1;&#x9001;&#x65B9;&#x4F7F;&#x7528; &#x786E;&#x8BA4;&#x5E8F;&#x53F7;&#xFF1A;32bit&#x7684;&#x786E;&#x8BA4;&#x53F7;&#xFF0C;&#x662F;&#x63A5;&#x6536;&#x6570;&#x636E;&#x65B9;&#x671F;&#x671B;&#x6536;&#x5230;&#x53D1;&#x9001;&#x65B9;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x62A5;&#x6587;&#x6BB5;&#x7684;&#x5E8F;&#x53F7;&#xFF0C;&#x56E0;&#x6B64;&#x786E;&#x8BA4;&#x5E8F;&#x53F7;&#x5E94;&#x5F53;&#x662F;&#x4E0A;&#x6B21;&#x5DF2;&#x6210;&#x529F;&#x6536;&#x5230;&#x6570;&#x636E;&#x5B57;&#x8282;&#x5E8F;&#x53F7;&#x52A0;1&#x3002; &#x9996;&#x90E8;&#x957F;&#x5EA6;&#xFF1A;&#x9996;&#x90E8;&#x4E2D;32bit&#x5B57;&#x7684;&#x6570;&#x76EE;&#xFF0C;&#x53EF;&#x8868;&#x793A;15*32bit=60&#x5B57;&#x8282;&#x7684;&#x9996;&#x90E8;&#x3002;&#x4E00;&#x822C;&#x9996;&#x90E8;&#x957F;&#x5EA6;&#x4E3A;20&#x5B57;&#x8282;&#x3002; &#x4FDD;&#x7559;&#xFF1A;6bit, &#x5747;&#x4E3A;0 &#x7D27;&#x6025;URG&#xFF1A;&#x5F53;URG=1&#x65F6;&#xFF0C;&#x8868;&#x793A;&#x62A5;&#x6587;&#x6BB5;&#x4E2D;&#x6709;&#x7D27;&#x6025;&#x6570;&#x636E;&#xFF0C;&#x5E94;&#x5C3D;&#x5FEB;&#x4F20;&#x9001;&#x3002; &#x786E;&#x8BA4;&#x6BD4;&#x7279; ACK&#xFF1A;ACK = 1&#x65F6;&#x4EE3;&#x8868;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x786E;&#x8BA4;&#x7684;TCP&#x5305;&#xFF0C;&#x53D6;&#x503C;0&#x5219;&#x4E0D;&#x662F;&#x786E;&#x8BA4;&#x5305;&#x3002; &#x63A8;&#x9001;&#x6BD4;&#x7279; PSH&#xFF1A;&#x5F53;&#x53D1;&#x9001;&#x7AEF;PSH=1&#x65F6;&#xFF0C;&#x63A5;&#x6536;&#x7AEF;&#x5C3D;&#x5FEB;&#x7684;&#x4EA4;&#x4ED8;&#x7ED9;&#x5E94;&#x7528;&#x8FDB;&#x7A0B;&#x3002; &#x590D;&#x4F4D;&#x6BD4;&#x7279;&#xFF08;RST&#xFF09;&#xFF1A;&#x5F53;RST=1&#x65F6;&#xFF0C;&#x8868;&#x660E;TCP&#x8FDE;&#x63A5;&#x4E2D;&#x51FA;&#x73B0;&#x4E25;&#x91CD;&#x5DEE;&#x9519;&#xFF0C;&#x5FC5;&#x987B;&#x91CA;&#x653E;&#x8FDE;&#x63A5;&#xFF0C;&#x518D;&#x91CD;&#x65B0;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x3002; &#x540C;&#x6B65;&#x6BD4;&#x7279; SYN&#xFF1A;&#x5728;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x662F;&#x7528;&#x6765;&#x540C;&#x6B65;&#x5E8F;&#x53F7;&#x3002;SYN=1&#xFF0C; ACK=0&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x6BB5;&#x3002;SYN=1&#xFF0C;ACK=1&#x8868;&#x793A;&#x540C;&#x610F;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x3002; &#x7EC8;&#x6B62;&#x6BD4;&#x7279; FIN&#xFF1A;FIN=1&#x65F6;&#xFF0C;&#x8868;&#x660E;&#x6B64;&#x62A5;&#x6587;&#x6BB5;&#x7684;&#x53D1;&#x9001;&#x7AEF;&#x7684;&#x6570;&#x636E;&#x5DF2;&#x7ECF;&#x53D1;&#x9001;&#x5B8C;&#x6BD5;&#xFF0C;&#x5E76;&#x8981;&#x6C42;&#x91CA;&#x653E;&#x4F20;&#x8F93;&#x8FDE;&#x63A5;&#x3002; &#x7A97;&#x53E3;&#xFF1A;&#x7528;&#x6765;&#x63A7;&#x5236;&#x5BF9;&#x65B9;&#x53D1;&#x9001;&#x7684;&#x6570;&#x636E;&#x91CF;&#xFF0C;&#x901A;&#x77E5;&#x53D1;&#x653E;&#x5DF2;&#x786E;&#x5B9A;&#x7684;&#x53D1;&#x9001;&#x7A97;&#x53E3;&#x4E0A;&#x9650;&#x3002; &#x68C0;&#x9A8C;&#x548C;&#xFF1A;&#x8BE5;&#x5B57;&#x6BB5;&#x68C0;&#x9A8C;&#x7684;&#x8303;&#x56F4;&#x5305;&#x62EC;&#x9996;&#x90E8;&#x548C;&#x6570;&#x636E;&#x8FD9;&#x4E24;&#x90E8;&#x5206;&#x3002;&#x7531;&#x53D1;&#x7AEF;&#x8BA1;&#x7B97;&#x548C;&#x5B58;&#x50A8;&#xFF0C;&#x5E76;&#x7531;&#x6536;&#x7AEF;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#x3002; &#x7D27;&#x6025;&#x6307;&#x9488;&#xFF1A;&#x7D27;&#x6025;&#x6307;&#x9488;&#x5728;URG=1&#x65F6;&#x624D;&#x6709;&#x6548;&#xFF0C;&#x5B83;&#x6307;&#x51FA;&#x672C;&#x62A5;&#x6587;&#x6BB5;&#x4E2D;&#x7684;&#x7D27;&#x6025;&#x6570;&#x636E;&#x7684;&#x5B57;&#x8282;&#x6570;&#x3002; &#x9009;&#x9879;&#xFF1A;&#x957F;&#x5EA6;&#x53EF;&#x53D8;&#xFF0C;&#x6700;&#x957F;&#x53EF;&#x8FBE;40&#x5B57;&#x8282; &#x4E09;&#x6B21;&#x63E1;&#x624B;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5; &#x7B2C;&#x4E00;&#x6B21;&#x63E1;&#x624B;&#xFF1A;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x65F6;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;syn&#x5305;(syn=j)&#x5230;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5E76;&#x8FDB;&#x5165;SYN_SEND&#x72B6;&#x6001;&#xFF0C;&#x7B49;&#x5F85;&#x670D;&#x52A1;&#x5668;&#x786E;&#x8BA4;&#xFF1B; &#x7B2C;&#x4E8C;&#x6B21;&#x63E1;&#x624B;&#xFF1A;&#x670D;&#x52A1;&#x5668;&#x6536;&#x5230;syn&#x5305;&#xFF0C;&#x5FC5;&#x987B;&#x786E;&#x8BA4;&#x5BA2;&#x6237;&#x7684;SYN&#xFF08;ack=j+1&#xFF09;&#xFF0C;&#x540C;&#x65F6;&#x81EA;&#x5DF1;&#x4E5F;&#x53D1;&#x9001;&#x4E00;&#x4E2A;SYN&#x5305;&#xFF08;syn=k&#xFF09;&#xFF0C;&#x5373;SYN+ACK&#x5305;&#xFF0C;&#x6B64;&#x65F6;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x5165;SYN_RECV&#x72B6;&#x6001;&#xFF1B; &#x7B2C;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#xFF1A;&#x5BA2;&#x6237;&#x7AEF;&#x6536;&#x5230;&#x670D;&#x52A1;&#x5668;&#x7684;SYN&#xFF0B;ACK&#x5305;&#xFF0C;&#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x786E;&#x8BA4;&#x5305;ACK(ack=k+1)&#xFF0C;&#x6B64;&#x5305;&#x53D1;&#x9001;&#x5B8C;&#x6BD5;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x5165;ESTABLISHED&#x72B6;&#x6001;&#xFF0C;&#x5B8C;&#x6210;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x3002; &#x5B8C;&#x6210;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x5F00;&#x59CB;&#x4F20;&#x9001;&#x6570;&#x636E;. &#x56DB;&#x6B21;&#x6325;&#x624B;&#x65AD;&#x5F00;&#x8FDE;&#x63A5; &#x6CE8;&#x610F;&#xFF1A; &#x4E2D;&#x65AD;&#x8FDE;&#x63A5;&#x7AEF;&#x53EF;&#x4EE5;&#x662F;Client&#x7AEF;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;Server&#x7AEF;&#x3002;&#x5047;&#x8BBE;Client&#x7AEF;&#x53D1;&#x8D77;&#x4E2D;&#x65AD;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x53D1;&#x9001;FIN&#x62A5;&#x6587;&#x3002;Server&#x7AEF;&#x63A5;&#x5230;FIN&#x62A5;&#x6587;&#x540E;&#xFF0C;&#x610F;&#x601D;&#x662F;&#x8BF4;&#x201D;&#x6211;Client&#x7AEF;&#x6CA1;&#x6709;&#x6570;&#x636E;&#x8981;&#x53D1;&#x7ED9;&#x4F60;&#x4E86;&#x201C;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x6709;&#x6570;&#x636E;&#x6CA1;&#x6709;&#x53D1;&#x9001;&#x5B8C;&#x6210;&#xFF0C;&#x5219;&#x4E0D;&#x5FC5;&#x6025;&#x7740;&#x5173;&#x95ED;Socket&#xFF0C;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x53D1;&#x9001;&#x6570;&#x636E;&#x3002;&#x6240;&#x4EE5;&#x4F60;&#x5148;&#x53D1;&#x9001;ACK&#xFF0C;&#x201D;&#x544A;&#x8BC9;Client&#x7AEF;&#xFF0C;&#x4F60;&#x7684;&#x8BF7;&#x6C42;&#x6211;&#x6536;&#x5230;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x8FD8;&#x6CA1;&#x51C6;&#x5907;&#x597D;&#xFF0C;&#x8BF7;&#x7EE7;&#x7EED;&#x4F60;&#x7B49;&#x6211;&#x7684;&#x6D88;&#x606F;&#x201C;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;Client&#x7AEF;&#x5C31;&#x8FDB;&#x5165;FIN_WAIT&#x72B6;&#x6001;&#xFF0C;&#x7EE7;&#x7EED;&#x7B49;&#x5F85;Server&#x7AEF;&#x7684;FIN&#x62A5;&#x6587;&#x3002;&#x5F53;Server&#x7AEF;&#x786E;&#x5B9A;&#x6570;&#x636E;&#x5DF2;&#x53D1;&#x9001;&#x5B8C;&#x6210;&#xFF0C;&#x5219;&#x5411;Client&#x7AEF;&#x53D1;&#x9001;FIN&#x62A5;&#x6587;&#xFF0C;&#x201D;&#x544A;&#x8BC9;Client&#x7AEF;&#xFF0C;&#x597D;&#x4E86;&#xFF0C;&#x6211;&#x8FD9;&#x8FB9;&#x6570;&#x636E;&#x53D1;&#x5B8C;&#x4E86;&#xFF0C;&#x51C6;&#x5907;&#x597D;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x4E86;&#x201C;&#x3002;Client&#x7AEF;&#x6536;&#x5230;FIN&#x62A5;&#x6587;&#x540E;&#xFF0C;&#x201D;&#x5C31;&#x77E5;&#x9053;&#x53EF;&#x4EE5;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x4ED6;&#x8FD8;&#x662F;&#x4E0D;&#x76F8;&#x4FE1;&#x7F51;&#x7EDC;&#xFF0C;&#x6015;Server&#x7AEF;&#x4E0D;&#x77E5;&#x9053;&#x8981;&#x5173;&#x95ED;&#xFF0C;&#x6240;&#x4EE5;&#x53D1;&#x9001;ACK&#x540E;&#x8FDB;&#x5165;TIME_WAIT&#x72B6;&#x6001;&#xFF0C;&#x5982;&#x679C;Server&#x7AEF;&#x6CA1;&#x6709;&#x6536;&#x5230;ACK&#x5219;&#x53EF;&#x4EE5;&#x91CD;&#x4F20;&#x3002;Server&#x7AEF;&#x6536;&#x5230;ACK&#x540E;&#xFF0C;&#x201D;&#x5C31;&#x77E5;&#x9053;&#x53EF;&#x4EE5;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x4E86;&#x201D;&#x3002;Client&#x7AEF;&#x7B49;&#x5F85;&#x4E86;2MSL&#x540E;&#x4F9D;&#x7136;&#x6CA1;&#x6709;&#x6536;&#x5230;&#x56DE;&#x590D;&#xFF0C;&#x5219;&#x8BC1;&#x660E;Server&#x7AEF;&#x5DF2;&#x6B63;&#x5E38;&#x5173;&#x95ED;&#xFF0C;&#x90A3;&#x597D;&#xFF0C;&#x6211;Client&#x7AEF;&#x4E5F;&#x53EF;&#x4EE5;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x4E86;&#x3002;Ok&#xFF0C;TCP&#x8FDE;&#x63A5;&#x5C31;&#x8FD9;&#x6837;&#x5173;&#x95ED;&#x4E86;&#xFF01; client&#x7ECF;&#x5386;&#x8FC7;&#x7A0B; server&#x7ECF;&#x5386;&#x8FC7;&#x7A0B;&#x6CE8;&#x610F; &#x5728;TIME_WAIT&#x72B6;&#x6001;&#x4E2D;&#xFF0C;&#x5982;&#x679C;TCP client&#x7AEF;&#x6700;&#x540E;&#x4E00;&#x6B21;&#x53D1;&#x9001;&#x7684;ACK&#x4E22;&#x5931;&#x4E86;&#xFF0C;&#x5B83;&#x5C06;&#x91CD;&#x65B0;&#x53D1;&#x9001;&#x3002;TIME_WAIT&#x72B6;&#x6001;&#x4E2D;&#x6240;&#x9700;&#x8981;&#x7684;&#x65F6;&#x95F4;&#x662F;&#x4F9D;&#x8D56;&#x4E8E;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x7684;&#x3002;&#x5178;&#x578B;&#x7684;&#x503C;&#x4E3A;30&#x79D2;&#x3001;1&#x5206;&#x949F;&#x548C;2&#x5206;&#x949F;&#x3002;&#x7B49;&#x5F85;&#x4E4B;&#x540E;&#x8FDE;&#x63A5;&#x6B63;&#x5F0F;&#x5173;&#x95ED;&#xFF0C;&#x5E76;&#x4E14;&#x6240;&#x6709;&#x7684;&#x8D44;&#x6E90;(&#x5305;&#x62EC;&#x7AEF;&#x53E3;&#x53F7;)&#x90FD;&#x88AB;&#x91CA;&#x653E;&#x3002; &#x95EE;&#x9898; -&#x3010;&#x95EE;&#x9898;1&#x3011;&#x4E3A;&#x4EC0;&#x4E48;&#x8FDE;&#x63A5;&#x7684;&#x65F6;&#x5019;&#x662F;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#xFF0C;&#x5173;&#x95ED;&#x7684;&#x65F6;&#x5019;&#x5374;&#x662F;&#x56DB;&#x6B21;&#x63E1;&#x624B;&#xFF1F;&#x7B54;&#xFF1A;&#x56E0;&#x4E3A;&#x5F53;Server&#x7AEF;&#x6536;&#x5230;Client&#x7AEF;&#x7684;SYN&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x53D1;&#x9001;SYN+ACK&#x62A5;&#x6587;&#x3002;&#x5176;&#x4E2D;ACK&#x62A5;&#x6587;&#x662F;&#x7528;&#x6765;&#x5E94;&#x7B54;&#x7684;&#xFF0C;SYN&#x62A5;&#x6587;&#x662F;&#x7528;&#x6765;&#x540C;&#x6B65;&#x7684;&#x3002;&#x4F46;&#x662F;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x65F6;&#xFF0C;&#x5F53;Server&#x7AEF;&#x6536;&#x5230;FIN&#x62A5;&#x6587;&#x65F6;&#xFF0C;&#x5F88;&#x53EF;&#x80FD;&#x5E76;&#x4E0D;&#x4F1A;&#x7ACB;&#x5373;&#x5173;&#x95ED;SOCKET&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x80FD;&#x5148;&#x56DE;&#x590D;&#x4E00;&#x4E2A;ACK&#x62A5;&#x6587;&#xFF0C;&#x544A;&#x8BC9;Client&#x7AEF;&#xFF0C;&#x201D;&#x4F60;&#x53D1;&#x7684;FIN&#x62A5;&#x6587;&#x6211;&#x6536;&#x5230;&#x4E86;&#x201D;&#x3002;&#x53EA;&#x6709;&#x7B49;&#x5230;&#x6211;Server&#x7AEF;&#x6240;&#x6709;&#x7684;&#x62A5;&#x6587;&#x90FD;&#x53D1;&#x9001;&#x5B8C;&#x4E86;&#xFF0C;&#x6211;&#x624D;&#x80FD;&#x53D1;&#x9001;FIN&#x62A5;&#x6587;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x80FD;&#x4E00;&#x8D77;&#x53D1;&#x9001;&#x3002;&#x6545;&#x9700;&#x8981;&#x56DB;&#x6B65;&#x63E1;&#x624B;&#x3002; -&#x3010;&#x95EE;&#x9898;2&#x3011;&#x4E3A;&#x4EC0;&#x4E48;TIME_WAIT&#x72B6;&#x6001;&#x9700;&#x8981;&#x7ECF;&#x8FC7;2MSL(&#x6700;&#x5927;&#x62A5;&#x6587;&#x6BB5;&#x751F;&#x5B58;&#x65F6;&#x95F4;)&#x624D;&#x80FD;&#x8FD4;&#x56DE;&#x5230;CLOSE&#x72B6;&#x6001;&#xFF1F;&#x7B54;&#xFF1A;&#x867D;&#x7136;&#x6309;&#x9053;&#x7406;&#xFF0C;&#x56DB;&#x4E2A;&#x62A5;&#x6587;&#x90FD;&#x53D1;&#x9001;&#x5B8C;&#x6BD5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8FDB;&#x5165;CLOSE&#x72B6;&#x6001;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x5047;&#x8C61;&#x7F51;&#x7EDC;&#x662F;&#x4E0D;&#x53EF;&#x9760;&#x7684;&#xFF0C;&#x6709;&#x53EF;&#x4EE5;&#x6700;&#x540E;&#x4E00;&#x4E2A;ACK&#x4E22;&#x5931;&#x3002;&#x6240;&#x4EE5;TIME_WAIT&#x72B6;&#x6001;&#x5C31;&#x662F;&#x7528;&#x6765;&#x91CD;&#x53D1;&#x53EF;&#x80FD;&#x4E22;&#x5931;&#x7684;ACK&#x62A5;&#x6587;&#x3002; &#x5B8C;&#x6574;&#x8FC7;&#x7A0B;&#x56FE; TCP&#x8FDE;&#x63A5;&#x72B6;&#x6001;&#x7801; LISTEN&#xFF1A;&#x4FA6;&#x542C;&#x6765;&#x81EA;&#x8FDC;&#x65B9;&#x7684;TCP&#x7AEF;&#x53E3;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42; SYN-SENT&#xFF1A;&#x518D;&#x53D1;&#x9001;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x540E;&#x7B49;&#x5F85;&#x5339;&#x914D;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42; SYN-RECEIVED&#xFF1A;&#x518D;&#x6536;&#x5230;&#x548C;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x540E;&#x7B49;&#x5F85;&#x5BF9;&#x65B9;&#x5BF9;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x7684;&#x786E;&#x8BA4; ESTABLISHED&#xFF1A;&#x4EE3;&#x8868;&#x4E00;&#x4E2A;&#x6253;&#x5F00;&#x7684;&#x8FDE;&#x63A5; FIN-WAIT-1&#xFF1A;&#x7B49;&#x5F85;&#x8FDC;&#x7A0B;TCP&#x8FDE;&#x63A5;&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;&#xFF0C;&#x6216;&#x5148;&#x524D;&#x7684;&#x8FDE;&#x63A5;&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;&#x7684;&#x786E;&#x8BA4; FIN-WAIT-2&#xFF1A;&#x4ECE;&#x8FDC;&#x7A0B;TCP&#x7B49;&#x5F85;&#x8FDE;&#x63A5;&#x4E2D;&#x65AD;&#x8BF7;&#x6C42; CLOSE-WAIT&#xFF1A;&#x7B49;&#x5F85;&#x4ECE;&#x672C;&#x5730;&#x7528;&#x6237;&#x53D1;&#x6765;&#x7684;&#x8FDE;&#x63A5;&#x4E2D;&#x65AD;&#x8BF7;&#x6C42; CLOSING&#xFF1A;&#x7B49;&#x5F85;&#x8FDC;&#x7A0B;TCP&#x5BF9;&#x8FDE;&#x63A5;&#x4E2D;&#x65AD;&#x7684;&#x786E;&#x8BA4; LAST-ACK&#xFF1A;&#x7B49;&#x5F85;&#x539F;&#x6765;&#x7684;&#x53D1;&#x5411;&#x8FDC;&#x7A0B;TCP&#x7684;&#x8FDE;&#x63A5;&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;&#x7684;&#x786E;&#x8BA4; TIME-WAIT&#xFF1A;&#x7B49;&#x5F85;&#x8DB3;&#x591F;&#x7684;&#x65F6;&#x95F4;&#x4EE5;&#x786E;&#x4FDD;&#x8FDC;&#x7A0B;TCP&#x63A5;&#x6536;&#x5230;&#x8FDE;&#x63A5;&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;&#x7684;&#x786E;&#x8BA4; CLOSED&#xFF1A;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x8FDE;&#x63A5;&#x72B6;&#x6001;]]></content>
      <categories>
        <category>基础</category>
      </categories>
      <tags>
        <tag>TCP/IP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux系统空间被占满却找不到大文件]]></title>
    <url>%2FLinux%E7%B3%BB%E7%BB%9F%E7%A9%BA%E9%97%B4%E8%A2%AB%E5%8D%A0%E6%BB%A1%E5%8D%B4%E6%89%BE%E4%B8%8D%E5%88%B0%E5%A4%A7%E6%96%87%E4%BB%B6.html</url>
    <content type="text"><![CDATA[&#x6700;&#x8FD1;&#x9047;&#x5230;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x592A;&#x5927;&#x5BFC;&#x81F4;&#x78C1;&#x76D8;&#x6EE1;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x6211;&#x627E;&#x5230;&#x5E76;&#x5220;&#x9664;&#x4E86;&#xFF0C;&#x8FC7;&#x4E86;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x7A7A;&#x95F4;&#x53C8;&#x88AB;&#x5360;&#x6EE1;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x518D;&#x627E;&#x5927;&#x6587;&#x4EF6;&#x5374;&#x627E;&#x4E0D;&#x5230;&#x4E86;&#x3002; &#x6545;&#x969C;&#x73B0;&#x8C61;&#x670D;&#x52A1;&#x5668;&#x78C1;&#x76D8;&#x7206;&#x6EE1;12345678df -hT&#x6587;&#x4EF6;&#x7CFB;&#x7EDF; &#x7C7B;&#x578B; &#x5BB9;&#x91CF; &#x5DF2;&#x7528; &#x53EF;&#x7528; &#x5DF2;&#x7528;%% &#x6302;&#x8F7D;&#x70B9;/dev/mapper/vg_weiwang1-lv_root ext4 50G 50G 0 100% /tmpfs tmpfs 5.3G 0 5.3G 0% /dev/shm/dev/vda1 ext4 485M 32M 428M 7% /boot/dev/mapper/vg_weiwang1-lv_home ext4 44G 44G 0 100% /home &#x5904;&#x7406;&#x601D;&#x8DEF;&#x4F7F;&#x7528;find &#x67E5;&#x627E;&#x5230;&#x5927;&#x6587;&#x4EF6;1find / -size +1G | xargs ls -lh &#x786E;&#x5B9A;&#x597D;&#x6570;&#x636E;&#x65E0;&#x7528;&#x4E4B;&#x540E;&#x5220;&#x9664;1find / -size +1G | xargs rm -rf &#x8FD9;&#x65F6;&#x5019;&#x5728;&#x4F7F;&#x7528;df&#x547D;&#x4EE4;&#x786E;&#x8BA4;&#x4E00;&#x6B21;&#xFF0C;&#x53D1;&#x73B0;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x53EF;&#x4EE5;&#x7528;&#x4E86;&#x3002;&#x5C06;&#x8FD1;&#x8FC7;&#x4E86;&#x4E00;&#x4E2A;&#x5C0F;&#x65F6;&#xFF0C;&#x7528;ftp&#x4E0A;&#x4F20;&#x5230;&#x8FD9;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x4F20;&#x5931;&#x8D25;&#xFF0C;&#x518D;df&#x770B;&#x770B;&#x3002;&#x78C1;&#x76D8;&#x5C45;&#x7136;&#x53C8;&#x6EE1;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x5B9E;&#x9645;&#x7528;&#x5230;&#x7684;&#x7A7A;&#x95F4;&#x624D;10G&#x4E0D;&#x5230;&#x3002;&#x4EE5;&#x4E3A;&#x662F;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#x75C5;&#x6BD2;&#x4E86;&#xFF0C;ps -ef &#x67E5;&#x770B;&#x6709;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x5F02;&#x5E38;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x6700;&#x540E;&#x4E07;&#x822C;&#x6392;&#x67E5;&#x5747;&#x6CA1;&#x6709;&#x53D1;&#x73B0;&#x95EE;&#x9898;&#x3002;&#x65E0;&#x5948;&#x4E4B;&#x4E0B;&#x53EA;&#x597D;&#x4F7F;&#x7528;&#x7F51;&#x7BA1;&#x5927;&#x62DB;&#x2013;&#x91CD;&#x542F;&#x6765;&#x8BD5;&#x8BD5;&#x770B;&#xFF0C;&#x91CD;&#x542F;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x6062;&#x590D;&#x6B63;&#x5E38;&#x4E86;&#x3002; &#x7406;&#x8BBA;&#x77E5;&#x8BC6;&#x5728;Linux&#x6216;&#x8005;Unix&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x901A;&#x8FC7;rm&#x6216;&#x8005;&#x6587;&#x4EF6;&#x7BA1;&#x7406;&#x5668;&#x5220;&#x9664;&#x6587;&#x4EF6;&#x5C06;&#x4F1A;&#x4ECE;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x4E0A;&#x89E3;&#x9664;&#x94FE;&#x63A5;(unlink)&#x3002;&#x5982;&#x679C;&#x6587;&#x4EF6;&#x662F;&#x88AB;&#x6253;&#x5F00;&#x7684;&#xFF08;&#x6709;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x6B63;&#x5728;&#x4F7F;&#x7528;&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x8FDB;&#x7A0B;&#x5C06;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x8BFB;&#x53D6;&#x8BE5;&#x6587;&#x4EF6;&#xFF0C;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x4E5F;&#x4E00;&#x76F4;&#x88AB;&#x5360;&#x7528; &#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x4F7F;&#x7528; lsof &#x627E;&#x5230;&#x88AB;&#x5220;&#x9664;&#x4F46;&#x662F;fd&#x6CA1;&#x91CA;&#x653E;&#x7684;&#x6587;&#x4EF6;1lsof | grep deleted &#x627E;&#x5230;&#x5360;&#x7528;&#x5220;&#x9664;&#x6587;&#x4EF6;&#x7684;&#x8FDB;&#x7A0B;&#x5217;&#x8868;&#x4E86;, &#x7136;&#x540E;&#x6740;&#x6B7B;( kill -9 )&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;&#x6216;&#x8005;&#x91CD;&#x542F;&#x5BF9;&#x5E94;&#x7684;&#x670D;&#x52A1;&#x5373;&#x53EF;&#x3002;&#x4E0D;&#x8FC7;&#x8FD9;&#x6B21;&#x6B63;&#x597D;&#x6B6A;&#x6253;&#x6B63;&#x7740;&#x91CD;&#x542F;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#x4E86;&#xFF0C;&#x8FD8;&#x662F;&#x4E0D;&#x63A8;&#x8350;&#x91CD;&#x542F;&#x89E3;&#x51B3;&#x6B64;&#x7C7B;&#x95EE;&#x9898;&#x3002;&#x4EE5;&#x540E;&#x5982;&#x679C;&#x9047;&#x5230;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x5360;&#x6EE1;&#xFF0C;&#x5207;&#x52FF;&#x76F4;&#x63A5;&#x5220;&#x9664;&#x6587;&#x4EF6;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5728;&#x7EBF;&#x6E05;&#x7A7A;&#x7684;&#x65B9;&#x5F0F;&#x89E3;&#x51B3;&#x6B64;&#x7C7B;&#x95EE;&#x9898;1&gt; /var/log/httpd/acess.log &#x901A;&#x8FC7;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#xFF0C;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x4E0D;&#x4F46;&#x53EF;&#x4EE5;&#x9A6C;&#x4E0A;&#x91CA;&#x653E;&#xFF0C;&#x4E5F;&#x53EF;&#x4FDD;&#x969C;&#x8FDB;&#x7A0B;&#x7EE7;&#x7EED;&#x5411;&#x6587;&#x4EF6;&#x5199;&#x5165;&#x65E5;&#x5FD7;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x7ECF;&#x5E38;&#x7528;&#x4E8E;&#x5728;&#x7EBF;&#x6E05;&#x7406;&#x5404;&#x79CD;&#x670D;&#x52A1;&#x6240;&#x4EA7;&#x751F;&#x7684;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;]]></content>
      <categories>
        <category>故障记录</category>
      </categories>
      <tags>
        <tag>故障</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[获取系统信息命令汇总]]></title>
    <url>%2F%E8%8E%B7%E5%8F%96%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BB.html</url>
    <content type="text"><![CDATA[&#x8FD9;&#x91CC;&#x4EC5;&#x4EC5;&#x53EA;&#x662F;&#x8BB0;&#x5F55;&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x7684;&#x83B7;&#x53D6;&#x7CFB;&#x7EDF;&#x4FE1;&#x606F;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x5176;&#x4ED6;&#x66F4;&#x591A;&#x547D;&#x4EE4;&#x8BF7;&#x53C2;&#x8003;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x3002; &#x7CFB;&#x7EDF;12345678uname -a # &#x67E5;&#x770B;&#x5185;&#x6838;/&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;/CPU&#x4FE1;&#x606F;head -n 1 /etc/issue # &#x67E5;&#x770B;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7248;&#x672C;cat /proc/cpuinfo # &#x67E5;&#x770B;CPU&#x4FE1;&#x606F;hostname # &#x67E5;&#x770B;&#x8BA1;&#x7B97;&#x673A;&#x540D;lspci -tv # &#x5217;&#x51FA;&#x6240;&#x6709;PCI&#x8BBE;&#x5907;lsusb -tv # &#x5217;&#x51FA;&#x6240;&#x6709;USB&#x8BBE;&#x5907;lsmod # &#x5217;&#x51FA;&#x52A0;&#x8F7D;&#x7684;&#x5185;&#x6838;&#x6A21;&#x5757;env &#x6216; set # &#x67E5;&#x770B;&#x73AF;&#x5883;&#x53D8;&#x91CF; &#x8D44;&#x6E90;1234567free -m # &#x67E5;&#x770B;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x91CF;&#x548C;&#x4EA4;&#x6362;&#x533A;&#x4F7F;&#x7528;&#x91CF;df -h # &#x67E5;&#x770B;&#x5404;&#x5206;&#x533A;&#x4F7F;&#x7528;&#x60C5;&#x51B5;du -sh &lt;&#x76EE;&#x5F55;&#x540D;&gt; # &#x67E5;&#x770B;&#x6307;&#x5B9A;&#x76EE;&#x5F55;&#x7684;&#x5927;&#x5C0F;grep MemTotal /proc/meminfo # &#x67E5;&#x770B;&#x5185;&#x5B58;&#x603B;&#x91CF;grep MemFree /proc/meminfo # &#x67E5;&#x770B;&#x7A7A;&#x95F2;&#x5185;&#x5B58;&#x91CF;uptime # &#x67E5;&#x770B;&#x7CFB;&#x7EDF;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x3001;&#x7528;&#x6237;&#x6570;&#x3001;&#x8D1F;&#x8F7D;cat /proc/loadavg # &#x67E5;&#x770B;&#x7CFB;&#x7EDF;&#x8D1F;&#x8F7D; &#x78C1;&#x76D8;&#x548C;&#x5206;&#x533A;12345mount | column -t # &#x67E5;&#x770B;&#x6302;&#x63A5;&#x7684;&#x5206;&#x533A;&#x72B6;&#x6001;fdisk -l # &#x67E5;&#x770B;&#x6240;&#x6709;&#x5206;&#x533A;swapon -s # &#x67E5;&#x770B;&#x6240;&#x6709;&#x4EA4;&#x6362;&#x5206;&#x533A;hdparm -i /dev/hda # &#x67E5;&#x770B;&#x78C1;&#x76D8;&#x53C2;&#x6570;(&#x4EC5;&#x9002;&#x7528;&#x4E8E;IDE&#x8BBE;&#x5907;)dmesg | grep IDE # &#x67E5;&#x770B;&#x542F;&#x52A8;&#x65F6;IDE&#x8BBE;&#x5907;&#x68C0;&#x6D4B;&#x72B6;&#x51B5; &#x7F51;&#x7EDC;123456ifconfig # &#x67E5;&#x770B;&#x6240;&#x6709;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x7684;&#x5C5E;&#x6027;iptables -nvL # &#x67E5;&#x770B;&#x9632;&#x706B;&#x5899;&#x8BBE;&#x7F6E;route -n # &#x67E5;&#x770B;&#x8DEF;&#x7531;&#x8868;netstat -lntp # &#x67E5;&#x770B;&#x6240;&#x6709;&#x76D1;&#x542C;&#x7AEF;&#x53E3;netstat -antp # &#x67E5;&#x770B;&#x6240;&#x6709;&#x5DF2;&#x7ECF;&#x5EFA;&#x7ACB;&#x7684;&#x8FDE;&#x63A5;netstat -s # &#x67E5;&#x770B;&#x7F51;&#x7EDC;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F; &#x8FDB;&#x7A0B;1234ps -ef # &#x67E5;&#x770B;&#x6240;&#x6709;&#x8FDB;&#x7A0B;ps aux # &#x67E5;&#x770B;&#x6240;&#x6709;&#x8FDB;&#x7A0B;lsof # &#x67E5;&#x770B;&#x6240;&#x6709;&#x8FDB;&#x7A0B;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;top # &#x5B9E;&#x65F6;&#x663E;&#x793A;&#x8FDB;&#x7A0B;&#x72B6;&#x6001; &#x7528;&#x6237;1234567w # &#x67E5;&#x770B;&#x6D3B;&#x52A8;&#x7528;&#x6237;whoami # &#x67E5;&#x770B;&#x5F53;&#x524D;&#x767B;&#x5F55;&#x7528;&#x6237;id &lt;&#x7528;&#x6237;&#x540D;&gt; # &#x67E5;&#x770B;&#x6307;&#x5B9A;&#x7528;&#x6237;&#x4FE1;&#x606F;last # &#x67E5;&#x770B;&#x7528;&#x6237;&#x767B;&#x5F55;&#x65E5;&#x5FD7;cut -d: -f1 /etc/passwd # &#x67E5;&#x770B;&#x7CFB;&#x7EDF;&#x6240;&#x6709;&#x7528;&#x6237;cut -d: -f1 /etc/group # &#x67E5;&#x770B;&#x7CFB;&#x7EDF;&#x6240;&#x6709;&#x7EC4;crontab -l # &#x67E5;&#x770B;&#x5F53;&#x524D;&#x7528;&#x6237;&#x7684;&#x8BA1;&#x5212;&#x4EFB;&#x52A1; &#x670D;&#x52A1;12chkconfig --list # &#x5217;&#x51FA;&#x6240;&#x6709;&#x7CFB;&#x7EDF;&#x670D;&#x52A1;chkconfig --list | grep on # &#x5217;&#x51FA;&#x6240;&#x6709;&#x542F;&#x52A8;&#x7684;&#x7CFB;&#x7EDF;&#x670D;&#x52A1; RPM&#x7A0B;&#x5E8F;&#x5305;123rpm -qa # &#x67E5;&#x770B;&#x6240;&#x6709;&#x5B89;&#x88C5;&#x7684;&#x8F6F;&#x4EF6;&#x5305;rpm -qi &lt;&#x5305;&#x540D;&gt; # &#x67E5;&#x770B;&#x5DF2;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;&#x5305;&#x76F8;&#x5173;&#x4FE1;&#x606F;rpm -qpi &lt;&#x5305;&#x540D;&gt; # &#x67E5;&#x770B;&#x672A;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;&#x5305;&#x76F8;&#x5173;&#x4FE1;&#x606F;]]></content>
      <categories>
        <category>基础</category>
      </categories>
      <tags>
        <tag>系统信息</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CentOS6结合Busybox完成自制Linux系统]]></title>
    <url>%2FCentOS6%E7%BB%93%E5%90%88Busybox%E5%AE%8C%E6%88%90%E8%87%AA%E5%88%B6Linux%E7%B3%BB%E7%BB%9F.html</url>
    <content type="text"><![CDATA[&#x672C;&#x6587;&#x4E3B;&#x8981;&#x4ECB;&#x7ECD;&#x57FA;&#x4E8E;busybox&#x4E0A;&#x5236;&#x4F5C;&#x4E00;&#x4E2A;&#x5C0F;&#x5DE7;&#x7248;&#x7684;linux&#xFF0C;&#x4E00;&#x822C;&#x53D1;&#x884C;&#x7248;&#x7684;&#x4F53;&#x79EF;&#x592A;&#x8FC7;&#x5E9E;&#x5927;&#xFF0C;&#x5F88;&#x591A;&#x529F;&#x80FD;&#x53EF;&#x80FD;&#x6211;&#x4EEC;&#x78B0;&#x90FD;&#x4E0D;&#x4F1A;&#x53BB;&#x78B0;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x5C31;&#x5728;&#x60F3;&#x53EF;&#x4E0D;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x88C1;&#x526A;&#x5185;&#x6838;&#x548C;&#x5916;&#x56F4;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x5236;&#x4F5C;&#x81EA;&#x5DF1;&#x7684;Linux&#x7CFB;&#x7EDF;&#x3002;&#x7B54;&#x6848;&#x662F;&#x80AF;&#x5B9A;&#x7684;&#xFF0C;&#x73B0;&#x5728;&#x5C31;&#x5F00;&#x59CB;&#x5236;&#x4F5C;&#x81EA;&#x5DF1;&#x7684;Linux&#x7CFB;&#x7EDF;&#x5427;&#x3002; &#x73AF;&#x5883;&#x51C6;&#x5907;&#x9636;&#x6BB5; &#x4E00;&#x4E2A;Centos&#x4E3B;&#x673A;&#xFF08;&#x672C;&#x6587;&#x91C7;&#x7528;&#x7684;&#x662F;6.8&#xFF0C;&#x5176;&#x4ED6;&#x7248;&#x672C;&#x8BF7;&#x81EA;&#x884C;&#x6D4B;&#x8BD5;&#xFF09; &#x989D;&#x5916;&#x6DFB;&#x52A0;&#x4E00;&#x5757;&#x786C;&#x76D8;&#xFF08;&#x540E;&#x9762;&#x7528;&#x6765;&#x5F53;&#x505A;&#x7CFB;&#x7EDF;&#x76D8;&#x4F7F;&#x7528;&#xFF09; &#x4E0B;&#x8F7D;&#x5185;&#x6838;&#x7A0B;&#x5E8F;&#x5305;&#xFF08;&#x8FD9;&#x91CC;&#x7528;&#x7684;&#x7248;&#x672C;&#x662F;3.19.1&#xFF0C;&#x963F;&#x91CC;&#x4E91;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF09; &#x4E0B;&#x8F7D;Busybox&#x7A0B;&#x5E8F;&#x5305;&#xFF08;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF09; &#x78C1;&#x76D8;&#x914D;&#x7F6E; &#x65B0;&#x5EFA;3&#x4E2A;&#x5206;&#x533A;&#x7B2C;&#x4E00;&#x4E2A;&#x4E3B;&#x5206;&#x533A;(&#x505A;boot&#x5206;&#x533A;)&#xFF1A;200M&#x7B2C;&#x4E8C;&#x4E2A;&#x4E3B;&#x5206;&#x533A;(&#x505A;/&#x6839;&#x5206;&#x533A;)&#xFF1A;20G&#x7B2C;&#x4E09;&#x4E2A;&#x4E3B;&#x5206;&#x533A;(&#x505A;swap&#x5206;&#x533A;)&#xFF1A;2G123456mkfs.ext4 /dev/sda1mkfs.ext4 /dev/sda2mkswap /dev/sda3mkdir -pv /mnt/{boot,sysroot}mount /dev/sda1 /mnt/boot/mount /dev/sda2 /mnt/sysroot/ &#x7F16;&#x8BD1;&#x5185;&#x6838; &#x4E0B;&#x8F7D;&#x5B8C;&#x7A0B;&#x5E8F;&#x5305;&#xFF0C;&#x89E3;&#x538B;&#x7F29;&#x81F3;/usr/src&#x76EE;&#x5F55;&#x4E0B; 1234tar -Jxf linux-3.13.6.tar.xz -C /usr/src/cd /usr/src/ln -sv linux-3.13.6 linuxcd linux &#x5B89;&#x88C5;&#x76F8;&#x5173;&#x4F9D;&#x8D56;&#x5305;&#x548C;&#x5305;&#x7EC4; 12yum groupinstall -y &quot;Development tools&quot; &quot;Server Platform Development&quot;yum install -y ncurses-devel glibc-static libmcrypt-devel &#x6839;&#x636E;&#x5B9E;&#x9645;&#x9700;&#x6C42;&#x9009;&#x62E9;&#x9700;&#x8981;&#x7684;&#x529F;&#x80FD;&#x7F16;&#x8BD1;&#x5185;&#x6838; 12345678910111213141516171819202122232425make allnoconfigmake menuconfig# &#x6211;&#x4EEC;&#x628A;&#x8FD9;&#x4E9B;&#x5185;&#x5BB9;&#x5168;&#x90E8;&#x7F16;&#x8BD1;&#x8FDB;&#x5185;&#x6838;&#x3001;&#x4E0D;&#x7F16;&#x8BD1;&#x6210;&#x6A21;&#x5757;&#x3001;*&#x53F7;&#x8868;&#x793A;&#x7F16;&#x8BD1;&#x8FDB;&#x5185;&#x6838;(M&#x8868;&#x793A;&#x4EE5;&#x6A21;&#x5757;&#x7684;&#x65B9;&#x5F0F;&#x88C5;&#x8F7D;)# &#x6CE8;&#x610F;&#xFF1A;&#x4EE5;&#x4E0B;*&#x53F7;&#x6807;&#x8BC6;&#x7684;&#x9009;&#x9879;&#x4E00;&#x5B9A;&#x8981;&#x9009;&#x62E9;*&#x53F7;&#xFF0C;&#x5426;&#x5219;&#x7CFB;&#x7EDF;&#x65E0;&#x6CD5;&#x6B63;&#x5E38;&#x542F;&#x52A8;[*]64-bit kernel &#xFF1A;64&#x4F4D;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x5185;&#x6838;General setup --&gt; Local version --&gt; -MyLinux: &#x7ED9;&#x5185;&#x6838;&#x5B9A;&#x4E00;&#x4E2A;&#x81EA;&#x5DF1;&#x7684;&#x7248;&#x672C;Processor type and features --&gt; Processor family --&gt; (X)Generic-x86-64&#xFF1A;&#x8FD9;&#x91CC;&#x662F;CPU&#x7C7B;&#x578B;&#x3001;&#x8FD9;&#x4E2A;&#x662F;&#x901A;&#x7528;x86-64Processor type and features --&gt; [*]Symmetric multi-processing support&#xFF1A;&#x9009;&#x62E9;CPU&#x652F;&#x6301;&#x591A;&#x6838;&#x5FC3;&#x5904;&#x7406;[*]Enable loadable module support: &#x9009;&#x62E9;&#x5185;&#x6838;&#x52A8;&#x6001;&#x6A21;&#x5757;&#x52A0;&#x8F7D;Bus options (PCI etc.) --&gt; [*]PCI suppor&#xFF1A;&#x652F;&#x6301;PCI&#x603B;&#x7EBF;Device Drivers --&gt; &lt;*&gt;SCSI device support --&gt;[*]SCSI disk support&#x8981;&#x652F;&#x6301;SCSI&#x786C;&#x76D8;Device Drivers --&gt;Fusion MPT device support (NEW) --&gt; &lt;*&gt;Fusion MPT ScsiHost drivers for SPI&#x3001;&lt;*&gt;Fusion MPT misc device (ioctl) driver&#x3001;[*]Fusion MPT logging facility&#xFF1A;&#x652F;&#x6301;&#x5BF9;&#x786C;&#x76D8;&#x7684;&#x9A71;&#x52A8;File systems --&gt; &lt;*&gt;The Extended 4 (ext4) filesystem&#xFF1A;&#x652F;&#x6301;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;Executable file formats / Emulations --&gt; [*]Kernel support for ELF binaries&#x3001;[*]Write ELF core dumps with partial segments (NEW)&#x3001; &lt;*&gt;Kernel support for scripts starting with #!:&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x7684;&#x683C;&#x5F0F;Device Drivers --&gt;Input device support --&gt; [*]Keyboards -&gt; &lt;*&gt;AT keyboard (NEW) [*]Mice&#xFF1A;&#x652F;&#x6301;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x8BBE;&#x5907;&#x3001;&#x6BD4;&#x5982;&#x5065;&#x76D8;Device Drivers &gt; Generic Driver Options &gt; [*] Maintain a devtmpfs filesystem to mount at /dev [*]Automount devtmpfs at /dev, after the kernel mounted the rootfs[*] Networking support ---&gt; &gt; Networking options[*] TCP/IP networking [*]IP:multicasting [*]IP: advanced router [*]IP: policy routing [*]IP: verbose route monitoring [*]IP: kernel level autoconfiguration [*]IP: DHCP support [*]IP: BOOTP support [*]IP: RARP support &lt;*&gt;IP: tunneling &lt;*&gt;Unix domain sockets &lt;*&gt;UNIX: socket monitoring interface&#xFF1A;&#x652F;&#x6301;&#x534F;&#x8BAE;Device Drivers &gt; Network device support &gt; Ethernet driver support[*]Intel devices (NEW)&lt;*&gt;Intel(R) PRO/1000 Gigabit Ethernet support&lt;*&gt;Intel(R) PRO/1000 PCI-Express Gigabit Ethernet support&#xFF1A;&#x53EA;&#x8981;Intel&#x7684;&#x3001;&#x5176;&#x4ED6;&#x7684;&#x4ED6;&#x90FD;&#x53BB;&#x6389;&#x3001;&#x8FD9;&#x662F;&#x9009;&#x62E9;&#x7F51;&#x5361;&#x8BBE;&#x5907;&#x7684;&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;OK&#x3001;&#x5230;&#x8FD9;&#x91CC;&#x4FDD;&#x5B58;&#x9000;&#x51FA;&#x3001;&#x628A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5907;&#x4EFD;&#x4E00;&#x4EFD;&#x51FA;&#x6765;cp .config /root/3.13.6.ch-x86_64make SUBDIR=/arch #&#x5F00;&#x59CB;&#x7F16;&#x8BD1;&#x5185;&#x6838;&#xFF0C;&#x8FD9;&#x91CC;&#x65F6;&#x95F4;&#x8F83;&#x957F;&#xFF0C;&#x8010;&#x5FC3;&#x7B49;&#x5F85;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x53EF;&#x4EE5;&#x505A;&#x4E00;&#x70B9;&#x5176;&#x4ED6;&#x7684;&#x4E8B;cp arch/x86_64/boot/bzImage /mnt/boot/ # &#x7F16;&#x8BD1;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x5C06;&#x6587;&#x4EF6;&#x62F7;&#x5165;&#x5230;boot&#x76EE;&#x5F55;&#x4E0B;grub-install --root-directory=/mnt hd1 # &#x5B89;&#x88C5;grub &#x7F16;&#x8BD1;Busybox123tar -xf busybox-20160822.tar.bz2 -C /usr/local/cd /usr/local/busyboxmake menuconfig make menuconfig&#x65F6;&#x5C31;&#x9009;&#x62E9;&#x8FD9;&#x9879;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3001;&#x5176;&#x4ED6;&#x7684;&#x90FD;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x9009;&#x9879;&#xFF1A;Busybox Settings &#x2013;&gt;Build Options &#x2013;&gt;[*] Build BusyBox as a static binary (no shared libs)&#xFF1A;&#x628A;busybox&#x7F16;&#x8BD1;&#x4E5F;&#x9759;&#x6001;&#x4E8C;&#x8FDB;&#x5236;&#xFF0C;&#x4E0D;&#x7528;&#x5171;&#x4EAB;&#x5E93; 12make make install]]></content>
  </entry>
  <entry>
    <title><![CDATA[一键安装cobbler脚本]]></title>
    <url>%2F%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85cobbler%E8%84%9A%E6%9C%AC.html</url>
    <content type="text"><![CDATA[&#x8FD9;&#x91CC;&#x63A8;&#x8350;&#x4E00;&#x4E2A;&#x81EA;&#x5DF1;&#x5199;&#x7684;cobbler&#x5B89;&#x88C5;&#x811A;&#x672C;&#xFF0C;&#x5728;centos6&#x7CFB;&#x7EDF;&#x4E0A;&#x6D4B;&#x8BD5;&#x6CA1;&#x95EE;&#x9898;&#xFF0C;&#x5176;&#x4ED6;&#x73AF;&#x5883;&#x8BF7;&#x81EA;&#x884C;&#x6D4B;&#x8BD5;&#x3002;&#x5DF2;&#x5173;&#x95ED;selinux&#x548C;iptables&#xFF0C;&#x5728;&#x5927;&#x73AF;&#x5883;&#x4E0B;&#x6279;&#x91CF;&#x90E8;&#x7F72;&#x670D;&#x52A1;&#x5668;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8FD8;&#x662F;&#x5F88;&#x597D;&#x7528;&#x7684;&#x2026;&#x2026; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485#!/bin/sh#&#x4E00;&#x952E;&#x5B89;&#x88C5;cobbler&#x811A;&#x672C;,&#x672C;&#x811A;&#x672C;&#x4EC5;&#x5728;centos6&#x4E0A;&#x9A8C;&#x8BC1;&#x8FC7;&#xFF0C;&#x5176;&#x4ED6;&#x73AF;&#x5883;&#x8BF7;&#x81EA;&#x884C;&#x6D4B;&#x8BD5;#ch #2016-09-05#coding=utf8###################################################################&#x5C06;&#x5982;&#x4E0B;IP&#x4FEE;&#x6539;&#x6210;&#x4F60;cobbler&#x670D;&#x52A1;&#x5668;&#x7684;IP&#x5730;&#x5740;ip=192.168.16.65#&#x5C06;&#x5982;&#x4E0B;net&#x4FEE;&#x6539;&#x6210;&#x4F60;Cobbler&#x6240;&#x5728;&#x7F51;&#x6BB5;&#x7684;NET net=192.168.16.0 #&#x4FEE;&#x6539;&#x6210;dhcp&#x8BA1;&#x5212;&#x5206;&#x914D;&#x7684;IP&#x6BB5;begin=192.168.16.250end=192.168.16.253#web&#x7528;&#x6237;/&#x5BC6;&#x7801;USER=chPASSWD=123456################################################################### &#x5B89;&#x88C5;&#x524D;&#x8BF7;&#x786E;&#x5B9A;&#x914D;&#x7F6E;&#x597D;epel&#x6E90;echo &quot;$ip www.chen-hao.com.cn&quot; &gt;&gt; /etc/hostsyum install -y cobbler cobbler-web pykickstart dhcp debmirror syslinux cman fence-agents/etc/init.d/iptables stop/etc/init.d/httpd start/etc/init.d/cobblerd startservice cobblerd restartsed -i -e &apos;s/= yes/= no/g&apos; /etc/xinetd.d/rsyncsed -i -e &apos;s/= yes/= no/g&apos; /etc/xinetd.d/tftpsed -i &apos;s@next_server: 127.0.0.1@next_server: &apos;$ip&apos;@g&apos; /etc/cobbler/settingssed -i &apos;s@server: 127.0.0.1@server: &apos;$ip&apos;@g&apos; /etc/cobbler/settingscp /usr/share/syslinux/pxelinux.0 /var/lib/cobbler/loaders/cp /usr/share/syslinux/menu.c32 /var/lib/cobbler/loaders/sed -i &apos;s$@arches=&quot;i386&quot;$#@arches=&quot;i386&quot;$g&apos; /etc/debmirror.confsed -i &apos;s$@dists=&quot;sid&quot;$#@dists=&quot;sid&quot;$g&apos; /etc/debmirror.confsed -i &apos;s@default_password_crypted@#default_password_crypted@g&apos; /etc/cobbler/settingsecho &quot;default_password_crypted: &quot;$1$ac756ac7$erF27Ljjp3rDItLVqHLOg/&quot;&quot; &gt;&gt; /etc/cobbler/settingscobbler get-loadersservice cobblerd restartcobbler sync####&#x7528;cobbler check &#x67E5;&#x770B;&#x5230;&#x5E95;&#x6709;&#x54EA;&#x4E9B;&#x6B65;&#x9AA4;&#x6CA1;&#x6709;&#x64CD;&#x4F5C;&#x5B8C;&#x6210;&#x3002;cobbler check# dhcp&#x914D;&#x7F6E; cat &gt; /etc/dhcp/dhcpd.conf &lt;&lt;EOFoption domain-name &quot;xiaoluo.com&quot;;option domain-name-servers $ip;default-lease-time 43200;max-lease-time 86400;log-facility local7;subnet $net netmask 255.255.255.0 { range $begin $end; option routers $ip;}next-server $ip;filename=&quot;pxelinux.0&quot;;EOF# &#x8FD9;&#x91CC;&#x9700;&#x8981;&#x63D0;&#x524D;&#x6302;&#x8F7D;&#x597D;&#x78C1;&#x76D8;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#xFF0C;&#x8BF7;&#x81EA;&#x884C;&#x51C6;&#x5907;&#x597D;ISO&#x6587;&#x4EF6;/etc/init.d/dhcpd restartservice xinetd restartservice cobblerd restartmkdir -p /opt/xiaoluomount /dev/cdrom /opt/xiaoluo cobbler import --name=centos-6.6-x86_64 --path=/opt/xiaoluo# cobbler web&#x5B89;&#x88C5;&#x914D;&#x7F6E; useradd $USERecho &quot;$PASSWD&quot; | passwd --stdin $USERsed -i &apos;s/module = authn_configfile/module = authn_pam/g&apos; /etc/cobbler/modules.confsed -i &apos;s/admin = &quot;&quot;/admin=&quot;$USER&quot;/g&apos; /etc/cobbler/users.confservice cobblerd restartservice httpd restart# &#x5224;&#x65AD;&#x7F51;&#x7AD9;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8BBF;&#x95EE;if [[ `curl -I -m 10 -o /dev/null -s -w %{http_code} $ip/cobbler_web` -eq 200 ]];thencat &lt;&lt; EOF+--------------------------++&#x7F51;&#x7AD9;&#x6B63;&#x5E38;&#x542F;&#x52A8;: ++&#x8BBF;&#x95EE;&#x5730;&#x5740;: $ip/cobbler_web ++&#x7528;&#x6237;&#x540D;: $USER + +&#x5BC6;&#x7801;: $PASSWD ++--------------------------+EOF else echo &quot;error,&#x5B89;&#x88C5;&#x914D;&#x7F6E;&#x9519;&#x8BEF;,&#x8BF7;&#x68C0;&#x67E5;&#x914D;&#x7F6E;&quot;fi]]></content>
      <categories>
        <category>Shell</category>
      </categories>
      <tags>
        <tag>cobbler</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dubbo-monitor-simple 监控中心安装]]></title>
    <url>%2Fdubbo-monitor-simple-%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83%E5%AE%89%E8%A3%85.html</url>
    <content type="text"><![CDATA[Dubbo &#x662F;&#x963F;&#x91CC;&#x5DF4;&#x5DF4;&#x516C;&#x53F8;&#x5F00;&#x6E90;&#x7684;&#x4E00;&#x4E2A;&#x9AD8;&#x6027;&#x80FD;&#x4F18;&#x79C0;&#x7684;&#x670D;&#x52A1;&#x6846;&#x67B6;&#xFF0C;&#x4F7F;&#x5F97;&#x5E94;&#x7528;&#x53EF;&#x901A;&#x8FC7;&#x9AD8;&#x6027;&#x80FD;&#x7684; RPC &#x5B9E;&#x73B0;&#x670D;&#x52A1;&#x7684;&#x8F93;&#x51FA;&#x548C;&#x8F93;&#x5165;&#x529F;&#x80FD;&#xFF0C;&#x53EF;&#x4EE5;&#x548C; Spring&#x6846;&#x67B6;&#x65E0;&#x7F1D;&#x96C6;&#x6210;&#x3002;&#x5B83;&#x6700;&#x5927;&#x7684;&#x7279;&#x70B9;&#x662F;&#x6309;&#x7167;&#x5206;&#x5C42;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x67B6;&#x6784;&#xFF0C;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x4F7F;&#x5404;&#x4E2A;&#x5C42;&#x4E4B;&#x95F4;&#x89E3;&#x8026;&#x5408;&#xFF08;&#x6216;&#x8005;&#x6700;&#x5927;&#x9650;&#x5EA6;&#x5730;&#x677E;&#x8026;&#x5408;&#xFF09;&#x3002;&#x672C;&#x6587;&#x4E3B;&#x8981;&#x8BB2;&#x89E3;&#x600E;&#x4E48;&#x5B89;&#x88C5;&#x6B64;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x2026;&#x2026; &#x4F9D;&#x8D56;&#x7EC4;&#x4EF6; java jdk 1.6&#x53CA;&#x4EE5;&#x4E0A; git maven zookeeper &#x83B7;&#x53D6;&#x6E90;&#x4EE3;&#x7801;&#x4ECE;github&#x4E0A;&#x4E0B;&#x8F7D;dubbo&#x6E90;&#x7801;&#x8FDB;&#x884C;&#x7F16;&#x8BD1;&#xFF0C;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#x4E3A; dubbo github&#x5730;&#x5740;1234git clone https://github.com/alibaba/dubbo.gitcd dubbo mvn clean install -Dmaven.test.skip# &#x6B64;&#x6B65;&#x9AA4;&#x53EF;&#x80FD;&#x6781;&#x6162;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;google&#x76F4;&#x63A5;&#x4E0B;&#x8F7D;.tar.gz&#x7684;&#x5305;&#x76F4;&#x63A5;&#x5B89;&#x88C5;&#x5373;&#x53EF; &#x5B89;&#x88C5;monitor&#x7F16;&#x8BD1;&#x6253;&#x5305;dubbo&#x6E90;&#x7801;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x627E;&#x5230;dubbo-monitor-simple-2.5.4-SNAPSHOT-assembly.tar.gz&#x5B89;&#x88C5;&#x5305;123456789101112131415161718tar -zxf dubbo-monitor-simple-2.5.4-SNAPSHOT-assembly.tar.gz -C /usr/localcd /usr/local/dubbo-monitor-simplevim conf/dubbo.properties # &#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;dubbo.container=log4j,spring,registry,jettydubbo.application.name=simple-monitordubbo.application.owner=#dubbo.registry.address=multicast://224.5.6.7:1234 # &#x6CE8;&#x91CA;&#x6389;19&#x884C;dubbo.registry.address=zookeeper://127.0.0.1:2181 # &#x4FEE;&#x6539;&#x4E3A; zookeeper&#x670D;&#x52A1;&#x5668;&#x7684;ip&#x5730;&#x5740;&#x7AEF;&#x53E3;&#x53F7;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x7684;zookeeper&#x662F;&#x96C6;&#x7FA4;&#xFF0C;&#x5219;&#x6CE8;&#x518C;&#x5730;&#x5740;&#x4FEE;&#x6539;&#x4E3A;zookeeper://127.0.0.1:2181?backup=127.0.0.1:2182,127.0.0.1:2183#dubbo.registry.address=redis://127.0.0.1:7000 # &#x8FDE;&#x63A5;redis&#x7684;&#x7AEF;&#x53E3;#dubbo.registry.address=dubbo://123.56.243.77:9090dubbo.protocol.port=7070dubbo.jetty.port=8080dubbo.jetty.directory=${user.home}/monitordubbo.charts.directory=${dubbo.jetty.directory}/chartsdubbo.statistics.directory=${user.home}/monitor/statisticsdubbo.log4j.file=logs/dubbo-monitor-simple.logdubbo.log4j.level=WARN# &#x5176;&#x4ED6;&#x7684;&#x914D;&#x7F6E;&#x9ED8;&#x8BA4;&#x5C31;&#x884C;&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x914D;&#x7F6E;&#x3002; &#x542F;&#x52A8;monitor1234567tail -f /usr/local/dubbo-monitor-simple-2.5.3/logs/stdout.logcd /usr/local/dubbo-monitor-simple-2.5.3/bin./start.shStarting the simple-monitor .....OK!PID: 30864STDOUT: logs/stdout.log# &#x51FA;&#x73B0;&#x4EE5;&#x4E0A;&#x8F93;&#x51FA;&#x8BC1;&#x660E;&#x542F;&#x52A8;OK&#x4E86; &#x6D4F;&#x89C8;&#x5668;&#x8BBF;&#x95EE;http://IP:8080/&#x5373;&#x53EF;&#x663E;&#x793A;&#x9875;&#x9762;]]></content>
      <categories>
        <category>监控</category>
      </categories>
      <tags>
        <tag>dubbo-monitor-simple</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[在Linux中测试网络带宽]]></title>
    <url>%2F%E5%9C%A8Linux%E4%B8%AD%E6%B5%8B%E8%AF%95%E7%BD%91%E7%BB%9C%E5%B8%A6%E5%AE%BD.html</url>
    <content type="text"><![CDATA[&#x6700;&#x8FD1;&#x8001;&#x611F;&#x89C9;&#x670D;&#x52A1;&#x5668;&#x7279;&#x522B;&#x5361;&#xFF0C;&#x4F46;&#x662F;&#x5149;&#x51ED;&#x611F;&#x89C9;&#x53EF;&#x4E0D;&#x884C;&#x554A;&#xFF0C;&#x8981;&#x600E;&#x4E48;&#x53BB;&#x91CF;&#x5316;&#x8FD9;&#x4E2A;&#x5462;&#xFF0C;&#x4F8B;&#x5982;&#x4E0A;&#x884C;&#x5E26;&#x5BBD;&#x591A;&#x5C11;&#xFF0C;&#x4E0B;&#x884C;&#x5E26;&#x5BBD;&#x591A;&#x5C11;&#x3002;&#x4E8E;&#x662F;&#x5728;github&#x4E0A;&#x627E;&#x5230;&#x4E86;&#x4E00;&#x4E2A;Linux&#x4E0A;&#x6D4B;&#x8BD5;&#x7F51;&#x7EDC;&#x5E26;&#x5BBD;&#x7684;&#x5DE5;&#x5177;&#x4E86;&#xFF08;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x4E2A;Python&#x811A;&#x672C;&#xFF09;&#xFF0C;Speedtest.net&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#xFF1A;&#x5B83;&#x5728;&#x4F60;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x52A0;&#x8F7D;JavaScript&#x4EE3;&#x7801;&#x5E76;&#x81EA;&#x52A8;&#x68C0;&#x6D4B;&#x79BB;&#x4F60;&#x6700;&#x8FD1;&#x7684;Speedtest.net&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;HTTP GET and POST&#x8BF7;&#x6C42;&#x6765;&#x6D4B;&#x8BD5;&#x4E0A;&#x884C;/&#x4E0B;&#x884C;&#x7F51;&#x901F;&#x3002; &#x5B89;&#x88C5;speedtest-cli &#x4EE5;&#x4E0B;&#x4EFB;&#x4F55;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x5B89;&#x88C5;&#x5373;&#x53EF;&#xFF08;&#x603B;&#x6709;&#x4E00;&#x6B3E;&#x9002;&#x5408;&#x4F60;&#xFF09; pip / easy_install1pip install speedtest-cli or1easy_install speedtest-cli github1pip install git+https://github.com/sivel/speedtest-cli.git or12git clone https://github.com/sivel/speedtest-cli.gitpython speedtest-cli/setup.py install download12wget -O speedtest-cli https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest_cli.pychmod +x speedtest-cli or12curl -Lo speedtest-cli https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest_cli.pychmod +x speedtest-cli &#x4F7F;&#x7528;&#x65B9;&#x6CD5;1234567891011121314151617181920$ speedtest-cli -husage: speedtest-cli [-h] [--bytes] [--share] [--simple] [--list] [--server SERVER] [--mini MINI] [--source SOURCE] [--timeout TIMEOUT] [--secure] [--version]Command line interface for testing internet bandwidth using speedtest.net.--------------------------------------------------------------------------https://github.com/sivel/speedtest-clioptional arguments: -h, --help &#x663E;&#x793A;&#x5E2E;&#x52A9; --bytes &#x4EE5;&#x5B57;&#x8282;&#x7684;&#x65B9;&#x5F0F;&#x663E;&#x793A;&#xFF0C;&#x4F46;&#x5206;&#x4EAB;&#x7684;&#x65F6;&#x5019;&#x4E0D;&#x53D7;&#x5F71;&#x54CD; --share &#x5206;&#x4EAB; --simple &#x53EA;&#x663E;&#x793A;&#x7B80;&#x5355;&#x4FE1;&#x606F; --list &#x663E;&#x793A;speedtest.net&#x670D;&#x52A1;&#x5668;&#x5217;&#x8868; --server SERVER &#x6307;&#x5B9A;speedtest.net&#x670D;&#x52A1;&#x5668;ID --source SOURCE &#x6307;&#x5B9A;&#x6E90;IP&#x5730;&#x5740; --timeout TIMEOUT &#x6307;&#x5B9A;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF0C;&#x9ED8;&#x8BA4;10&#x79D2; --secure &#x4F7F;&#x7528;HTTPS&#x534F;&#x8BAE;&#x8FDB;&#x884C;&#x901A;&#x4FE1; --version &#x663E;&#x793A;&#x5F53;&#x524D;&#x7248;&#x672C; &#x4F7F;&#x7528;&#x793A;&#x4F8B; &#x5230;&#x6700;&#x540E;&#xFF0C;&#x8D34;&#x51FA;&#x8FD9;&#x4E2A;&#x811A;&#x672C;&#x7684;github&#x5730;&#x5740;&#x5427;&#x3002; speedtest-cli github&#x5730;&#x5740;]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>speedtest-cli</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysqldump全量和增量备份脚本]]></title>
    <url>%2Fmysqldump%E5%85%A8%E9%87%8F%E5%92%8C%E5%A2%9E%E9%87%8F%E5%A4%87%E4%BB%BD%E8%84%9A%E6%9C%AC.html</url>
    <content type="text"><![CDATA[&#x5199;&#x597D;&#x4E86;xtrabackup&#x7684;&#x5907;&#x4EFD;&#x811A;&#x672C;&#x624D;&#x53D1;&#x73B0;&#x7EBF;&#x4E0A;&#x6570;&#x636E;&#x5E93;&#x662F;5.1&#x7684;&#xFF0C;&#x65E2;&#x7136;&#x8FD9;&#x6837;&#x90A3;&#x5C31;&#x53EA;&#x6709;&#x7528;mysqldump&#x6765;&#x5907;&#x4EFD;&#x4E86;&#x3002;&#x4E0D;&#x8FC7;&#x597D;&#x5728;mysqldump&#x66F4;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x7B80;&#x5355;&#x7684;&#x4E00;&#x4E24;&#x6761;&#x547D;&#x4EE4;&#x5373;&#x53EF;&#xFF0C;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x4F7F;&#x7528;&#x590D;&#x5236;binlog&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x540E;&#x671F;&#x6062;&#x590D;&#x76F4;&#x63A5;&#x8DD1;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x5373;&#x53EF;&#x3002; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104#!/bin/bash# mysqldump &#x5168;&#x91CF;&#x548C;&#x589E;&#x91CF;&#x5907;&#x4EFD;# ch# 2016-09-01# &#x57FA;&#x7840;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x8BBE;&#x7F6E;USER=rootPASSWD=123456HOST=localhostLOG_DIR=/home/backup/backup.logBIN_DIR=/home/mysql_dataBIN_FILE=$BIN_DIR/master1_bin.indexDATE=`date +%Y%m%d`DUMPFILE=&quot;$DATE&quot;.sqlGZDUMPFILE=&quot;$DATE&quot;.sql.tgz# &#x68C0;&#x67E5;&#x73AF;&#x5883;&#x662F;&#x5426;&#x914D;&#x7F6E;&#x6B63;&#x786E;check(){ if [[ ! &quot;mysql -h&quot;$HOST&quot; -u&quot;$USER&quot; -p&quot;$PASSWD&quot; -e &apos;show databases;&apos;&quot; ]];then echo &quot;$DATE,&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x9519;&#x8BEF;,&#x5907;&#x4EFD;&#x5931;&#x8D25;&quot; &gt;&gt; $LOG_DIR exit 2 fi if [ ! -d $BIN_DIR ];then echo &quot;BIN_DIR&#x8DEF;&#x5F84;&#x9519;&#x8BEF;&#xFF0C;&#x8BF7;&#x68C0;&#x67E5;&#x540E;&#x91CD;&#x8BD5;&quot; &gt;&gt; $LOG_DIR exit 3 fi if [ ! -f $BIN_FILE ];then echo &quot;BIN_FILE&#x8DEF;&#x5F84;&#x9519;&#x8BEF;&#xFF0C;&#x8BF7;&#x68C0;&#x67E5;&#x540E;&#x91CD;&#x8BD5;&quot; &gt;&gt; $LOG_DIR exit 4 fi}# &#x5168;&#x91CF;&#x5907;&#x4EFD;full(){ BACK_DIR=/home/backup/full if [ ! -d $BACK_DIR ];then mkdir -p $BACK_DIR fi BEGIN=`date +&quot;%Y&#x5E74;%m&#x6708;%d&#x65E5; %H:%M:%S&quot;` cd $BACK_DIR mysqldump -h&quot;$HOST&quot; -u&quot;$USER&quot; -p&quot;$PASSWD&quot; -A -E -R --triggers --master-data=2 -l --flush-logs &gt; $DUMPFILE || echo &quot;&#x5907;&#x4EFD;&#x51FA;&#x9519;&quot; &gt;&gt; $LOG_DIR tar czvf $GZDUMPFILE $DUMPFILE &amp;&gt; /dev/null &amp;&amp; rm -rf $DUMPFILE LAST=`date +&quot;%Y&#x5E74;%m&#x6708;%d&#x65E5; %H:%M:%S&quot;` POSITION=$(mysql -h&quot;$HOST&quot; -u&quot;$USER&quot; -p&quot;$PASSWD&quot; -e &apos;show master status\G&apos; | grep Position | awk -F: &apos;{print $2}&apos;) BINFILE=$(mysql -h&quot;$HOST&quot; -u&quot;$USER&quot; -p&quot;$PASSWD&quot; -e &apos;show master status\G&apos; | grep File | awk -F: &apos;{print $2}&apos;) echo &quot;&#x5168;&#x91CF;&#x5907;&#x4EFD;&#x5F00;&#x59CB;: $BEGIN&quot; &gt;&gt; $LOG_DIR echo &quot;&#x5168;&#x91CF;&#x5907;&#x4EFD;&#x7ED3;&#x675F;: $LAST $GZDUMPFILE $BINFILE $POSITION&quot; Bakup succ! &gt;&gt; $LOG_DIR}# &#x589E;&#x91CF;&#x5907;&#x4EFD;inc(){ BACK_DIR=/home/backup/inc if [ ! -d $BACK_DIR ];then mkdir -p $BACK_DIR fi mysqladmin -u$USER -p$PASSWD flush-logs COUNTER=`wc -l $BIN_FILE | awk &apos;{print$1}&apos;` NEXTNUM=0 BEGIN=`date +&quot;%Y&#x5E74;%m&#x6708;%d&#x65E5; %H:%M:%S&quot;` echo &quot;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x5F00;&#x59CB;: $BEGIN&quot; &gt;&gt; $LOG_DIR for file in `cat $BIN_FILE` do base=`basename $file` NETXNUM=`expr $NEXTNUM+1` if [ $NEXTNUM -eq $COUNTER ] then echo $base skip! &gt;&gt; $LOG_DIR else dest=$BACK_DIR/$base if (test -e $dest) then echo $base exits! &gt;&gt; $LOG_DIR else cp $BIN_DIR/$base $BACK_DIR echo $base copying! &gt;&gt; $LOG_DIR fi fi done LAST=`date +&quot;%Y&#x5E74;%m&#x6708;%d&#x65E5; %H:%M:%S&quot;` echo &quot;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x7ED3;&#x675F;: $LAST&quot; $Next $BACK_DIR Bakup succ! &gt;&gt; $LOG_DIR}case $1 in full) check full ;; inc) check inc ;; *)cat &lt;&lt; EOF+----------------++ Use: ++ full &#x5168;&#x91CF;&#x5907;&#x4EFD; ++ inc &#x589E;&#x91CF;&#x5907;&#x4EFD; ++----------------+EOF ;;esac]]></content>
      <categories>
        <category>Shell</category>
      </categories>
      <tags>
        <tag>mysqldump</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[xtrabackup自动恢复脚本]]></title>
    <url>%2Fxtrabackup%E8%87%AA%E5%8A%A8%E6%81%A2%E5%A4%8D%E8%84%9A%E6%9C%AC.html</url>
    <content type="text"><![CDATA[&#x6B64;&#x811A;&#x672C;&#x662F;&#x642D;&#x914D;&#x4E0A;&#x4E00;&#x4E2A;&#x5168;&#x91CF;&#x548C;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x811A;&#x672C;&#x642D;&#x914D;&#x4F7F;&#x7528;&#x7684;&#xFF0C;&#x6362;&#x505A;&#x5176;&#x4ED6;&#x73AF;&#x5883;&#xFF0C;&#x6211;&#x89C9;&#x5F97;&#x5E94;&#x8BE5;&#x662F;&#x6CA1;&#x4EC0;&#x4E48;&#x7528;&#x3002;&#x6240;&#x4EE5;&#x8BF4;&#xFF0C;&#x8FD8;&#x662F;&#x5148;&#x7406;&#x89E3;&#x4E86;&#x7B2C;&#x4E00;&#x4E2A;&#x5907;&#x4EFD;&#x7684;&#x811A;&#x672C;&#x624D;&#x80FD;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x81EA;&#x52A8;&#x6062;&#x590D;&#x811A;&#x672C;&#xFF0C;&#x6B64;&#x6062;&#x590D;&#x811A;&#x672C;&#x4E25;&#x91CD;&#x4F9D;&#x8D56; $LOG_DIR &#x76EE;&#x5F55;&#xFF0C;&#x5982; LOG_DIR &#x76EE;&#x5F55;&#x624B;&#x52A8;&#x66F4;&#x6539;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x589E;&#x91CF;&#x6062;&#x590D;&#x6545;&#x969C;&#x3002;&#x5168;&#x91CF;&#x6062;&#x590D;&#x53EF;&#x968F;&#x610F;&#x4F7F;&#x7528; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234#!/bin/bash# MySQL&#x5168;&#x91CF;&#x548C;&#x589E;&#x91CF;&#x6062;&#x590D;&#xFF08;&#x548C;MySQL&#x5907;&#x4EFD;&#x811A;&#x672C;&#x642D;&#x914D;&#x4F7F;&#x7528;&#xFF09;# ch# 2016-8-29# &#x521D;&#x59CB;&#x53D8;&#x91CF;&#x8BBE;&#x7F6E;Innobackupex_Path=/usr/bin/innobackupex #innobackupex&#x8F6F;&#x4EF6;&#x6587;&#x4EF6;Mysql_Client=/usr/bin/mysql #mysql&#x5BA2;&#x6237;&#x7AEF;Mysql_Conf=/etc/my.cnf #mysql&#x914D;&#x7F6E;&#x6587;&#x4EF6;Mysql_Dir=$(cat $Mysql_Conf | grep datadir | awk -F &apos;=&apos; &apos;{print$2}&apos;)BACKUP_DIR=/home/backup/mysql/file/`date +%F-%T`MYSQL_OPS=&apos;--host=localhost --user=root --password=123456&apos; #mysql&#x7684;&#x8FDE;&#x63A5;&#x914D;&#x7F6E;&#xFF0C;&#x6309;&#x9700;&#x4FEE;&#x6539;BACKUP_FULL=/home/backup/mysql/fullBACKUP_INC=/home/backup/mysql/incLOG_DIR=/home/backup/mysql/backup.logERROR_LOG=/home/backup/mysql/error.logDATE=`date +%F-%T`#&#x73AF;&#x5883;&#x548C;&#x914D;&#x7F6E;&#x68C0;&#x67E5;check() { if [[ ! -d $BACKUP_DIR ]];then mkdir -p $BACKUP_DIR fi #&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;2.4&#xFF0C;&#x9700;&#x8981;&#x5176;&#x4ED6;&#x7248;&#x672C;&#x8BF7;&#x81EA;&#x884C;&#x5B98;&#x7F51;&#x4E0B;&#x8F7D; if [[ ! `rpm -q percona-xtrabackup-24-2.4.4-1.el6.x86_64` ]];then wget https://www.percona.com/downloads/XtraBackup/Percona-XtraBackup-2.4.4/binary/redhat/6/x86_64/percona-xtrabackup-24-2.4.4-1.el6.x86_64.rpm &amp;&gt; /dev/null yum -y install percona-xtrabackup-24-2.4.4-1.el6.x86_64.rpm &amp;&gt; /dev/null fi if [[ ! -f $Mysql_Client ]];then Error &quot;&#x672A;&#x5B89;&#x88C5;mysql&#x5BA2;&#x6237;&#x7AEF;&quot; fi if [[ ! -f $Mysql_Conf ]];then Error &quot;mysql&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x4E0D;&#x6B63;&#x786E;&quot; fi #&#x68C0;&#x67E5;mysql&#x7684;&#x8FD0;&#x884C;&#x72B6;&#x6001; if [[ `netstat -tlnp |grep mysqld |wc -l` = 0 ]];then Error &quot;MySQL&#x6CA1;&#x6709;&#x8FD0;&#x884C;&quot; fi #&#x9A8C;&#x8BC1;mysql&#x7684;&#x7528;&#x6237;&#x548C;&#x5BC6;&#x7801;&#x662F;&#x5426;&#x6B63;&#x786E; if ! `echo &apos;exit&apos; | $Mysql_Client -s $MYSQL_OPS &gt;/dev/null 2&gt;&amp;1` ; then Error &quot;&#x63D0;&#x4F9B;&#x7684;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x914D;&#x7F6E;&#x4E0D;&#x6B63;&#x786E;!&quot; fi }# &#x5168;&#x91CF;&#x6062;&#x590D;full(){ while true;do read -p &quot;&#x8BF7;&#x8F93;&#x5165;&#x9700;&#x8981;&#x6062;&#x590D;&#x7684;&#x76EE;&#x5F55;:&#xFF08;q/&#x9000;&#x51FA;,l/&#x83B7;&#x53D6;&#x76EE;&#x5F55;&#xFF09;&quot; FILE if [[ $FILE == l ]];then ls $BACKUP_FULL elif [[ $FILE == q ]];then exit 0 elif [[ -d &quot;$BACKUP_FULL/$FILE&quot; ]];then service mysqld stop mv $Mysql_Dir $BACKUP_DIR mkdir -p $Mysql_Dir $Innobackupex_Path $MYSQL_OPS --apply-log &quot;$BACKUP_FULL/$FILE&quot; $Innobackupex_Path $MYSQL_OPS --copy-back &quot;$BACKUP_FULL/$FILE&quot; sleep 3 chown -R mysql.mysql $Mysql_Dir service mysqld start mysql -s $MYSQL_OPS -e &apos;show databases;&apos; -e &apos;show databases;&apos;&amp;&gt; /dev/null &amp;&amp; rm -rf $BACKUP_DIR || echo &quot;error,&#x6062;&#x590D;&#x51FA;&#x9519;&#xFF0C;&#x8BE6;&#x60C5;&#x8BF7;&#x67E5;&#x770B;$BACKUP_dir&quot; &gt;&gt; $ERROR_LOG break else echo &quot;&#x8F93;&#x51FA;&#x6709;&#x8BEF;,&#x76F4;&#x63A5;&#x8F93;&#x5165;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#x5373;&#x53EF;&quot; fi done}# &#x589E;&#x91CF;&#x6062;&#x590D;inc(){ while true;do read -p &quot;&#x8BF7;&#x8F93;&#x5165;&#x9700;&#x8981;&#x6062;&#x590D;&#x7684;&#x76EE;&#x5F55;:&#xFF08;q/&#x9000;&#x51FA;,l/&#x83B7;&#x53D6;&#x76EE;&#x5F55;&#xFF09;&quot; FILE if [[ $FILE == l ]];then ls $BACKUP_INC elif [[ $FILE == q ]];then exit 0 elif [[ -d &quot;$BACKUP_INC/$FILE&quot; ]];then ZZ=$(grep -B 1 &quot;$FILE&quot; $LOG_DIR | grep &quot;^&#x661F;&#x671F;&quot; | grep -o &quot;[0-9]&quot;) if [[ $ZZ -eq 7 ]];then full elif [[ $ZZ -eq 6 ]];then # &#x6B64;&#x5904;&#x4F1A;&#x8BFB;&#x53D6; $LOG_DIR &#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;&#xFF0C;so&#xFF0C;&#x6700;&#x597D;&#x4E0D;&#x8981;&#x81EA;&#x5DF1;&#x624B;&#x52A8;&#x6539; LOG_DIR &#x4E0B;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x5426;&#x5219;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x589E;&#x91CF;&#x6062;&#x590D;&#x51FA;&#x9519; grep -B 14 &quot;$FILE&quot; $LOG_DIR &gt;&gt; /tmp/$DATE.mysql sed -i -n &apos;n;p&apos; /tmp/$DATE.mysql ONE=$(sed -n &apos;1 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; TWO=$(sed -n &apos;2 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; THREE=$(sed -n &apos;3 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; FOUR=$(sed -n &apos;4 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; FIVE=$(sed -n &apos;5 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; SIX=$(sed -n &apos;6 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; SER=$(sed -n &apos;7 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; service mysqld stop mv $Mysql_Dir $BACKUP_DIR mkdir -p $Mysql_Dir $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$TWO $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$THREE $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$FOUR $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$FIVE $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$SIX $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$SER $Innobackupex_Path $MYSQL_OPS --copy-back $ONE sleep 3 chown -R mysql.mysql $Mysql_Dir service mysqld start mysql -s $MYSQL_OPS -e &apos;show databases;&apos; &amp;&gt; /dev/null &amp;&amp; rm -rf $BACKUP_DIR /tmp/$DATE.mysql || echo &quot;error,&#x6062;&#x590D;&#x51FA;&#x9519;&#xFF0C;&gt;&#x8BE6;&#x60C5;&#x8BF7;&#x67E5;&#x770B;$BACKUP_dir&quot; &gt;&gt; $ERROR_LOG break elif [[ $ZZ -eq 5 ]];then grep -B 12 &quot;$FILE&quot; $LOG_DIR &gt;&gt; /tmp/$DATE.mysql sed -i -n &apos;n;p&apos; /tmp/$DATE.mysql ONE=$(sed -n &apos;1 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; TWO=$(sed -n &apos;2 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; THREE=$(sed -n &apos;3 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; FOUR=$(sed -n &apos;4 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; FIVE=$(sed -n &apos;5 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; SIX=$(sed -n &apos;6 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; service mysqld stop mv $Mysql_Dir $BACKUP_DIR mkdir -p $Mysql_Dir $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$TWO $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$THREE $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$FOUR $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$FIVE $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$SIX sleep 3 chown -R mysql.mysql $Mysql_Dir service mysqld start mysql -s $MYSQL_OPS -e &apos;show databases;&apos; &amp;&gt; /dev/null &amp;&amp; rm -rf $BACKUP_DIR /tmp/$DATE.mysql || echo &quot;error,&#x6062;&#x590D;&#x51FA;&#x9519;&#xFF0C;&gt;&#x8BE6;&#x60C5;&#x8BF7;&#x67E5;&#x770B;$BACKUP_dir&quot; &gt;&gt; $ERROR_LOG break elif [[ $ZZ -eq 4 ]];then grep -B 10 &quot;$FILE&quot; $LOG_DIR &gt;&gt; /tmp/$DATE.mysql sed -i -n &apos;n;p&apos; /tmp/$DATE.mysql ONE=$(sed -n &apos;1 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; TWO=$(sed -n &apos;2 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; THREE=$(sed -n &apos;3 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; FOUR=$(sed -n &apos;4 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; FIVE=$(sed -n &apos;5 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; service mysqld stop mv $Mysql_Dir $BACKUP_DIR mkdir -p $Mysql_Dir $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$TWO $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$THREE $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$FOUR $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$FIVE sleep 3 chown -R mysql.mysql $Mysql_Dir service mysqld start mysql -s $MYSQL_OPS -e &apos;show databases;&apos; &amp;&gt; /dev/null &amp;&amp; rm -rf $BACKUP_DIR /tmp/$DATE.mysql || echo &quot;error,&#x6062;&#x590D;&#x51FA;&#x9519;&#xFF0C;&gt;&#x8BE6;&#x60C5;&#x8BF7;&#x67E5;&#x770B;$BACKUP_dir&quot; &gt;&gt; $ERROR_LOG break elif [[ $ZZ -eq 3 ]];then grep -B 8 &quot;$FILE&quot; $LOG_DIR &gt;&gt; /tmp/$DATE.mysql sed -i -n &apos;n;p&apos; /tmp/$DATE.mysql ONE=$(sed -n &apos;1 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; TWO=$(sed -n &apos;2 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; THREE=$(sed -n &apos;3 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; FOUR=$(sed -n &apos;4 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; service mysqld stop mv $Mysql_Dir $BACKUP_DIR mkdir -p $Mysql_Dir $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$TWO $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$THREE $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$FOUR sleep 3 chown -R mysql.mysql $Mysql_Dir service mysqld start mysql -s $MYSQL_OPS -e &apos;show databases;&apos; -e &apos;show databases;&apos; &amp;&gt; /dev/null &amp;&amp; rm -rf $BACKUP_DIR /tmp/$DATE.mysql || echo &quot;error,&#x6062;&#x590D;&#x51FA;&#x9519;&#xFF0C;&gt;&#x8BE6;&#x60C5;&#x8BF7;&#x67E5;&#x770B;$BACKUP_dir&quot; &gt;&gt; $ERROR_LOG break elif [[ $ZZ -eq 2 ]];then grep -B 6 &quot;$FILE&quot; $LOG_DIR &gt;&gt; /tmp/$DATE.mysql sed -i -n &apos;n;p&apos; /tmp/$DATE.mysql ONE=$(sed -n &apos;1 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; TWO=$(sed -n &apos;2 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; THREE=$(sed -n &apos;3 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; service mysqld stop mv $Mysql_Dir $BACKUP_DIR mkdir -p $Mysql_Dir $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$TWO $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$THREE sleep 3 chown -R mysql.mysql $Mysql_Dir service mysqld start mysql -s $MYSQL_OPS -e &apos;show databases;&apos; &amp;&gt; /dev/null &amp;&amp; rm -rf $BACKUP_DIR /tmp/$DATE.mysql || echo &quot;error,&#x6062;&#x590D;&#x51FA;&#x9519;&#xFF0C;&gt;&#x8BE6;&#x60C5;&#x8BF7;&#x67E5;&#x770B;$BACKUP_dir&quot; &gt;&gt; $ERROR_LOG break elif [[ $ZZ -eq 1 ]];then grep -B 4 &quot;$FILE&quot; $LOG_DIR &gt;&gt; /tmp/$DATE.mysql sed -i -n &apos;n;p&apos; /tmp/$DATE.mysql ONE=$(sed -n &apos;1 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; TWO=$(sed -n &apos;2 p&apos; /tmp/$DATE.mysql) | awk -F \&apos; &apos;{print $2}&apos; service mysqld stop mv $Mysql_Dir $BACKUP_DIR mkdir -p $Mysql_Dir $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE $Innobackupex_Path $MYSQL_OPS --apply-log --redo-only $ONE --incremental-dir=$TWO sleep 3 chown -R mysql.mysql $Mysql_Dir service mysqld start mysql -s $MYSQL_OPS -e &apos;show databases;&apos; &amp;&gt; /dev/null &amp;&amp; rm -rf $BACKUP_DIR /tmp/$DATE.mysql || echo &quot;error,&#x6062;&#x590D;&#x51FA;&#x9519;&#xFF0C;&gt;&#x8BE6;&#x60C5;&#x8BF7;&#x67E5;&#x770B;$BACKUP_dir&quot; &gt;&gt; $ERROR_LOG break else echo &quot;&#x8F93;&#x5165;&#x76EE;&#x5F55;&#x6709;&#x8BEF;&#xFF0C;&#x8BF7;&#x91CD;&#x65B0;&#x8F93;&#x5165;&quot; fi fi done }case $1 in full) full ;; inc) inc ;; *)cat &lt;&lt; EOF+----------------++ Use: ++ full &#x5168;&#x91CF;&#x6062;&#x590D; ++ inc &#x589E;&#x91CF;&#x6062;&#x590D; ++----------------+EOF ;;esac]]></content>
      <categories>
        <category>Shell</category>
      </categories>
      <tags>
        <tag>xtrabackup</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysql使用xtrabackup的全量和增量脚本]]></title>
    <url>%2Fmysql%E4%BD%BF%E7%94%A8xtrabackup%E7%9A%84%E5%85%A8%E9%87%8F%E5%92%8C%E5%A2%9E%E9%87%8F%E8%84%9A%E6%9C%AC.html</url>
    <content type="text"><![CDATA[&#x9700;&#x8981;&#x4E00;&#x4E2A;MySQL&#x7684;&#x81EA;&#x52A8;&#x5907;&#x4EFD;&#x811A;&#x672C;&#xFF0C;&#x4E8E;&#x662F;google&#x4E86;&#x4E00;&#x4E0B;&#xFF0C;&#x53D1;&#x73B0;&#x4E0D;&#x662F;&#x81EA;&#x5DF1;&#x770B;&#x4E0D;&#x61C2;&#x5C31;&#x662F;&#x8FD0;&#x884C;&#x6709;&#x95EE;&#x9898;&#x3002;&#x90A3;&#x4E48;&#x8FEB;&#x4E8E;&#x65E0;&#x8D56;&#xFF0C;&#x4E0D;&#x80FD;&#x5077;&#x61D2;&#x4E86;&#xFF0C;&#x53EA;&#x80FD;&#x5199;&#x4E00;&#x4E2A;&#x6BD4;&#x8F83;&#x9002;&#x5408;&#x81EA;&#x5DF1;&#x7684;&#x811A;&#x672C;&#x3002;&#x811A;&#x672C;&#x8F83;&#x70C2;&#xFF0C;&#x8FD8;&#x671B;&#x8F7B;&#x55B7;&#x3002; &#x4E0A;&#x6B63;&#x9898;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109#!/bin/bash# MySQL&#x5168;&#x91CF;&#x548C;&#x589E;&#x91CF;&#x5907;&#x4EFD;# ch# www.chen-hao.com.cn# 2016-8-29 # &#x521D;&#x59CB;&#x53D8;&#x91CF;&#x914D;&#x7F6E;Innobackupex_Path=/usr/bin/innobackupex #innobackupex&#x8F6F;&#x4EF6;&#x6587;&#x4EF6;Mysql_Client=/usr/bin/mysql #mysql&#x5BA2;&#x6237;&#x7AEF;Mysql_Conf=/etc/my.cnf #mysql&#x914D;&#x7F6E;&#x6587;&#x4EF6;MYSQL_OPS=&apos;--host=localhost --user=root --password=123456&apos; #mysql&#x7684;&#x8FDE;&#x63A5;&#x914D;&#x7F6E;&#xFF0C;&#x6309;&#x9700;&#x4FEE;&#x6539;BACKUP_FULL=/home/backup/mysql/full #&#x5168;&#x91CF;&#x5907;&#x4EFD;&#x76EE;&#x5F55;BACKUP_INC=/home/backup/mysql/inc #&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x76EE;&#x5F55;LOG_DIR=/home/backup/mysql/backup.log #&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;COMPLETE=$(tail -1 $LOG_DIR | cut -d\&apos; -f2) #&#x4E34;&#x65F6;&#x622A;&#x53D6;&#x4E0A;&#x4E00;&#x4E2A;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x7684;&#x4FE1;&#x606F;DATE=`date +%Y%m%d_%H%M%S` XINQI=`date +%w` #&#x6B64;&#x9879;&#x4E3B;&#x8981;&#x7ED3;&#x5408;&#x589E;&#x91CF;&#x6062;&#x590D;&#x811A;&#x672C;&#x4F7F;&#x7528;#&#x73AF;&#x5883;&#x548C;&#x914D;&#x7F6E;&#x68C0;&#x67E5;check() { #&#x68C0;&#x67E5;&#x76EE;&#x5F55;&#x548C;&#x521B;&#x5EFA;&#x76EE;&#x5F55; if [[ ! -d $BACKUP_FULL ]];then mkdir -p $BACKUP_FULL fi if [[ ! -d $BACKUP_INC ]];then mkdir -p $BACKUP_INC fi #&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;2.4&#xFF0C;&#x9700;&#x8981;&#x5176;&#x4ED6;&#x7248;&#x672C;&#x8BF7;&#x81EA;&#x884C;&#x5B98;&#x7F51;&#x4E0B;&#x8F7D; if [[ ! `rpm -q percona-xtrabackup-24-2.4.4-1.el6.x86_64` ]];then wget https://www.percona.com/downloads/XtraBackup/Percona-XtraBackup-2.4.4/binary/redhat/6/x86_64/percona-xtrabackup-24-2.4.4-1.el6.x86_64.rpm &amp;&gt; /dev/null yum -y install percona-xtrabackup-24-2.4.4-1.el6.x86_64.rpm &amp;&gt; /dev/null fi if [[ ! -f $Mysql_Client ]];then Error &quot;&#x672A;&#x5B89;&#x88C5;mysql&#x5BA2;&#x6237;&#x7AEF;&quot; fi if [[ ! -f $Mysql_Conf ]];then Error &quot;mysql&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x4E0D;&#x6B63;&#x786E;&quot; fi #&#x68C0;&#x67E5;mysql&#x7684;&#x8FD0;&#x884C;&#x72B6;&#x6001; if [[ `netstat -tlnp |grep mysqld |wc -l` = 0 ]];then Error &quot;MySQL&#x6CA1;&#x6709;&#x8FD0;&#x884C;&quot; fi #&#x9A8C;&#x8BC1;mysql&#x7684;&#x7528;&#x6237;&#x548C;&#x5BC6;&#x7801;&#x662F;&#x5426;&#x6B63;&#x786E; if ! `echo &apos;exit&apos; | $Mysql_Client -s $MYSQL_OPS &gt;/dev/null 2&gt;&amp;1` ; then Error &quot;&#x63D0;&#x4F9B;&#x7684;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x914D;&#x7F6E;&#x4E0D;&#x6B63;&#x786E;!&quot; fi }# &#x5168;&#x91CF;&#x5907;&#x4EFD;full(){ $Innobackupex_Path $MYSQL_OPS $BACKUP_FULL &amp;&gt; /tmp/&quot;$DATE&quot;.txt echo &quot;&#x661F;&#x671F;$XINQI&quot; &gt;&gt; $LOG_DIR grep &quot;Backup created in directory&quot; /tmp/&quot;$DATE&quot;.txt &gt;&gt; $LOG_DIR rm -rf /tmp/&quot;$DATE&quot;.txt}# &#x589E;&#x91CF;&#x5907;&#x4EFD;# &#x6CE8;&#x610F;,&#x6B64;&#x589E;&#x91CF;&#x4F1A;&#x6839;&#x636E; $LOG_DIR &#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x6700;&#x540E;&#x4E00;&#x6B21;&#x7684;&#x6587;&#x4EF6;&#x6765;&#x505A;&#x589E;&#x91CF;inc(){ if [[ ! -s $LOG_DIR ]];then full exit 0 fi $Innobackupex_Path $MYSQL_OPS --incremental &quot;$BACKUP_INC&quot; --incremental-basedir=$COMPLETE &amp;&gt; /tmp/&quot;$DATE&quot;.txt echo &quot;&#x661F;&#x671F;$XINQI&quot; &gt;&gt; $LOG_DIR grep &quot;Backup created in directory&quot; /tmp/&quot;$DATE&quot;.txt &gt;&gt; $LOG_DIR rm -rf /tmp/&quot;$DATE&quot;.txt}# &#x5220;&#x9664;&#x4E00;&#x6708;&#x524D;&#x7684;&#x5168;&#x5907;&#x548C;&#x5897;&#x5907;del(){ for old_file in $(find $BACKUP_FULL $BACKUP_INC -mtime +30) do rm -rf &quot;${old_file}&quot; done}case $1 in full) check del full ;; inc) check del inc ;; *)cat &lt;&lt; EOF+----------------++ Use: ++ full &#x5168;&#x91CF;&#x6062;&#x590D; ++ inc &#x589E;&#x91CF;&#x6062;&#x590D; ++----------------+EOF ;;esac]]></content>
      <categories>
        <category>Shell</category>
      </categories>
      <tags>
        <tag>xtrabackup</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[KVM启动故障]]></title>
    <url>%2FKVM%E5%90%AF%E5%8A%A8%E6%95%85%E9%9A%9C.html</url>
    <content type="text"><![CDATA[&#x4E8B;&#x60C5;&#x6E90;&#x4E8E;&#x4E00;&#x5929;&#x65E9;&#x4E0A;&#xFF0C;8&#x70B9;&#x534A;&#x5176;&#x4ED6;&#x516C;&#x53F8;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;&#xFF0C;&#x4F46;&#x662F;&#x5173;&#x952E;&#x662F;&#x6628;&#x665A;&#x7269;&#x4E1A;&#x505C;&#x7535;&#xFF08;&#x5F53;&#x65F6;&#x4E5F;&#x8003;&#x8651;&#x5230;&#x4E86;&#x610F;&#x5916;&#x65AD;&#x7535;&#xFF0C;&#x5DF2;&#x505A;&#x4E86;&#x5B9A;&#x65F6;&#x5173;&#x673A;&#x4EFB;&#x52A1;&#xFF09;&#x3002;&#x6240;&#x4EE5;&#x65E9;&#x4E0A;&#x8D77;&#x6765;&#x5F00;&#x59CB;&#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x7684;&#x5F00;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5927;&#x6982;&#x5230;8&#x70B9;&#x534A;&#x7684;&#x65F6;&#x5019;&#x7814;&#x53D1;&#x8BF4;&#x6709;&#x51E0;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x8FDE;&#x63A5;&#x4E0D;&#x4E0A;&#x3002;&#x4E8E;&#x662F;&#x8FD0;&#x884C;virt-manager&#x67E5;&#x770B;&#x865A;&#x62DF;&#x673A;&#x72B6;&#x6001;&#xFF0C;&#x679C;&#x7136;&#x662F;down&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x542F;&#x52A8;&#x8D77;&#x6765;&#x4E0D;&#x5C31;&#x5B8C;&#x4E86;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5C45;&#x7136;&#x62A5;&#x9519;&#x4E86;&#xFF0C;&#x8FD8;&#x662F;&#x5728;&#x5173;&#x952E;&#x65F6;&#x95F4;&#x6389;&#x94FE;&#x5B50;&#x3002; &#x6545;&#x969C;&#x5B9A;&#x4F4D;123virsh start centos6.4error: Failed to start domain centos6.4error: Unable to read from monitor: Connection reset by peer &#x6709;&#x95EE;&#x9898;&#xFF0C;&#x5148;google&#x9047;&#x5230;&#x8FD9;&#x79CD;&#x95EE;&#x9898;&#x6211;&#x7684;&#x7B2C;&#x4E00;&#x53CD;&#x5E94;&#x662F;&#x4E00;&#x8138;&#x61F5;&#x903C;&#x554A;&#xFF0C;&#x8FD9;&#x662F;&#x5565;&#x554A;&#xFF1F;&#x4F46;&#x662F;&#x8FD8;&#x5F97;&#x4FDD;&#x6301;&#x8FD0;&#x7EF4;&#x5DE5;&#x7A0B;&#x5E08;&#x7684;&#x4F18;&#x826F;&#x4F20;&#x7EDF;&#xFF0C;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x5148;google&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5148;&#x770B;Google&#x600E;&#x4E48;&#x8BF4;&#xFF1A; &#x5728;&#x865A;&#x62DF;&#x673A;&#x8FD0;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#x5173;&#x95ED;&#x5BBF;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x5C31;&#x6709;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x51FA;&#x73B0;&#xFF0C;&#x7531;&#x4E8E;&#x5BBF;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#x7684;kvm&#x865A;&#x62DF;&#x673A;&#x63A7;&#x5236;&#x5668;&#x4E0E;&#x5B89;&#x88C5;&#x5728;kvm&#x4E2D;&#x7684;&#x865A;&#x62DF;&#x673A;&#x4F1A;&#x8BDD;&#x88AB;&#x5F02;&#x5E38;&#x91CD;&#x7F6E;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5982;&#x4E0B;&#x89E3;&#x51B3; 12# virsh managedsave-remove centos6.4# virsh start cent6.4 &#x89E3;&#x51B3;&#x95EE;&#x9898;&#x7167;&#x7740;Google&#x6267;&#x884C;&#x4E86;&#x4E00;&#x6B21;&#xFF0C;&#x8FD8;&#x662F;&#x62A5;&#x9519;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x6211;&#x5C31;&#x8FF7;&#x832B;&#x4E86;&#x3002;&#x8981;&#x4E0D;&#x518D;&#x6267;&#x884C;&#x4E00;&#x904D;&#xFF0C;&#x4F9D;&#x7136;error&#x3002;&#x597D;&#x5427;&#xFF0C;&#x8FD8;&#x662F;&#x5F97;&#x81EA;&#x5DF1;&#x52A8;&#x8111;&#x554A;&#xFF0C;&#x4E8E;&#x662F;cd&#x5230;&#x6211;&#x4EEC;&#x7684;img&#x76EE;&#x5F55;&#x3002;12345678# cd /home/kvm-disk/# ll -h&#x603B;&#x7528;&#x91CF; 1.3T-rwxr-xr-x 1 root root 100G 8&#x6708; 26 10:23 cat.img-rwxr-xr-x 1 qemu qemu 100G 8&#x6708; 26 10:23 centos6.4-rwxr-xr-x 1 root root 100G 8&#x6708; 26 10:23 centos6-clone.4-rwxr-xr-x 1 qemu qemu 40G 8&#x6708; 25 18:53 nginx-centos-rwxr-xr-x 1 qemu qemu 40G 8&#x6708; 25 18:52 nginx-centos-clone &#x6309;&#x9053;&#x7406;&#x8BF4;&#x53EA;&#x6709;&#x542F;&#x52A8;&#x8D77;&#x6765;&#x7684;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x5B83;&#x7684;&#x5C5E;&#x4E3B;&#x548C;&#x5C5E;&#x7EC4;&#x624D;&#x4F1A;&#x662F;qemu&#xFF0C;&#x90A3;&#x4E48;&#x4E3A;&#x4EC0;&#x4E48;centos6.4&#x4E3A;&#x4EC0;&#x4E48;&#x4E5F;&#x662F;qemu&#x3002;&#x4F1A;&#x4E0D;&#x4F1A;&#x662F;&#x610F;&#x5916;&#x65AD;&#x7535;&#x5BFC;&#x81F4;&#x7684;&#x5F02;&#x5E38;&#x5462;&#xFF0C;&#x90A3;&#x4E48;&#x76F4;&#x63A5;&#x4FEE;&#x6539;&#x5C5E;&#x4E3B;&#x5C5E;&#x7EC4;&#x3002;123# chown root.root centos6.4# virsh start centos6.4 # &#x4E0B;&#x9762;&#x5C45;&#x7136;&#x4E0D;&#x62A5;&#x9519;&#x4E86;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x95EE;&#x9898;&#x89E3;&#x51B3;&#x4E86;]]></content>
      <categories>
        <category>故障记录</category>
      </categories>
      <tags>
        <tag>KVM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[centos系统使用vpn拨号上网]]></title>
    <url>%2Fcentos%E7%B3%BB%E7%BB%9F%E4%BD%BF%E7%94%A8vpn%E6%8B%A8%E5%8F%B7%E4%B8%8A%E7%BD%91.html</url>
    <content type="text"><![CDATA[&#x6700;&#x8FD1;&#x5728;&#x88C5;&#x5927;&#x4F17;&#x70B9;&#x8BC4;&#x7684;CAT&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#xFF0C;&#x53EF;&#x662F;&#x8001;&#x662F;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x4E00;&#x6B65;&#xFF0C;&#x5C31;&#x62A5;&#x8FDE;&#x63A5;&#x8D85;&#x65F6;&#xFF0C;&#x67E5;&#x8D44;&#x6599;&#x627E;&#x539F;&#x56E0;&#x679C;&#x7136;&#x53C8;&#x662F;GWF&#x7684;&#x4E8B;&#x3002;&#x8FD9;&#x4E0D;&#xFF0C;&#x8FDE;&#x4E00;&#x4E2A;&#x73AF;&#x5883;&#x90FD;&#x642D;&#x5EFA;&#x4E0D;&#x8D77;&#x6765;&#x600E;&#x4E48;&#x80FD;&#x505A;&#x4E00;&#x4E2A;&#x5408;&#x683C;&#x7684;&#x8FD0;&#x7EF4;&#x5DE5;&#x7A0B;&#x5E08;&#x5462;&#xFF0C;&#x5F53;&#x65F6;&#x6211;&#x5C31;&#x5728;&#x60F3;&#xFF0C;&#x65E2;&#x7136;&#x6211;&#x53EF;&#x4EE5;&#x7528;Windows&#x7FFB;&#x5899;&#x3002;&#x90A3;&#x4E48;linux&#x6307;&#x5B9A;&#x4E00;&#x6837;&#x80FD;&#x79D1;&#x5B66;&#x4E0A;&#x7F51;&#xFF0C;&#x4E8E;&#x662F;&#x67E5;&#x4E0B;&#x8D44;&#x6599;&#xFF0C;&#x53D1;&#x73B0;&#x8FD8;&#x662F;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x4E86;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x8C08;&#x4E00;&#x4E0B;&#x600E;&#x4E48;&#x7528;centos6&#x7CFB;&#x7EDF;&#x901A;&#x8FC7;vpn&#x62E8;&#x53F7;&#x4E0A;&#x7F51;&#x3002; &#x5B89;&#x88C5;vpn&#x5BA2;&#x6237;&#x7AEF;&#x9996;&#x5148;&#x7B2C;&#x4E00;&#x6B65;&#x5C31;&#x662F;&#x914D;&#x7F6E;&#x597D;epel&#x6E90;&#xFF0C;&#x8FD9;&#x91CC;&#x63A8;&#x8350;&#x7528;&#x963F;&#x91CC;&#x4E91;&#xFF0C;epel&#x6E90;&#x914D;&#x7F6E;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x5B89;&#x88C5;vpn&#x5BA2;&#x6237;&#x7AEF;&#x4E86;1# yum install -y pptp pptp-setup ppp &#x914D;&#x7F6E;vpn1# pptpsetup --create vpn520 --server 47.90.36.195 --username test1 --password test2 &#x8BF4;&#x660E;&#xFF1A;&#x2013;create:&#x521B;&#x5EFA; ;vpn520:&#x81EA;&#x5B9A;&#x4E49;&#x7684;vpn&#x540D;&#x79F0; ;&#x2013;server 47.90.36.195 :&#x8FDC;&#x7A0B;vpn &#x670D;&#x52A1;&#x5668;IP ;&#x2013;username test1:vpn&#x767B;&#x9646;&#x7528;&#x6237;&#x540D; ; &#x2013;password test2:vpn &#x767B;&#x9646;&#x5BC6;&#x7801; &#x521B;&#x5EFA;&#x6210;&#x529F;&#x662F;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x4FE1;&#x606F;&#x8F93;&#x51FA;&#x7684;&#xFF0C;&#x4E0D;&#x8FC7;&#x9ED8;&#x8BA4;&#x5728; /etc/ppp/ &#x4E0B;&#x81EA;&#x52A8;&#x521B;&#x5EFA;chap-secrets &#x6587;&#x4EF6;&#xFF0C;&#x5B83;&#x4FDD;&#x5B58;&#x7740;vpn &#x7684;&#x8D26;&#x6237;&#x4FE1;&#x606F;&#xFF1B;&#x5728; /etc/ppp/peers &#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;vpn520&#xFF08;vpn520:&#x81EA;&#x5B9A;&#x4E49;&#x7684;vpn&#x540D;&#x79F0; &#xFF09;&#x6587;&#x4EF6;&#xFF0C;&#x5B83;&#x4FDD;&#x5B58;&#x4E86;vpn&#x7684;&#x4E00;&#x4E9B;&#x914D;&#x7F6E;&#x4FE1;&#x606F; &#x3002;&#x6B64;&#x65F6;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x67E5;&#x770B; /etc/ppp/chap-secrets &#x6587;&#x4EF6;&#xFF0C;&#x91CC;&#x9762;&#x4FDD;&#x5B58;&#x7740;vpn &#x7528;&#x6237;&#x4FE1;&#x606F;&#xFF1A;123456# cat /etc/ppp/chap-secrets # Secrets for authentication using CHAP# client server secret IP addresses# added by pptpsetup for vpn520test1 vpn520 &quot;test2&quot; * &#x67E5;&#x770B;/etc/ppp/peers/vpn520&#xFF1A;1234567891011121314# written by pptpsetuppty &quot;pptp 47.90.36.195 --nolaunchpppd&quot;locknoauthnobsdcompnodeflatename test1remotename vpn520ipparam vpn520require-mppe-128 #&#x4ECE;&#x8FD9;&#x91CC;&#x5230;&#x7ED3;&#x5C3E;&#x4E3A;&#x6DFB;&#x52A0;&#x7684;&#x914D;&#x7F6E;&#x53C2;&#x6570;refuse-paprefuse-chaprefuse-eaprefuse-mschap &#x590D;&#x5236; /usr/share/doc/ppp-2.4.5/scripts &#x4E0B;&#x7684;&#x4E24;&#x4E2A;&#x811A;&#x672C;&#xFF08;&#x542F;&#x52A8;&#x62E8;&#x53F7;|&#x5173;&#x95ED;&#x62E8;&#x53F7;&#xFF09;&#x6587;&#x4EF6;&#x5230;/usr/sbin &#x76EE;&#x5F55;&#x4E0B;&#xFF1A;12# cp /usr/share/doc/ppp-2.4.5/scripts/pon /usr/sbin/# cp /usr/share/doc/ppp-2.4.5/scripts/poff /usr/sbin/ &#x8D4B;&#x4E88;/usr/sbin &#x76EE;&#x5F55;&#x4E0B;pon &#x3001;poff &#x4E24;&#x4E2A;&#x6587;&#x4EF6;&#x6267;&#x884C;&#x6743;&#x9650;&#xFF1A;1# chmod u+x /usr/sbin/pon /usr/sbin/poff &#x6B64;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;pon &#x62E8;&#x53F7;&#x8FDE;&#x63A5;vpn &#x4E86;&#xFF1A;1# pon vpn520 &#x9A8C;&#x8BC1;VPN&#x662F;&#x5426;&#x751F;&#x6548;12345# ifconfig | grep &apos;inet addr&apos; inet addr:192.168.16.167 Bcast:192.168.16.255 Mask:255.255.255.0 inet addr:10.10.20.175 Bcast:10.255.255.255 Mask:255.0.0.0 inet addr:127.0.0.1 Mask:255.0.0.0 inet addr:10.85.92.20 P-t-P:10.85.92.1 Mask:255.255.255.255 &#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x8DEF;&#x7531;&#x4ECE; ifconfig&#x547D;&#x4EE4;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x6211;&#x8FDE;&#x63A5;&#x5230;&#x7684;vpn&#x7ED9;&#x6211;&#x5206;&#x914D;&#x7684;&#x662F;10&#x7F51;&#x6BB5;&#x7684;ip&#x5730;&#x5740;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x53EA;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x8DEF;&#x7531;&#x5373;&#x53EF;&#x5B9E;&#x73B0;&#x6240;&#x6709;&#x7F51;&#x7EDC;&#x7684;&#x51FA;&#x53E3;&#x90FD;&#x662F;&#x4ECE;VPN&#x51FA;&#x53BB;&#x7684;&#x3002;12# ip route replace default dev ppp0# &#x6CE8;&#xFF1A; ppp0&#x63A5;&#x53E3;&#x662F;&#x7528;ifconfig&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x5F97;&#x5230;&#x7684;&#xFF0C;&#x5177;&#x4F53;&#x540D;&#x79F0;&#x8BF7;&#x81EA;&#x884C;&#x67E5;&#x770B;]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>vpn</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CAT点评监控系统安装部署]]></title>
    <url>%2FCAT%E7%82%B9%E8%AF%84%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2.html</url>
    <content type="text"><![CDATA[CAT &#x662F;&#x5927;&#x4F17;&#x70B9;&#x8BC4;&#x5F00;&#x6E90;&#x7684;&#x4E00;&#x5957;&#x57FA;&#x4E8E;java&#x7684;&#x5B9E;&#x65F6;&#x5E94;&#x7528;&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#xFF0C;&#x4E3B;&#x8981;&#x5E94;&#x7528;&#x4E8E;&#x670D;&#x52A1;&#x4E2D;&#x95F4;&#x4EF6;&#x6846;&#x67B6;&#xFF08;MVC &#x6846;&#x67B6;&#x3001;RPC &#x6846;&#x67B6;&#x3001;&#x6301;&#x4E45;&#x5C42;&#x6846;&#x67B6;&#x3001;&#x5206;&#x5E03;&#x5F0F;&#x7F13;&#x5B58;&#x6846;&#x67B6;&#xFF09;&#x7684;&#x76D1;&#x63A7;&#xFF0C;&#x4E3A;&#x5F00;&#x53D1;&#x548C;&#x8FD0;&#x7EF4;&#x63D0;&#x4F9B;&#x5404;&#x9879;&#x6027;&#x80FD;&#x6307;&#x6807;&#x3001;&#x5065;&#x5EB7;&#x68C0;&#x67E5;&#x3001;&#x81EA;&#x52A8;&#x62A5;&#x8B66;&#x7B49;&#x53EF;&#x89C6;&#x5316;&#x670D;&#x52A1;&#x3002;&#x76F8;&#x5BF9;&#x4E8E;zabbix&#xFF0C;cat&#x662F;&#x4E00;&#x6B3E;&#x5E94;&#x7528;&#x7EA7;&#x7684;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x3002; &#x786C;&#x4EF6;&#x8981;&#x6C42; &#x5185;&#x5B58; 4G &#x4EE5;&#x4E0A; &#x786C;&#x76D8; 100G &#x4EE5;&#x4E0A; &#x64CD;&#x4F5C;&#x7CFB;&#x7EDF; Windows&#x6216;Linux&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF08;&#x5EFA;&#x8BAE;&#x9009;&#x7528;Linux&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF09; &#x8FD0;&#x884C;&#x73AF;&#x5883; java jdk 1.6&#x53CA;&#x4EE5;&#x4E0A; Web&#x670D;&#x52A1;&#x5668;&#xFF08;&#x8FD9;&#x91CC;&#x7528;Apache Tomcat&#xFF09; MySQL &#x6570;&#x636E;&#x5E93;&#xFF08;&#x63A8;&#x8350;5.6&#x53CA;&#x4EE5;&#x4E0A;&#xFF09; maven&#xFF08;&#x7248;&#x672C;&#x9700;&#x8981;&#x5728; 3.2.3&#x4EE5;&#x4E0A;&#xFF09; &#x5B89;&#x88C5;&#x73AF;&#x5883; &#x5B89;&#x88C5;jdk&#x8FD9;&#x91CC;&#x7ED9;&#x51FA;&#x5B98;&#x65B9;&#x4E0B;&#x8F7D;&#x5730;&#x5740; &#xFF0C;&#x8BF7;&#x81EA;&#x884C;&#x4E0B;&#x8F7D;jdk1.6&#x53CA;&#x4EE5;&#x4E0A;&#x5373;&#x53EF;&#x3002;12# yum -y install jdk-7u79-linux-x64.rpm# &#x8FD9;&#x91CC;&#x4E0B;&#x8F7D;rpm&#x5305;&#x683C;&#x5F0F;&#x7684;&#xFF0C;&#x76F4;&#x63A5;yum&#x5B89;&#x88C5;&#x5373;&#x53EF; &#x5B89;&#x88C5;tomcat7tomcat7&#x5B98;&#x65B9;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF0C;&#x4E0B;&#x8F7D;&#x5B8C;&#x6210;&#x4EE5;&#x540E;&#xFF1A;12345# tar -zxf apache-tomcat-7.0.70.tar.gz# ln -sv /root/apache-tomcat-7.0.70 /usr/local/tomcat# vim /etc/profile.d/tomcat.shexport PATH=/usr/local/tomcat/bin/:$PATH# . /etc/profile.d/tomcat.sh &#x542F;&#x52A8;tomcat&#xFF0C;&#x6D4B;&#x8BD5;&#x670D;&#x52A1;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8BBF;&#x95EE;&#x3002; &#x5B89;&#x88C5;mavenmaven&#x5B98;&#x65B9;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF0C;&#x4E0B;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#xFF1A;12345# tar -zxf apache-maven-3.3.9-bin.tar.gz# ln -sv /root/apache-maven-3.3.9 /usr/local/maven# vim /etc/profile.d/maven.shexport PATH=/uar/local/maven/bin:$PATH# . /etc/profile.d/maven.sh &#x5B89;&#x88C5;mysql&#x7531;&#x4E8E;&#x9ED8;&#x8BA4;centos6&#x9ED8;&#x8BA4;yum&#x5B89;&#x88C5;&#x662F;&#x6CA1;&#x6709;mysql5.6&#x4EE5;&#x4E0A;&#x7684;&#x7248;&#x672C;&#x7684;&#xFF0C;&#x8FD9;&#x91CC;&#x7ED9;&#x51FA;&#x5B98;&#x65B9;yum&#x6E90;&#xFF0C;&#x53EF;&#x76F4;&#x63A5;yum&#x5B89;&#x88C5;12345678# vim /etc/yum.repos.d/mysql.repo[mysql56-community]name=MySQL 5.6 Community Serverbaseurl=http://repo.mysql.com/yum/mysql-5.6-community/el/6/$basearch/enabled=1gpgcheck=0# yum install mysql-community-server# service mysqld start &#x5B89;&#x88C5;CAT12git clone https://github.com/dianping/cat.git&#x4E0B;&#x8F7D;cat&#x4EE3;&#x7801; 1&#x3001;&#x5728;CAT&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x7528;maven&#x6784;&#x5EFA;&#x9879;&#x76EE;12mvn clean install -DskipTests&#x4E0B;&#x8F7D;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x95EE;&#x9898;&#xFF0C;&#x8BF7;&#x7FFB;&#x5899;&#x540E;&#x518D;&#x8FD0;&#x884C; 2&#x3001;&#x914D;&#x7F6E;CAT&#x7684;&#x73AF;&#x5883;12345mvn cat:install[INFO] jdbc.url: jdbc:mysql://127.0.0.1:3306 # &#x8FD9;&#x91CC;&#x8F93;&#x5165;&#x7528;&#x6237;&#x5BC6;&#x7801;&#x5373;&#x53EF;[INFO] jdbc.user: root[INFO] jdbc.password: 123456&#x540C;&#x6837;&#xFF0C;&#x8FD9;&#x6761;&#x547D;&#x4EE4;&#x8FD0;&#x884C;3&#x6B21;&#x624D;&#x5B8C;&#x6210;&#x6210;&#x529F; 3&#x3001;&#x8FD0;&#x884C;CAT123456789cd cat-homemvn jetty:run&#x6700;&#x540E;&#x663E;&#x793A;[INFO] Started SelectChannelConnector@0.0.0.0:2281[INFO] Started Jetty Server[INFO] Starting scanner at interval of 10 seconds.[INFO] Working directory is /home/cat/cat-home[INFO] War root is /home/cat/cat-home/src/main/webapp&#x4EE3;&#x8868;&#x8FD0;&#x884C;&#x6210;&#x529F;&#x4E86;&#xFF0C;&#x63A5;&#x7740;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;web&#x754C;&#x9762;&#x4E86; &#x670D;&#x52A1;&#x603B;&#x7B97;&#x662F;&#x642D;&#x5EFA;&#x5B8C;&#x4E86;&#xFF0C;&#x800C;&#x76D1;&#x63A7;&#x8FD8;&#x521A;&#x521A;&#x5F00;&#x59CB;&#x2026;&#x2026;]]></content>
      <categories>
        <category>监控</category>
      </categories>
      <tags>
        <tag>cat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSH原理和应用]]></title>
    <url>%2FSSH%E5%8E%9F%E7%90%86%E5%92%8C%E5%BA%94%E7%94%A8.html</url>
    <content type="text"><![CDATA[&#x4E8B;&#x60C5;&#x6E90;&#x4E8E;&#x524D;&#x4E24;&#x5929;&#x5F00;&#x53D1;&#x4E00;&#x54E5;&#x4EEC;&#x5411;&#x6211;&#x8981;&#x670D;&#x52A1;&#x5668;&#x4E4B;&#x95F4;&#x767B;&#x5F55;&#x65E0;&#x5BC6;&#x7801;&#x5B9E;&#x73B0;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x5F53;&#x65F6;&#x53EA;&#x77E5;&#x5176;&#x547D;&#x4EE4;&#xFF0C;&#x5374;&#x4E0D;&#x77E5;&#x5176;&#x6240;&#x4EE5;&#x7136;&#x3002;&#x4E8E;&#x662F;&#x5C31;&#x51B3;&#x5B9A;&#x597D;&#x597D;&#x7684;&#x590D;&#x4E60;&#x4E00;&#x4E0B;&#x4E4B;&#x524D;&#x5B66;&#x8FC7;&#x7684;&#x57FA;&#x7840;&#x4E86;&#xFF0C;&#x6B63;&#x6240;&#x8C13;&#x57FA;&#x7840;&#x4E0D;&#x7262;&#xFF0C;&#x5730;&#x52A8;&#x5C71;&#x6447;&#x561B;&#x3002;&#x90A3;&#x4E48;SSH&#x662F;&#x4E00;&#x79CD;&#x7F51;&#x7EDC;&#x534F;&#x8BAE;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x8BA1;&#x7B97;&#x673A;&#x4E4B;&#x95F4;&#x7684;&#x52A0;&#x5BC6;&#x767B;&#x5F55;&#x3002;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x4ECE;&#x672C;&#x5730;&#x8BA1;&#x7B97;&#x673A;&#xFF0C;&#x4F7F;&#x7528;SSH&#x534F;&#x8BAE;&#x767B;&#x5F55;&#x53E6;&#x4E00;&#x53F0;&#x8FDC;&#x7A0B;&#x8BA1;&#x7B97;&#x673A;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#xFF0C;&#x8FD9;&#x79CD;&#x767B;&#x5F55;&#x662F;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x5373;&#x4F7F;&#x88AB;&#x4E2D;&#x9014;&#x622A;&#x83B7;&#xFF0C;&#x5BC6;&#x7801;&#x4E5F;&#x4E0D;&#x4F1A;&#x6CC4;&#x9732;&#x3002; &#x4E2D;&#x95F4;&#x4EBA;&#x653B;&#x51FB;SSH&#x4E4B;&#x6240;&#x4EE5;&#x80FD;&#x591F;&#x4FDD;&#x8BC1;&#x5B89;&#x5168;&#xFF0C;&#x539F;&#x56E0;&#x5728;&#x4E8E;&#x5B83;&#x91C7;&#x7528;&#x4E86;&#x516C;&#x94A5;&#x52A0;&#x5BC6;&#x3002;&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A; 1. &#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x6536;&#x5230;&#x7528;&#x6237;&#x7684;&#x767B;&#x5F55;&#x8BF7;&#x6C42;&#xFF0C;&#x628A;&#x81EA;&#x5DF1;&#x7684;&#x516C;&#x94A5;&#x53D1;&#x7ED9;&#x7528;&#x6237;&#x3002; 2. &#x7528;&#x6237;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x516C;&#x94A5;&#xFF0C;&#x5C06;&#x767B;&#x5F55;&#x5BC6;&#x7801;&#x52A0;&#x5BC6;&#x540E;&#xFF0C;&#x53D1;&#x9001;&#x56DE;&#x6765;&#x3002; 3. &#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x7528;&#x81EA;&#x5DF1;&#x7684;&#x79C1;&#x94A5;&#xFF0C;&#x89E3;&#x5BC6;&#x767B;&#x5F55;&#x5BC6;&#x7801;&#xFF0C;&#x5982;&#x679C;&#x5BC6;&#x7801;&#x6B63;&#x786E;&#xFF0C;&#x5C31;&#x540C;&#x610F;&#x7528;&#x6237;&#x767B;&#x5F55;&#x3002; &#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x672C;&#x8EAB;&#x662F;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x5B9E;&#x65BD;&#x7684;&#x65F6;&#x5019;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x98CE;&#x9669;&#xFF1A;&#x5982;&#x679C;&#x6709;&#x4EBA;&#x622A;&#x83B7;&#x4E86;&#x767B;&#x5F55;&#x8BF7;&#x6C42;&#xFF0C;&#x7136;&#x540E;&#x5192;&#x5145;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#xFF0C;&#x5C06;&#x4F2A;&#x9020;&#x7684;&#x516C;&#x94A5;&#x53D1;&#x7ED9;&#x7528;&#x6237;&#xFF0C;&#x90A3;&#x4E48;&#x7528;&#x6237;&#x5F88;&#x96BE;&#x8FA8;&#x522B;&#x771F;&#x4F2A;&#x3002;&#x56E0;&#x4E3A;&#x4E0D;&#x50CF;https&#x534F;&#x8BAE;&#xFF0C;SSH&#x534F;&#x8BAE;&#x7684;&#x516C;&#x94A5;&#x662F;&#x6CA1;&#x6709;&#x8BC1;&#x4E66;&#x4E2D;&#x5FC3;&#xFF08;CA&#xFF09;&#x516C;&#x8BC1;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x90FD;&#x662F;&#x81EA;&#x5DF1;&#x7B7E;&#x53D1;&#x7684;&#x3002;&#x53EF;&#x4EE5;&#x8BBE;&#x60F3;&#xFF0C;&#x5982;&#x679C;&#x653B;&#x51FB;&#x8005;&#x63D2;&#x5728;&#x7528;&#x6237;&#x4E0E;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x4E4B;&#x95F4;&#xFF08;&#x6BD4;&#x5982;&#x5728;&#x516C;&#x5171;&#x7684;wifi&#x533A;&#x57DF;&#xFF09;&#xFF0C;&#x7528;&#x4F2A;&#x9020;&#x7684;&#x516C;&#x94A5;&#xFF0C;&#x83B7;&#x53D6;&#x7528;&#x6237;&#x7684;&#x767B;&#x5F55;&#x5BC6;&#x7801;&#x3002;&#x518D;&#x7528;&#x8FD9;&#x4E2A;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#xFF0C;&#x90A3;&#x4E48;SSH&#x7684;&#x5B89;&#x5168;&#x673A;&#x5236;&#x5C31;&#x8361;&#x7136;&#x65E0;&#x5B58;&#x4E86;&#x3002;&#x8FD9;&#x79CD;&#x98CE;&#x9669;&#x5C31;&#x662F;&#x8457;&#x540D;&#x7684;&#x201D;&#x4E2D;&#x95F4;&#x4EBA;&#x653B;&#x51FB;&#x201D;&#x3002;&#x90A3;&#x4E48;&#xFF0C;SSH&#x534F;&#x8BAE;&#x662F;&#x5982;&#x4F55;&#x5E94;&#x5BF9;&#x7684;&#x5462;&#xFF1F; &#x5BC6;&#x7801;&#x767B;&#x5F55;&#x5982;&#x679C;&#x4F60;&#x662F;&#x7B2C;&#x4E00;&#x6B21;&#x767B;&#x5F55;&#x5BF9;&#x65B9;&#x4E3B;&#x673A;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x51FA;&#x73B0;&#x4E0B;&#x9762;&#x7684;&#x63D0;&#x793A;&#xFF1A;1234# ssh root@192.168.16.11The authenticity of host &apos;192.168.16.11 (192.168.16.11)&apos; can&apos;t be established.RSA key fingerprint is a8:e6:92:33:1d:ea:05:76:44:c9:82:e9:3b:50:0e:be.Are you sure you want to continue connecting (yes/no)? &#x8FD9;&#x6BB5;&#x8BDD;&#x7684;&#x610F;&#x601D;&#x662F;&#xFF0C;&#x65E0;&#x6CD5;&#x786E;&#x8BA4;host&#x4E3B;&#x673A;&#x7684;&#x771F;&#x5B9E;&#x6027;&#xFF0C;&#x53EA;&#x77E5;&#x9053;&#x5B83;&#x7684;&#x516C;&#x94A5;&#x6307;&#x7EB9;&#xFF0C;&#x95EE;&#x4F60;&#x8FD8;&#x60F3;&#x7EE7;&#x7EED;&#x8FDE;&#x63A5;&#x5417;&#xFF1F;&#x6240;&#x8C13;&#x201D;&#x516C;&#x94A5;&#x6307;&#x7EB9;&#x201D;&#xFF0C;&#x662F;&#x6307;&#x516C;&#x94A5;&#x957F;&#x5EA6;&#x8F83;&#x957F;&#xFF08;&#x8FD9;&#x91CC;&#x91C7;&#x7528;RSA&#x7B97;&#x6CD5;&#xFF0C;&#x957F;&#x8FBE;1024&#x4F4D;&#xFF09;&#xFF0C;&#x5F88;&#x96BE;&#x6BD4;&#x5BF9;&#xFF0C;&#x6240;&#x4EE5;&#x5BF9;&#x5176;&#x8FDB;&#x884C;MD5&#x8BA1;&#x7B97;&#xFF0C;&#x5C06;&#x5B83;&#x53D8;&#x6210;&#x4E00;&#x4E2A;128&#x4F4D;&#x7684;&#x6307;&#x7EB9;&#x3002;&#x4E0A;&#x4F8B;&#x4E2D;&#x662F;a8:e6:92:33:1d:ea:05:76:44:c9:82:e9:3b:50:0e:be&#xFF0C;&#x518D;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x5C31;&#x5BB9;&#x6613;&#x591A;&#x4E86;&#x3002;&#x5F88;&#x81EA;&#x7136;&#x7684;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x5C31;&#x662F;&#xFF0C;&#x7528;&#x6237;&#x600E;&#x4E48;&#x77E5;&#x9053;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x7684;&#x516C;&#x94A5;&#x6307;&#x7EB9;&#x5E94;&#x8BE5;&#x662F;&#x591A;&#x5C11;&#xFF1F;&#x56DE;&#x7B54;&#x662F;&#x6CA1;&#x6709;&#x597D;&#x529E;&#x6CD5;&#xFF0C;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x5FC5;&#x987B;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x7F51;&#x7AD9;&#x4E0A;&#x8D34;&#x51FA;&#x516C;&#x94A5;&#x6307;&#x7EB9;&#xFF0C;&#x4EE5;&#x4FBF;&#x7528;&#x6237;&#x81EA;&#x884C;&#x6838;&#x5BF9;&#x3002;&#x5047;&#x5B9A;&#x7ECF;&#x8FC7;&#x98CE;&#x9669;&#x8861;&#x91CF;&#x4EE5;&#x540E;&#xFF0C;&#x7528;&#x6237;&#x51B3;&#x5B9A;&#x63A5;&#x53D7;&#x8FD9;&#x4E2A;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x7684;&#x516C;&#x94A5;&#x3002;&#x7CFB;&#x7EDF;&#x4F1A;&#x51FA;&#x73B0;&#x4E00;&#x53E5;&#x63D0;&#x793A;&#xFF0C;&#x8868;&#x793A;host&#x4E3B;&#x673A;&#x5DF2;&#x7ECF;&#x5F97;&#x5230;&#x8BA4;&#x53EF;&#x3002;1root@192.168.16.12&apos;s password: &#x5982;&#x679C;&#x5BC6;&#x7801;&#x6B63;&#x786E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x767B;&#x5F55;&#x4E86;&#x3002;&#x5F53;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x7684;&#x516C;&#x94A5;&#x88AB;&#x63A5;&#x53D7;&#x4EE5;&#x540E;&#xFF0C;&#x5B83;&#x5C31;&#x4F1A;&#x88AB;&#x4FDD;&#x5B58;&#x5728;&#x6587;&#x4EF6;$HOME/.ssh/known_hosts&#x4E4B;&#x4E2D;&#x3002;&#x4E0B;&#x6B21;&#x518D;&#x8FDE;&#x63A5;&#x8FD9;&#x53F0;&#x4E3B;&#x673A;&#xFF0C;&#x7CFB;&#x7EDF;&#x5C31;&#x4F1A;&#x8BA4;&#x51FA;&#x5B83;&#x7684;&#x516C;&#x94A5;&#x5DF2;&#x7ECF;&#x4FDD;&#x5B58;&#x5728;&#x672C;&#x5730;&#x4E86;&#xFF0C;&#x4ECE;&#x800C;&#x8DF3;&#x8FC7;&#x8B66;&#x544A;&#x90E8;&#x5206;&#xFF0C;&#x76F4;&#x63A5;&#x63D0;&#x793A;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#x3002;&#x6BCF;&#x4E2A;SSH&#x7528;&#x6237;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x7684;known_hosts&#x6587;&#x4EF6;&#xFF0C;&#x6B64;&#x5916;&#x7CFB;&#x7EDF;&#x4E5F;&#x6709;&#x4E00;&#x4E2A;&#x8FD9;&#x6837;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x901A;&#x5E38;&#x662F;/etc/ssh/ssh_known_hosts&#xFF0C;&#x4FDD;&#x5B58;&#x4E00;&#x4E9B;&#x5BF9;&#x6240;&#x6709;&#x7528;&#x6237;&#x90FD;&#x53EF;&#x4FE1;&#x8D56;&#x7684;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x7684;&#x516C;&#x94A5;&#x3002; &#x516C;&#x94A5;&#x767B;&#x5F55;&#x4F7F;&#x7528;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#xFF0C;&#x6BCF;&#x6B21;&#x90FD;&#x5FC5;&#x987B;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#xFF0C;&#x975E;&#x5E38;&#x9EBB;&#x70E6;&#x3002;&#x597D;&#x5728;SSH&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;&#x516C;&#x94A5;&#x767B;&#x5F55;&#xFF0C;&#x53EF;&#x4EE5;&#x7701;&#x53BB;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#x7684;&#x6B65;&#x9AA4;&#x3002;&#x6240;&#x8C13;&#x201D;&#x516C;&#x94A5;&#x767B;&#x5F55;&#x201D;&#xFF0C;&#x539F;&#x7406;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5C31;&#x662F;&#x7528;&#x6237;&#x5C06;&#x81EA;&#x5DF1;&#x7684;&#x516C;&#x94A5;&#x50A8;&#x5B58;&#x5728;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x4E0A;&#x3002;&#x767B;&#x5F55;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x4F1A;&#x5411;&#x7528;&#x6237;&#x53D1;&#x9001;&#x4E00;&#x6BB5;&#x968F;&#x673A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x7528;&#x6237;&#x7528;&#x81EA;&#x5DF1;&#x7684;&#x79C1;&#x94A5;&#x52A0;&#x5BC6;&#x540E;&#xFF0C;&#x518D;&#x53D1;&#x56DE;&#x6765;&#x3002;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x7528;&#x4E8B;&#x5148;&#x50A8;&#x5B58;&#x7684;&#x516C;&#x94A5;&#x8FDB;&#x884C;&#x89E3;&#x5BC6;&#xFF0C;&#x5982;&#x679C;&#x6210;&#x529F;&#xFF0C;&#x5C31;&#x8BC1;&#x660E;&#x7528;&#x6237;&#x662F;&#x53EF;&#x4FE1;&#x7684;&#xFF0C;&#x76F4;&#x63A5;&#x5141;&#x8BB8;&#x767B;&#x5F55;shell&#xFF0C;&#x4E0D;&#x518D;&#x8981;&#x6C42;&#x5BC6;&#x7801;&#x3002;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x8981;&#x6C42;&#x7528;&#x6237;&#x5FC5;&#x987B;&#x63D0;&#x4F9B;&#x81EA;&#x5DF1;&#x7684;&#x516C;&#x94A5;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x73B0;&#x6210;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7528;ssh-keygen&#x751F;&#x6210;&#x4E00;&#x4E2A;&#xFF1A;1ssh-keygen -t rsa -P &apos;&apos; &#x8FD0;&#x884C;&#x4E0A;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x4EE5;&#x540E;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x51FA;&#x73B0;&#x4E00;&#x7CFB;&#x5217;&#x63D0;&#x793A;&#xFF0C;&#x53EF;&#x4EE5;&#x4E00;&#x8DEF;&#x56DE;&#x8F66;&#x3002;&#x8FD0;&#x884C;&#x7ED3;&#x675F;&#x4EE5;&#x540E;&#xFF0C;&#x5728;$HOME/.ssh/&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x4F1A;&#x65B0;&#x751F;&#x6210;&#x4E24;&#x4E2A;&#x6587;&#x4EF6;&#xFF1A;id_rsa.pub&#x548C;id_rsa&#x3002;&#x524D;&#x8005;&#x662F;&#x4F60;&#x7684;&#x516C;&#x94A5;&#xFF0C;&#x540E;&#x8005;&#x662F;&#x4F60;&#x7684;&#x79C1;&#x94A5;&#x3002;&#x8FD9;&#x65F6;&#x518D;&#x8F93;&#x5165;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x5C06;&#x516C;&#x94A5;&#x4F20;&#x9001;&#x5230;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;host&#x4E0A;&#x9762;&#xFF1A;1ssh-copy-id -i /root/.ssh/ch_rsa.pub USER@IP &#x597D;&#x4E86;&#xFF0C;&#x4ECE;&#x6B64;&#x4F60;&#x518D;&#x767B;&#x5F55;&#xFF0C;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#x4E86;&#x3002;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x5C06;&#x7528;&#x6237;&#x7684;&#x516C;&#x94A5;&#xFF0C;&#x4FDD;&#x5B58;&#x5728;&#x767B;&#x5F55;&#x540E;&#x7684;&#x7528;&#x6237;&#x4E3B;&#x76EE;&#x5F55;&#x7684;$HOME/.ssh/authorized_keys&#x6587;&#x4EF6;&#x4E2D;&#x3002;&#x516C;&#x94A5;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x6BB5;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x53EA;&#x8981;&#x628A;&#x5B83;&#x8FFD;&#x52A0;&#x5728;authorized_keys&#x6587;&#x4EF6;&#x7684;&#x672B;&#x5C3E;&#x5C31;&#x884C;&#x4E86;&#x3002;&#x5982;&#x679C;&#x8FD8;&#x662F;&#x4E0D;&#x884C;&#xFF0C;&#x5C31;&#x6253;&#x5F00;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x7684;/etc/ssh/sshd_config&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x68C0;&#x67E5;&#x4E0B;&#x9762;&#x51E0;&#x884C;&#x524D;&#x9762;&#x201D;#&#x201D;&#x6CE8;&#x91CA;&#x662F;&#x5426;&#x53D6;&#x6389;&#x3002;123&#x3000;&#x3000;RSAAuthentication yes&#x3000;&#x3000;PubkeyAuthentication yes&#x3000;&#x3000;AuthorizedKeysFile .ssh/authorized_keys &#x7136;&#x540E;&#x91CD;&#x542F;sshd&#x670D;&#x52A1;&#x5373;&#x53EF;&#x3002; &#x9644; &#x516C;&#x94A5;&#x8BA4;&#x8BC1;&#x539F;&#x7406;&#x6240;&#x8C13;&#x7684;&#x516C;&#x94A5;&#x8BA4;&#x8BC1;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4F7F;&#x7528;&#x4E00;&#x5BF9;&#x52A0;&#x5BC6;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x4E00;&#x4E2A;&#x79F0;&#x4E3A;&#x516C;&#x94A5;(public key)&#xFF0C;&#x4EFB;&#x4F55;&#x4EBA;&#x90FD;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5176;&#x5185;&#x5BB9;&#xFF0C;&#x7528;&#x4E8E;&#x52A0;&#x5BC6;&#xFF1B;&#x53E6;&#x4E00;&#x4E2A;&#x79F0;&#x4E3A;&#x5BC6;&#x94A5;(private key)&#xFF0C;&#x53EA;&#x6709;&#x62E5;&#x6709;&#x8005;&#x624D;&#x80FD;&#x770B;&#x5230;&#xFF0C;&#x7528;&#x4E8E;&#x89E3;&#x5BC6;&#x3002;&#x901A;&#x8FC7;&#x516C;&#x94A5;&#x52A0;&#x5BC6;&#x8FC7;&#x7684;&#x5BC6;&#x6587;&#x4F7F;&#x7528;&#x5BC6;&#x94A5;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x89E3;&#x5BC6;&#xFF0C;&#x4F46;&#x6839;&#x636E;&#x516C;&#x94A5;&#x6765;&#x731C;&#x6D4B;&#x5BC6;&#x94A5;&#x5374;&#x5341;&#x5206;&#x56F0;&#x96BE;&#x3002;ssh &#x7684;&#x516C;&#x94A5;&#x8BA4;&#x8BC1;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x4E86;&#x8FD9;&#x4E00;&#x7279;&#x6027;&#x3002;&#x670D;&#x52A1;&#x5668;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x90FD;&#x5404;&#x81EA;&#x62E5;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x516C;&#x94A5;&#x548C;&#x5BC6;&#x94A5;&#x3002;&#x4E3A;&#x4E86;&#x8BF4;&#x660E;&#x65B9;&#x4FBF;&#xFF0C;&#x4EE5;&#x4E0B;&#x5C06;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x7B26;&#x53F7;&#x3002; Ac &#x5BA2;&#x6237;&#x7AEF;&#x516C;&#x94A5; Bc &#x5BA2;&#x6237;&#x7AEF;&#x5BC6;&#x94A5; As &#x670D;&#x52A1;&#x5668;&#x516C;&#x94A5; Bs &#x670D;&#x52A1;&#x5668;&#x5BC6;&#x94A5; &#x5728;&#x8BA4;&#x8BC1;&#x4E4B;&#x524D;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x67D0;&#x79CD;&#x65B9;&#x6CD5;&#x5C06;&#x516C;&#x94A5; Ac &#x767B;&#x5F55;&#x5230;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x3002;&#x8BA4;&#x8BC1;&#x8FC7;&#x7A0B;&#x5206;&#x4E3A;&#x4E24;&#x4E2A;&#x6B65;&#x9AA4;&#x3002;&#x4E00;&#x3001;&#x4F1A;&#x8BDD;&#x5BC6;&#x94A5;(session key)&#x751F;&#x6210; 1. &#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x5C06; As &#x53D1;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002; 2. &#x670D;&#x52A1;&#x5668;&#x751F;&#x6210;&#x4F1A;&#x8BDD;ID(session id)&#xFF0C;&#x8BBE;&#x4E3A; p&#xFF0C;&#x53D1;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002; 3. &#x5BA2;&#x6237;&#x7AEF;&#x751F;&#x6210;&#x4F1A;&#x8BDD;&#x5BC6;&#x94A5;(session key)&#xFF0C;&#x8BBE;&#x4E3A; q&#xFF0C;&#x5E76;&#x8BA1;&#x7B97; r = p xor q&#x3002; 4. &#x5BA2;&#x6237;&#x7AEF;&#x5C06; r &#x7528; As &#x8FDB;&#x884C;&#x52A0;&#x5BC6;&#xFF0C;&#x7ED3;&#x679C;&#x53D1;&#x9001;&#x7ED9;&#x670D;&#x52A1;&#x5668;&#x3002; 5. &#x670D;&#x52A1;&#x5668;&#x7528; Bs &#x8FDB;&#x884C;&#x89E3;&#x5BC6;&#xFF0C;&#x83B7;&#x5F97; r&#x3002; 6. &#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C; r xor p &#x7684;&#x8FD0;&#x7B97;&#xFF0C;&#x83B7;&#x5F97; q&#x3002; 7. &#x81F3;&#x6B64;&#x670D;&#x52A1;&#x5668;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x90FD;&#x77E5;&#x9053;&#x4E86;&#x4F1A;&#x8BDD;&#x5BC6;&#x94A5;q&#xFF0C;&#x4EE5;&#x540E;&#x7684;&#x4F20;&#x8F93;&#x90FD;&#x5C06;&#x88AB; q &#x52A0;&#x5BC6;&#x3002; &#x4E8C;&#x3001;&#x8BA4;&#x8BC1; 1. &#x670D;&#x52A1;&#x5668;&#x751F;&#x6210;&#x968F;&#x673A;&#x6570; x&#xFF0C;&#x5E76;&#x7528; Ac &#x52A0;&#x5BC6;&#x540E;&#x751F;&#x6210;&#x7ED3;&#x679C; S(x)&#xFF0C;&#x53D1;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF; 2. &#x5BA2;&#x6237;&#x7AEF;&#x4F7F;&#x7528; Bc &#x89E3;&#x5BC6; S(x) &#x5F97;&#x5230; x 3. &#x5BA2;&#x6237;&#x7AEF;&#x8BA1;&#x7B97; q + x &#x7684; md5 &#x503C; n(q+x)&#xFF0C;q&#x4E3A;&#x4E0A;&#x4E00;&#x6B65;&#x5F97;&#x5230;&#x7684;&#x4F1A;&#x8BDD;&#x5BC6;&#x94A5; 4. &#x670D;&#x52A1;&#x5668;&#x8BA1;&#x7B97; q + x &#x7684; md5 &#x503C; m(q+x) 5. &#x5BA2;&#x6237;&#x7AEF;&#x5C06; n(q+x) &#x53D1;&#x9001;&#x7ED9;&#x670D;&#x52A1;&#x5668; 6. &#x670D;&#x52A1;&#x5668;&#x6BD4;&#x8F83; m(q+x) &#x548C; n(q+x)&#xFF0C;&#x4E24;&#x8005;&#x76F8;&#x540C;&#x5219;&#x8BA4;&#x8BC1;&#x6210;&#x529F; &#x516C;&#x94A5;&#x52A0;&#x5BC6; &#x6570;&#x5B57;&#x7B7E;&#x540D;]]></content>
      <categories>
        <category>基础</category>
      </categories>
      <tags>
        <tag>SSH</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[DNS解析原理]]></title>
    <url>%2FDNS%E8%A7%A3%E6%9E%90%E5%8E%9F%E7%90%86.html</url>
    <content type="text"><![CDATA[DNS( Domain Name System)&#x662F;&#x201C;&#x57DF;&#x540D;&#x7CFB;&#x7EDF;&#x201D;&#x7684;&#x82F1;&#x6587;&#x7F29;&#x5199;&#xFF0C;&#x662F;&#x4E00;&#x79CD;&#x7EC4;&#x7EC7;&#x6210;&#x57DF;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x7684;&#x8BA1;&#x7B97;&#x673A;&#x548C;&#x7F51;&#x7EDC;&#x670D;&#x52A1;&#x547D;&#x540D;&#x7CFB;&#x7EDF;&#xFF0C;&#x5B83;&#x7528;&#x4E8E;TCP/IP&#x7F51;&#x7EDC;&#xFF0C;&#x5B83;&#x6240;&#x63D0;&#x4F9B;&#x7684;&#x670D;&#x52A1;&#x662F;&#x7528;&#x6765;&#x5C06;&#x4E3B;&#x673A;&#x540D;&#x548C;&#x57DF;&#x540D;&#x8F6C;&#x6362;&#x4E3A;IP&#x5730;&#x5740;&#x7684;&#x5DE5;&#x4F5C;&#x3002;&#x7B80;&#x5355;&#x70B9;&#x6765;&#x8BF4;&#xFF0C;DNS&#x5C31;&#x662F;&#x4E00;&#x4F4D;&#x201C;&#x7FFB;&#x8BD1;&#x5B98;&#x201D;&#x3002; &#x89E3;&#x6790;&#x539F;&#x7406;&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x5BA2;&#x6237;&#x673A;&#x63D0;&#x51FA;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x8BF7;&#x6C42;,&#x5E76;&#x5C06;&#x8BE5;&#x8BF7;&#x6C42;&#x53D1;&#x9001;&#x7ED9;&#x672C;&#x5730;&#x7684;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;&#x3002;&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x5F53;&#x672C;&#x5730;&#x7684;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;&#x6536;&#x5230;&#x8BF7;&#x6C42;&#x540E;,&#x5C31;&#x5148;&#x67E5;&#x8BE2;&#x672C;&#x5730;&#x7684;&#x7F13;&#x5B58;,&#x5982;&#x679C;&#x6709;&#x8BE5;&#x7EAA;&#x5F55;&#x9879;,&#x5219;&#x672C;&#x5730;&#x7684;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;&#x5C31;&#x76F4;&#x63A5;&#x628A;&#x67E5;&#x8BE2;&#x7684;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x3002;&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x5982;&#x679C;&#x672C;&#x5730;&#x7684;&#x7F13;&#x5B58;&#x4E2D;&#x6CA1;&#x6709;&#x8BE5;&#x7EAA;&#x5F55;,&#x5219;&#x672C;&#x5730;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;&#x5C31;&#x76F4;&#x63A5;&#x628A;&#x8BF7;&#x6C42;&#x53D1;&#x7ED9;&#x6839;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;,&#x7136;&#x540E;&#x6839;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;&#x518D;&#x8FD4;&#x56DE;&#x7ED9;&#x672C;&#x5730;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;&#x4E00;&#x4E2A;&#x6240;&#x67E5;&#x8BE2;&#x57DF;(&#x6839;&#x7684;&#x5B50;&#x57DF;)&#x7684;&#x4E3B;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5730;&#x5740;&#x3002;&#x7B2C;&#x56DB;&#x6B65;&#xFF1A;&#x672C;&#x5730;&#x670D;&#x52A1;&#x5668;&#x518D;&#x5411;&#x4E0A;&#x4E00;&#x6B65;&#x8FD4;&#x56DE;&#x7684;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x8BF7;&#x6C42;,&#x7136;&#x540E;&#x63A5;&#x53D7;&#x8BF7;&#x6C42;&#x7684;&#x670D;&#x52A1;&#x5668;&#x67E5;&#x8BE2;&#x81EA;&#x5DF1;&#x7684;&#x7F13;&#x5B58;,&#x5982;&#x679C;&#x6CA1;&#x6709;&#x8BE5;&#x7EAA;&#x5F55;,&#x5219;&#x8FD4;&#x56DE;&#x76F8;&#x5173;&#x7684;&#x4E0B;&#x7EA7;&#x7684;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5730;&#x5740;&#x3002;&#x7B2C;&#x4E94;&#x6B65;&#xFF1A;&#x91CD;&#x590D;&#x7B2C;&#x56DB;&#x6B65;,&#x76F4;&#x5230;&#x627E;&#x5230;&#x6B63;&#x786E;&#x7684;&#x7EAA;&#x5F55;&#x3002;&#x7B2C;&#x516D;&#x6B65;&#xFF1A;&#x672C;&#x5730;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;&#x628A;&#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#x4FDD;&#x5B58;&#x5230;&#x7F13;&#x5B58;,&#x4EE5;&#x5907;&#x4E0B;&#x4E00;&#x6B21;&#x4F7F;&#x7528;,&#x540C;&#x65F6;&#x8FD8;&#x5C06;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x7ED9;&#x5BA2;&#x6237;&#x673A;&#x3002; &#x4E3E;&#x4F8B;&#x8BF4;&#x660E;&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x7684;&#x5BA2;&#x6237;&#x673A;&#x5982;&#x679C;&#x60F3;&#x8981;&#x8BBF;&#x95EE;&#x7AD9;&#x70B9;&#xFF1A;www.7lw.com , &#x6B64;&#x5BA2;&#x6237;&#x672C;&#x5730;&#x7684;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;&#x662F; dns.company.com , &#x4E00;&#x4E2A;&#x6839;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;&#x662F;NS.INTER.NET , &#x6240;&#x8981;&#x8BBF;&#x95EE;&#x7684;&#x7F51;&#x7AD9;&#x7684;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;&#x662F;dns.7lw.com,&#x57DF;&#x540D;&#x89E3;&#x6790;&#x7684;&#x8FC7;&#x7A0B;&#x5982;&#x4E0B;&#x6240;&#x793A;:(1)&#x5BA2;&#x6237;&#x673A;&#x53D1;&#x51FA;&#x8BF7;&#x6C42;&#x89E3;&#x6790;&#x57DF;&#x540D;www.7lw.com&#x7684;&#x62A5;&#x6587;(2)&#x672C;&#x5730;&#x7684;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;&#x6536;&#x5230;&#x8BF7;&#x6C42;&#x540E;, &#x67E5;&#x8BE2;&#x672C;&#x5730;&#x7F13;&#x5B58;, &#x5047;&#x8BBE;&#x6CA1;&#x6709;&#x8BE5;&#x7EAA;&#x5F55;, &#x5219;&#x672C;&#x5730;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;dns.company.com&#x5219;&#x5411;&#x6839;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;NS.INTER.NET&#x53D1;&#x51FA;&#x8BF7;&#x6C42;&#x89E3;&#x6790;&#x57DF;&#x540D;www.7lw.com(3)&#x6839;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;NS.INTER.NET&#x6536;&#x5230;&#x8BF7;&#x6C42;&#x540E;&#x67E5;&#x8BE2;&#x672C;&#x5730;&#x8BB0;&#x5F55;&#x5F97;&#x5230;&#x5982;&#x4E0B;&#x7ED3;&#x679C;:7lw.com NS dns.7lw.com &#xFF08;&#x8868;&#x793A;7lw.com&#x57DF;&#x4E2D;&#x7684;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;&#x4E3A;&#xFF1A;dns.7lw.com &#xFF09;, &#x540C;&#x65F6;&#x7ED9;&#x51FA;dns.linejet.com&#x7684;&#x5730;&#x5740;,&#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x7ED9;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;dns.company.com&#x3002;(4)&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;dns.company.com &#x6536;&#x5230;&#x56DE;&#x5E94;&#x540E;,&#x518D;&#x53D1;&#x51FA;&#x8BF7;&#x6C42;&#x89E3;&#x6790;&#x57DF;&#x540D;www.7lw.com&#x7684;&#x62A5;&#x6587;&#x3002;(5)&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668; dns.7lw.com&#x6536;&#x5230;&#x8BF7;&#x6C42;&#x540E;,&#x5F00;&#x59CB;&#x67E5;&#x8BE2;&#x672C;&#x5730;&#x7684;&#x8BB0;&#x5F55;&#xFF0C;&#x627E;&#x5230;&#x5982;&#x4E0B;&#x4E00;&#x6761;&#x8BB0;&#x5F55;:www.7lw.com A 211.120.3.12 &#xFF08;&#x8868;&#x793A;7lw.com&#x57DF;&#x4E2D;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;dns.7lw.com&#x7684;IP&#x5730;&#x5740;&#x4E3A;:211.120.3.12&#xFF09;,&#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x7ED9;&#x5BA2;&#x6237;&#x672C;&#x5730;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;dns.company.com&#x3002;(6)&#x5BA2;&#x6237;&#x672C;&#x5730;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;&#x5C06;&#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#x4FDD;&#x5B58;&#x5230;&#x672C;&#x5730;&#x7F13;&#x5B58;,&#x540C;&#x65F6;&#x5C06;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x7ED9;&#x5BA2;&#x6237;&#x673A;&#x3002; &#x8FD9;&#x6837;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x4E00;&#x6B21;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x8FC7;&#x7A0B;. DNS&#x56FE;&#x89E3;]]></content>
      <categories>
        <category>基础</category>
      </categories>
      <tags>
        <tag>DNS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[网络分析shell脚本(实时流量+连接统计)]]></title>
    <url>%2F%E7%BD%91%E7%BB%9C%E5%88%86%E6%9E%90shell%E8%84%9A%E6%9C%AC-%E5%AE%9E%E6%97%B6%E6%B5%81%E9%87%8F-%E8%BF%9E%E6%8E%A5%E7%BB%9F%E8%AE%A1.html</url>
    <content type="text"><![CDATA[&#x4ECB;&#x7ECD;&#x4E00;&#x4E2A;&#x5F3A;&#x5927;&#x7684;&#x5206;&#x6790;&#x7F51;&#x7EDC;&#x7684;shell&#x811A;&#x672C; &#x6B64;&#x811A;&#x672C;&#x5305;&#x542B;&#x7684;&#x529F;&#x80FD;&#x6709;&#xFF1A; &#x5B9E;&#x65F6;&#x76D1;&#x63A7;&#x4EFB;&#x610F;&#x7F51;&#x5361;&#x7684;&#x6D41;&#x91CF; &#x7EDF;&#x8BA1;10&#x79D2;&#x5185;&#x5E73;&#x5747;&#x6D41;&#x91CF; &#x7EDF;&#x8BA1;&#x6BCF;&#x4E2A;&#x7AEF;&#x53E3;&#x5728;10&#x79D2;&#x5185;&#x7684;&#x5E73;&#x5747;&#x6D41;&#x91CF;&#xFF0C;&#x57FA;&#x4E8E;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x7AEF;&#x7AEF;&#x53E3;&#x7EDF;&#x8BA1;&#x3002;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x54EA;&#x4E9B;&#x7AEF;&#x53E3;&#x5360;&#x6D41;&#x91CF;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x5BF9;&#x4E8E;web&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4E00;&#x822C;&#x662F;80&#x7AEF;&#x53E3;&#x3002;&#x5176;&#x5B83;&#x7AEF;&#x53E3;&#x53D7;&#x5230;&#x653B;&#x51FB;&#x65F6;&#xFF0C;&#x4E5F;&#x6709;&#x53EF;&#x80FD;&#x5176;&#x5B83;&#x7AEF;&#x53E3;&#x6D41;&#x91CF;&#x6BD4;&#x8F83;&#x5927;&#x3002;&#x6240;&#x4EE5;&#x6B64;&#x529F;&#x80FD;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x7AEF;&#x53E3;&#x6D41;&#x91CF;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x3002; &#x7EDF;&#x8BA1;&#x5728;10s&#x5185;&#x5360;&#x7528;&#x5E26;&#x5BBD;&#x6700;&#x5927;&#x7684;&#x524D;10&#x4E2A;ip&#x3002;&#x6B64;&#x9879;&#x529F;&#x80FD;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x6765;&#x67E5;&#x51FA;&#x662F;&#x5426;&#x6709;&#x6076;&#x610F;&#x5360;&#x7528;&#x5E26;&#x5BBD;&#x7684;ip&#x3002; &#x7EDF;&#x8BA1;&#x8FDE;&#x63A5;&#x72B6;&#x6001;&#x3002;&#x6B64;&#x9879;&#x529F;&#x80FD;&#x53EF;&#x4EE5;&#x8BA9;&#x6211;&#x4EEC;&#x770B;&#x51FA;&#x54EA;&#x4E9B;&#x8FDE;&#x63A5;&#x72B6;&#x6001;&#x6BD4;&#x8F83;&#x5927;&#x3002;&#x5982;&#x679C;SYN-RECV&#x72B6;&#x6001;&#x6BD4;&#x8F83;&#x591A;&#x7684;&#x8BDD;&#xFF0C;&#x6709;&#x53EF;&#x4EE5;&#x53D7;&#x5230;&#x534A;&#x8FDE;&#x63A5;&#x653B;&#x51FB;&#x3002;&#x5982;&#x679C;ESTABLISED&#x975E;&#x5E38;&#x5927;&#xFF0C;&#x4F46;&#x901A;&#x8FC7;&#x65E5;&#x5FD7;&#x53D1;&#x73B0;&#x6CA1;&#x6709;&#x90A3;&#x4E48;&#x591A;&#x8BF7;&#x6C42;&#xFF0C;&#x6216;&#x8005;&#x901A;&#x8FC7;tcpdump&#x53D1;&#x73B0;&#x5927;&#x91CF;ip&#x53EA;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x4E0D;&#x8BF7;&#x6C42;&#x6570;&#x636E;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x53D7;&#x5230;&#x4E86;&#x5168;&#x8FDE;&#x63A5;&#x653B;&#x51FB;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x5982;&#x679C;&#x4F60;&#x4F7F;&#x7528;&#x7684;&#x662F;nginx&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x589E;&#x52A0;listen 80 deferred&#x6765;&#x9632;&#x6B62;&#x3002; &#x7EDF;&#x8BA1;&#x5404;&#x7AEF;&#x53E3;&#x8FDE;&#x63A5;&#x72B6;&#x6001;&#x3002;&#x5F53;&#x53EF;&#x80FD;&#x53D7;&#x5230;&#x653B;&#x51FB;&#x65F6;&#xFF0C;&#x6B64;&#x9879;&#x529F;&#x80FD;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#x662F;&#x54EA;&#x4E2A;&#x7AEF;&#x53E3;&#x53D7;&#x5230;&#x653B;&#x51FB;&#x3002; &#x7EDF;&#x8BA1;&#x7AEF;&#x53E3;&#x4E3A;80&#x4E14;&#x72B6;&#x6001;&#x4E3A;ESTAB&#x8FDE;&#x63A5;&#x6570;&#x6700;&#x591A;&#x7684;&#x524D;10&#x4E2A;IP&#x3002;&#x6B64;&#x9879;&#x529F;&#x80FD;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x6765;&#x627E;&#x51FA;&#x521B;&#x5EFA;&#x8FDE;&#x63A5;&#x8FC7;&#x591A;&#x7684;Ip&#xFF0C;&#x8FDB;&#x800C;&#x5C4F;&#x853D;&#x3002; &#x7EDF;&#x8BA1;&#x7AEF;&#x53E3;&#x4E3A;80&#x4E14;&#x72B6;&#x6001;&#x4E3A;SYN-RECV&#x8FDE;&#x63A5;&#x6570;&#x6700;&#x591A;&#x7684;&#x524D;10&#x4E2A;IP&#x3002;&#x5F53;&#x53D7;&#x5230;&#x534A;&#x8FDE;&#x63A5;&#x653B;&#x51FB;&#x65F6;&#xFF0C;&#x6B64;&#x9879;&#x529F;&#x80FD;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x627E;&#x5230;&#x6076;&#x610F;ip&#x3002; &#x7528;&#x5230;&#x7684;&#x7F51;&#x7EDC;&#x5206;&#x6790;&#x5DE5;&#x5177;&#xFF1A; tcpdump:&#x6B64;&#x811A;&#x672C;&#x7528;tcpdump&#x6765;&#x7EDF;&#x8BA1;&#x57FA;&#x4E8E;ip&#x6216;&#x57FA;&#x4E8E;&#x7AEF;&#x53E3;&#x7684;&#x6D41;&#x91CF;&#x3002; ss&#xFF1A; &#x6B64;&#x811A;&#x672C;&#x7528;ss&#x547D;&#x4EE4;&#x6765;&#x7EDF;&#x8BA1;&#x8FDE;&#x63A5;&#x72B6;&#x6001;&#xFF0C;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x53D1;&#x73B0;ss&#x6BD4;netstat&#x9AD8;&#x6548;&#x5F97;&#x591A;&#x3002; /proc/net/dev&#xFF0C;&#x7528;&#x6765;&#x7EDF;&#x8BA1;&#x6307;&#x5B9A;&#x7F51;&#x5361;&#x7684;&#x6D41;&#x91CF;&#x3002; &#x4E0B;&#x9762;&#x8D34;&#x51FA;&#x5B8C;&#x6574;&#x4EE3;&#x7801;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247#!/bin/bash #write by zhumaohai(admin#centos.bz)#author blog: www.centos.bz #&#x663E;&#x793A;&#x83DC;&#x5355;(&#x5355;&#x9009;)display_menu(){local soft=$1local prompt=&quot;which ${soft} you&apos;d select: &quot;eval local arr=(\${${soft}_arr[@]})while truedo echo -e &quot;#################### ${soft} setting ####################\n\n&quot; for ((i=1;i&lt;=${#arr[@]};i++ )); do echo -e &quot;$i) ${arr[$i-1]}&quot;; done echo read -p &quot;${prompt}&quot; $soft eval local select=\$$soft if [ &quot;$select&quot; == &quot;&quot; ] || [ &quot;${arr[$soft-1]}&quot; == &quot;&quot; ];then prompt=&quot;input errors,please input a number: &quot; else eval $soft=${arr[$soft-1]} eval echo &quot;your selection: \$$soft&quot; break fidone} #&#x628A;&#x5E26;&#x5BBD;bit&#x5355;&#x4F4D;&#x8F6C;&#x6362;&#x4E3A;&#x4EBA;&#x7C7B;&#x53EF;&#x8BFB;&#x5355;&#x4F4D;bit_to_human_readable(){ #input bit value local trafficValue=$1 if [[ ${trafficValue%.*} -gt 922 ]];then #conv to Kb trafficValue=`awk -v value=$trafficValue &apos;BEGIN{printf &quot;%0.1f&quot;,value/1024}&apos;` if [[ ${trafficValue%.*} -gt 922 ]];then #conv to Mb trafficValue=`awk -v value=$trafficValue &apos;BEGIN{printf &quot;%0.1f&quot;,value/1024}&apos;` echo &quot;${trafficValue}Mb&quot; else echo &quot;${trafficValue}Kb&quot; fi else echo &quot;${trafficValue}b&quot; fi} #&#x5224;&#x65AD;&#x5305;&#x7BA1;&#x7406;&#x5DE5;&#x5177;check_package_manager(){ local manager=$1 local systemPackage=&apos;&apos; if cat /etc/issue | grep -q -E -i &quot;ubuntu|debian&quot;;then systemPackage=&apos;apt&apos; elif cat /etc/issue | grep -q -E -i &quot;centos|red hat|redhat&quot;;then systemPackage=&apos;yum&apos; elif cat /proc/version | grep -q -E -i &quot;ubuntu|debian&quot;;then systemPackage=&apos;apt&apos; elif cat /proc/version | grep -q -E -i &quot;centos|red hat|redhat&quot;;then systemPackage=&apos;yum&apos; else echo &quot;unkonw&quot; fi if [ &quot;$manager&quot; == &quot;$systemPackage&quot; ];then return 0 else return 1 fi } #&#x5B9E;&#x65F6;&#x6D41;&#x91CF;realTimeTraffic(){ local eth=&quot;&quot; local nic_arr=(`ifconfig | grep -E -o &quot;^[a-z0-9]+&quot; | grep -v &quot;lo&quot; | uniq`) local nicLen=${#nic_arr[@]} if [[ $nicLen -eq 0 ]]; then echo &quot;sorry,I can not detect any network device,please report this issue to author.&quot; exit 1 elif [[ $nicLen -eq 1 ]]; then eth=$nic_arr else display_menu nic eth=$nic fi local clear=true local eth_in_peak=0 local eth_out_peak=0 local eth_in=0 local eth_out=0 while true;do #&#x79FB;&#x52A8;&#x5149;&#x6807;&#x5230;0:0&#x4F4D;&#x7F6E; printf &quot;\033[0;0H&quot; #&#x6E05;&#x5C4F;&#x5E76;&#x6253;&#x5370;Now Peak [[ $clear == true ]] &amp;&amp; printf &quot;\033[2J&quot; &amp;&amp; echo &quot;$eth--------Now--------Peak-----------&quot; traffic_be=(`awk -v eth=$eth -F&apos;[: ]+&apos; &apos;{if ($0 ~eth){print $3,$11}}&apos; /proc/net/dev`) sleep 2 traffic_af=(`awk -v eth=$eth -F&apos;[: ]+&apos; &apos;{if ($0 ~eth){print $3,$11}}&apos; /proc/net/dev`) #&#x8BA1;&#x7B97;&#x901F;&#x7387; eth_in=$(( (${traffic_af[0]}-${traffic_be[0]})*8/2 )) eth_out=$(( (${traffic_af[1]}-${traffic_be[1]})*8/2 )) #&#x8BA1;&#x7B97;&#x6D41;&#x91CF;&#x5CF0;&#x503C; [[ $eth_in -gt $eth_in_peak ]] &amp;&amp; eth_in_peak=$eth_in [[ $eth_out -gt $eth_out_peak ]] &amp;&amp; eth_out_peak=$eth_out #&#x79FB;&#x52A8;&#x5149;&#x6807;&#x5230;2:1 printf &quot;\033[2;1H&quot; #&#x6E05;&#x9664;&#x5F53;&#x524D;&#x884C; printf &quot;\033[K&quot; printf &quot;%-20s %-20s\n&quot; &quot;Receive: $(bit_to_human_readable $eth_in)&quot; &quot;$(bit_to_human_readable $eth_in_peak)&quot; #&#x6E05;&#x9664;&#x5F53;&#x524D;&#x884C; printf &quot;\033[K&quot; printf &quot;%-20s %-20s\n&quot; &quot;Transmit: $(bit_to_human_readable $eth_out)&quot; &quot;$(bit_to_human_readable $eth_out_peak)&quot; [[ $clear == true ]] &amp;&amp; clear=false done} #&#x6D41;&#x91CF;&#x548C;&#x8FDE;&#x63A5;&#x6982;&#x89C8;trafficAndConnectionOverview(){ if ! which tcpdump &gt; /dev/null;then echo &quot;tcpdump not found,going to install it.&quot; if check_package_manager apt;then apt-get -y install tcpdump elif check_package_manager yum;then yum -y install tcpdump fi fi local reg=&quot;&quot; local eth=&quot;&quot; local nic_arr=(`ifconfig | grep -E -o &quot;^[a-z0-9]+&quot; | grep -v &quot;lo&quot; | uniq`) local nicLen=${#nic_arr[@]} if [[ $nicLen -eq 0 ]]; then echo &quot;sorry,I can not detect any network device,please report this issue to author.&quot; exit 1 elif [[ $nicLen -eq 1 ]]; then eth=$nic_arr else display_menu nic eth=$nic fi echo &quot;please wait for 10s to generate network data...&quot; echo #&#x5F53;&#x524D;&#x6D41;&#x91CF;&#x503C; local traffic_be=(`awk -v eth=$eth -F&apos;[: ]+&apos; &apos;{if ($0 ~eth){print $3,$11}}&apos; /proc/net/dev`) #tcpdump&#x76D1;&#x542C;&#x7F51;&#x7EDC; tcpdump -v -i $eth -tnn &gt; /tmp/tcpdump_temp 2&gt;&amp;1 &amp; sleep 10 clear kill `ps aux | grep tcpdump | grep -v grep | awk &apos;{print $2}&apos;` #10s&#x540E;&#x6D41;&#x91CF;&#x503C; local traffic_af=(`awk -v eth=$eth -F&apos;[: ]+&apos; &apos;{if ($0 ~eth){print $3,$11}}&apos; /proc/net/dev`) #&#x6253;&#x5370;10s&#x5E73;&#x5747;&#x901F;&#x7387; local eth_in=$(( (${traffic_af[0]}-${traffic_be[0]})*8/10 )) local eth_out=$(( (${traffic_af[1]}-${traffic_be[1]})*8/10 )) echo -e &quot;\033[32mnetwork device $eth average traffic in 10s: \033[0m&quot; echo &quot;$eth Receive: $(bit_to_human_readable $eth_in)/s&quot; echo &quot;$eth Transmit: $(bit_to_human_readable $eth_out)/s&quot; echo local regTcpdump=$(ifconfig | grep -A 1 $eth | awk -F&apos;[: ]+&apos; &apos;$0~/inet addr:/{printf $4&quot;|&quot;}&apos; | sed -e &apos;s/|$//&apos; -e &apos;s/^/(/&apos; -e &apos;s/$/)\\\\\.[0-9]+:/&apos;) #&#x65B0;&#x65E7;&#x7248;&#x672C;tcpdump&#x8F93;&#x51FA;&#x683C;&#x5F0F;&#x4E0D;&#x4E00;&#x6837;,&#x5206;&#x522B;&#x5904;&#x7406; if awk &apos;/^IP/{print;exit}&apos; /tmp/tcpdump_temp | grep -q &quot;)$&quot;;then #&#x5904;&#x7406;tcpdump&#x6587;&#x4EF6; awk &apos;/^IP/{print;getline;print}&apos; /tmp/tcpdump_temp &gt; /tmp/tcpdump_temp2 else #&#x5904;&#x7406;tcpdump&#x6587;&#x4EF6; awk &apos;/^IP/{print}&apos; /tmp/tcpdump_temp &gt; /tmp/tcpdump_temp2 sed -i -r &apos;s#(.*: [0-9]+\))(.*)#\1\n \2#&apos; /tmp/tcpdump_temp2 fi awk &apos;{len=$NF;sub(/\)/,&quot;&quot;,len);getline;print $0,len}&apos; /tmp/tcpdump_temp2 &gt; /tmp/tcpdump #&#x7EDF;&#x8BA1;&#x6BCF;&#x4E2A;&#x7AEF;&#x53E3;&#x5728;10s&#x5185;&#x7684;&#x5E73;&#x5747;&#x6D41;&#x91CF; echo -e &quot;\033[32maverage traffic in 10s base on server port: \033[0m&quot; awk -F&apos;[ .:]+&apos; -v regTcpdump=$regTcpdump &apos;{if ($0 ~ regTcpdump){line=&quot;clients &gt; &quot;$8&quot;.&quot;$9&quot;.&quot;$10&quot;.&quot;$11&quot;:&quot;$12}else{line=$2&quot;.&quot;$3&quot;.&quot;$4&quot;.&quot;$5&quot;:&quot;$6&quot; &gt; clients&quot;};sum[line]+=$NF*8/10}END{for (line in sum){printf &quot;%s %d\n&quot;,line,sum[line]}}&apos; /tmp/tcpdump | \ sort -k 4 -nr | head -n 10 | while read a b c d;do echo &quot;$a $b $c $(bit_to_human_readable $d)/s&quot; done echo -ne &quot;\033[11A&quot; echo -ne &quot;\033[50C&quot; echo -e &quot;\033[32maverage traffic in 10s base on client port: \033[0m&quot; awk -F&apos;[ .:]+&apos; -v regTcpdump=$regTcpdump &apos;{if ($0 ~ regTcpdump){line=$2&quot;.&quot;$3&quot;.&quot;$4&quot;.&quot;$5&quot;:&quot;$6&quot; &gt; server&quot;}else{line=&quot;server &gt; &quot;$8&quot;.&quot;$9&quot;.&quot;$10&quot;.&quot;$11&quot;:&quot;$12};sum[line]+=$NF*8/10}END{for (line in sum){printf &quot;%s %d\n&quot;,line,sum[line]}}&apos; /tmp/tcpdump | \ sort -k 4 -nr | head -n 10 | while read a b c d;do echo -ne &quot;\033[50C&quot; echo &quot;$a $b $c $(bit_to_human_readable $d)/s&quot; done echo #&#x7EDF;&#x8BA1;&#x5728;10s&#x5185;&#x5360;&#x7528;&#x5E26;&#x5BBD;&#x6700;&#x5927;&#x7684;&#x524D;10&#x4E2A;ip echo -e &quot;\033[32mtop 10 ip average traffic in 10s base on server: \033[0m&quot; awk -F&apos;[ .:]+&apos; -v regTcpdump=$regTcpdump &apos;{if ($0 ~ regTcpdump){line=$2&quot;.&quot;$3&quot;.&quot;$4&quot;.&quot;$5&quot; &gt; &quot;$8&quot;.&quot;$9&quot;.&quot;$10&quot;.&quot;$11&quot;:&quot;$12}else{line=$2&quot;.&quot;$3&quot;.&quot;$4&quot;.&quot;$5&quot;:&quot;$6&quot; &gt; &quot;$8&quot;.&quot;$9&quot;.&quot;$10&quot;.&quot;$11};sum[line]+=$NF*8/10}END{for (line in sum){printf &quot;%s %d\n&quot;,line,sum[line]}}&apos; /tmp/tcpdump | \ sort -k 4 -nr | head -n 10 | while read a b c d;do echo &quot;$a $b $c $(bit_to_human_readable $d)/s&quot; done echo -ne &quot;\033[11A&quot; echo -ne &quot;\033[50C&quot; echo -e &quot;\033[32mtop 10 ip average traffic in 10s base on client: \033[0m&quot; awk -F&apos;[ .:]+&apos; -v regTcpdump=$regTcpdump &apos;{if ($0 ~ regTcpdump){line=$2&quot;.&quot;$3&quot;.&quot;$4&quot;.&quot;$5&quot;:&quot;$6&quot; &gt; &quot;$8&quot;.&quot;$9&quot;.&quot;$10&quot;.&quot;$11}else{line=$2&quot;.&quot;$3&quot;.&quot;$4&quot;.&quot;$5&quot; &gt; &quot;$8&quot;.&quot;$9&quot;.&quot;$10&quot;.&quot;$11&quot;:&quot;$12};sum[line]+=$NF*8/10}END{for (line in sum){printf &quot;%s %d\n&quot;,line,sum[line]}}&apos; /tmp/tcpdump | \ sort -k 4 -nr | head -n 10 | while read a b c d;do echo -ne &quot;\033[50C&quot; echo &quot;$a $b $c $(bit_to_human_readable $d)/s&quot; done echo #&#x7EDF;&#x8BA1;&#x8FDE;&#x63A5;&#x72B6;&#x6001; local regSS=$(ifconfig | grep -A 1 $eth | awk -F&apos;[: ]+&apos; &apos;$0~/inet addr:/{printf $4&quot;|&quot;}&apos; | sed -e &apos;s/|$//&apos;) ss -an | grep -v -E &quot;LISTEN|UNCONN&quot; | grep -E &quot;$regSS&quot; &gt; /tmp/ss echo -e &quot;\033[32mconnection state count: \033[0m&quot; awk &apos;NR&gt;1{sum[$(NF-4)]+=1}END{for (state in sum){print state,sum[state]}}&apos; /tmp/ss | sort -k 2 -nr echo #&#x7EDF;&#x8BA1;&#x5404;&#x7AEF;&#x53E3;&#x8FDE;&#x63A5;&#x72B6;&#x6001; echo -e &quot;\033[32mconnection state count by port base on server: \033[0m&quot; awk &apos;NR&gt;1{sum[$(NF-4),$(NF-1)]+=1}END{for (key in sum){split(key,subkey,SUBSEP);print subkey[1],subkey[2],sum[subkey[1],subkey[2]]}}&apos; /tmp/ss | sort -k 3 -nr | head -n 10 echo -ne &quot;\033[11A&quot; echo -ne &quot;\033[50C&quot; echo -e &quot;\033[32mconnection state count by port base on client: \033[0m&quot; awk &apos;NR&gt;1{sum[$(NF-4),$(NF)]+=1}END{for (key in sum){split(key,subkey,SUBSEP);print subkey[1],subkey[2],sum[subkey[1],subkey[2]]}}&apos; /tmp/ss | sort -k 3 -nr | head -n 10 | awk &apos;{print &quot;\033[50C&quot;$0}&apos; echo #&#x7EDF;&#x8BA1;&#x7AEF;&#x53E3;&#x4E3A;80&#x4E14;&#x72B6;&#x6001;&#x4E3A;ESTAB&#x8FDE;&#x63A5;&#x6570;&#x6700;&#x591A;&#x7684;&#x524D;10&#x4E2A;IP echo -e &quot;\033[32mtop 10 ip ESTAB state count at port 80: \033[0m&quot; cat /tmp/ss | grep ESTAB | awk -F&apos;[: ]+&apos; &apos;{sum[$(NF-2)]+=1}END{for (ip in sum){print ip,sum[ip]}}&apos; | sort -k 2 -nr | head -n 10 echo #&#x7EDF;&#x8BA1;&#x7AEF;&#x53E3;&#x4E3A;80&#x4E14;&#x72B6;&#x6001;&#x4E3A;SYN-RECV&#x8FDE;&#x63A5;&#x6570;&#x6700;&#x591A;&#x7684;&#x524D;10&#x4E2A;IP echo -e &quot;\033[32mtop 10 ip SYN-RECV state count at port 80: \033[0m&quot; cat /tmp/ss | grep -E &quot;$regSS&quot; | grep SYN-RECV | awk -F&apos;[: ]+&apos; &apos;{sum[$(NF-2)]+=1}END{for (ip in sum){print ip,sum[ip]}}&apos; | sort -k 2 -nr | head -n 10} main(){ while true; do echo -e &quot;1) real time traffic.\n2) traffic and connection overview.\n&quot; read -p &quot;please input your select(ie 1): &quot; select case $select in 1) realTimeTraffic;break;; 2) trafficAndConnectionOverview;break;; *) echo &quot;input error,please input a number.&quot;;; esac done } main]]></content>
      <categories>
        <category>Shell</category>
      </categories>
      <tags>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[科学上网工具shadowsocks]]></title>
    <url>%2F%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E5%B7%A5%E5%85%B7shadowsocks.html</url>
    <content type="text"><![CDATA[&#x793E;&#x4EA4;&#x7F51;&#x7EDC;&#x7684;&#x51FA;&#x73B0;&#x4F7F;&#x5F97;&#x4F60;&#x8DDF;&#x4F60;&#x559C;&#x6B22;&#x7684;&#x660E;&#x661F;&#x7684;&#x4EA4;&#x8C08;&#x5C31;&#x5728;&#x4E00;&#x4E2A;&#x7559;&#x8A00;&#x4E0A;&#xFF0C;&#x4E0D;&#x50CF;&#x4EE5;&#x524D;&#x90A3;&#x6837;&#xFF0C;&#x5E73;&#x51E1;&#x7684;&#x4EBA;&#x662F;&#x6839;&#x672C;&#x6CA1;&#x6709;&#x6E20;&#x9053;&#x53BB;&#x505A;&#x8FD9;&#x4E9B;&#x4E8B;&#x60C5;&#x7684;&#xFF1B;&#x4ECE;&#x4EE5;&#x524D;&#x7F51;&#x7EDC;&#x7684;&#x865A;&#x5047;&#x5230;&#x73B0;&#x5728;&#x6162;&#x6162;&#x7684;&#x8D8A;&#x6765;&#x8D8A;&#x771F;&#x5B9E;&#xFF0C;&#x4E00;&#x4E2A; ID &#x5728;&#x7F51;&#x7EDC;&#x4E0A;&#x5C31;&#x4EE3;&#x8868;&#x7740;&#x771F;&#x5B9E;&#x4E16;&#x754C;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x4EBA;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4E0E;&#x4F60;&#x771F;&#x5B9E;&#x4E16;&#x754C;&#x4E2D;&#x7684;&#x60F3;&#x6CD5;&#x4E00;&#x6837;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x5B8C;&#x5168;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x4F46;&#x8FD9;&#x90FD;&#x4E0D;&#x80FD;&#x963B;&#x788D;&#x4F60;&#x6210;&#x4E3A;&#x4E2A;&#x6027;&#x3001;&#x6709;&#x7740;&#x72EC;&#x7ACB;&#x601D;&#x60F3;&#x3001;&#x89C1;&#x89E3;&#x7684;&#x4EBA;&#xFF0C;&#x53EF;&#x662F;&#x751F;&#x6D3B;&#x5728;&#x5929;&#x671D;&#xFF0C;&#x7531;&#x4E8E;&#x79CD;&#x79CD;&#x539F;&#x56E0;&#xFF0C;&#x597D;&#x591A;&#x56FD;&#x5916;&#x4E16;&#x754C;&#x7684;&#x8D44;&#x6E90;&#x4F60;&#x662F;&#x65E0;&#x6CD5;&#x770B;&#x5230;&#x7684;&#xFF0C;&#x4F60;&#x4E0D;&#x80FD;&#x4EAB;&#x53D7;&#x4F60;&#x5E94;&#x8BE5;&#x5F97;&#x5230;&#x7684;&#x8FD9;&#x4E9B;&#xFF08;&#x4F46;&#x662F;&#x6BCF;&#x4E00;&#x4E2A;&#x4E2A;&#x4F53;&#x90FD;&#x6709;&#x76F8;&#x540C;&#x7684;&#x6743;&#x5229;&#x53BB;&#x4EAB;&#x53D7;&#x4E92;&#x8054;&#x7F51;&#x5E26;&#x7ED9;&#x751F;&#x6D3B;&#x4E2D;&#x7684;&#x4FBF;&#x5229;&#xFF09;&#xFF0C;&#x8FD9;&#x662F;&#x5F88;&#x4EE4;&#x4EBA;&#x6124;&#x6068;&#x7684; &#xFF01;&#xFF01; &#x5982;&#x679C;&#x4E0D;&#x80FD;&#x53BB;&#x770B;&#x5230;&#x66F4;&#x591A;&#x7684;&#x98CE;&#x666F;&#xFF0C;&#x53BB;&#x5C1D;&#x8BD5;&#x751F;&#x547D;&#x66F4;&#x591A;&#x7684;&#x53EF;&#x80FD;&#xFF0C;&#x62E5;&#x6709;&#x5E74;&#x8F7B;&#x5FC3;&#x6001;&#x7684;&#x4F60;&#x600E;&#x4E48;&#x4F1A;&#x7518;&#x5FC3;&#xFF1F; &#x4EC0;&#x4E48;&#x662F;shadowsocks&#xFF1F; &#x7801;&#x519C;&#x5BF9;&#x4E8E;shadowsocks&#x5E94;&#x8BE5;&#x4E0D;&#x964C;&#x751F;&#xFF0C;&#x800C;&#x4E00;&#x822C;&#x666E;&#x901A;&#x7F51;&#x6C11;&#x53EF;&#x80FD;&#x77E5;&#x4E4B;&#x751A;&#x5C11;&#x3002;shadowsocks&#x5B9E;&#x8D28;&#x4E0A;&#x4E5F;&#x662F;&#x4E00;&#x79CD;socks5&#x4EE3;&#x7406;&#x670D;&#x52A1;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;ssh&#x4EE3;&#x7406;&#x3002; &#x4E0E;vpn&#x7684;&#x5168;&#x5C40;&#x4EE3;&#x7406;&#x4E0D;&#x540C;&#xFF0C;shadowsocks&#x4EC5;&#x9488;&#x5BF9;&#x6D4F;&#x89C8;&#x5668;&#x4EE3;&#x7406;&#xFF0C;&#x4E0D;&#x80FD;&#x4EE3;&#x7406;&#x5E94;&#x7528;&#x8F6F;&#x4EF6;&#xFF0C;&#x6BD4;&#x5982;youtube&#x3001;twitter&#x5BA2;&#x6237;&#x7AEF;&#x8F6F;&#x4EF6;&#x3002; &#x5982;&#x679C;&#x628A;vpn&#x6BD4;&#x55BB;&#x4E3A;&#x4E00;&#x628A;&#x5C60;&#x9F99;&#x5200;&#xFF0C;&#x90A3;&#x4E48;shadowsocks&#x5C31;&#x662F;&#x4E00;&#x628A;&#x745E;&#x58EB;&#x519B;&#x5200;&#xFF0C;&#x8F7B;&#x5DE7;&#x65B9;&#x4FBF;&#xFF0C;&#x529F;&#x80FD;&#x5374;&#x975E;&#x5E38;&#x5F3A;&#x5927;&#x3002;shadowsocks &#x539F;&#x7406;&#x7B80;&#x5355;&#x7406;&#x89E3;&#x7684;&#x8BDD;&#xFF0C;Shadowsocks&#x662F;&#x5C06;&#x4EE5;&#x524D;&#x901A;&#x8FC7; SSH &#x521B;&#x5EFA;&#x7684; Socks5 &#x534F;&#x8BAE;&#x62C6;&#x5F00;&#x6210; Server &#x7AEF;&#x548C; client &#x7AEF;&#xFF0C;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x539F;&#x7406;&#x56FE;&#x80FD;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x5176;&#x7FFB;&#x5899;&#x539F;&#x7406;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x548C;&#x5229;&#x7528;SSH tunnel&#x5927;&#x81F4;&#x7C7B;&#x4F3C;&#xFF1A;1&#x3001;PC&#x5BA2;&#x6237;&#x7AEF;&#xFF08;&#x5373;&#x4F60;&#x7684;&#x7535;&#x8111;&#xFF09;&#x53D1;&#x51FA;&#x8BF7;&#x6C42;&#x57FA;&#x4E8E; Socks5 &#x534F;&#x8BAE;&#x8DDF; SS-Local &#x7AEF;&#x8FDB;&#x884C;&#x901A;&#x8BAF;&#xFF0C;&#x7531;&#x4E8E;&#x8FD9;&#x4E2A; SS-Local &#x4E00;&#x822C;&#x662F;&#x672C;&#x673A;&#x6216;&#x8DEF;&#x7531;&#x5668;&#x7B49;&#x5C40;&#x57DF;&#x7F51;&#x7684;&#x5176;&#x4ED6;&#x673A;&#x5668;&#xFF0C;&#x4E0D;&#x7ECF;&#x8FC7; GFW&#xFF0C;&#x6240;&#x4EE5;&#x89E3;&#x51B3; GFW &#x901A;&#x8FC7;&#x7279;&#x5F81;&#x5206;&#x6790;&#x8FDB;&#x884C;&#x5E72;&#x6270;&#x7684;&#x95EE;&#x9898;&#x3002;2&#x3001;SS-Local &#x548C; SS-Server &#x4E24;&#x7AEF;&#x901A;&#x8FC7;&#x591A;&#x79CD;&#x53EF;&#x9009;&#x7684;&#x52A0;&#x5BC6;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x901A;&#x8BAF;&#xFF0C;&#x7ECF;&#x8FC7;GFW&#x7684;&#x65F6;&#x5019;&#x56E0;&#x4E3A;&#x662F;&#x5E38;&#x89C4;&#x7684; TCP &#x5305;&#xFF0C;&#x6CA1;&#x6709;&#x660E;&#x663E;&#x7279;&#x5F81;&#x7801; GFW &#x4E5F;&#x65E0;&#x6CD5;&#x5BF9;&#x901A;&#x8BAF;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x89E3;&#x5BC6;&#xFF0C;&#x56E0;&#x6B64;&#x901A;&#x8BAF;&#x653E;&#x884C;&#x3002;3&#x3001;SS-Server &#x5C06;&#x6536;&#x5230;&#x7684;&#x52A0;&#x5BC6;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x89E3;&#x5BC6;&#xFF0C;&#x8FD8;&#x539F;&#x521D;&#x59CB;&#x8BF7;&#x6C42;&#xFF0C;&#x518D;&#x53D1;&#x9001;&#x5230;&#x7528;&#x6237;&#x9700;&#x8981;&#x8BBF;&#x95EE;&#x7684;&#x670D;&#x52A1;&#x7F51;&#x7AD9;&#xFF0C;&#x83B7;&#x53D6;&#x54CD;&#x5E94;&#x539F;&#x8DEF;&#x518D;&#x8FD4;&#x56DE; SS-04&#xFF0C;&#x8FD4;&#x56DE;&#x9014;&#x4E2D;&#x4F9D;&#x7136;&#x4F7F;&#x7528;&#x4E86;&#x52A0;&#x5BC6;&#xFF0C;&#x4F7F;&#x5F97;&#x6D41;&#x91CF;&#x662F;&#x666E;&#x901A; TCP &#x5305;&#xFF0C;&#x5E76;&#x6210;&#x529F;&#x7A7F;&#x8FC7; GFW &#x9632;&#x706B;&#x5899;&#x3002; &#x8BE6;&#x7EC6;&#x7406;&#x89E3;&#x8BF7;&#x53C2;&#x8003;&#x6587;&#x7AE0;&#x5199;&#x7ED9;&#x975E;&#x4E13;&#x4E1A;&#x4EBA;&#x58EB;&#x770B;&#x7684; Shadowsocks &#x7B80;&#x4ECB;&#xFF0C;&#x4E0D;&#x77E5;&#x9053;GFW&#xFF1F;&#x8BF7;&#x53C2;&#x8003;&#x5F3A;&#x5927;&#x7684;GFW&#x957F;&#x57CE;&#x9632;&#x706B;&#x5899;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x7528;shadowsocks&#xFF1F; &#x914D;&#x7F6E;&#x7B80;&#x5355;&#xFF1A;&#x53EA;&#x9700;&#x4E00;&#x6B21;&#x8F93;&#x5165;&#x670D;&#x52A1;&#x5668;ip&#x5730;&#x5740;&#x3001;&#x7AEF;&#x53E3;&#x53F7;&#x3001;&#x52A0;&#x5BC6;&#x65B9;&#x5F0F;&#xFF0C;&#x968F;&#x65F6;&#x5373;&#x53EF;&#x8F7B;&#x677E;&#x4EE3;&#x7406; &#x8DE8;&#x5E73;&#x53F0;&#xFF1A;window&#x3001;mac&#x3001;Linux&#x3001;ios&#x3001;android&#x5B89;&#x88C5;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x4E00;&#x6837;&#x8F7B;&#x677E; &#x4E0E;vpn&#x5DEE;&#x5F02; vpn shadowsocks &#x7B80;&#x5355;&#xFF0C;&#x4E00;&#x952E;&#x7FFB;&#x5899; &#x7B80;&#x5355;&#xFF0C;&#x4E00;&#x952E;&#x7FFB;&#x5899; &#x5168;&#x5C40;&#xFF0C;&#x4EE3;&#x7406;&#x6D4F;&#x89C8;&#x5668;&#x3001;&#x5404;&#x79CD;app&#x3001;&#x6240;&#x6709;&#x8D70;&#x7F51;&#x7EDC;&#x7684;&#x90FD;&#x7ECF;&#x8FC7;vpn&#x670D;&#x52A1;&#x5668; &#x53EA;&#x6709;&#x6D4F;&#x89C8;&#x5668;&#xFF08;&#x53EF;&#x4EE5;&#x624B;&#x52A8;&#x8BBE;&#x7F6E;&#x4EE3;&#x7406;&#x5176;&#x4ED6;app&#xFF09; &#x514D;&#x8D39;&#x3001;&#x6536;&#x8D39;&#x670D;&#x52A1;&#x5546;&#x5F88;&#x591A; &#x514D;&#x8D39;&#x3001;&#x6536;&#x8D39;&#x670D;&#x52A1;&#x5546;&#x5F88;&#x591A; &#x901F;&#x5EA6;&#x53EF;&#x4EE5; &#x901F;&#x5EA6;&#x5F88;&#x5FEB;&#xFF0C;&#x9999;&#x6E2F;&#x3001;&#x65B0;&#x52A0;&#x5761;&#x51E0;&#x5341;&#x6BEB;&#x79D2; &#x5E73;&#x53F0;&#x6027;&#x7A0D;&#x5DEE;&#xFF0C;&#x6709;&#x4E9B;&#x505A;&#x7684;&#x4E5F;&#x4E0D;&#x9519;&#x4E86;&#xFF0C;&#x603B;&#x4F53;&#x8DE8;&#x5E73;&#x53F0;&#x6027;&#x5DEE; &#x652F;&#x6301;&#x5404;&#x5E73;&#x53F0;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x8DE8;&#x5E73;&#x53F0;&#x6027;&#x5F3A; vpn&#x4F7F;&#x7528;&#x8FC7;&#x7A0B;&#x4E2D;&#x6700;&#x75DB;&#x82E6;&#x7684;&#x83AB;&#x8FC7;&#x4E8E;&#xFF0C;&#x516C;&#x53F8;&#x4F7F;&#x7528;vpn&#x3001;&#x5185;&#x7F51;&#x67D0;&#x4E9B;&#x8D44;&#x6E90;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;&#xFF0C;&#x9700;&#x8981;&#x9891;&#x7E41;&#x5207;&#x6362;vpn&#x4EE3;&#x7406; shadowsocks&#x51ED;&#x501F;&#x7EF4;&#x62A4;&#x7684;pac&#x6587;&#x4EF6;&#x81EA;&#x52A8;&#x8BC6;&#x522B;&#x662F;&#x5426;&#x662F;&#x522B;gfw&#x8FC7;&#x6EE4;&#x57DF;&#x540D;&#xFF0C;&#x662F;&#x7684;&#x8BDD;&#x8D70;&#x4EE3;&#x7406;&#xFF0C;&#x5426;&#x5219;&#x4E0D;&#x8D70;&#x4EE3;&#x7406;&#xFF0C;&#x8FD9;&#x70B9;&#x5F88;&#x65B9;&#x4FBF;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x4F60;&#x53BB;&#x5173;&#x6CE8;&#xFF0C;&#x4F60;&#x53EA;&#x9700;&#x8981;&#x60F3;&#x7740;&#x8BE5;google&#x65F6;&#x5C31;google &#x5176;&#x4ED6;&#x65B9;&#x5F0F;&#x6BD4;&#x5982;&#x4FEE;&#x6539;host&#xFF0C;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x540E;&#x5C31;&#x88AB;&#x548C;&#x8C10;&#x4E86;&#xFF0C;&#x5F88;&#x4E0D;&#x7A33;&#x5B9A;&#xFF1B;GoAgent&#x4E5F;&#x662F;&#xFF0C;&#x4E0D;&#x7A33;&#x5B9A;&#xFF0C;&#x9700;&#x8981;&#x9891;&#x7E41;&#x90E8;&#x7F72;&#x4EE3;&#x7406;&#xFF0C;&#x5176;&#x5B9E;&#x67D0;&#x4E9B;&#x65F6;&#x5019;&#x4F60;&#x53EA;&#x662F;&#x60F3;&#x8981;google&#x4E9B;&#x8D44;&#x6599;&#xFF0C;&#x5374;&#x56E0;&#x5982;&#x4F55;&#x53EF;&#x4EE5;&#x7528;google&#x6D6A;&#x8D39;&#x5927;&#x91CF;&#x65F6;&#x95F4;&#x3002; &#x5BA2;&#x6237;&#x7AEF;&#x600E;&#x4E48;&#x4F7F;&#x7528;&#xFF1F; &#x8DE8;&#x5E73;&#x53F0;&#x652F;&#x6301;window&#x3001;mac&#x3001;Android&#x3001;ios&#x3001;wp &#x5BA2;&#x6237;&#x7AEF;&#x4E0B;&#x8F7D;&#x5730;&#x5740; Mac Osx &#x4EE5;&#x53CA; Windows&#x7CFB;&#x7EDF;&#x4E0B;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#xFF0C;&#x6CE8;&#x610F;&#x4F7F;&#x7528;&#x6700;&#x65B0;&#x7248;&#x672C;&#x7684;&#x8F6F;&#x4EF6;&#x5DF2;&#x7ECF;&#x4E0D;&#x9700;&#x8981;&#x5728;&#x4F7F;&#x7528; Chrome &#x6D4F;&#x89C8;&#x5668;&#x7684; Proxy SwitchySharp &#x63D2;&#x4EF6;&#x4E86;&#xFF0C;&#x5B89;&#x88C5;&#x914D;&#x7F6E;&#x597D;&#x540E;&#xFF0C;&#x5168;&#x5C40;&#x5373;&#x53EF;&#x4F7F;&#x7528; &#x8D26;&#x53F7;&#x8D44;&#x6E90;shadowsocks &#x5BA2;&#x6237;&#x7AEF;&#x662F;&#x5F88;&#x5F3A;&#x5927;&#x3001;&#x7A33;&#x5B9A;&#x3001;&#x5FEB;&#x901F;&#x7684;&#xFF0C;&#x8DE8;&#x5E73;&#x53F0;&#xFF0C;&#x7701;&#x53BB;&#x5F88;&#x591A;&#x9EBB;&#x70E6;&#xFF0C;&#x4F46;&#x8FD9;&#x4F9D;&#x8D56;&#x4E0E;&#x7A33;&#x5B9A;&#x7684;&#x670D;&#x670D;&#x52A1;&#x7AEF;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x8D2D;&#x4E70;vps &#xFF0C;&#x642D;&#x5EFA;shadowsocks&#x7684;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#xFF0C;&#x53EA;&#x9700;&#x8981;vps&#x7684;&#x94B1;&#x5373;&#x53EF;&#xFF0C;shadowsocks &#x670D;&#x52A1;&#x7AEF;&#x5F00;&#x6E90;&#x514D;&#x8D39;,&#x53EF;&#x4EE5;&#x53BB;github&#x4E0B;&#x8F7D;&#x642D;&#x5EFA;&#xFF0C;&#x53C2;&#x8003;&#x642D;&#x5EFA;&#x6559;&#x7A0B;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x8D2D;&#x4E70;&#x5E02;&#x573A;&#x4E0A;&#x8BB8;&#x591A;&#x670D;&#x52A1;&#x5546;&#x63D0;&#x4F9B;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x76F8;&#x6BD4;&#x81EA;&#x5DF1;&#x642D;&#x5EFA;&#xFF0C;&#x8FD8;&#x5F97;&#x9700;&#x8981;&#x53BB;&#x5173;&#x5FC3;&#x670D;&#x52A1;&#x5668;&#x7684;&#x7A33;&#x5B9A;&#x6027;&#xFF0C;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x7ECF;&#x6D4E;&#x7684;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5546;&#xFF0C;&#x4FBF;&#x5B9C;&#x7701;&#x4E8B;&#xFF0C;&#x5F53;&#x7136;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x5230;&#x7F51;&#x4E0A;&#x5230;&#x5904;&#x641C;&#x5BFB;&#x514D;&#x8D39;&#x7684; shadowsocks&#x8D26;&#x53F7;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#x3002; &#x514D;&#x8D39;&#x8D26;&#x53F7;&#x7F51;&#x7AD9;&#x63A8;&#x8350; 1.shadowsocks info &#x5206;&#x4EAB;shadowsock&#x76F8;&#x5173;&#x5404;&#x79CD;&#x77E5;&#x8BC6;&#x7684;&#x7F51;&#x7AD9;&#xFF0C;&#x6BD4;&#x8F83;&#x57FA;&#x7840;&#xFF0C;&#x4E5F;&#x6709;&#x5E72;&#x8D27;&#x3002; 2.&#x5E38;&#x89C1;&#x514D;&#x8D39;ss&#x8D26;&#x53F7;&#x7F51;&#x7AD9;&#x5217;&#x8868; &#x4ECE;&#x5916;&#x9762;&#x7684;&#x7F51;&#x7AD9;&#x4E0A;&#x6574;&#x7406;&#x7684;&#xFF0C;&#x65B9;&#x4FBF;&#x4E0D;&#x80FD;&#x51FA;&#x53BB;&#x7684;&#x7528;&#x6237;&#x67E5;&#x770B; 3.google + shadowsocks&#x7FFB;&#x5899;&#x5708; &#x53EF;&#x4EE5;&#x968F;&#x65F6;&#x83B7;&#x53D6;&#x522B;&#x4EBA;&#x5171;&#x4EAB;&#x7684;&#x514D;&#x8D39;&#x8D26;&#x53F7;(&#x524D;&#x63D0;&#x662F;&#x4F60;&#x5148;&#x80FD;&#x7FFB;&#x5899;) &#x4ECB;&#x7ECD;&#x4E86;&#x8FD9;&#x4E48;&#x591A;&#xFF0C;&#x5982;&#x679C;&#x60A8;&#x60F3;&#x4F53;&#x9A8C;&#x4E0B; shadowsocks&#xFF0C;&#x90A3;&#x4E48;&#x5C3D;&#x60C5;&#x7684;&#x4F7F;&#x7528;&#x514D;&#x8D39;&#x8D26;&#x53F7;&#x5427;&#xFF0C;&#x5982;&#x679C;&#x60A8;&#x611F;&#x89C9;&#x5230;&#x4E86;&#x514D;&#x8D39;&#x8D26;&#x53F7;&#x7684;&#x4E0D;&#x7A33;&#x5B9A;&#x7ED9;&#x60A8;&#x5E26;&#x6765;&#x7684;&#x4E0D;&#x65B9;&#x4FBF;&#xFF0C;&#x90A3;&#x4E48;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x4ED8;&#x8D39;&#x670D;&#x52A1;&#xFF0C;&#x6BCF;&#x5E74;&#x53EA;&#x9700;&#x8981;&#x652F;&#x4ED8;&#x4E00;&#x7B14;&#x5F88;&#x5C11;&#x7684;&#x8D39;&#x7528;&#xFF0C;&#x5373;&#x53EF;&#x4EAB;&#x53D7;&#x7545;&#x5FEB;&#x7684;&#x7F51;&#x7EDC;&#xFF0C;&#x5C06;&#x7CBE;&#x529B;&#x653E;&#x5728;&#x5982;&#x4F55;&#x5229;&#x7528;&#x4E0D;&#x53D7;&#x963B;&#x7684;&#x7F51;&#x7EDC;&#x6765;&#x89E3;&#x51B3;&#x81EA;&#x5DF1;&#x7684;&#x95EE;&#x9898;&#x4E0A;&#x9762;&#xFF0C;&#x5C82;&#x4E0D;&#x662F;&#x66F4;&#x6709;&#x610F;&#x4E49;&#xFF1F; &#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x7ED9;&#x5382;&#x5BB6;&#x6253;&#x5E7F;&#x544A;&#x4E86;&#xFF0C;&#x76F4;&#x63A5;&#x767E;&#x5EA6;&#x79D1;&#x5B66;&#x4E0A;&#x7F51;&#x8D26;&#x53F7;&#x5E94;&#x8BE5;&#x80FD;&#x627E;&#x5230;&#x3002; &#x8FD9;&#x91CC;&#x6700;&#x540E;&#x518D;&#x63A8;&#x8350;&#x4E00;&#x4E2A;&#x514D;&#x8D39;&#x7684;&#x79D1;&#x5B66;&#x4E0A;&#x7F51;&#x7F51;&#x7AD9;&#xFF0C;&#x5C0F;&#x4F19;&#x4F34;&#x4EEC;&#x53EF;&#x4EE5;&#x5C3D;&#x60C5;&#x7684;&#x73A9;&#x800D;&#x53BB;&#x5427;&#x3002;]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>shadowsocks</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[KVM迁移时遇到的一些问题]]></title>
    <url>%2FKVM%E8%BF%81%E7%A7%BB%E6%97%B6%E9%81%87%E5%88%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98.html</url>
    <content type="text"><![CDATA[KVM&#x8FC1;&#x79FB;&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x4E00;&#x79CD;&#x662F;&#x52A8;&#x6001;&#x8FC1;&#x79FB;&#xFF0C;&#x4E00;&#x79CD;&#x4E3A;&#x9759;&#x6001;&#x8FC1;&#x79FB;&#x3002;kvm&#x9759;&#x6001;&#x8FC1;&#x79FB;&#x5C31;&#x662F;&#x865A;&#x62DF;&#x673A;&#x5728;&#x5173;&#x673A;&#x72B6;&#x6001;&#x4E0B;&#xFF0C;&#x62F7;&#x8D1D;&#x865A;&#x62DF;&#x673A;&#x865A;&#x62DF;&#x78C1;&#x76D8;&#x6587;&#x4EF6;&#x4E0E;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5230;&#x76EE;&#x6807;&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x4E2D;&#xFF0C;&#x5B9E;&#x73B0;&#x7684;&#x8FC1;&#x79FB;&#x3002;kvm&#x52A8;&#x6001;&#x8FC1;&#x79FB;&#x65E0;&#x9700;&#x62F7;&#x8D1D;&#x865A;&#x62DF;&#x78C1;&#x76D8;&#x6587;&#x4EF6;&#xFF0C;&#x9700;&#x8981;&#x76EE;&#x7684;&#x4E3B;&#x673A;&#x548C;&#x6E90;&#x4E3B;&#x673A;&#x6709;&#x76F8;&#x540C;&#x7684;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x865A;&#x62DF;&#x673A;&#x78C1;&#x76D8;&#x6587;&#x4EF6;&#xFF08;&#x4F9D;&#x8D56;&#x5171;&#x4EAB;&#x5B58;&#x50A8;&#xFF09;&#x3002; 12error:no hypervisor options were found ofr this connectionthis usually means that qemu or kvm is not installed on your machine,or the kvm kernel modules are not loaded. &#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;&#x5F00;&#x542F;bios&#x865A;&#x62DF;&#x5316;&#x5E76;&#x52A0;&#x8F7D;modprobe kvm&#x4EE5;&#x53CA;kvm_intel. Unable to migrate guest: unsupported configuration: Domain requires KVM, but it is not available. Check that virtualization is enabled in the host BIOS, and host configuration is setup to load the kvm modules. &#x89E3;&#x51B3;&#x65B9;&#x6CD5;:&#x65B9;&#x6CD5;&#x540C;&#x4E0A;. Unable to migrate guest: Unable to allow access for disk path /img/musf-clone1-2-clone.img: No such file or directory &#x89E3;&#x51B3;&#x65B9;&#x6CD5;:&#x8FC1;&#x79FB;&#x4E0E;&#x88AB;&#x8FC1;&#x79FB;&#x4E3B;&#x673A;&#x7684;&#x9700;&#x8981;&#x76F8;&#x540C;&#x540D;&#x79F0;&#x7684;&#x78C1;&#x76D8;&#x6620;&#x50CF;&#x6587;&#x4EF6; qemu-img create -f raw(&#x78C1;&#x76D8;&#x786C;&#x4EF6;&#x6587;&#x4EF6;&#x683C;&#x5F0F;) /home/kvm-disk/test.img(&#x8DEF;&#x5F84;) 100G(&#x5927;&#x5C0F;) Unable to migrate guest: unable to connect to server at &apos;kvm3:49153&apos;: Connection refused &#x89E3;&#x51B3;&#x65B9;&#x6CD5;:1.&#x5F00;&#x542F;&#x9632;&#x706B;&#x5899;&#x4E0A;&#x7AEF;&#x53E3;&#x6216;&#x5173;&#x95ED;&#x9632;&#x706B;&#x5899;. 2.&#x5728;virt-manager&#x7684;&#x8FC1;&#x79FB;&#x4E2D;&#x6DFB;&#x52A0;&#x8FC1;&#x79FB;&#x7AEF;&#x53E3;. &#x5728;ovirt-engine&#x4E2D;&#x6DFB;&#x52A0;data/nfs&#x4F5C;&#x4E3A;&#x5B58;&#x50A8;&#x57DF;&#x65F6;&#x5E76;&#x4E0D;&#x80FD;&#x6210;&#x529F;&#x3002; &#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;&#x91CD;&#x70B9;&#x67E5;&#x770B;&#x4E00;&#x4E0B;&#x5C06;&#x8981;&#x5171;&#x4EAB;&#x7684;&#x6587;&#x4EF6;&#x5939;&#x6743;&#x9650;&#x662F;&#x5426;&#x662F;vdsm&#xFF1A;kvm&#x3002;&#x82E5;&#x4E0D;&#x662F;&#x4F7F;&#x7528;chown -R&#x547D;&#x4EE4;&#x5373;&#x53EF;&#x3002; &#x90E8;&#x5206;&#x4E3B;&#x673A;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x6210;&#x529F;,&#x5F00;&#x542F;&#x865A;&#x62DF;&#x673A;&#x65F6;&#x51FA;&#x73B0;error&#x2026; VM CentOS6.3T is down. Exit message: internal error Process exited while reading console log output: bind(unix:/var/lib/libvirt/qemu/channels/CentOS6.3T.com.redhat.rhevm.vdsm): Permission denied chardev: opening backend &quot;socket&quot; failed &#x7531;&#x4E8E;../channels&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x5939;&#x7684;&#x6743;&#x9650;&#x662F;vdsm qemu&#x3002;root&#x7528;&#x6237;&#x53EF;&#x80FD;&#x4E0D;&#x80FD;&#x8BFB;&#x53D6;&#x5E76;&#x521B;&#x5EFA;&#x5176;&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x6211;&#x91C7;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x624B;&#x52A8;&#x5728;qemu.conf&#x4E2D;&#x6CE8;&#x91CA;&#x6389;.user = root &#x4EE5;&#x53CA; group = root&#x5E76;&#x91CD;&#x542F;libvirtd&#x3002; &#x4E4B;&#x540E;&#x51FA;&#x73B0;&#x9519;&#x8BEF;&#xFF1A; VM CentOS6.3T is down. Exit message: internal error client socket is closed. VM test is down. Exit message: cannot open file &apos;/rhev/data-center/78e07dee-36bc-439b-b71e-72cfd87a2bb3/f84e3679-281e-41d4-9ea9-b8221085fa7b/images/2e93290e-f1b5-42b2-bdf6-fad695de2ccb/ef334a97-e01b-4d7c-afb0-814ffbe537f0&apos;: Permission denied. &#x8FD9;&#x4E24;&#x4E2A;&#x9519;&#x8BEF;&#x90FD;&#x662F;&#x7531;&#x4E8E;libvirt&#x8BBE;&#x7F6E;&#x95EE;&#x9898;&#x624D;&#x62A5;&#x9519;&#x7684;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x76F4;&#x63A5;&#x8986;&#x76D6;libvirtd.conf qemu.conf&#x4EE5;&#x53CA;vdsm.conf&#x6587;&#x4EF6;]]></content>
      <categories>
        <category>故障记录</category>
      </categories>
      <tags>
        <tag>KVM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Centos6系列安装Zabbix3.0]]></title>
    <url>%2FCentos6%E7%B3%BB%E5%88%97%E5%AE%89%E8%A3%85Zabbix3-0.html</url>
    <content type="text"><![CDATA[&#x521A;&#x5F00;&#x59CB;&#x63A5;&#x89E6;zabbix&#x8E29;&#x4E86;&#x65E0;&#x6570;&#x7684;&#x5751;&#xFF0C;&#x4E0D;&#x77E5;&#x9053;centos6&#x7CFB;&#x5217;&#x662F;&#x5B89;&#x88C5;&#x4E0D;&#x4E86;zabbix3.0&#xFF08;yum&#x5B89;&#x88C5;&#xFF09;&#xFF0C;&#x4E8E;&#x662F;&#x5728;github&#x4E0A;&#x627E;&#x5230;&#x4E86;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x4E00;&#x4E0B;https://github.com/zabbixcn/zabbix3.0-rpm.git&#x672C;&#x6587;&#x4E3B;&#x8981;&#x8BF4;&#x660E;&#x5982;&#x4F55;&#x901A;&#x8FC7;CentOS6(64&#x4F4D;)&#x5B89;&#x88C5;zabbix 3.0 &#x73AF;&#x5883;&#x8981;&#x6C42;PHP &gt;= 5.4&#xFF08;&#x9ED8;&#x8BA4;CentOS6 &#x662F;5.3.3&#xFF0C;&#x9700;&#x81EA;&#x5DF1;&#x5B89;&#x88C5;&#xFF09; curl &gt;= 7.20 (&#x5982;&#x9700;&#x652F;&#x6301;SMTP&#x8BA4;&#x8BC1;)git clone https://github.com/zabbixcn/zabbix3.0-rpm.gitcd zabbix3.0-rpm/RPMS &#x5B89;&#x88C5;mysqlMySQL&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;5.6&#x7248;&#x672C;&#xFF0C;CentOS6&#x9ED8;&#x8BA4;&#x4E3A;5.1&#xFF0C;&#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#xFF0C;&#x6027;&#x80FD;&#x504F;&#x4F4E;123456789rpm -ivh http://dev.mysql.com/get/mysql-community-release-el6-5.noarch.rpmyum install mysql-server -y #&#x6B64;&#x8FC7;&#x7A0B;&#x4F1A;&#x56E0;&#x4E3A;&#x7F51;&#x8DEF;&#x95EE;&#x9898;&#x504F;&#x6162;&#xFF0C;&#x8BF7;&#x8010;&#x5FC3;&#x7B49;&#x5F85;vim /etc/my.cnfskip_name_resolve=oninnodb_file_per_table=onmysqlmysql&gt; CREATE DATABASE zabbix CHARACTER SET utf8 COLLATE utf8_bin;mysql&gt; GRANT ALL ON zabbix.* TO &apos;zabbix&apos;@&apos;127.0.0.1&apos; IDENTIFIED BY &apos;zabbix&apos;;mysql&gt; FLUSH PRIVILEGES; &#x5B89;&#x88C5;Apache&#xFF0C;PHP&#xFF0C;Zabbix-WebZabbix 3.0&#x5BF9;PHP&#x7684;&#x8981;&#x6C42;&#x6700;&#x4F4E;&#x4E3A;5.4&#xFF0C;&#x800C;CentOS6&#x9ED8;&#x8BA4;&#x4E3A;5.3.3&#xFF0C;&#x5B8C;&#x5168;&#x4E0D;&#x6EE1;&#x8DB3;&#x8981;&#x6C42;&#xFF0C;&#x6545;&#x9700;&#x8981;&#x5229;&#x7528;&#x7B2C;&#x4E09;&#x65B9;&#x6E90;&#xFF0C;&#x5C06;PHP&#x5347;&#x7EA7;&#x5230;5.4&#x4EE5;&#x4E0A;&#xFF0C;&#x6CE8;&#x610F;&#xFF0C;&#x4E0D;&#x652F;&#x6301;PHP7123456789rpm -ivh http://repo.webtatic.com/yum/el6/latest.rpmyum install zabbix-web-mysql-3.0.0-1.el6.noarch.rpmzabbix-web-3.0.0-1.el6.noarch.rpm httpd php56w php56w-gd php56w-mysqlphp56w-bcmath php56w-mbstring php56w-xml php56w-ldap/etc/init.d/httpd restart/etc/init.d/php restartsed -i &quot;s@# php_value date.timezone Europe/Riga@php_value date.timezoneAsia/Shanghai@g&quot; /etc/httpd/conf.d/zabbix.conf &#x5B89;&#x88C5;zabbix-server1234567891011yum localinstall zabbix-server-mysql-3.0.0-1.el6.x86_64.rpmvi /etc/zabbix/zabbix_server.confDBHost=localhostDBName=zabbixDBUser=zabbixDBPassword=zabbixcd /usr/share/zabbix-server-mysql-3.0.0zcat create.sql.gz | mysql -uzabbix -pzabbix zabbix/etc/init.d/zabbix-server restart zabbix web&#x754C;&#x9762;&#x914D;&#x7F6E;http://${IP}/zabbix&#x7528;&#x6237;&#xFF1A;Admin &#x5BC6;&#x7801;:zabbix]]></content>
      <categories>
        <category>监控</category>
      </categories>
      <tags>
        <tag>zabbix</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[inotify+rsync实时目录同步]]></title>
    <url>%2Finotify-rsync%E5%AE%9E%E6%97%B6%E7%9B%AE%E5%BD%95%E5%90%8C%E6%AD%A5.html</url>
    <content type="text"><![CDATA[inotify Linux&#x5185;&#x6838;&#x4ECE;2.6.13&#x5F00;&#x59CB;&#xFF0C;&#x5F15;&#x5165;&#x4E86;inotify&#x673A;&#x5236;&#x3002;&#x901A;&#x8FC7;intofity&#x673A;&#x5236;&#xFF0C;&#x80FD;&#x591F;&#x5BF9;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x53D8;&#x5316;&#x8FDB;&#x884C;&#x76D1;&#x63A7;&#xFF0C;&#x5982;&#x5BF9;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x521B;&#x5EFA;&#x3001;&#x5220;&#x9664;&#x3001;&#x4FEE;&#x6539;&#x7B49;&#x64CD;&#x4F5C;&#xFF0C;&#x53EF;&#x4EE5;&#x53CA;&#x65F6;&#x901A;&#x77E5;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8FDB;&#x884C;&#x76F8;&#x5173;&#x4E8B;&#x4EF6;&#x7684;&#x5904;&#x7406;&#x3002;&#x8FD9;&#x79CD;&#x54CD;&#x5E94;&#x5904;&#x7406;&#x673A;&#x5236;&#xFF0C;&#x907F;&#x514D;&#x4E86;&#x9891;&#x7E41;&#x7684;&#x6587;&#x4EF6;&#x8F6E;&#x8BE2;&#x4EFB;&#x52A1;&#xFF0C;&#x63D0;&#x9AD8;&#x4E86;&#x4EFB;&#x52A1;&#x7684;&#x5904;&#x7406;&#x6548;&#x7387;&#x3002; rsyncRsync &#x662F;&#x4E00;&#x4E2A;&#x8FDC;&#x7A0B;&#x6570;&#x636E;&#x540C;&#x6B65;&#x5DE5;&#x5177;&#xFF0C;&#x53EF;&#x901A;&#x8FC7; LAN/WAN &#x5FEB;&#x901F;&#x540C;&#x6B65;&#x591A;&#x53F0;&#x4E3B;&#x673A;&#x95F4;&#x7684;&#x6587;&#x4EF6;&#x3002;Rsync &#x672C;&#x6765;&#x662F;&#x7528;&#x4EE5;&#x53D6;&#x4EE3;rcp &#x7684;&#x4E00;&#x4E2A;&#x5DE5;&#x5177;&#xFF0C;&#x5B83;&#x5F53;&#x524D;&#x7531; Rsync.samba.org &#x7EF4;&#x62A4;&#x3002;Rsync &#x4F7F;&#x7528;&#x6240;&#x8C13;&#x7684;&#x201C;Rsync &#x6F14;&#x7B97;&#x6CD5;&#x201D;&#x6765;&#x4F7F;&#x672C;&#x5730;&#x548C;&#x8FDC;&#x7A0B;&#x4E24;&#x4E2A;&#x4E3B;&#x673A;&#x4E4B;&#x95F4;&#x7684;&#x6587;&#x4EF6;&#x8FBE;&#x5230;&#x540C;&#x6B65;&#xFF0C;&#x8FD9;&#x4E2A;&#x7B97;&#x6CD5;&#x53EA;&#x4F20;&#x9001;&#x4E24;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x4E0D;&#x540C;&#x90E8;&#x5206;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6BCF;&#x6B21;&#x90FD;&#x6574;&#x4EFD;&#x4F20;&#x9001;&#xFF0C;&#x56E0;&#x6B64;&#x901F;&#x5EA6;&#x76F8;&#x5F53;&#x5FEB;&#x3002;&#x8FD0;&#x884C; Rsync server &#x7684;&#x673A;&#x5668;&#x4E5F;&#x53EB; backup server&#xFF0C;&#x4E00;&#x4E2A; Rsync server &#x53EF;&#x540C;&#x65F6;&#x5907;&#x4EFD;&#x591A;&#x4E2A; client &#x7684;&#x6570;&#x636E;&#xFF1B;&#x4E5F;&#x53EF;&#x4EE5;&#x591A;&#x4E2A;Rsync server &#x5907;&#x4EFD;&#x4E00;&#x4E2A; client &#x7684;&#x6570;&#x636E;&#x3002; rsync+inotify&#x5219;&#x4F1A;&#x5F25;&#x8865;&#x524D;&#x8005;&#x5148;&#x626B;&#x63CF;&#x540E;&#x540C;&#x6B65;&#x7684;&#x6548;&#x7387;&#x95EE;&#x9898;&#xFF0C;&#x91C7;&#x7528;&#x7CFB;&#x7EDF;&#x7EA7;&#x522B;&#x76D1;&#x63A7;&#x5404;&#x79CD;&#x53D8;&#x5316;&#xFF0C;&#x5F53;&#x6587;&#x4EF6;&#x53D1;&#x751F;&#x4EFB;&#x4F55;&#x53D8;&#x5316;&#xFF0C;&#x5C31;&#x4F1A;&#x89E6;&#x53D1;rsync&#x540C;&#x6B65;&#xFF0C;&#x89E3;&#x51B3;&#x6548;&#x7387;&#x4E0E;&#x5B9E;&#x65F6;&#x6027;&#x95EE;&#x9898;&#x3002; &#x914D;&#x7F6E;&#x5B89;&#x88C5;&#x73AF;&#x5883;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF1A; CentOS 6.7&#xFF08;&#x6700;&#x5C0F;&#x5316;&#x5B89;&#x88C5;&#xFF09;&#x8F6F;&#x4EF6;&#x73AF;&#x5883;&#xFF1A; &#x5DF2;&#x5173;&#x95ED;iptables/selinuxrsync&#xFF1A; rsync-3.1.2.tar.gz(wget https://download.samba.org/pub/rsync/src/rsync-3.1.2.tar.gz)inotify&#xFF1A; inotify-tools-3.14.tar.gz(wget https://cloud.github.com/downloads/rvoicilas/inotify-tools/inotify-tools-3.14.tar.gz)rsync-server: 192.168.16.199rsync-client: 192.168.16.119server&#x7AEF;&#x540C;&#x6B65;&#x76EE;&#x5F55;&#xFF1A; /home/data/server (&#x53D1;&#x5E03;&#x6587;&#x4EF6;&#x670D;&#x52A1;&#x5668;)client&#x7AEF;&#x540C;&#x6B65;&#x76EE;&#x5F55;: /home/data/client (&#x540C;&#x6B65;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#x670D;&#x52A1;&#x5668;) Server&#x7AEF;&#x914D;&#x7F6E; &#x7F16;&#x8BD1;&#x5B89;&#x88C5;rsync3.1.21234[root@server ~]# tar -zxf rsync-3.1.2.tar.gz [root@server ~]# cd rsync-3.1.2[root@server rsync-3.1.2]# ./configure --prefix=/usr/local/rsync(&#x8FD9;&#x91CC;&#x5982;&#x679C;&#x7F16;&#x8BD1;&#x62A5;&#x9519;&#xFF0C;&#x7F3A;&#x4EC0;&#x4E48;&#x7EC4;&#x4EF6;&#x5C31;&#x5B89;&#x88C5;&#x4EC0;&#x4E48;&#x7EC4;&#x4EF6;&#x5373;&#x53EF;)[root@server rsync-3.1.2]# make &amp;&amp; make install &#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5B89;&#x88C5;&#x540E;rsyncd&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5B58;&#x653E;&#x5728;/etc/rsyncd.conf(&#x9ED8;&#x8BA4;&#x6211;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;&#x662F;&#x6CA1;&#x6709;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;)&#x7F16;&#x8F91;&#x5220;&#x9664;&#x539F;&#x6709;&#x5185;&#x5BB9;&#x6539;&#x6210;&#x5982;&#x4E0B;&#x5185;&#x5BB9;&#xFF0C;uid&#x53C2;&#x6570;&#x5230;timeout&#x53C2;&#x6570;&#x90E8;&#x5206;&#x4E3A;&#x5168;&#x5C40;&#x53C2;&#x6570;&#xFF0C;[rsyncserver]&#x5F00;&#x59CB;&#x53CA;&#x4EE5;&#x540E;&#x90E8;&#x5206;&#x4E3A;&#x6A21;&#x5757;&#x53C2;&#x6570;12345678910111213141516171819202122232425262728[root@server ~]# vim /etc/rsync.confuid = rootgid = rootport = 873max connections = 0motd file = /usr/local/rsync/rsyncd.motdlog file = /usr/local/rsync/rsyncd.logpid file = /usr/local/rsync/rsyncd.pidlock file = /usr/local/rsync/rsyncd.lockaddress = 192.168.16.199transfer logging = truelog format = %t %a %m %f %btimeout = 900hosts allow = 192.168.16.119hosts deny = *syslog facility = local3dont compress = *.gz *.tgz *.zip *.z *.Z *.rpm *.deb *.bz2[rsyncserver]path = /home/data/serverexclude = lost/ found/comment = rsync from 192.168.16.119ignore errorsread only = falselist = trueuse chroot = falseauth users = rsync_usersecrets file = /usr/local/rsync/rsyncd.secrets &#x65B0;&#x5EFA;rsync&#x7528;&#x6237;&#x540D;&#xFF0C;&#x5BC6;&#x7801;&#x6587;&#x4EF6;&#x8F93;&#x5165;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#xFF0C;&#x7528;&#x6237;&#x540D;&#x4E0E;&#x5BC6;&#x7801;&#x7528;:&#x5206;&#x5F00;&#xFF0C;&#x4E00;&#x884C;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x8BBE;&#x4E00;&#x4E2A;&#x7528;&#x6237;12[root@server ~]# vim /usr/local/rsync/rsyncd.secretsrsync_user:123456 &#x8BBE;&#x7F6E;&#x6743;&#x9650;&#x56E0;&#x4E3A;rsyncd.secrets&#x5B58;&#x50A8;&#x4E86;rsync&#x670D;&#x52A1;&#x7684;&#x7528;&#x6237;&#x540D;&#x548C;&#x5BC6;&#x7801;&#xFF0C;&#x6240;&#x4EE5;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x3002;&#x8981;&#x5C06;rsyncd.secrets&#x8BBE;&#x7F6E;&#x4E3A;root&#x62E5;&#x6709;, &#x6743;&#x9650;&#x4E3A;6001[root@server ~]# chmod 600 /usr/local/rsync/rsyncd.secrets &#x542F;&#x52A8;&#x670D;&#x52A1;rsync&#x5168;&#x5C40;&#x53C2;&#x6570;&#x7684;&#x503C;&#x4E5F;&#x53EF;&#x5728;&#x6267;&#x884C;rsync&#x65F6;&#x8BBE;&#x503C;&#xFF0C;&#x4F8B;&#x5982;&#x4E0B;&#x2013;daemon : &#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x6267;&#x884C;rsync&#x2013;address : &#x53CA;&#x2013;port&#x4F5C;&#x7528;&#x53C2;&#x8003;&#x5168;&#x5C40;rsync&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x5168;&#x5C40;&#x53C2;&#x6570;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x4FE9;&#x53C2;&#x6570;&#x53EF;&#x52A0;&#x53EF;&#x4E0D;&#x52A0;&#x2013;config : &#x6307;&#x5B9A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4F4D;&#x7F6E;&#xFF0C;&#x4E0D;&#x52A0;&#x7684;&#x8BDD;&#x9ED8;&#x8BA4;&#x5C31;&#x662F;/etc/rsyncd.conf12[root@server ~]# /usr/local/rsync/bin/rsync --daemon --address=192.168.16.199 --port=873 --config=/etc/rsync.conf [root@server ~]# ss -tanl (&#x786E;&#x5B9A;873&#x7AEF;&#x53E3;&#x662F;&#x5426;&#x76D1;&#x542C;) client&#x7AEF;&#x914D;&#x7F6E; rsync&#x914D;&#x7F6E;&#x8FD9;&#x91CC;&#x540C;&#x6837;&#x5F97;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;rsync-3.1.2(&#x540C;server&#x7AEF;)&#x521B;&#x5EFA;&#x5B58;&#x653E;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5BC6;&#x7801;&#x6587;&#x4EF6;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x8F93;&#x5165;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5BC6;&#x7801;&#x5373;&#x53EF;&#xFF0C;&#x4E0D;&#x7528;&#x8F93;&#x5165;&#x7528;&#x6237;&#x540D;&#x8FD9;&#x91CC;&#x586B;&#x5199;&#x4E0A;&#x9762;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5BC6;&#x7801;&#x6587;&#x4EF6;&#x91CC;&#x8BBE;&#x5B9A;&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x7528;&#x6237;&#x540D;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x91CC;&#x6307;&#x5B9A;123[root@tomcat4 ~]# vim /usr/local/rsync/rsyncd.pass123456[root@tomcat4 ~]# chmod 600 /usr/local/rsync/rsyncd.pass(&#x53EA;&#x80FD;&#x8BBE;&#x6210;600,&#x5426;&#x5219;&#x53EF;&#x80FD;&#x51FA;&#x95EE;&#x9898;) &#x5411;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x4E0A;&#x4F20;&#x540C;&#x6B65;&#x6587;&#x4EF6;/home/data/client &#x672C;&#x5730;&#x5BA2;&#x6237;&#x7AEF;&#x8981;&#x540C;&#x6B65;&#x7684;&#x6587;&#x4EF6;&#x5939;rsync_user &#x670D;&#x52A1;&#x5668;&#x7AEF;rsync&#x670D;&#x52A1;&#x4E2D;&#x8BBE;&#x5B9A;&#x5141;&#x8BB8;&#x6267;&#x884C;&#x8BE5;&#x6A21;&#x5757;&#x7684;&#x7528;&#x6237;&#x540D;192.168.16.199 &#x670D;&#x52A1;&#x5668;&#x7AEF;IP&#x5730;&#x5740;::rsyncserver &#x8868;&#x793A;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x9700;&#x8981;&#x540C;&#x6B65;&#x7684;&#x6A21;&#x5757;&#x540D;&#x79F0;&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;-v : verbose-z : &#x538B;&#x7F29;-r : recursive-t : &#x8868;&#x793A;&#x4FDD;&#x6301;&#x539F;&#x6587;&#x4EF6;&#x521B;&#x5EFA;&#x65F6;&#x95F4;-o : &#x8868;&#x793A;&#x4FDD;&#x6301;&#x539F;&#x6587;&#x4EF6;&#x5C5E;&#x4E3B;-p : &#x8868;&#x793A;&#x4FDD;&#x6301;&#x539F;&#x6587;&#x4EF6;&#x7684;&#x53C2;&#x6570;-g : &#x8868;&#x793A;&#x4FDD;&#x6301;&#x539F;&#x6587;&#x4EF6;&#x7684;&#x6240;&#x5C5E;&#x7EC4;-a : &#x5B58;&#x6863;&#x6A21;&#x5F0F;-P : &#x8868;&#x793A;&#x4EE3;&#x66FF;-partial&#x548C;-progress&#x4E24;&#x8005;&#x7684;&#x9009;&#x9879;&#x529F;&#x80FD;-e : ssh&#x5EFA;&#x7ACB;&#x8D77;&#x52A0;&#x5BC6;&#x7684;&#x8FDE;&#x63A5;&#x3002;&#x2013;partial : &#x963B;&#x6B62;rsync&#x5728;&#x4F20;&#x8F93;&#x4E2D;&#x65AD;&#x65F6;&#x5220;&#x9664;&#x5DF2;&#x62F7;&#x8D1D;&#x7684;&#x90E8;&#x5206;(&#x5982;&#x679C;&#x5728;&#x62F7;&#x8D1D;&#x6587;&#x4EF6;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x4F20;&#x8F93;&#x88AB;&#x4E2D;&#x65AD;&#xFF0C;rsync&#x7684;&#x9ED8;&#x8BA4;&#x64CD;&#x4F5C;&#x662F;&#x64A4;&#x6D88;&#x524D;&#x64CD;&#x4F5C;&#xFF0C;&#x5373;&#x4ECE;&#x76EE;&#x6807;&#x673A;&#x4E0A;&#x5220;&#x9664;&#x5DF2;&#x62F7;&#x8D1D;&#x7684;&#x90E8;&#x5206;&#x6587;&#x4EF6;&#x3002;)&#x2013;progress : &#x662F;&#x6307;&#x663E;&#x793A;&#x51FA;&#x8BE6;&#x7EC6;&#x7684;&#x8FDB;&#x5EA6;&#x60C5;&#x51B5;&#x2013;delete : &#x5BA2;&#x6237;&#x7AEF;&#x4E0A;&#x5220;&#x9664;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x4E5F;&#x5220;&#x9664;&#xFF0C;&#x4FDD;&#x6301;&#x771F;&#x6B63;&#x7684;&#x4E00;&#x81F4;&#x3002;&#x2013;exclude : &#x4E0D;&#x5305;&#x542B;/ins&#x76EE;&#x5F55;&#x2013;size-only : &#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x7528;&#x5728;&#x4E24;&#x4E2A;&#x6587;&#x4EF6;&#x5939;&#x4E2D;&#x7684;&#x5DEE;&#x522B;&#x4EC5;&#x662F;&#x6E90;&#x6587;&#x4EF6;&#x5939;&#x4E2D;&#x6709;&#x4E00;&#x4E9B;&#x65B0;&#x6587;&#x4EF6;&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x91CD;&#x540D;&#x4E14;&#x88AB;&#x4FEE;&#x6539;&#x8FC7;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x79CD;&#x6587;&#x4EF6;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x56E0;&#x4E3A;&#x5185;&#x5BB9;&#x88AB;&#x4FEE;&#x6539;&#x53EF;&#x5927;&#x5C0F;&#x4E00;&#x6837;&#xFF0C;&#x800C;&#x88AB;&#x7565;&#x8FC7;&#x3002;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x5927;&#x5927;&#x5730;&#x63D0;&#x9AD8;&#x540C;&#x6B65;&#x7684;&#x6548;&#x7387;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4E0D;&#x9700;&#x8981;&#x68C0;&#x67E5;&#x540C;&#x540D;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#x662F;&#x5426;&#x76F8;&#x540C;&#x3002;&#x2013;password-file : &#x6307;&#x5B9A;&#x5305;&#x542B;server&#x7AEF;&#x8BA4;&#x8BC1;&#x7528;&#x6237;&#x7684;&#x5BC6;&#x7801;&#x6587;&#x4EF6;&#xFF0C;&#x4E0D;&#x52A0;&#x6B64;&#x9009;&#x9879;&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x65F6;&#x4F1A;&#x63D0;&#x793A;&#x624B;&#x52A8;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#x3002;1234567891011[root@tomcat4 ~]# mkdir /home/data/client[root@tomcat4 ~]# touch 123 //home/data/client/test.txt[root@tomcat4 ~]# /usr/local/rsync/bin/rsync -vzrtopg --delete --progress --password-file=/usr/local/rsync/rsyncd.pass /home/data/client/ rsync_user@192.168.16.199::rsyncserversending incremental file list./test.txt 0 100% 0.00kB/s 0:00:00 (xfr#1, to-chk=0/2)sent 112 bytes received 46 bytes 316.00 bytes/sectotal size is 0 speedup is 0.00 &#x6267;&#x884C;&#x5B8C;&#x4E4B;&#x540E;&#x53EF;&#x5230;server&#x7AEF;&#x67E5;&#x770B;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x540C;&#x6B65; &#x7F16;&#x8BD1;&#x5B89;&#x88C5;inotify123[root@server ~]# tar -zxf inotify-tools-3.14.tar.gz [root@server ~]# cd inotify-tools-3.14[root@server inotify-tools-3.14]# ./configure --prefix=/usr/local/inotify (&#x9700;&#x8981;&#x5148;&#x5B89;&#x88C5;gcc&#x4E0E;gcc-c++) &#x7F16;&#x5199;&#x6267;&#x884C;inotify&#x7684;&#x811A;&#x672C;&#x586B;&#x5199;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#xFF0C;&#x4F7F;inotify&#x5B9E;&#x65F6;&#x76D1;&#x63A7;&#x6307;&#x5B9A;&#x76EE;&#x5F55;&#x5E76;&#x505A;&#x76F8;&#x5E94;&#x64CD;&#x4F5C;1234567891011121314[root@tomcat4 ~]# vim /usr/local/inotify/inotify.sh#!/bin/bash#&#x540C;&#x6B65;&#x63A5;&#x6536;&#x65B9;ipclient=192.168.16.199#&#x672C;&#x5730;&#x8981;&#x76D1;&#x89C6;&#x7684;&#x6587;&#x4EF6;&#x5939;&#x8DEF;&#x5F84;local_folder=/home/data/client/#&#x540C;&#x6B65;&#x63A5;&#x6536;&#x65B9;&#x914D;&#x7F6E;&#x7684;rsync&#x6A21;&#x5757;&#x540D;module=rsyncserver#&#x540C;&#x6B65;&#x63A5;&#x6536;&#x65B9;&#x9274;&#x6743;&#x65F6;&#x7684;&#x7528;&#x6237;user=rsync_user/usr/local/inotify/bin/inotifywait -mrq --timefmt &apos;%d/%m/%y %H:%M&apos; --format &apos;%T %w%f%e&apos; -e create,move,delete,modify,attrib $local_folder | while read filesdo/usr/local/rsync/bin/rsync -vzrtopg --delete --progress --password-file=/usr/local/rsync/rsyncd.pass $local_folder $user@$client::$moduledone inotify&#x90E8;&#x5206;&#x53C2;&#x6570;-m &#x662F;&#x4FDD;&#x6301;&#x4E00;&#x76F4;&#x76D1;&#x542C;-r &#x662F;&#x9012;&#x5F52;&#x67E5;&#x770B;&#x76EE;&#x5F55;-q &#x662F;&#x6253;&#x5370;&#x51FA;&#x4E8B;&#x4EF6;-e create,move,delete,modify,attrib &#x662F;&#x6307; &#x76D1;&#x542C;&#x201C;&#x521B;&#x5EFA; &#x79FB;&#x52A8; &#x5220;&#x9664; &#x4FEE;&#x6539; &#x5C5E;&#x6027;&#x201D; &#x4E8B;&#x4EF6; &#x8BBE;&#x7F6E;&#x811A;&#x672C;&#x6743;&#x9650;&#x5E76;&#x540E;&#x53F0;&#x542F;&#x52A8;12[root@tomcat4 ~]# chmod 755 /usr/local/inotify/inotify.sh[root@tomcat4 client]# /usr/local/inotify/inotify.sh &amp; (&#x8FD9;&#x65F6;&#x53EF;&#x968F;&#x4FBF;&#x5728;&#x76D1;&#x63A7;&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;) &#x5C06;&#x6B64;&#x811A;&#x672C;&#x52A0;&#x5165;&#x5230;&#x5F00;&#x673A;&#x81EA;&#x542F;12[root@tomcat4 client]# vim /etc/rc.d/rc.local/usr/local/inotify/inotify.sh &amp; 12345678910111213141516171819202122232425262728&#x9644;&#x5F55;uid = root # &#x8FD0;&#x884C;rsync&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x7528;&#x6237;gid = root # &#x8FD0;&#x884C;rsync&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x7EC4;port = 873 # &#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;873max connections = 0 # &#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;&#x65E0;&#x9650;&#x5236;&#xFF0C;&#x6307;&#x5B9A;&#x8BE5;&#x6A21;&#x5757;&#x7684;&#x6700;&#x5927;&#x5E76;&#x53D1;&#x8FDE;&#x63A5;&#x6570;&#x91CF;&#x4EE5;&#x4FDD;&#x62A4;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x8D85;&#x8FC7;&#x9650;&#x5236;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x5C06;&#x88AB;&#x544A;&#x77E5;&#x968F;&#x540E;&#x518D;&#x8BD5;&#x3002;motd file = /usr/local/rsync/rsyncd.motd # &#x7528;&#x6765;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x6587;&#x4EF6;&#xFF0C;&#x5F53;&#x5BA2;&#x6237;&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x5668;&#x65F6;&#x8BE5;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#x663E;&#x793A;&#x7ED9;&#x5BA2;&#x6237;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&#x6CA1;&#x6709;motd&#x6587;&#x4EF6;&#x7684;&#x3002;log file = /usr/local/rsync/rsyncd.log # &#x6307;&#x5B9A; rsync &#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x5B58;&#x653E;&#x4F4D;&#x7F6E;&#xFF0C;&#x800C;&#x4E0D;&#x5C06;&#x65E5;&#x5FD7;&#x53D1;&#x9001;&#x7ED9; syslog&#x3002;pid file = /usr/local/rsync/rsyncd.pid # &#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x5C06;&#x5176; PID&#x5199;&#x5165;&#x6587;&#x4EF6;&#x7684;&#x5B58;&#x653E;&#x4F4D;&#x7F6E;lock file = /usr/local/rsync/rsyncd.lock # &#x6307;&#x5B9A;&#x652F;&#x6301; max connections &#x53C2;&#x6570;&#x7684;&#x9501;&#x6587;&#x4EF6;&#x5B58;&#x653E;&#x4F4D;&#x7F6E;&#x3002;address = 192.168.155.131 # &#x5728;&#x72EC;&#x7ACB;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x5C06;&#x6B64;&#x670D;&#x52A1;&#x7ED1;&#x5B9A;&#x5230;&#x6307;&#x5B9A;&#x7684; IP &#x5730;&#x5740;&#x8FD0;&#x884C;&#xFF08;&#x8FD9;&#x91CC;&#x4E5F;&#x5C31;&#x662F;&#x672C;&#x673A;IP&#x5730;&#x5740;&#xFF09;&#x3002;&#x7531; xinetd &#x8FD0;&#x884C;&#x65F6;&#x5C06;&#x5FFD;&#x7565;&#x6B64;&#x53C2;&#x6570;&#xFF0C;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x884C;&#x4E0A;&#x7684; --address &#x9009;&#x9879;&#x66FF;&#x4EE3;&#x3002;transfer logging = true # &#x4F7F; rsync &#x670D;&#x52A1;&#x5668;&#x5C06;&#x4F20;&#x8F93;&#x64CD;&#x4F5C;&#x8BB0;&#x5F55;&#x5230;&#x4F20;&#x8F93;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x3002;log format = %t %a %m %f %b # &#x901A;&#x8FC7;&#x8BE5;&#x9009;&#x9879;&#x7528;&#x6237;&#x5728;&#x4F7F;&#x7528;transfer logging&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x5B9A;&#x5236;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7684;&#x5B57;&#x6BB5;&#x3002;&#x5176;&#x683C;&#x5F0F;&#x662F;&#x4E00;&#x4E2A;&#x5305;&#x542B;&#x683C;&#x5F0F;&#x5B9A;&#x4E49;&#x7B26;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7684;&#x683C;&#x5F0F;&#x5B9A;&#x4E49;&#x7B26;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;timeout = 900 # &#x5355;&#x4F4D;&#x79D2;&#xFF0C;&#x8BE5;&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x8986;&#x76D6;&#x5BA2;&#x6237;&#x6307;&#x5B9A;&#x7684; IP &#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x3002;&#x4ECE;&#x800C;&#x786E;&#x4FDD; rsync &#x670D;&#x52A1;&#x5668;&#x4E0D;&#x4F1A;&#x6C38;&#x8FDC;&#x7B49;&#x5F85;&#x4E00;&#x4E2A;&#x5D29;&#x6E83;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x3002;hosts allow = 192.168.155.130 192.168.155.129 # &#x8FD0;&#x884C;&#x8BBF;&#x95EE;&#x672C;rsync&#x670D;&#x52A1;&#x5668;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x6216;&#x7F51;&#x6BB5;&#xFF0C;&#x6216;&#x8005;&#x7528;*&#x8868;&#x793A;&#x5141;&#x8BB8;&#x5168;&#x90E8;,&#x591A;IP&#x7528;&#x7A7A;&#x683C;&#x5206;&#x9694;hosts deny = * # &#x4E0D;&#x5141;&#x8BB8;&#x8BBF;&#x95EE;&#x672C;rsync&#x670D;&#x52A1;&#x5668;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x8D4B;&#x503C;&#x89C4;&#x5219;&#x540C;hosts allowsyslog facility = local3 # &#x6307;&#x5B9A;rsync&#x53D1;&#x9001;&#x65E5;&#x5FD7;&#x6D88;&#x606F;&#x7ED9;syslog&#x65F6;&#x7684;&#x6D88;&#x606F;&#x7EA7;&#x522B;&#xFF0C;&#x5E38;&#x89C1;&#x7684;&#x6D88;&#x606F;&#x7EA7;&#x522B;&#x662F;&#xFF1A;uth, authpriv, cron, daemon, ftp, kern, lpr, mail, news, security, sys-log, user, uucp, local0, local1, local2, local3,local4, local5, local6&#x548C;local7&#x3002;&#x9ED8;&#x8BA4;&#x503C;&#x662F;daemon&#x3002;dont compress = *.gz *.tgz *.zip *.z *.Z *.rpm *.deb *.bz2 # &#x7528;&#x6765;&#x6307;&#x5B9A;&#x90A3;&#x4E9B;&#x5728;&#x4F20;&#x8F93;&#x4E4B;&#x524D;&#x4E0D;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x5904;&#x7406;&#x7684;&#x6587;&#x4EF6;&#x3002;[rsyncserver] # &#x8FD9;&#x91CC;&#x662F;&#x8BA4;&#x8BC1;&#x7684;&#x6A21;&#x5757;&#x540D;&#xFF0C;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#xFF08;&#x8FD9;&#x91CC;&#x662F;Apache&#x670D;&#x52A1;&#x5668;&#xFF09;&#x7AEF;&#x9700;&#x8981;&#x6307;&#x5B9A;path = /usr/local/nginx/html/ # &#x9700;&#x8981;&#x505A;&#x955C;&#x50CF;&#x7684;&#x76EE;&#x5F55;exclude = lost/ found/ # &#x4E0D;&#x5305;&#x542B;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x591A;&#x76EE;&#x5F55;&#x7528;&#x7A7A;&#x683C;&#x5206;&#x5F00;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x662F;&#x4E0D;&#x540C;&#x6B65;/usr/local/nginx/html/&#x76EE;&#x5F55;&#x4E0B;&#x7684;lost/&#x548C;found/&#x4E24;&#x4E2A;&#x6587;&#x4EF6;&#x5939;comment = rsync from 192.168.155.130 # &#x7ED9;&#x6A21;&#x5757;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x63CF;&#x8FF0;&#xFF0C;&#x8BE5;&#x63CF;&#x8FF0;&#x8FDE;&#x540C;&#x6A21;&#x5757;&#x540D;&#x5728;&#x5BA2;&#x6237;&#x8FDE;&#x63A5;&#x5F97;&#x5230;&#x6A21;&#x5757;&#x5217;&#x8868;&#x65F6;&#x663E;&#x793A;&#x7ED9;&#x5BA2;&#x6237;ignore errors # &#x5FFD;&#x7565;&#x9519;&#x8BEF;read only = false # &#x6307;&#x5B9A;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x5BA2;&#x6237;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x3002;&#x82E5;&#x4E3A; true &#x5219;&#x4E0D;&#x5141;&#x8BB8;&#x4E0A;&#x4F20;&#xFF1B;&#x82E5;&#x4E3A; false &#x5E76;&#x4E14;&#x670D;&#x52A1;&#x5668;&#x76EE;&#x5F55;&#x4E5F;&#x5177;&#x6709;&#x8BFB;&#x5199;&#x6743;&#x9650;&#x5219;&#x5141;&#x8BB8;&#x4E0A;&#x4F20;&#x3002;list = true # &#x6307;&#x5B9A;&#x5F53;&#x5BA2;&#x6237;&#x8BF7;&#x6C42;&#x5217;&#x51FA;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7684;&#x6A21;&#x5757;&#x5217;&#x8868;&#x65F6;&#xFF0C;&#x8BE5;&#x6A21;&#x5757;&#x662F;&#x5426;&#x5E94;&#x8BE5;&#x88AB;&#x5217;&#x51FA;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x8BE5;&#x9009;&#x9879;&#x4E3A; false&#xFF0C;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x9690;&#x85CF;&#x7684;&#x6A21;&#x5757;&#x3002;&#x9ED8;&#x8BA4;&#x503C;&#x662F;true&#x3002;use chroot = false # &#x82E5;&#x4E3A; true&#xFF0C;&#x5219; rsync &#x5728;&#x4F20;&#x8F93;&#x6587;&#x4EF6;&#x4E4B;&#x524D;&#x9996;&#x5148; chroot &#x5230; path &#x53C2;&#x6570;&#x6240;&#x6307;&#x5B9A;&#x7684;&#x76EE;&#x5F55;&#x4E0B;&#x3002;&#x8FD9;&#x6837;&#x505A;&#x7684;&#x539F;&#x56E0;&#x662F;&#x5B9E;&#x73B0;&#x989D;&#x5916;&#x7684;&#x5B89;&#x5168;&#x9632;&#x62A4;&#xFF0C;&#x4F46;&#x662F;&#x7F3A;&#x70B9;&#x662F;&#x9700;&#x8981; root &#x6743;&#x9650;&#x3002;auth users = rsyncuser # &#x6307;&#x5B9A;&#x7531;&#x7A7A;&#x683C;&#x6216;&#x9017;&#x53F7;&#x5206;&#x9694;&#x7684;&#x7528;&#x6237;&#x540D;&#x5217;&#x8868;&#xFF0C;&#x53EA;&#x6709;&#x8FD9;&#x4E9B;&#x7528;&#x6237;&#x624D;&#x5141;&#x8BB8;&#x8FDE;&#x63A5;&#x8BE5;&#x6A21;&#x5757;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x8FD9;&#x884C;&#x5219;&#x8868;&#x660E;&#x662F;&#x533F;&#x540D;&#xFF0C;&#x6B64;&#x7528;&#x6237;&#x4E0E;&#x7CFB;&#x7EDF;&#x65E0;&#x5173;&#xFF0C;&#x662F;secrets file&#x53C2;&#x6570;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x91CC;&#x4FDD;&#x5B58;&#x7684;&#x7528;&#x6237;&#x540D;secrets file = /usr/local/rsync/rsyncd.secrets # &#x6307;&#x5B9A;&#x4E00;&#x4E2A; rsync &#x8BA4;&#x8BC1;&#x53E3;&#x4EE4;&#x6587;&#x4EF6;&#x3002;&#x53EA;&#x6709;&#x5728; auth users &#x88AB;&#x5B9A;&#x4E49;&#x65F6;&#xFF0C;&#x8BE5;&#x6587;&#x4EF6;&#x624D;&#x8D77;&#x4F5C;&#x7528;]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>rsync</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mongodb分片配置]]></title>
    <url>%2Fmongodb%E5%88%86%E7%89%87%E9%85%8D%E7%BD%AE.html</url>
    <content type="text"><![CDATA[MongoDB &#x662F;&#x7531;C++&#x8BED;&#x8A00;&#x7F16;&#x5199;&#x7684;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;&#x5206;&#x5E03;&#x5F0F;&#x6587;&#x4EF6;&#x5B58;&#x50A8;&#x7684;&#x5F00;&#x6E90;&#x6570;&#x636E;&#x5E93;&#x7CFB;&#x7EDF;&#x3002;&#x5728;&#x9AD8;&#x8D1F;&#x8F7D;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6DFB;&#x52A0;&#x66F4;&#x591A;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x670D;&#x52A1;&#x5668;&#x6027;&#x80FD;&#x3002;MongoDB &#x65E8;&#x5728;&#x4E3A;WEB&#x5E94;&#x7528;&#x63D0;&#x4F9B;&#x53EF;&#x6269;&#x5C55;&#x7684;&#x9AD8;&#x6027;&#x80FD;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;&#x8FD9;&#x91CC;&#x5E9F;&#x8BDD;&#x4E0D;&#x591A;&#x8BF4;&#xFF0C;&#x76F4;&#x63A5;&#x5F00;&#x59CB;&#x914D;&#x7F6E;mongodb&#x5206;&#x7247; yum&#x5B89;&#x88C5;mongodb(&#x914D;&#x7F6E;&#x597D;yum&#x6E90;)1# yum -y install mongodb-server mongodb &#x521B;&#x5EFA;&#x6240;&#x9700;&#x8981;&#x7684;&#x76EE;&#x5F55;12# mkdir /home/mongdb/config/{log,data} -pv# mkdir /home/mongdb/shard{1,2,3}/{data,log} -pv &#x5206;&#x522B;&#x542F;&#x52A8;config&#x670D;&#x52A1;&#x5668;1# mongod --configsvr --dbpath=/home/mongdb/config/data/ --port 27100 --logpath=/home/mongdb/config/log/confdb.log --fork --directoryperdb &#x542F;&#x52A8;&#x8DEF;&#x7531;&#x670D;&#x52A1;&#x5668;1# mongos --configdb 192.168.16.90:27100,192.168.16.91:27100,192.168.16.92:27100 --port 27000 --logpath=/home/mongdb/config/confdb.log --fork &#x6BCF;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5206;&#x522B;&#x542F;&#x52A8;&#x591A;&#x4E2A;&#x526F;&#x672C;&#x96C6;123# mongod --shardsvr --replSet shard1 --port 27001 --dbpath /home/mongdb/shard1/data --logpath /home/mongdb/shard1/log/shard1.log --directoryperdb --fork# mongod --shardsvr --replSet shard2 --port 27002 --dbpath /home/mongdb/shard2/data --logpath /home/mongdb/shard1/log/shard2.log --directoryperdb --fork# mongod --shardsvr --replSet shard3 --port 27003 --dbpath /home/mongdb/shard3/data --logpath /home/mongdb/shard1/log/shard3.log --directoryperdb --fork &#x914D;&#x7F6E;shard1&#x767B;&#x9646;90&#xFF0C;&#x6CA1;&#x6709;&#x663E;&#x5F0F;&#x6307;&#x5B9A;&#x4E3B;&#x8282;&#x70B9;&#x65F6;&#xFF0C;&#x4F1A;&#x9009;&#x62E9;&#x767B;&#x9646;&#x7684;&#x673A;&#x5668;&#x4E3A;&#x4E3B;&#x8282;&#x70B9;1234567891011mongo --port 27001&gt; use adminswitched to db admin&gt; rs.initiate({... _id: &apos;shard1&apos;,... members: [... {_id: 90,host: &apos;192.168.16.90:27001&apos;},... {_id: 91,host: &apos;192.169.16.91:27001&apos;},... {_id: 92,host: &apos;192.168.16.92:27001&apos;,arbiterOnly: true}... ]... }); &#x914D;&#x7F6E;shard2&#x767B;&#x5F55;911234567891011mongo --port 27002shard1:SECONDARY&gt; use adminswitched to db adminshard1:SECONDARY&gt; rs.initiate({... _id: &apos;shard2&apos;,... members: [... {_id: 90,host: &apos;192.168.16.90:27001&apos;,arbiterOnly: true},... {_id: 91,host: &apos;192.169.16.91:27001&apos;},... {_id: 92,host: &apos;192.168.16.92:27001&apos;}... ]... }); &#x914D;&#x7F6E;shard3&#x767B;&#x5F55;92123mongo --port 27003shard1:SECONDARY&gt; use adminrs.initiate({ _id: &apos;shard3&apos;, members: [ {_id: 90,host: &apos;192.168.16.90:27003&apos;}, {_id: 91,host: &apos;192.169.16.91:27003&apos;,arbiterOnly: true}, {_id: 92,host: &apos;192.168.16.92:27003&apos;} ] }); &#x8BBE;&#x7F6E;&#x8DEF;&#x7531;&#x5230;&#x5206;&#x7247;&#x96C6;&#x7FA4;&#x914D;&#x7F6E;12345db.runCommand({addShard: &apos;shard2/192.168.16.90:27002,192.168.16.91:27002,192.168.16.92:27002&apos;});{ &quot;shardAdded&quot; : &quot;shard2&quot;, &quot;ok&quot; : 1 }mongos&gt; db.runCommand({addShard: &apos;shard3/192.168.16.90:27003,192.168.16.91:27003,192.168.16.92:27003&apos;});{ &quot;shardAdded&quot; : &quot;shard3&quot;, &quot;ok&quot; : 1 }mongos&gt; db.runCommand({addShard: &apos;shard1/192.168.16.90:27001,192.168.16.91:27001,192.168.16.92:27001&apos;}); &#x67E5;&#x770B;&#x914D;&#x7F6E;&#x597D;&#x7684;shard123456789101112131415161718mongos&gt; db.runCommand({listshards: 1});{ &quot;shards&quot; : [ { &quot;_id&quot; : &quot;shard1&quot;, &quot;host&quot; : &quot;shard1/192.168.16.90:27001,192.168.16.91:27001&quot; }, { &quot;_id&quot; : &quot;shard2&quot;, &quot;host&quot; : &quot;shard2/192.168.16.91:27002,192.168.16.92:27002&quot; }, { &quot;_id&quot; : &quot;shard3&quot;, &quot;host&quot; : &quot;shard3/192.168.16.90:27003,192.168.16.92:27003&quot; } ], &quot;ok&quot; : 1} &#x6D4B;&#x8BD5;&#x5206;&#x7247;1234567891011121314151617181920212223242526272829303132mongos&gt; use adminmongos&gt; db.runCommand({enablesharding: &apos;dbtest&apos;});mongos&gt; db.runCommand({shardcollection: &apos;dbtest.coll1&apos;, key: {id: 1}});mongos&gt; use dbtest;mongos&gt; for(var i=0; i&lt;10000; i++) db.coll1.insert({id: i, s: &apos;str_&apos; + i});mongos&gt; db.coll1.stats() &quot;shard1&quot; : { &quot;ns&quot; : &quot;dbtest.coll1&quot;, &quot;count&quot; : 1, &quot;size&quot; : 47, &quot;avgObjSize&quot; : 47, &quot;storageSize&quot; : 4096, &quot;capped&quot; : false, &quot;wiredTiger&quot; : { &quot;shard2&quot; : { &quot;ns&quot; : &quot;dbtest.coll1&quot;, &quot;count&quot; : 9979, &quot;size&quot; : 497892, &quot;avgObjSize&quot; : 49, &quot;storageSize&quot; : 4096, &quot;capped&quot; : false, &quot;wiredTiger&quot; : { &quot;shard3&quot; : { &quot;ns&quot; : &quot;dbtest.coll1&quot;, &quot;count&quot; : 20, &quot;size&quot; : 951, &quot;avgObjSize&quot; : 47, &quot;storageSize&quot; : 16384, &quot;capped&quot; : false, &quot;wiredTiger&quot; : { &#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x8FD9;&#x91CC;&#x5206;&#x7247;&#x5DF2;&#x7ECF;&#x751F;&#x6548;&#xFF0C;&#x53EA;&#x662F;&#x5206;&#x914D;&#x4E0D;&#x5747;&#x5300;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x90FD;&#x5B58;&#x5728;&#x4E86;shard2&#x4E2D;&#x4E86; &#x4F7F;&#x7528;hashed shard key&#x7B97;&#x6CD5;&#x4FDD;&#x8BC1;&#x6587;&#x6863;&#x5747;&#x5300;&#x5206;&#x5E03;123mongo --port 27000use adminsh.shardCollection(&apos;dbtest.coll1&apos;, {id: &apos;hashed&apos;}); &#x5BA2;&#x6237;&#x7AEF;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8FDE;&#x63A5;&#x8DEF;&#x7531;&#x8282;&#x70B9;&#x6765;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x7684;&#x5206;&#x7247; &#x8FD9;&#x91CC;&#x8FDE;&#x63A5;&#x4EFB;&#x4F55;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x7684;27000&#x7AEF;&#x53E3;&#x90FD;&#x884C;&#x3002;]]></content>
      <categories>
        <category>NoSQL</category>
      </categories>
      <tags>
        <tag>mongodb</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[一次处理故障的记录]]></title>
    <url>%2F%E4%B8%80%E6%AC%A1%E5%A4%84%E7%90%86%E6%95%85%E9%9A%9C%E7%9A%84%E8%AE%B0%E5%BD%95.html</url>
    <content type="text"><![CDATA[&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x505C;&#x7684;&#x5411;&#x5916;&#x53D1;&#x5305;&#xFF0C;&#x4E14;CPU&#x6301;&#x7EED;100%&#xFF0C;&#x8FDC;&#x7A0B;&#x767B;&#x5F55;&#x540E;&#x67E5;&#x770B;&#x53D1;&#x73B0;&#x6709;&#x4E00;&#x957F;&#x5EA6;&#x4E3A;10&#x7684;&#x968F;&#x673A;&#x5B57;&#x7B26;&#x4E32;&#x8FDB;&#x7A0B;&#xFF0C;kill&#x6389;&#xFF0C;&#x4F1A;&#x91CD;&#x65B0;&#x751F;&#x6210;&#x53E6;&#x5916;&#x957F;&#x5EA6;&#x4E3A;10&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x8FDB;&#x7A0B;&#x3002;&#x5220;&#x9664;&#x6587;&#x4EF6;&#x4E5F;&#x4F1A;&#x91CD;&#x590D;&#x751F;&#x6210;&#xFF0C;&#x975E;&#x5E38;&#x75DB;&#x82E6;&#x3002;&#x67E5;&#x9605;crond&#x76F8;&#x5173;&#x65E5;&#x5FD7;&#xFF0C;&#x53D1;&#x73B0;&#x5B9E;&#x9645;&#x6267;&#x884C;&#x7684;&#x5185;&#x5BB9;&#x4E3A;/lib/libudev.so &#xFF0C;&#x4EE5;&#x6B64;&#x4E3A;&#x5173;&#x952E;&#x5B57;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#xFF0C;&#x627E;&#x5230;&#x5982;&#x4E0B;&#x5185;&#x5BB9;&#xFF1A;&#x7DB2;&#x8DEF;&#x6D41;&#x91CF;&#x66B4;&#x589E;&#xFF0C;&#x4F7F;&#x7528; top &#x89C0;&#x5BDF;&#x6709;&#x81F3;&#x5C11;&#x4E00;&#x500B; 10 &#x500B;&#x96A8;&#x6A5F;&#x5B57;&#x6BCD;&#x7D44;&#x6210;&#x7684;&#x7A0B;&#x5E8F;&#x57F7;&#x884C;&#xFF0C;&#x4F54;&#x7528;&#x5927;&#x91CF; CPU &#x4F7F;&#x7528;&#x7387;&#x3002;&#x522A;&#x9664;&#x9019;&#x4E9B;&#x7A0B;&#x5E8F;&#xFF0C;&#x99AC;&#x4E0A;&#x53C8;&#x7522;&#x751F;&#x65B0;&#x7684;&#x7A0B;&#x5E8F;&#x3002; &#x6AA2;&#x67E5; cat /etc/crontab &#x53D1;&#x73B0;&#x5B9A;&#x65F6;&#x4EFB;&#x52A1; &#x6BCF;&#x4E09;&#x5206;&#x9418;&#x57F7;&#x884C;gcc.sh # */3 * * * * root /etc/cron.hourly/gcc.sh &#x67E5;&#x770B;&#x75C5;&#x6BD2;&#x7A0B;&#x5F0F; gcc.sh&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x75C5;&#x6BD2;&#x672C;&#x9AD4;&#x662F; /lib/libudev.so&#x3002; [root@deyu ~]# cat /etc/cron.hourly/gcc.sh #!/bin/sh PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:/usr/X11R6/bin for i in `cat /proc/net/dev|grep :|awk -F: {&apos;print $1&apos;}`; do ifconfig $i up&amp; done cp /lib/libudev.so /lib/libudev.so.6 /lib/libudev.so.6 &#x522A;&#x9664;&#x4E0A;&#x4E00;&#x884C;&#x4F8B;&#x884C;&#x5DE5;&#x4F5C; gcc.sh&#xFF0C;&#x4E26;&#x8A2D;&#x5B9A; /etc/crontab &#x7121;&#x6CD5;&#x8B8A;&#x52D5;&#xFF0C;&#x5426;&#x5247;&#x99AC;&#x4E0A;&#x53C8;&#x6703;&#x7522;&#x751F;&#x3002; # rm -f /etc/cron.hourly/gcc.sh ; chattr +i /etc/crontab &#x4F7F;&#x7528; top &#x67E5;&#x770B;&#x75C5;&#x6BD2;&#x70BA; mtyxkeaofa&#xFF0C;id &#x70BA; 16621&#xFF0C;&#x4E0D;&#x8981;&#x76F4;&#x63A5;&#x6BBA;&#x6389;&#x7A0B;&#x5E8F;&#xFF0C;&#x5426;&#x5247;&#x6703;&#x518D;&#x7522;&#x751F;&#xFF0C;&#x800C;&#x662F;&#x505C;&#x6B62;&#x5176;&#x904B;&#x4F5C;&#x3002; # kill -STOP 16621 &#x522A;&#x9664; /etc/init.d &#x5167;&#x7684;&#x6A94;&#x6848;&#x3002; # find /etc -name &apos;*mtyxkeaofa*&apos; | xargs rm -f &#x522A;&#x9664; /usr/bin &#x5167;&#x7684;&#x6A94;&#x6848;&#x3002; # rm -f /usr/bin/mtyxkeaofa &#x67E5;&#x770B; /usr/bin &#x6700;&#x8FD1;&#x8B8A;&#x52D5;&#x7684;&#x6A94;&#x6848;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x75C5;&#x6BD2;&#x4E5F;&#x4E00;&#x4F75;&#x522A;&#x9664;&#xFF0C;&#x5176;&#x4ED6;&#x53EF;&#x7591;&#x7684;&#x76EE;&#x9304;&#x4E5F;&#x4E00;&#x6A23;&#x3002; # ls -lt /usr/bin | head &#x73FE;&#x5728;&#x6BBA;&#x6389;&#x75C5;&#x6BD2;&#x7A0B;&#x5E8F;&#xFF0C;&#x5C31;&#x4E0D;&#x6703;&#x518D;&#x7522;&#x751F;&#x3002; # pkill mtyxkeaofa &#x522A;&#x9664;&#x75C5;&#x6BD2;&#x672C;&#x9AD4;&#x3002; # rm -f /lib/libudev.so &#x4F7F;&#x7528;&#x6B64;&#x65B9;&#x6CD5; &#x53EF;&#x4EE5;&#x5B8C;&#x5168;&#x6E05;&#x9664;&#x6B64;&#x75C5;&#x6BD2;&#x3002;]]></content>
      <categories>
        <category>故障记录</category>
      </categories>
      <tags>
        <tag>故障</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[关于http健康状态检测遗留下的大量日志问题]]></title>
    <url>%2F%E5%85%B3%E4%BA%8Ehttp%E5%81%A5%E5%BA%B7%E7%8A%B6%E6%80%81%E6%A3%80%E6%B5%8B%E9%81%97%E7%95%99%E4%B8%8B%E7%9A%84%E5%A4%A7%E9%87%8F%E6%97%A5%E5%BF%97%E9%97%AE%E9%A2%98.html</url>
    <content type="text"><![CDATA[&#x76F8;&#x4FE1;&#x5C0F;&#x4F19;&#x4F34;&#x4EEC;&#x5728;&#x505A;keepalived&#x3001;haproxy&#x6216;&#x8005;pacemaker&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x7ED9;httpd&#x505A;&#x5065;&#x5EB7;&#x72B6;&#x6001;&#x68C0;&#x6D4B;&#x4E00;&#x5B9A;&#x4F1A;&#x7ED9;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x5668;&#x5E26;&#x6765;&#x5927;&#x91CF;&#x7684;&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x3002;&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x5BF9;&#x6211;&#x4EEC;&#x8FD0;&#x7EF4;&#x6765;&#x8BF4;&#x81F3;&#x5173;&#x91CD;&#x8981;&#xFF08;&#x540E;&#x671F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x65E5;&#x5FD7;&#x6765;&#x5206;&#x6790;&#x7528;&#x6237;&#x7684;&#x5404;&#x79CD;&#x884C;&#x4E3A;&#xFF09;&#xFF0C;&#x4F46;&#x662F;&#x5065;&#x5EB7;&#x72B6;&#x6001;&#x68C0;&#x6D4B;&#x7684;&#x65E5;&#x5FD7;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4E0D;&#x7528;&#x8BB0;&#x5F55;&#x65E5;&#x5FD7;&#x3002;&#x6BD5;&#x7ADF;&#x6BCF;&#x4E24;&#x4E09;&#x79D2;&#x8BB0;&#x5F55;&#x4E00;&#x6B21;&#xFF0C;&#x800C;&#x4E14;&#x540E;&#x671F;&#x7EDF;&#x8BA1;&#x65F6;&#x5BF9;&#x6211;&#x4EEC;&#x4E5F;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x7528;&#x3002; &#x672C;&#x6587;&#x5C06;&#x5177;&#x4F53;&#x8BF4;&#x660E;&#x5982;&#x4F55;&#x5728;&#x540E;&#x7AEF;&#x4E3B;&#x673A;nginx &#x3001; apache &#x670D;&#x52A1;&#x5668;&#x4E0A;&#x914D;&#x7F6E;&#x4E0D;&#x8BB0;&#x5F55;&#x5065;&#x5EB7;&#x72B6;&#x6001;&#x68C0;&#x6D4B;&#x7684;&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x3002; nginx &#x4E00;&#x822C;&#x57FA;&#x4E8E;7&#x5C42;&#x7684;&#x5065;&#x5EB7;&#x72B6;&#x6001;&#x68C0;&#x6D4B;&#xFF0C;&#x90FD;&#x662F;&#x901A;&#x8FC7;&#x8BBF;&#x95EE;&#x540E;&#x7AEF;&#x4E3B;&#x673A;&#x7684;&#x7279;&#x5B9A;&#x7684;url&#xFF0C; &#x7279;&#x6027;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x6765;&#x5224;&#x65AD;&#x540E;&#x7AEF;&#x4E3B;&#x673A;&#x662F;&#x5426;&#x51FA;&#x73B0;&#x6545;&#x969C;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x5728;nginx&#x7684;server&#x6BB5;&#x4E0A;&#x52A0;&#x4E00;&#x4E2A;location&#x3002;&#x8BBF;&#x95EE;&#x6211;&#x4EEC;&#x7279;&#x6709;&#x7684;&#x5065;&#x5EB7;&#x72B6;&#x6001;&#x68C0;&#x6D4B;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x4E0D;&#x4E88;&#x4EE5;&#x8BB0;&#x5F55;&#x65E5;&#x5FD7;&#x5373;&#x53EF;&#xFF0C;&#x5176;&#x4ED6;&#x7684;&#x7167;&#x5E38;&#x8BB0;&#x5F55;&#x65E5;&#x5FD7;&#x3002;123location = /test.html {access_log off;} apache 1.&#x6307;&#x5B9A;&#x8BB0;&#x5F55;&#x6CD5;12SetEnvIfNoCase Request_URI &quot;(\.htm|\/|\.html|\.php)$&quot; htm CustomLog logs/9enjoy.com-access_log combined env=htm 2.&#x6392;&#x9664;&#x6CD5;1234&lt;FilesMatch &quot;\.html&quot;&gt;SetEnv IMAGE 1&lt;/FilesMatch&gt;CustomLog &quot;logs/access_log&quot; combined env=!IMAGE]]></content>
      <categories>
        <category>运维</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
</search>